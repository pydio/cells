(()=>{var e={564:e=>{function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},418:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e){return e&&e.__esModule?e:{default:e}}var a=i(r(635)),u=i(r(837)),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.basePath="http://localhost/api/v2".replace(/\/+$/,""),this.authentications={basicAuth:{type:"basic"}},this.defaultHeaders={},this.timeout=6e4,this.cache=!0,this.enableCookies=!1,"undefined"==typeof window&&(this.agent=new a.default.agent)}return o(e,[{key:"paramToString",value:function(e){return null==e||null==e?"":e instanceof Date?e.toJSON():e.toString()}},{key:"buildUrl",value:function(e,t){var r=this;e.match(/^\//)||(e="/"+e);var n=this.basePath+e;return n.replace(/\{([\w-]+)\}/g,(function(e,n){var o;return o=t.hasOwnProperty(n)?r.paramToString(t[n]):e,encodeURIComponent(o)}))}},{key:"isJsonMime",value:function(e){return Boolean(null!=e&&e.match(/^application\/json(;.*)?$/i))}},{key:"jsonPreferredMime",value:function(e){for(var t=0;t<e.length;t++)if(this.isJsonMime(e[t]))return e[t];return e[0]}},{key:"isFileParam",value:function(e){var t=void 0;try{t=r(200)}catch(e){}return!!(t&&t.ReadStream&&e instanceof t.ReadStream)||"function"==typeof Buffer&&e instanceof Buffer||"function"==typeof Blob&&e instanceof Blob||"function"==typeof File&&e instanceof File}},{key:"normalizeParams",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r]&&null!=e[r]){var n=e[r];this.isFileParam(n)||Array.isArray(n)?t[r]=n:t[r]=this.paramToString(n)}return t}},{key:"buildCollectionParam",value:function(e,t){if(null==e)return null;switch(t){case"csv":return e.map(this.paramToString).join(",");case"ssv":return e.map(this.paramToString).join(" ");case"tsv":return e.map(this.paramToString).join("\t");case"pipes":return e.map(this.paramToString).join("|");case"multi":return e.map(this.paramToString);default:throw new Error("Unknown collection format: "+t)}}},{key:"applyAuthToRequest",value:function(e,t){var r=this;t.forEach((function(t){var n=r.authentications[t];switch(n.type){case"basic":(n.username||n.password)&&e.auth(n.username||"",n.password||"");break;case"apiKey":if(n.apiKey){var o={};n.apiKeyPrefix?o[n.name]=n.apiKeyPrefix+" "+n.apiKey:o[n.name]=n.apiKey,"header"===n.in?e.set(o):e.query(o)}break;case"oauth2":n.accessToken&&e.set({Authorization:"Bearer "+n.accessToken});break;default:throw new Error("Unknown authentication type: "+n.type)}}))}},{key:"deserialize",value:function(t,r){if(null==t||null==r||204==t.status)return null;var o=t.body;return(null==o||"object"===n(o)&&void 0===o.length&&!Object.keys(o).length)&&(o=t.text),e.convertToType(o,r)}},{key:"callApi",value:function(e,t,r,n,o,i,s,c,l,f,p){var d=this,h=this.buildUrl(e,r),y=(0,a.default)(t,h);this.applyAuthToRequest(y,c),"GET"===t.toUpperCase()&&!1===this.cache&&(n._=(new Date).getTime()),y.query(this.normalizeParams(n)),y.set(this.defaultHeaders).set(this.normalizeParams(o)),y.timeout(this.timeout);var m=this.jsonPreferredMime(l);if(m?"multipart/form-data"!=m&&y.type(m):y.header["Content-Type"]||y.type("application/json"),"application/x-www-form-urlencoded"===m)y.send(u.default.stringify(this.normalizeParams(i)));else if("multipart/form-data"==m){var b=this.normalizeParams(i);for(var v in b)b.hasOwnProperty(v)&&(this.isFileParam(b[v])?y.attach(v,b[v]):y.field(v,b[v]))}else s&&y.send(s);var g=this.jsonPreferredMime(f);return g&&y.accept(g),"Blob"===p?y.responseType("blob"):"String"===p&&y.responseType("string"),this.enableCookies&&("undefined"==typeof window?this.agent.attachCookies(y):y.withCredentials()),new Promise((function(e,t){y.end((function(r,n){if(r)t(r);else try{var o=d.deserialize(n,p);d.enableCookies&&"undefined"==typeof window&&d.agent.saveCookies(n),e({data:o,response:n})}catch(e){t(e)}}))}))}}],[{key:"parseDate",value:function(e){return new Date(e.replace(/T/i," "))}},{key:"convertToType",value:function(t,r){if(null==t)return t;switch(r){case"Boolean":return Boolean(t);case"Integer":return parseInt(t,10);case"Number":return parseFloat(t);case"String":return String(t);case"Date":return e.parseDate(String(t));case"Blob":return t;default:if(r===Object)return t;if("function"==typeof r)return r.constructFromObject(t);if(Array.isArray(r)){var o=r[0];return t.map((function(t){return e.convertToType(t,o)}))}if("object"===n(r)){var i,a;for(var u in r)if(r.hasOwnProperty(u)){i=u,a=r[u];break}var s={};for(var u in t)if(t.hasOwnProperty(u)){var c=e.convertToType(u,i),l=e.convertToType(t[u],a);s[c]=l}return s}return t}}},{key:"constructFromObject",value:function(t,r,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)t.hasOwnProperty(o)&&(r[o]=e.convertToType(t[o],n));else for(var i in t)t.hasOwnProperty(i)&&(r[i]=e.convertToType(t[i],n))}},{key:"CollectionFormatEnum",value:{CSV:",",SSV:" ",TSV:"\t",PIPES:"|",MULTI:"multi"},enumerable:!0}]),e}();t.default=s,s.instance=new s,e.exports=t.default},161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=(o(r(25)),o(r(473))),u=o(r(74)),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiClient=t||i.default.instance}return n(e,[{key:"createNodeWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'path' when calling createNode");var r={path:e},n={copy_source:t.copySource,delete_source:t.deleteSource,override:t.override,recursive:t.recursive},o=u.default;return this.apiClient.callApi("/fs/{path}","POST",r,n,{},{},null,["basicAuth"],[],["application/json","application/xml"],o)}},{key:"createNode",value:function(e,t){return this.createNodeWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"deleteNodeWithHttpInfo",value:function(e){if(null==e)throw new Error("Missing the required parameter 'path' when calling deleteNode");var t={path:e},r=u.default;return this.apiClient.callApi("/fs/{path}","DELETE",t,{},{},{},null,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"deleteNode",value:function(e){return this.deleteNodeWithHttpInfo(e).then((function(e){return e.data}))}},{key:"downloadWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'path' when calling download");var r={path:e},n={attachment:t.attachment,additional_parameters:t.additionalParameters},o=File;return this.apiClient.callApi("/io/{path}","GET",r,n,{},{},null,["basicAuth"],[],["application/octet-stream"],o)}},{key:"download",value:function(e,t){return this.downloadWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"getNodeInfosWithHttpInfo",value:function(e,t,r){if(r=r||{},null==e)throw new Error("Missing the required parameter 'path' when calling getNodeInfos");if(null==t)throw new Error("Missing the required parameter 'meta' when calling getNodeInfos");var n={path:e},o={meta:t,children:r.children},i={"X-Indexation-Required":r.xIndexationRequired},u={recursive:r.recursive,max_depth:r.maxDepth,max_nodes:r.maxNodes,remote_order:r.remoteOrder,order_column:r.orderColumn,order_direction:r.orderDirection,page_position:r.pagePosition},s=a.default;return this.apiClient.callApi("/fs/{path}","GET",n,o,i,u,null,["basicAuth"],[],["application/json","application/xml"],s)}},{key:"getNodeInfos",value:function(e,t,r){return this.getNodeInfosWithHttpInfo(e,t,r).then((function(e){return e.data}))}},{key:"updateNodeWithHttpInfo",value:function(e,t){if(null==e)throw new Error("Missing the required parameter 'path' when calling updateNode");if(null==t)throw new Error("Missing the required parameter 'metadata' when calling updateNode");var r={path:e},n={metadata:t},o=u.default;return this.apiClient.callApi("/fs/{path}","PATCH",r,{},{},n,null,["basicAuth"],[],["application/json","application/xml"],o)}},{key:"updateNode",value:function(e,t){return this.updateNodeWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"uploadStreamWithHttpInfo",value:function(e,t,r){r=r||{};var n=t;if(null==e)throw new Error("Missing the required parameter 'path' when calling uploadStream");if(null==t)throw new Error("Missing the required parameter 'raw' when calling uploadStream");var o={path:e},i={"X-Rename-If-Exists":r.xRenameIfExists,"X-Append-To":r.xAppendTo,"X-Partial-Upload":r.xPartialUpload,"X-Partial-Target-Bytesize":r.xPartialTargetBytesize},a=u.default;return this.apiClient.callApi("/io/{path}","PUT",o,{},i,{},n,["basicAuth"],[],[],a)}},{key:"uploadStream",value:function(e,t,r){return this.uploadStreamWithHttpInfo(e,t,r).then((function(e){return e.data}))}}]),e}();t.default=s,e.exports=t.default},256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(179)),u=(o(r(202)),o(r(473))),s=(o(r(22)),o(r(74))),c=o(r(854)),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiClient=t||i.default.instance}return n(e,[{key:"adminAddWorkspaceFeatureWithHttpInfo",value:function(e,t,r,n){n=n||{};var o=r;if(null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminAddWorkspaceFeature");if(null==t)throw new Error("Missing the required parameter 'metaId' when calling adminAddWorkspaceFeature");if(null==r)throw new Error("Missing the required parameter 'parameters' when calling adminAddWorkspaceFeature");var i={workspaceId:e,metaId:t},a={format:n.format},u=s.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}/features/{metaId}","POST",i,a,{},{},o,["basicAuth"],[],["application/json","application/xml"],u)}},{key:"adminAddWorkspaceFeature",value:function(e,t,r,n){return this.adminAddWorkspaceFeatureWithHttpInfo(e,t,r,n).then((function(e){return e.data}))}},{key:"adminCreateWorkspaceWithHttpInfo",value:function(e){var t=e;if(null==e)throw new Error("Missing the required parameter 'payload' when calling adminCreateWorkspace");var r=a.default;return this.apiClient.callApi("/admin/workspaces","POST",{},{},{},{},t,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"adminCreateWorkspace",value:function(e){return this.adminCreateWorkspaceWithHttpInfo(e).then((function(e){return e.data}))}},{key:"adminDeleteWorkspaceWithHttpInfo",value:function(e){if(null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminDeleteWorkspace");var t={workspaceId:e},r=s.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}","DELETE",t,{},{},{},null,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"adminDeleteWorkspace",value:function(e){return this.adminDeleteWorkspaceWithHttpInfo(e).then((function(e){return e.data}))}},{key:"adminEditWorkspaceWithHttpInfo",value:function(e,t){var r=t;if(null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminEditWorkspace");if(null==t)throw new Error("Missing the required parameter 'payload' when calling adminEditWorkspace");var n={workspaceId:e},o=a.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}","PATCH",n,{},{},{},r,["basicAuth"],[],["application/json","application/xml"],o)}},{key:"adminEditWorkspace",value:function(e,t){return this.adminEditWorkspaceWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"adminEditWorkspaceFeatureWithHttpInfo",value:function(e,t,r){var n=r;if(null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminEditWorkspaceFeature");if(null==t)throw new Error("Missing the required parameter 'metaId' when calling adminEditWorkspaceFeature");if(null==r)throw new Error("Missing the required parameter 'parameters' when calling adminEditWorkspaceFeature");var o={workspaceId:e,metaId:t},i=s.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}/features/{metaId}","PATCH",o,{},{},{},n,["basicAuth"],[],["application/json","application/xml"],i)}},{key:"adminEditWorkspaceFeature",value:function(e,t,r){return this.adminEditWorkspaceFeatureWithHttpInfo(e,t,r).then((function(e){return e.data}))}},{key:"adminGetWorkspaceWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminGetWorkspace");var r={workspaceId:e},n={load_fill_values:t.loadFillValues,format:t.format},o=a.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}","GET",r,n,{},{},null,["basicAuth"],[],["application/json","application/xml"],o)}},{key:"adminGetWorkspace",value:function(e,t){return this.adminGetWorkspaceWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"adminListWorkspacesWithHttpInfo",value:function(e){var t={format:(e=e||{}).format},r=u.default;return this.apiClient.callApi("/admin/workspaces","GET",{},t,{},{},null,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"adminListWorkspaces",value:function(e){return this.adminListWorkspacesWithHttpInfo(e).then((function(e){return e.data}))}},{key:"adminRemoveWorkspaceFeatureWithHttpInfo",value:function(e,t){if(null==e)throw new Error("Missing the required parameter 'workspaceId' when calling adminRemoveWorkspaceFeature");if(null==t)throw new Error("Missing the required parameter 'metaId' when calling adminRemoveWorkspaceFeature");var r={workspaceId:e,metaId:t},n=s.default;return this.apiClient.callApi("/admin/workspaces/{workspaceId}/features/{metaId}","DELETE",r,{},{},{},null,["basicAuth"],[],["application/json","application/xml"],n)}},{key:"adminRemoveWorkspaceFeature",value:function(e,t){return this.adminRemoveWorkspaceFeatureWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"adminUpdateWorkspaceWithHttpInfo",value:function(e){var t=e;if(null==e)throw new Error("Missing the required parameter 'payload' when calling adminUpdateWorkspace");var r=a.default;return this.apiClient.callApi("/admin/workspaces","PATCH",{},{},{},{},t,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"adminUpdateWorkspace",value:function(e){return this.adminUpdateWorkspaceWithHttpInfo(e).then((function(e){return e.data}))}},{key:"createPeopleWithHttpInfo",value:function(e,t,r){if(r=r||{},null==e)throw new Error("Missing the required parameter 'path' when calling createPeople");if(null==t)throw new Error("Missing the required parameter 'resourceType' when calling createPeople");var n={path:e},o={format:r.format},i={resourceType:t,groupLabel:r.groupLabel,userPass:r.userPass},a=s.default;return this.apiClient.callApi("/admin/people/{path}","POST",n,o,{},i,null,["basicAuth"],["application/json"],["application/json"],a)}},{key:"createPeople",value:function(e,t,r){return this.createPeopleWithHttpInfo(e,t,r).then((function(e){return e.data}))}},{key:"createRoleWithHttpInfo",value:function(e,t){var r=t;if(null==e)throw new Error("Missing the required parameter 'roleId' when calling createRole");if(null==t)throw new Error("Missing the required parameter 'role' when calling createRole");var n={roleId:e},o=c.default;return this.apiClient.callApi("/admin/roles/{roleId}","POST",n,{},{},{},r,["basicAuth"],["application/json"],["application/json"],o)}},{key:"createRole",value:function(e,t){return this.createRoleWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"deletePeopleWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'path' when calling deletePeople");var r={path:e},n={format:t.format},o=s.default;return this.apiClient.callApi("/admin/people/{path}","DELETE",r,n,{},{},null,["basicAuth"],[],["application/json"],o)}},{key:"deletePeople",value:function(e,t){return this.deletePeopleWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"deleteRoleWithHttpInfo",value:function(e){if(null==e)throw new Error("Missing the required parameter 'roleId' when calling deleteRole");var t={roleId:e},r=s.default;return this.apiClient.callApi("/admin/roles/{roleId}","DELETE",t,{},{},{},null,["basicAuth"],[],["application/json"],r)}},{key:"deleteRole",value:function(e){return this.deleteRoleWithHttpInfo(e).then((function(e){return e.data}))}},{key:"getPeopleWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'path' when calling getPeople");var r={path:e},n={format:t.format,list:t.list},o=u.default;return this.apiClient.callApi("/admin/people/{path}","GET",r,n,{},{},null,["basicAuth"],[],["application/json","application/xml"],o)}},{key:"getPeople",value:function(e,t){return this.getPeopleWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"getRoleWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'roleId' when calling getRole");var r={roleId:e},n={format:t.format,load_fill_values:t.loadFillValues},o=c.default;return this.apiClient.callApi("/admin/roles/{roleId}","GET",r,n,{},{},null,["basicAuth"],[],["application/json"],o)}},{key:"getRole",value:function(e,t){return this.getRoleWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"getRolesWithHttpInfo",value:function(e){var t={format:(e=e||{}).format},r=u.default;return this.apiClient.callApi("/admin/roles","GET",{},t,{},{},null,["basicAuth"],[],["application/json","application/xml"],r)}},{key:"getRoles",value:function(e){return this.getRolesWithHttpInfo(e).then((function(e){return e.data}))}},{key:"patchPeopleWithHttpInfo",value:function(e,t,r,n){n=n||{};var o=r;if(null==e)throw new Error("Missing the required parameter 'path' when calling patchPeople");if(null==t)throw new Error("Missing the required parameter 'resourceType' when calling patchPeople");if(null==r)throw new Error("Missing the required parameter 'patchTuple' when calling patchPeople");var i={path:e},a={format:n.format,resourceType:t},u=s.default;return this.apiClient.callApi("/admin/people/{path}","PATCH",i,a,{},{},o,["basicAuth"],["application/json"],["application/json"],u)}},{key:"patchPeople",value:function(e,t,r,n){return this.patchPeopleWithHttpInfo(e,t,r,n).then((function(e){return e.data}))}},{key:"updateRoleWithHttpInfo",value:function(e,t){var r=t;if(null==e)throw new Error("Missing the required parameter 'roleId' when calling updateRole");if(null==t)throw new Error("Missing the required parameter 'role' when calling updateRole");var n={roleId:e},o=c.default;return this.apiClient.callApi("/admin/roles/{roleId}","PATCH",n,{},{},{},r,["basicAuth"],["application/json"],["application/json"],o)}},{key:"updateRole",value:function(e,t){return this.updateRoleWithHttpInfo(e,t).then((function(e){return e.data}))}}]),e}();t.default=l,e.exports=t.default},951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(139)),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiClient=t||i.default.instance}return n(e,[{key:"createTaskWithHttpInfo",value:function(e,t){var r=(t=t||{}).requestBody;if(null==e)throw new Error("Missing the required parameter 'taskId' when calling createTask");var n={taskId:e},o=a.default;return this.apiClient.callApi("/tasks/{taskId}","POST",n,{},{},{},r,["basicAuth"],["application/json"],[],o)}},{key:"createTask",value:function(e,t){return this.createTaskWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"deleteTaskWithHttpInfo",value:function(e){if(null==e)throw new Error("Missing the required parameter 'taskId' when calling deleteTask");var t={taskId:e},r=a.default;return this.apiClient.callApi("/tasks/{taskId}","DELETE",t,{},{},{},null,["basicAuth"],[],[],r)}},{key:"deleteTask",value:function(e){return this.deleteTaskWithHttpInfo(e).then((function(e){return e.data}))}},{key:"getTaskInfoWithHttpInfo",value:function(e){if(null==e)throw new Error("Missing the required parameter 'taskId' when calling getTaskInfo");var t={taskId:e},r=a.default;return this.apiClient.callApi("/tasks/{taskId}","GET",t,{},{},{},null,["basicAuth"],[],[],r)}},{key:"getTaskInfo",value:function(e){return this.getTaskInfoWithHttpInfo(e).then((function(e){return e.data}))}},{key:"listTasksWithHttpInfo",value:function(e,t){if(t=t||{},null==e)throw new Error("Missing the required parameter 'workspaceId' when calling listTasks");var r={filter:t.filter,workspaceId:e,path:this.apiClient.buildCollectionParam(t.path,"multi")},n=[a.default];return this.apiClient.callApi("/tasks","GET",{},{},{},r,null,["basicAuth"],[],[],n)}},{key:"listTasks",value:function(e,t){return this.listTasksWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"updateTaskWithHttpInfo",value:function(e,t){var r=(t=t||{}).requestBody;if(null==e)throw new Error("Missing the required parameter 'taskId' when calling updateTask");var n={taskId:e},o=a.default;return this.apiClient.callApi("/tasks/{taskId}","PATCH",n,{},{},{},r,["basicAuth"],["application/json"],[],o)}},{key:"updateTask",value:function(e,t){return this.updateTaskWithHttpInfo(e,t).then((function(e){return e.data}))}}]),e}();t.default=u,e.exports=t.default},543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiClient=t||i.default.instance}return o(e,[{key:"userInfoWithHttpInfo",value:function(){var e=Object;return this.apiClient.callApi("/user","GET",{},{},{},{},null,["basicAuth"],[],["application/json"],e)}},{key:"userInfo",value:function(){return this.userInfoWithHttpInfo().then((function(e){return e.data}))}},{key:"userPreferencesWithHttpInfo",value:function(){var e=Object;return this.apiClient.callApi("/user/preferences","GET",{},{},{},{},null,["basicAuth"],[],["application/json"],e)}},{key:"userPreferences",value:function(){return this.userPreferencesWithHttpInfo().then((function(e){return e.data}))}},{key:"userWorkspacesWithHttpInfo",value:function(){var e=Object;return this.apiClient.callApi("/user/workspaces","GET",{},{},{},{},null,["basicAuth"],[],["application/json"],e)}},{key:"userWorkspaces",value:function(){return this.userWorkspacesWithHttpInfo().then((function(e){return e.data}))}}]),e}();t.default=a,e.exports=t.default},597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(983)),u=o(r(770)),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiClient=t||i.default.instance}return n(e,[{key:"changesWithHttpInfo",value:function(e,t){if(null==e)throw new Error("Missing the required parameter 'sequenceId' when calling changes");if(null==t)throw new Error("Missing the required parameter 'workspaceId' when calling changes");var r={sequenceId:e,workspaceId:t},n=[u.default];return this.apiClient.callApi("/workspaces/{workspaceId}/changes/{sequenceId}","GET",r,{},{},{},null,["basicAuth"],[],["application/json"],n)}},{key:"changes",value:function(e,t){return this.changesWithHttpInfo(e,t).then((function(e){return e.data}))}},{key:"getWorkspaceInfoWithHttpInfo",value:function(e,t){if(null==e)throw new Error("Missing the required parameter 'xPydioWSInfo' when calling getWorkspaceInfo");if(null==t)throw new Error("Missing the required parameter 'workspaceId' when calling getWorkspaceInfo");var r={workspaceId:t},n={"X-Pydio-WS-Info":e},o=a.default;return this.apiClient.callApi("/workspaces/{workspaceId}","GET",r,{},n,{},null,["basicAuth"],[],["application/json"],o)}},{key:"getWorkspaceInfo",value:function(e,t){return this.getWorkspaceInfoWithHttpInfo(e,t).then((function(e){return e.data}))}}]),e}();t.default=s,e.exports=t.default},579:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=n(r(418)),i=n(r(179)),a=n(r(100)),u=n(r(761)),s=n(r(382)),c=n(r(734)),l=n(r(983)),f=n(r(770)),p=n(r(25)),d=n(r(202)),h=n(r(362)),y=n(r(473)),m=n(r(680)),b=n(r(97)),v=n(r(435)),g=n(r(22)),w=n(r(74)),O=n(r(854)),k=n(r(139)),T=n(r(157)),P=n(r(161)),j=n(r(256)),E=n(r(951)),S=n(r(543)),_=n(r(597));o.default,i.default,a.default,u.default,s.default,c.default,l.default,f.default,p.default,d.default,h.default,y.default,m.default,b.default,v.default,g.default,w.default,O.default,k.default,T.default,P.default,t.D7=j.default,E.default,S.default,_.default},179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(100)),u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=void 0,this.slug=void 0,this.display=void 0,this.displayStringId=void 0,this.accessType=void 0,this.writeable=void 0,this.isTemplate=void 0,this.groupPath=void 0,this.parameters=void 0,this.features=void 0,this.mask=void 0,this.info=void 0,this.display=t,this.accessType=r}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("id")&&(r.id=i.default.convertToType(t.id,"String")),t.hasOwnProperty("slug")&&(r.slug=i.default.convertToType(t.slug,"String")),t.hasOwnProperty("display")&&(r.display=i.default.convertToType(t.display,"String")),t.hasOwnProperty("displayStringId")&&(r.displayStringId=i.default.convertToType(t.displayStringId,"String")),t.hasOwnProperty("accessType")&&(r.accessType=i.default.convertToType(t.accessType,"String")),t.hasOwnProperty("writeable")&&(r.writeable=i.default.convertToType(t.writeable,"Boolean")),t.hasOwnProperty("isTemplate")&&(r.isTemplate=i.default.convertToType(t.isTemplate,"Boolean")),t.hasOwnProperty("groupPath")&&(r.groupPath=i.default.convertToType(t.groupPath,"String")),t.hasOwnProperty("parameters")&&(r.parameters=i.default.convertToType(t.parameters,Object)),t.hasOwnProperty("features")&&(r.features=i.default.convertToType(t.features,Object)),t.hasOwnProperty("mask")&&(r.mask=i.default.convertToType(t.mask,Object)),t.hasOwnProperty("info")&&(r.info=a.default.constructFromObject(t.info))),r}}]),e}();t.default=u,e.exports=t.default},100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user=void 0,this.shares=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("user")&&(r.user=i.default.convertToType(t.user,"Number")),t.hasOwnProperty("shares")&&(r.shares=i.default.convertToType(t.shares,"Number"))),r}}]),e}();t.default=a,e.exports=t.default},761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actionName=void 0,this.delay=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("actionName")&&(r.actionName=i.default.convertToType(t.actionName,"String")),t.hasOwnProperty("delay")&&(r.delay=i.default.convertToType(t.delay,"Number"))),r}}]),e}();t.default=a,e.exports=t.default},382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.USAGE=void 0,this.TOTAL=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("USAGE")&&(r.USAGE=i.default.convertToType(t.USAGE,"Number")),t.hasOwnProperty("TOTAL")&&(r.TOTAL=i.default.convertToType(t.TOTAL,"Number"))),r}}]),e}();t.default=a,e.exports=t.default},734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(362)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seq_id=void 0,this.node=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("seq_id")&&(r.seq_id=i.default.convertToType(t.seq_id,"Number")),t.hasOwnProperty("node")&&(r.node=a.default.constructFromObject(t.node))),r}}]),e}();t.default=u,e.exports=t.default},983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.USAGE=void 0,this.TOTAL=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("USAGE")&&(r.USAGE=i.default.convertToType(t.USAGE,"Number")),t.hasOwnProperty("TOTAL")&&(r.TOTAL=i.default.convertToType(t.TOTAL,"Number"))),r}}]),e}();t.default=a,e.exports=t.default},770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(362)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seq_id=void 0,this.node=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("seq_id")&&(r.seq_id=i.default.convertToType(t.seq_id,"Number")),t.hasOwnProperty("node")&&(r.node=a.default.constructFromObject(t.node))),r}}]),e}();t.default=u,e.exports=t.default},25:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=((n=r(418))&&n.__esModule,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e),r}}]),e}());t.default=i,e.exports=t.default},202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=((n=r(418))&&n.__esModule,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e),r}}]),e}());t.default=i,e.exports=t.default},362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(473)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=void 0,this.type=void 0,this.is_leaf=void 0,this.label=void 0,this.ajxp_modiftime=void 0,this.bytesize=void 0,this.stat=void 0,this.ajxp_relativetime=void 0,this.ajxp_description=void 0,this.icon=void 0,this.filesize=void 0,this.mimestring_id=void 0,this.ajxp_readonly=void 0,this.file_perms=void 0,this.repo_has_recycle=void 0,this.children=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("path")&&(r.path=i.default.convertToType(t.path,"String")),t.hasOwnProperty("type")&&(r.type=i.default.convertToType(t.type,"String")),t.hasOwnProperty("is_leaf")&&(r.is_leaf=i.default.convertToType(t.is_leaf,"Boolean")),t.hasOwnProperty("label")&&(r.label=i.default.convertToType(t.label,"String")),t.hasOwnProperty("ajxp_modiftime")&&(r.ajxp_modiftime=i.default.convertToType(t.ajxp_modiftime,"Number")),t.hasOwnProperty("bytesize")&&(r.bytesize=i.default.convertToType(t.bytesize,"Number")),t.hasOwnProperty("stat")&&(r.stat=i.default.convertToType(t.stat,Object)),t.hasOwnProperty("ajxp_relativetime")&&(r.ajxp_relativetime=i.default.convertToType(t.ajxp_relativetime,"String")),t.hasOwnProperty("ajxp_description")&&(r.ajxp_description=i.default.convertToType(t.ajxp_description,"String")),t.hasOwnProperty("icon")&&(r.icon=i.default.convertToType(t.icon,"String")),t.hasOwnProperty("filesize")&&(r.filesize=i.default.convertToType(t.filesize,"String")),t.hasOwnProperty("mimestring_id")&&(r.mimestring_id=i.default.convertToType(t.mimestring_id,"String")),t.hasOwnProperty("ajxp_readonly")&&(r.ajxp_readonly=i.default.convertToType(t.ajxp_readonly,"Boolean")),t.hasOwnProperty("file_perms")&&(r.file_perms=i.default.convertToType(t.file_perms,"String")),t.hasOwnProperty("repo_has_recycle")&&(r.repo_has_recycle=i.default.convertToType(t.repo_has_recycle,"Boolean")),t.hasOwnProperty("children")&&(r.children=a.default.constructFromObject(t.children))),r}},{key:"TypeEnum",value:{collection:"collection",leaf:"leaf"},enumerable:!0}]),e}();t.default=u,e.exports=t.default},473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}o(r(418));var i=o(r(680)),a=o(r(435)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pagination=void 0,this.data=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("pagination")&&(r.pagination=a.default.constructFromObject(t.pagination)),t.hasOwnProperty("data")&&(r.data=i.default.constructFromObject(t.data))),r}}]),e}();t.default=u,e.exports=t.default},680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(362)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=void 0,this.children=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("node")&&(r.node=a.default.constructFromObject(t.node)),t.hasOwnProperty("children")&&(r.children=i.default.convertToType(t.children,{String:a.default}))),r}}]),e}();t.default=u,e.exports=t.default},97:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(362)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=void 0,this.update=void 0,this.remove=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("add")&&(r.add=i.default.convertToType(t.add,[a.default])),t.hasOwnProperty("update")&&(r.update=i.default.convertToType(t.update,[a.default])),t.hasOwnProperty("remove")&&(r.remove=i.default.convertToType(t.remove,["String"]))),r}}]),e}();t.default=u,e.exports=t.default},435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=void 0,this.current=void 0,this.total=void 0,this.dirs=void 0,this.remoteSort=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("count")&&(r.count=i.default.convertToType(t.count,"Number")),t.hasOwnProperty("current")&&(r.current=i.default.convertToType(t.current,"Number")),t.hasOwnProperty("total")&&(r.total=i.default.convertToType(t.total,"Number")),t.hasOwnProperty("dirs")&&(r.dirs=i.default.convertToType(t.dirs,"Number")),t.hasOwnProperty("remoteSort")&&(r.remoteSort=i.default.convertToType(t.remoteSort,Object))),r}}]),e}();t.default=a,e.exports=t.default},22:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resourceType=void 0,this.parameterName=void 0,this.parameterValue=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("resourceType")&&(r.resourceType=i.default.convertToType(t.resourceType,"String")),t.hasOwnProperty("parameterName")&&(r.parameterName=i.default.convertToType(t.parameterName,"String")),t.hasOwnProperty("parameterValue")&&(r.parameterValue=i.default.convertToType(t.parameterValue,"String"))),r}},{key:"ResourceTypeEnum",value:{user:"user",group:"group"},enumerable:!0},{key:"ParameterNameEnum",value:{groupLabel:"groupLabel",userPass:"userPass",userProfile:"userProfile",userLock:"userLock",userRoles:"userRoles",userAddRole:"userAddRole",userRemoveRole:"userRemoveRole",userPreferences:"userPreferences"},enumerable:!0}]),e}();t.default=a,e.exports=t.default},74:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(761)),u=o(r(97)),s=o(r(139)),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.message=void 0,this.level=void 0,this.errorCode=void 0,this.nodesDiff=void 0,this.bgAction=void 0,this.tasks=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("message")&&(r.message=i.default.convertToType(t.message,"String")),t.hasOwnProperty("level")&&(r.level=i.default.convertToType(t.level,"String")),t.hasOwnProperty("errorCode")&&(r.errorCode=i.default.convertToType(t.errorCode,"Number")),t.hasOwnProperty("nodesDiff")&&(r.nodesDiff=u.default.constructFromObject(t.nodesDiff)),t.hasOwnProperty("bgAction")&&(r.bgAction=a.default.constructFromObject(t.bgAction)),t.hasOwnProperty("tasks")&&(r.tasks=i.default.convertToType(t.tasks,[s.default]))),r}}]),e}();t.default=c,e.exports=t.default},854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ACL=void 0,this.MASKS=void 0,this.PARAMETERS=void 0,this.ACTIONS=void 0,this.APPLIES=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("ACL")&&(r.ACL=i.default.convertToType(t.ACL,Object)),t.hasOwnProperty("MASKS")&&(r.MASKS=i.default.convertToType(t.MASKS,Object)),t.hasOwnProperty("PARAMETERS")&&(r.PARAMETERS=i.default.convertToType(t.PARAMETERS,Object)),t.hasOwnProperty("ACTIONS")&&(r.ACTIONS=i.default.convertToType(t.ACTIONS,Object)),t.hasOwnProperty("APPLIES")&&(r.APPLIES=i.default.convertToType(t.APPLIES,Object))),r}}]),e}();t.default=a,e.exports=t.default},139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(418)),a=o(r(157)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=void 0,this.status=void 0,this.label=void 0,this.description=void 0,this.userId=void 0,this.wsId=void 0,this.actionName=void 0,this.schedule=void 0,this.parameters=void 0}return n(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("id")&&(r.id=i.default.convertToType(t.id,"String")),t.hasOwnProperty("status")&&(r.status=i.default.convertToType(t.status,"Number")),t.hasOwnProperty("label")&&(r.label=i.default.convertToType(t.label,"String")),t.hasOwnProperty("description")&&(r.description=i.default.convertToType(t.description,"String")),t.hasOwnProperty("userId")&&(r.userId=i.default.convertToType(t.userId,"String")),t.hasOwnProperty("wsId")&&(r.wsId=i.default.convertToType(t.wsId,"String")),t.hasOwnProperty("actionName")&&(r.actionName=i.default.convertToType(t.actionName,"String")),t.hasOwnProperty("schedule")&&(r.schedule=a.default.constructFromObject(t.schedule)),t.hasOwnProperty("parameters")&&(r.parameters=i.default.convertToType(t.parameters,Object))),r}}]),e}();t.default=u,e.exports=t.default},157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(418))&&n.__esModule?n:{default:n},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheduleType=void 0,this.scheduleValue=void 0}return o(e,null,[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("scheduleType")&&(r.scheduleType=i.default.convertToType(t.scheduleType,"String")),t.hasOwnProperty("scheduleValue")&&(r.scheduleValue=i.default.convertToType(t.scheduleValue,"String"))),r}}]),e}();t.default=a,e.exports=t.default},465:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,n,o){r=r||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(r);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var s=e.length;u>0&&s>u&&(s=u);for(var c=0;c<s;++c){var l,f,p,d,h=e[c].replace(a,"%20"),y=h.indexOf(n);y>=0?(l=h.substr(0,y),f=h.substr(y+1)):(l=h,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),t(i,p)?Array.isArray(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i}},674:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=function(e){switch(t(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,o,i){return n=n||"&",o=o||"=",null===e&&(e=void 0),"object"===t(e)?Object.keys(e).map((function(t){var i=encodeURIComponent(r(t))+o;return Array.isArray(e[t])?e[t].map((function(e){return i+encodeURIComponent(r(e))})).join(n):i+encodeURIComponent(r(e[t]))})).join(n):i?encodeURIComponent(r(i))+o+encodeURIComponent(r(e)):""}},837:(e,t,r)=>{"use strict";t.decode=t.parse=r(465),t.encode=t.stringify=r(674)},635:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o;"undefined"!=typeof window?o=window:"undefined"!=typeof self?o=self:(console.warn("Using browser-only version of superagent in non-browser environment"),o=this);var i=r(564),a=r(896),u=r(834),s=r(265),c=r(882),l=r(609);function f(){}var p=t=e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1==arguments.length?new t.Request("GET",e):new t.Request(e,r)};t.Request=g,p.getXHR=function(){if(!(!o.XMLHttpRequest||o.location&&"file:"==o.location.protocol&&o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!u(e))return e;var t=[];for(var r in e)y(t,r,e[r]);return t.join("&")}function y(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach((function(r){y(e,t,r)}));else if(u(r))for(var n in r)y(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function m(e){for(var t,r,n={},o=e.split("&"),i=0,a=o.length;i<a;++i)-1==(r=(t=o[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function b(e){return/[\/+]json\b/.test(e)}function v(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),a={};i.pop();for(var u=0,s=i.length;u<s;++u)t=(r=i[u]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=d(r.slice(t+1)),a[n]=o;return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function g(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new v(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||((e=new Error(n.statusText||"Unsuccessful HTTP response")).original=t,e.response=n,e.status=n.status)}catch(t){e=t}e?r.callback(e,n):r.callback(null,n)}))}function w(e,t,r){var n=p("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}p.serializeObject=h,p.parseString=m,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},c(v.prototype),v.prototype._parseBody=function(e){var t=p.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&b(this.type)&&(t=p.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},v.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},p.Response=v,i(g.prototype),a(g.prototype),g.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},g.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},g.prototype.auth=function(e,t,r){switch("object"===n(t)&&null!==t&&(r=t),r||(r={type:"function"==typeof btoa?"basic":"auto"}),r.type){case"basic":this.set("Authorization","Basic "+btoa(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},g.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},g.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},g.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},g.prototype.callback=function(e,t){if(this._maxRetries&&this._retries++<this._maxRetries&&l(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},g.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},g.prototype.buffer=g.prototype.ca=g.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},g.prototype.pipe=g.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},g.prototype._appendQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");s(this._sort)?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},g.prototype._isHost=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},g.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||f,this._appendQueryString(),this._end()},g.prototype._end=function(){var e=this,t=this.xhr=p.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||p.serialize[o?o.split(";")[0]:""];!i&&b(o)&&(i=p.serialize["application/json"]),i&&(r=i(r))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},p.get=function(e,t,r){var n=p("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.head=function(e,t,r){var n=p("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.options=function(e,t,r){var n=p("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.del=w,p.delete=w,p.patch=function(e,t,r){var n=p("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.post=function(e,t,r){var n=p("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.put=function(e,t,r){var n=p("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},265:(e,t,r)=>{var n=r(834);e.exports=function(e){return"[object Function]"===(n(e)?Object.prototype.toString.call(e):"")}},834:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return null!==e&&"object"===t(e)}},896:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(834);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!==n(e))return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){r.end((function(r,n){r?t(r):e(n)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(o(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var n in t)this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=o(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&o(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||r||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},882:(e,t,r)=>{var n=r(763);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var o in r)this[o]=r[o];this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e}},609:e=>{var t=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];e.exports=function(e,r){return!!(e&&e.code&&~t.indexOf(e.code)||r&&r.status&&r.status>=500||e&&"timeout"in e&&"ECONNABORTED"==e.code||e&&"crossDomain"in e)}},763:(e,t)=>{t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&delete e.cookie,e}},99:(e,t)=>{var r;!function(){function n(e){return(e=e.toString(16)).length<2&&(e="0"+e),e}function o(){var e=function(){try{return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16)))}catch(t){for(var e=[];e.length<16;)e.push(256*Math.random()&255);return e}}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,(e=e.map(n).join("").match(/(.{8})(.{4})(.{4})(.{4})(.{12})/)).shift(),e.join("-")}var i=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;o.valid=function(e){return i.test(e)},window&&(window.uuid4=o),e.exports&&(e.exports=o),void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},200:()=>{}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{Dashboard:()=>mn});const e=require("react");var t=r.n(e);const o=require("pydio");var i=r.n(o);const a=require("pydio/util/lang");var u=r.n(a);const s=require("material-ui"),c=require("cells-sdk");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(i){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={show:!1},t}return r=u,(n=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.show()}),451)}},{key:"show",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return this.state.show?t().createElement("div",{style:{padding:"20px 2px 2px"}},this.props.children):t().createElement("div",null)}}])&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(t().Component);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}var m=["title"];function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===y(o)?o:String(o)),n)}var o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(a){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.call(this,e)}return r=c,(n=[{key:"T",value:function(e){return i().getInstance().MessageHash["migration."+e]||e}},{key:"render",value:function(){var e=this.props,r=e.onBack,n=e.onComplete,o=e.nextLabel,i=e.legend,a=e.styles,u=e.otherButtons,c=this.props,l=c.title,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(c,m);return t().createElement(s.Step,f,t().createElement(s.StepLabel,null,l),t().createElement(s.StepContent,null,t().createElement("div",{style:a.stepLegend},i),t().createElement(h,null,u,r&&t().createElement(s.RaisedButton,{onClick:function(){return r()},label:this.T("back")}),"",t().createElement(s.RaisedButton,{primary:!0,onClick:function(){return n()},label:o||this.T("next")}))))}}])&&b(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var k=["url","user","pwd","skipVerify","onChange","styles","onBack"];function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===O(o)?o:String(o)),n)}var o}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var E=i().requireLib("hoc").ModernTextField,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(l,e);var r,n,o,a,c=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(o);if(a){var r=j(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={},t}return r=l,(n=[{key:"T",value:function(e){var t=i().getInstance().MessageHash;return t["migration.step.connection."+e]||t["migration."+e]||t[e]||e}},{key:"testUrl",value:function(e,t,r,n){var o=this;return new Promise((function(i,a){var u=new XMLHttpRequest;u.open(e,t),u.setRequestHeader("Authorization","Basic "+btoa(r+":"+n)),u.onreadystatechange=function(){4===u.readyState&&(200===u.status?i():a(new Error(o.T("fail").replace("%s",t))))},u.send()}))}},{key:"handleNext",value:function(){var e=this,t=this.props,r=t.url,n=t.user,o=t.pwd,i=t.pydio,a=t.onComplete;r&&n&&o?this.testUrl("GET",u().trimRight(r,"/")+"/api/v2/admin/workspaces",n,o).then((function(){i.UI.displayMessage("SUCCESS",e.T("success")),e.setState({error:null}),a()})).catch((function(t){e.setState({error:t.message})})):this.setState({error:this.T("missing")})}},{key:"render",value:function(){var e=this,r=this.props,n=r.url,o=r.user,i=r.pwd,a=r.skipVerify,u=r.onChange,c=r.styles,l=r.onBack,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,k),p=this.state.error;return t().createElement(s.Step,f,t().createElement(s.StepLabel,null,this.T("step.connection")),t().createElement(s.StepContent,null,t().createElement("div",{style:c.stepLegend},this.T("legend")),t().createElement(s.Paper,{zDepth:1,style:{padding:16,paddingTop:24,margin:3,width:480}},t().createElement(E,{errorText:p,floatingLabelText:this.T("field.url"),hintText:"https://yourcompany.com/pydio",value:n,onChange:function(e,t){u({url:t})},fullWidth:!0,style:{marginTop:-10}}),t().createElement(s.Checkbox,{label:this.T("field.skipssl"),checked:a,onCheck:function(e,t){u({skipVerify:t})}}),t().createElement("div",{style:{display:"flex",width:"100%"}},t().createElement("div",{style:{marginRight:10,flex:1}},t().createElement(E,{floatingLabelText:this.T("field.login"),value:o,onChange:function(e,t){u({user:t})},fullWidth:!0,inputStyle:{backgroundColor:"#fafafa"}})),t().createElement("div",{style:{marginLeft:10,flex:1}},t().createElement(E,{floatingLabelText:this.T("field.pwd"),value:i,onChange:function(e,t){u({pwd:t})},fullWidth:!0,type:"password"})))),t().createElement(h,null,t().createElement(s.RaisedButton,{onClick:function(){return l()},label:this.T("back")}),"",t().createElement(s.RaisedButton,{primary:!0,onClick:function(){return e.handleNext()},disabled:!n||!o||!i,label:this.T("button.connect")}))))}}])&&T(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(t().Component);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var x=["features","onBack","onChange","onComplete","summary","styles","summaryState","hasRunning"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_(t)?t:String(t)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(o);if(a){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).state={valid:!1},t}return r=c,(n=[{key:"T",value:function(e){var t=i().getInstance().MessageHash;return t["migration.step.categories."+e]||t["migration."+e]||t[e]||e}},{key:"componentWillReceiveProps",value:function(e){var t=e.features;this.setState({valid:Object.keys(t).reduce((function(e,r){return e||t[r].value}),!1)})}},{key:"render",value:function(){var e,r,n,o=this,i=this.props,a=i.features,u=i.onBack,c=i.onChange,l=i.onComplete,f=i.summary,p=i.styles,d=i.summaryState,y=i.hasRunning,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(i,x),b=this.state.valid;return f?(e=this.T("summary"),r=this.T("summary.legend"),n=[],Object.keys(a).forEach((function(e){var r=a[e];r.value&&n.push(t().createElement("div",{style:{padding:"6px 0"}},t().createElement(s.Checkbox,{label:r.label,checked:!0,labelStyle:{fontWeight:500,fontSize:15}}),r.summary&&t().createElement("div",{style:{marginLeft:40,marginTop:10}},r.summary(d)),!r.summary&&t().createElement("div",{style:{marginLeft:40,marginTop:10}},o.T("summary.empty"))))}))):(e=this.T("choose"),r=this.T("choose.legend"),n=Object.keys(a).map((function(e){var r=a[e],n=A({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r),r));return t().createElement("div",{style:{padding:r.depends?"6px 20px":"6px 0"}},t().createElement(s.Checkbox,{label:r.label,disabled:r.depends&&!a[r.depends].value,checked:r.value,onCheck:function(t,r){var o=I({},e,C(C({},n),{},{value:r}));r||Object.keys(a).forEach((function(t){var r=a[t];r.depends&&r.depends===e&&(o[t]=C(C({},r),{},{value:!1}))})),c(o)}}))}))),t().createElement(s.Step,m,t().createElement(s.StepLabel,null,e),t().createElement(s.StepContent,null,t().createElement("div",{style:p.stepLegend},r),t().createElement("div",null,n),t().createElement(h,null,t().createElement(s.RaisedButton,{onClick:function(){return u()},label:this.T("back")}),"",t().createElement(s.RaisedButton,{primary:!0,disabled:!b||y,onClick:function(){return l()},label:f?this.T("summary.launch"):this.T("next")}))))}}])&&M(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component),L=r(579);const q=require("pydio/lang/observable");var F=r.n(q);const B=require("pydio/http/api");var U=r.n(B);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function K(e){var t=function(e,t){if("object"!==G(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===G(t)?t:String(t)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(s,e);var t,r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(o);if(i){var r=Y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return t=s,n=[{key:"parseUserMetaDefinitions",value:function(e){var t=[],r=[],n=[];return e.forEach((function(e){if(e.features&&e.features["meta.user"])for(var o=e.features["meta.user"],i=0,a="",s="meta_fields",c=function(){var c=o["meta_types"+a]||"string";if(o["meta_labels"+a]&&"creator"!==c&&"updater"!==c){var l={name:o[s+a],label:o["meta_labels"+a],type:c,additional:o["meta_additional"+a],ws:e};t.push(l);var f,p=t.length-1,d=r.filter((function(e){return e.type===l.type&&e.ws!==l.ws&&("choice"!==l.type||l.additional===e.additional)}));if(d.length)f=r.indexOf(d[0]);else{var h=V(V({},l),{},{namespace:"usermeta-"+u().computeStringSlug(l.name)});r.push(h),f=r.length-1}n.push({left:p,right:f})}i++,a="_"+i};o[s+a];)c()})),{metas:t,factorized:r,links:n}}}],(r=[{key:"loadWorkspaces",value:function(e,t,r){var n=this,o=new L.D7;return o.apiClient.basePath=u().trimRight(e,"/")+"/api/v2",o.apiClient.authentications={basicAuth:{type:"basic",username:t,password:r}},this.notify("progress",{max:10,value:0}),o.adminListWorkspaces().then((function(e){if(!e||!e.data||!e.data.children)return n.notify("progress",{max:10,value:10}),[];var t=e.data.children,r=[],i=1,a=Object.keys(t).map((function(e){return"/"===e?"0":e})),u=a.length+1;return n.notify("progress",{max:u,value:i}),a.forEach((function(e){r.push(o.adminGetWorkspace(e+"",{format:"json"}).then((function(e){return i++,n.notify("progress",{max:u,value:i}),e&&e.id?e:null})).catch((function(e){i++,n.notify("progress",{max:u,value:i})})))})),Promise.all(r).then((function(e){return e.filter((function(e){return null!==e}))}))}))}},{key:"loadTemplatePaths",value:function(){return new c.ConfigServiceApi(U().getRestClient()).listVirtualNodes().then((function(e){return e.Children||[]}))}},{key:"loadDataSources",value:function(){return new c.ConfigServiceApi(U().getRestClient()).listDataSources().then((function(e){return e.DataSources||[]}))}},{key:"loadCellsWorkspaces",value:function(){var e=new c.WorkspaceServiceApi(U().getRestClient()),t=new c.RestSearchWorkspaceRequest,r=new c.IdmWorkspaceSingleQuery;return r.scope=c.IdmWorkspaceScope.constructFromObject("ADMIN"),t.Queries=[r],e.searchWorkspaces(t).then((function(e){return e.Workspaces||[]}))}}])&&J(t.prototype,r),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(F());function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return(t=oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oe(n.key),n)}}function oe(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Z(t)?t:String(t)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(u,e);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(o);if(i){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,e)}return r=u,n=[{key:"getLeftGridY",value:function(){var e=this.props,t=e.dotsRadius,r=e.subheaderHeight;return e.leftGridHeight/2+t+r+e.leftGridOffset}},{key:"getRightGridY",value:function(){var e=this.props,t=e.dotsRadius,r=e.subheaderHeight;return e.rightGridHeight/2+t+r+e.rightGridOffset}},{key:"drawGrid",value:function(e,t,r,n,o){var i=this.props.dotsRadius;e.strokeStyle="rgba(204, 204, 204, 0.6)",e.beginPath();for(var a=0;a<o;a++){var u=t,s=r+a*n;e.moveTo(u+i,s),e.arc(u,s,i,0,2*Math.PI,!0),e.fillStyle="#FFFFFF",e.fill()}e.stroke()}},{key:"linkDots",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=this.props,i=o.leftGridX,a=o.rightGridX,u=o.dotsRadius,s=o.leftGridHeight,c=o.rightGridHeight,l=this.getLeftGridY(),f=this.getRightGridY();e.strokeStyle=n||"#9e9e9e",e.beginPath();var p=i+u,d=l+t*s,h=a-u,y=f+r*c;e.moveTo(p,d);var m=3*(h-p)/5;e.bezierCurveTo(p+m,d,h-m,y,h,y),e.stroke()}},{key:"componentDidMount",value:function(){this.buildCanvas(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.buildCanvas(e)}},{key:"buildCanvas",value:function(e){var t=this.canvas;if(!t.getContext)return null;var r=e.leftGridX,n=e.rightGridX,o=e.leftGridHeight,i=e.rightGridHeight,a=this.getLeftGridY(),u=this.getRightGridY(),s=e.leftNumber,c=e.rightNumber,l=e.links,f=t.getContext("2d");f.clearRect(0,0,t.width,t.height),f.lineWidth=2,f.strokeStyle="#757575",this.drawGrid(f,r,a,o,s),this.drawGrid(f,n,u,i,c);for(var p=0;p<l.length;p++)this.linkDots(f,l[p].left,l[p].right,l[p].color)}},{key:"render",value:function(){var e=this,r=this.props,n=r.dotsRadius,o=r.rightGridX,i=r.leftGridHeight,a=r.rightGridHeight,u=r.subheaderHeight,s=r.leftGridOffset,c=r.rightGridOffset,l=this.props,f=l.leftNumber,p=l.rightNumber,d=l.style,h=o+n+2,y=Math.max(f*i+s,p*a+c)+u;return t().createElement("canvas",{style:te(te({},d),{},{background:"transparent",width:h,height:y}),ref:function(t){return e.canvas=t},height:y,width:h})}}],n&&ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(t().Component);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return(t=de(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function de(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===se(t)?t:String(t)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}ue.defaultProps={dotsRadius:4,subheaderHeight:40,leftGridX:10,leftGridHeight:72,leftGridOffset:0,rightGridX:140,rightGridHeight:72,rightGridOffset:0};var me=i().requireLib("hoc").ModernTextField,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(f,e);var r,n,o,a,l=(o=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(o);if(a){var r=ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=l.call(this,e)).state={},t}return r=f,(n=[{key:"T",value:function(e){return i().getInstance().MessageHash["migration."+e]||e}},{key:"renderFontIcon",value:function(e){var r;switch(e.type){case"string":case"text":case"longtext":r="pencil";break;case"stars_rate":r="star";break;case"css_label":r="label-outline";break;case"choice":r="format-list-bulleted";break;case"tags":r="cloud-outline";break;default:r="file"}return t().createElement(s.FontIcon,{className:"mdi mdi-"+r})}},{key:"exportMapping",value:function(){var e=this.state,t=e.metas,r=e.factorized,n=e.links;if(t&&t.length){var o={mapping:{},create:this.buildNamespaces()};t.forEach((function(e,t){var i=n.filter((function(e){return e.left===t}))[0].right;o.mapping[e.name]=r[i].namespace})),this.props.onMapped(o)}}},{key:"componentDidMount",value:function(){var e=this;if(this.props.workspaces&&this.props.workspaces.length){var t=Q.parseUserMetaDefinitions(this.props.workspaces.filter((function(e){return!e.isTemplate}))),r=t.metas,n=t.factorized,o=t.links;this.setState({metas:r,factorized:n,links:o},(function(){e.exportMapping()}))}}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.workspaces&&e.workspaces.length&&(e.workspaces!==this.props.workspaces||!this.props.workspaces||!this.props.workspaces.length)){var r=Q.parseUserMetaDefinitions(e.workspaces.filter((function(e){return!e.isTemplate}))),n=r.metas,o=r.factorized,i=r.links;this.setState({metas:n,factorized:o,links:i},(function(){t.exportMapping()}))}}},{key:"toggle",value:function(e){var t=this.state.factorized;t[e].edit=!t[e].edit,this.setState({factorized:t})}},{key:"updateLabel",value:function(e,t){var r=this,n=this.state.factorized;n[e].label=t,n[e].namespace="usermeta-"+u().computeStringSlug(t),this.setState({factorized:n},(function(){r.exportMapping()}))}},{key:"buildNamespaces",value:function(){return this.state.factorized.map((function(e,t){var r=new c.IdmUserMetaNamespace;r.Namespace=e.namespace,r.Label=e.label;var n={type:e.type};return"choice"===e.type&&(n.data=e.additional),r.JsonDefinition=JSON.stringify(n),r.Order=t,r.Indexable=!0,r.Policies=[c.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),c.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],r}))}},{key:"render",value:function(){var e=this,r=this.state,n=r.metas,o=r.factorized,i=r.links;return n?t().createElement("div",{style:{margin:16,display:"flex"}},t().createElement(s.Paper,{zDepth:1,style:{width:350}},t().createElement(s.List,null,t().createElement(s.Subheader,null,this.T("step.meta.from")),n.map((function(r){return t().createElement(s.ListItem,{primaryText:r.label,secondaryText:e.T("step.meta.map.ws").replace("%s",r.ws.display),leftIcon:e.renderFontIcon(r),disabled:!0})})))),t().createElement(ue,{leftNumber:n.length,rightNumber:o.length,leftGridHeight:72,rightGridHeight:72,links:i.map((function(e){return le(le({},e),{},{color:"#2196f3"})})),style:{marginLeft:-9,marginRight:-5}}),t().createElement(s.Paper,{zDepth:1,style:{width:350}},t().createElement(s.List,null,t().createElement(s.Subheader,null,this.T("step.meta.to")),o.map((function(r,n){return r.edit?t().createElement(s.ListItem,{style:{backgroundColor:"rgba(255, 215, 0, 0.2)"},primaryText:t().createElement(me,{style:{height:40},value:r.label,onChange:function(t,r){e.updateLabel(n,r)}}),leftIcon:t().createElement(s.FontIcon,{style:{margin:"24px 12px",cursor:"pointer"},className:"mdi mdi-check",onClick:function(){e.toggle(n)}}),disabled:!0}):t().createElement(s.ListItem,{primaryText:r.label,secondaryText:r.namespace+(r.additional?e.T("step.meta.map.values").replace("%s",r.additional):""),leftIcon:e.renderFontIcon(r),onClick:function(){e.toggle(n)}})}))))):null}}])&&pe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(t().Component);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ve(o)?o:String(o)),n)}var o}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(o);if(a){var r=Oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).state={features:{watches:{label:t.T("feature.watches"),checked:!0},bookmarks:{label:t.T("feature.bookmark"),checked:!0},filesMeta:{label:t.T("feature.files"),checked:!0}}},t}return r=c,(n=[{key:"T",value:function(e){var t=i().getInstance().MessageHash;return t["migration.step.meta."+e]||t["migration."+e]||t[e]||e}},{key:"componentDidMount",value:function(){var e=this,t=new Q,r=this.props,n=r.url,o=r.user,i=r.pwd;t.loadWorkspaces(n,o,i).catch((function(t){e.setState({err:t})})).then((function(t){e.setState({workspaces:t},(function(){e.exportFeatures()}))}))}},{key:"exportFeatures",value:function(){var e=this.state.features,t=this.props.onChange,r=[];Object.keys(e).forEach((function(t){e[t].checked&&r.push(t)})),t({metadataFeatures:r})}},{key:"toggle",value:function(e,t){var r=this,n=this.state.features;n[e].checked=t,this.setState({features:n},(function(){r.exportFeatures()}))}},{key:"render",value:function(){var e=this,r=this.props,n=r.pydio,o=r.onBack,i=r.onChange,a=r.onComplete,u=r.styles,c=this.state,l=c.workspaces,f=c.err,p=c.features;return t().createElement(s.Step,this.props,t().createElement(s.StepLabel,null,this.T("title")),t().createElement(s.StepContent,null,t().createElement("div",{style:u.stepLegend},this.T("legend")),t().createElement("div",{style:{padding:"10px 0"}},Object.keys(p).map((function(r){var n=p[r];return t().createElement(s.Checkbox,{style:{padding:"6px 0"},label:n.label,checked:n.checked,onCheck:function(t,n){e.toggle(r,n)}})}))),l&&p.filesMeta.checked&&t().createElement(be,{pydio:n,workspaces:l,onMapped:function(e){var t=e.mapping,r=e.create;i({metadataMapping:t,metadataCreate:r})}}),f&&t().createElement("div",null,f.message),t().createElement(h,null,t().createElement(s.RaisedButton,{onClick:function(){return o()},label:this.T("back")}),"",t().createElement(s.RaisedButton,{onClick:function(){return a()},label:this.T("next"),primary:!0}))))}}])&&ge(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Te(o)?o:String(o)),n)}var o}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}var Se=i().requireLib("hoc").ModernTextField,_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(o);if(a){var r=Ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).state={features:{links:{label:t.T("feature.links"),checked:!0},cells:{label:t.T("feature.cells"),checked:!0}},ownerId:""},t}return r=c,(n=[{key:"T",value:function(e){var t=i().getInstance().MessageHash;return t["migration.step.shares."+e]||t["migration."+e]||t[e]||e}},{key:"exportFeatures",value:function(){var e=this.state,t=e.features,r=e.ownerId,n=this.props.onChange,o={};t.links.checked&&t.cells.checked||(o.shareType=t.links.checked?"LINK":"CELL"),r&&(o.ownerId=r),n({sharesFeatures:o})}},{key:"toggle",value:function(e,t){var r=this,n=this.state.features;n[e].checked=t,n.links.checked||n.cells.checked?this.setState({features:n},(function(){r.exportFeatures()})):alert(this.T("alert"))}},{key:"render",value:function(){var e=this,r=this.props,n=r.onBack,o=r.onComplete,i=r.styles,a=this.state,u=a.features,c=a.ownerId;return t().createElement(s.Step,this.props,t().createElement(s.StepLabel,null,this.T("title")),t().createElement(s.StepContent,null,t().createElement("div",{style:i.stepLegend},this.T("legend")),t().createElement("div",{style:i.stepLegend},this.T("legend.warning")),t().createElement("div",{style:{marginTop:10}},this.T("restrict.type")),t().createElement("div",{style:{padding:"10px 0"}},Object.keys(u).map((function(r){var n=u[r];return t().createElement(s.Checkbox,{style:{padding:"6px 0"},label:n.label,checked:n.checked,onCheck:function(t,n){e.toggle(r,n)}})}))),t().createElement("div",null,this.T("restrict.user")),t().createElement(Se,{hintText:this.T("restrict.user.login"),value:c,onChange:function(t,r){e.setState({ownerId:r},(function(){e.exportFeatures()}))}}),t().createElement(h,null,t().createElement(s.RaisedButton,{onClick:function(){return n()},label:this.T("back")}),"",t().createElement(s.RaisedButton,{onClick:function(){return o()},label:this.T("next"),disabled:!u.links.checked&&!u.cells.checked,primary:!0}))))}}])&&Pe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);const xe=require("react-dom");var Re=r.n(xe);const Ce=require("pydio/util/hasher");var Ie=r.n(Ce);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function qe(e,t,r){return t&&Le(e.prototype,t),r&&Le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fe(e){var t=function(e,t){if("object"!==Ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ae(t)?t:String(t)}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ze(e);if(t){var o=ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}var Ve={backgroundColor:"rgba(204, 204, 204, 0.2)"},Xe={backgroundColor:"rgba(255, 215, 0, 0.2)"},Je=function(e){Be(n,e);var r=Ge(n);function n(e){var t;return He(this,n),(t=r.call(this,e)).state={startedServices:[]},t}return qe(n,[{key:"componentDidMount",value:function(){var e=this;this.statusPoller=setInterval((function(){AdminWorkspaces.DataSource.loadStatuses().then((function(t){e.setState({startedServices:t.Services})}))}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statusPoller)}},{key:"render",value:function(){var e=this.props,r=e.header,n=e.headerIcons,o=e.highlighted,i=e.selectable,a=e.datasources,u=(e.onCreate,e.onSelect),c=this.state.startedServices;return t().createElement(s.List,null,t().createElement(s.Subheader,null,r," ",n),a.map((function(e,r){var n=c.reduce((function(t,r){return t||r.Name==="pydio.grpc.data.sync."+e.Name}),!1),a=c.reduce((function(t,r){return t||r.Name==="pydio.grpc.data.index."+e.Name}),!1),s=c.reduce((function(t,r){return t||r.Name==="pydio.grpc.data.objects."+e.ObjectsServiceName}),!1);return t().createElement(Ke,{path:"",selectable:i(e),highlighted:o(e),datasource:e,running:n&&a&&s,onSelect:function(e){return u(e)}})})))}}],[{key:"toString",value:function(e){var t=e.StorageType,r=e.StorageConfiguration,n=void 0===r?{}:r;return"S3"===t?n.customEndpoint?"S3-compatible storage URL":"Amazon S3":n.folder}},{key:"extractPath",value:function(e){var t,r=e.StorageType,n=e.StorageConfiguration,o=void 0===n?{}:n;if("S3"===r){var i=e.ApiKey,a=e.ApiSecret,s=e.ObjectsBucket,c=e.ObjectsBaseFolder,l=o.customEndpoint,f=[];if(f.push(l?"custom:"+Ie().base64_encode(l):"s3"),f.push(i,a),f.push(s),c){var p=u().trim(c,"/").split("/");f.push.apply(f,function(e){if(Array.isArray(e))return Ne(e)}(t=p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return f.join("/")}return o.folder}}]),n}(t().Component),Ke=function(e){Be(n,e);var r=Ge(n);function n(){return He(this,n),r.apply(this,arguments)}return qe(n,[{key:"handleSelect",value:function(){var e=this.props,t=e.datasource;(0,e.onSelect)(t)}},{key:"render",value:function(){var e=this,r=this.props,n=r.datasource,o=r.selectable,i=r.highlighted,a=r.running,u=n.StorageType,c=a?"s3"===(void 0===u?"":u)?"cloud-circle":"folder":"sync",l=this.props.style;return i&&(l=De(De({},l),Ve)),o&&(l=De(De({},l),Xe)),t().createElement("div",null,t().createElement(s.ListItem,{leftIcon:t().createElement(s.FontIcon,{style:{lineHeight:"24px"},className:"mdi mdi-"+c}),primaryText:n.Name,secondaryText:Je.toString(n),style:l,disabled:!o,onClick:function(){return e.handleSelect()}}))}}]),n}(t().Component);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function rt(e,t,r){return t&&tt(e.prototype,t),r&&tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nt(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$e(t)?t:String(t)}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ut(e);if(t){var o=ut(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}var st={backgroundColor:"rgba(204, 204, 204, 0.2)"},ct={backgroundColor:"rgba(255, 215, 0, 0.2)"},lt=function(e){ot(n,e);var r=at(n);function n(){return et(this,n),r.apply(this,arguments)}return rt(n,[{key:"render",value:function(){var e=this.props,r=(e.title,e.selectable),n=e.highlighted,o=e.templatePaths,i=(e.onCreate,e.onSelect);return t().createElement(s.List,{style:{flex:1}},o.map((function(e,o){return t().createElement(ft,{selectable:r(e),highlighted:n(e),templatePath:e,onSelect:function(e){return i(e)}})})))}}]),n}(t().Component),ft=function(e){ot(n,e);var r=at(n);function n(){return et(this,n),r.apply(this,arguments)}return rt(n,[{key:"handleSelect",value:function(){var e=this.props,t=e.templatePath;(0,e.onSelect)(t)}},{key:"T",value:function(e){return i().getInstance().MessageHash["migration."+e]||e}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.selectable,i=n.highlighted,a=n.templatePath,u=this.props.style;return i&&(u=Qe(Qe({},u),st)),a?(o&&(u=Qe(Qe({},u),ct)),t().createElement(s.ListItem,{style:u,leftIcon:t().createElement(s.FontIcon,{className:"mdi mdi-file-tree"}),primaryText:a.Path,secondaryText:(e=a.MetaStore.resolution,e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/(\r\n|\n|\r)/gm,"")),disabled:!o,onClick:function(){return r.handleSelect()}})):t().createElement(s.ListItem,{style:u,leftIcon:t().createElement(s.FontIcon,{className:"mdi mdi-folder-outline"}),primaryText:this.T("step.mapper.notplpath.primary"),secondaryText:this.T("step.mapper.notplpath.secondary")})}}]),n}(t().Component);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wt(n.key),n)}}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}function gt(e,t,r){return(t=wt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){var t=function(e,t){if("object"!==pt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===pt(t)?t:String(t)}var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(u,e);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(o);if(i){var r=vt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gt(bt(e=a.call.apply(a,[this].concat(r))),"component",void 0),e}return r=u,(n=[{key:"componentDidMount",value:function(){this.component=AdminWorkspaces.WsAutoComplete}},{key:"T",value:function(e){return Pydio.getInstance().MessageHash["migration."+e]||e}},{key:"render",value:function(){var e=this,r=this.props,n=r.pydio,o=r.style,i=r.workspaces,a=r.paths,u=r.onSelect,c=r.onError;if(!this.component)return null;var l=this.component;return t().createElement(s.List,{style:ht(ht({},o),{},{minWidth:400})},a.map((function(r,o){return t().createElement(s.ListItem,{innerDivStyle:{height:"72px",padding:"0 16px",display:"flex"},disabled:!0},r&&t().createElement(l,{pydio:n,key:r,style:{backgroundColor:"#ffffff",width:400,margin:0,padding:0},value:r,validateOnLoad:!0,onChange:function(e,t){return u(i[o],gt({},e,t))},onError:function(){return c(i[o])}})||t().createElement("span",{style:{display:"flex",fontStyle:"italic",height:"72px",alignItems:"center"}},e.T("step.mapper.invalid")))})))}}])&&yt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(t().Component);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return(t=Rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rt(n.key),n)}}function xt(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rt(e){var t=function(e,t){if("object"!==kt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===kt(t)?t:String(t)}function Ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&It(e,t)}function It(e,t){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},It(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Mt(e);if(t){var o=Mt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}var Dt={backgroundColor:"#eeeeee"},Wt={backgroundColor:"rgba(0, 171, 102, 0.1)"},Nt={backgroundColor:"#ffebee"},Ht=function(e){Ct(n,e);var r=At(n);function n(){return St(this,n),r.apply(this,arguments)}return xt(n,[{key:"render",value:function(){var e=this.props,r=e.workspaces,n=e.isInvalid,o=e.isValid,i=e.selected,a=e.onSelect,u=e.onHover;return t().createElement(s.List,{style:{flex:1,display:"flex",flexDirection:"column"}},r.map((function(e,r){return t().createElement(Lt,{style:{flex:1},workspace:e,valid:o(e),invalid:n(e),selected:i===e,onSelect:function(e){return a(e)},onHover:function(e){return u(e)}})})))}}],[{key:"toString",value:function(e){var t=e.accessType,r=e.parameters,n=void 0===r?{}:r;return"s3"===t?n.STORAGE_URL?"S3-compatible storage URL":"Amazon S3":n.PATH}},{key:"extractPath",value:function(e){var t=e.accessType,r=e.parameters,n=void 0===r?{}:r;if("fs"===t)return n.PATH;var o,i=[];if(i.push(n.STORAGE_URL?"custom:"+Ie().base64_encode(n.STORAGE_URL):"s3"),i.push(n.API_KEY,n.SECRET_KEY),i.push(n.CONTAINER),n.PATH){var a=u().trim(n.PATH,"/").split("/");i.push.apply(i,function(e){if(Array.isArray(e))return Et(e)}(o=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return i.join("/")}}]),n}(t().Component),Lt=function(e){Ct(n,e);var r=At(n);function n(){return St(this,n),r.apply(this,arguments)}return xt(n,[{key:"handleSelect",value:function(e){var t=this.props,r=t.workspace,n=t.selected;(0,t.onSelect)(n?null:r)}},{key:"handleHover",value:function(){var e=this.props,t=e.workspace,r=e.selected,n=e.onHover;r||n(t)}},{key:"render",value:function(){var e=this,r=this.props,n=r.workspace,o=r.valid,i=r.invalid,a=r.selected,u=this.props.style;return a&&(u=Pt(Pt({},u),Dt)),o?u=Pt(Pt({},u),Wt):i&&(u=Pt(Pt({},u),Nt)),t().createElement(s.ListItem,{leftIcon:t().createElement(s.FontIcon,{className:"mdi mdi-database"}),primaryText:n.display,secondaryText:Ht.toString(n),style:u,onMouseOver:function(){return e.handleHover()},onClick:function(){return e.handleSelect()}})}}]),n}(t().Component);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Ft(e){return function(e){if(Array.isArray(e))return Bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===qt(o)?o:String(o)),n)}var o}var Gt=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SEPARATOR=n,this.paths=t.map((function(e){return e[0]===r.SEPARATOR?e:r.SEPARATOR+e})),this.tree=this.arrangeIntoTree(this.paths),this.newRoots=[],this.links=[],this.flattenTree(this.tree,this.newRoots,this.links),this.flatten(this.tree)}var t,r;return t=e,r=[{key:"flatten",value:function(e){var t=this;return Array.isArray(e)?e.reduce((function(e,r){return r&&e.concat(t.flatten(r),t.flatten(r.children))}),[]):e}},{key:"getNewRoots",value:function(e){if("function"==typeof e)return this.newRoots.filter(e)}},{key:"getLinks",value:function(e){var t=this,r=0;return this.newRoots.filter(e).reduce((function(e,n){return t.paths.map((function(t,o){(t.startsWith(n.ds)||t.startsWith(n.ds,1))&&(e=[].concat(Ft(e),[{left:o,right:r,color:"#e0e0e0",type:"ds"}]))})),r++,e}),[])}},{key:"arrangeIntoTree",value:function(e){var t=this,r=[];return e.forEach((function(e,n){var o=e.split(t.SEPARATOR);o.shift();var i=r;o.forEach((function(e,t){var r=t===o.length-1,a=i.filter((function(t){return t.name===e}));if(a.length){var u=a[0];i=u.children,r&&u.workspaces.push(n)}else{var s={name:e,children:[],workspaces:[]};r&&s.workspaces.push(n),i.push(s),i=s.children}}))})),r}},{key:"flattenTree",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;e.forEach((function(e){var a=e.children,u=e.name,s=e.workspaces,c=[].concat(Ft(o),[u]),l=i,f=c.join(n.SEPARATOR);if(0!==f.indexOf("AJXP_")&&(f=n.SEPARATOR+f),a.length>1||-1===i&&0===a.length)if(l=t.length,f.indexOf("AJXP_USER")>-1){var p=Ft(c);p.pop(),t.push({ds:p.join("/")})}else t.push({ds:f});s.length&&l>-1&&s.forEach((function(e){if(f.indexOf("AJXP_USER")>-1){var n=t.length;t.push({template:f,parentDs:t[l].ds,ws:e}),r.push({left:e,right:l,color:"#e0e0e0",type:"ds",weak:!0}),r.push({left:e,right:n,color:"#1565c0",type:"tp"})}else r.push({left:e,right:l,color:"#78909c",type:"ds"}),t.push({template:f,parentDs:t[l].ds,ws:e})})),a.length&&n.flattenTree(a,t,r,c,l)}))}}],r&&Ut(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){return(t=Qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e){return function(e){if(Array.isArray(e))return $t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qt(n.key),n)}}function Qt(e){var t=function(e,t){if("object"!==zt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===zt(t)?t:String(t)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function er(e){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},er(e)}var tr={button:{margin:"0 10px 0"},addButton:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",color:"rgba(255, 215, 0, 1)",boxShadow:"1px",marginTop:-3},connect:{marginLeft:-9,marginRight:-5,zIndex:2,marginTop:30}},rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(f,e);var r,n,o,a,l=(o=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=er(o);if(a){var r=er(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),t=l.call(this,e);var r=e.workspaces,n=e.cellsWorkspaces,o=r.filter((function(e){return 0===n.filter((function(t){return t.UUID===e.id})).length})),i=r.filter((function(e){return n.filter((function(t){return t.UUID===e.id})).length>0})),a=n.filter((function(e){return r.filter((function(t){return t.id===e.UUID})).length>0}));return t.state={cellsWorkspaces:Kt(a),workspaces:o,mappedWorkspaces:i,showDatasources:!0,showTemplatePaths:!0,datasources:[],templatePaths:[],offset:0,limit:10},t.loader=new Q,t}return r=f,(n=[{key:"T",value:function(e){var t=this.props.pydio;return t.MessageHash["migration.step.mapper."+e]||t.MessageHash["migration."+e]||e}},{key:"componentDidMount",value:function(){this.loadDatasources(),this.loadTemplatePaths()}},{key:"loadDatasources",value:function(){var e=this;this.loader.loadDataSources().then((function(t){e.setState({datasources:t})}))}},{key:"loadTemplatePaths",value:function(){var e=this;this.loader.loadTemplatePaths().then((function(t){e.setState({templatePaths:[null].concat(Kt(t))})}))}},{key:"toggleRemap",value:function(e,t){var r,n,o=this.state,i=o.workspaces,a=o.mappedWorkspaces,u=this.props.workspaces.filter((function(e){return e.id===t.UUID}))[0];e?(r=i.filter((function(e){return e.id!==t.UUID})),n=[].concat(Kt(a),[u])):(r=[].concat(Kt(i),[u]),n=a.filter((function(e){return e.id!==t.UUID}))),this.setState({workspaces:r,mappedWorkspaces:n})}},{key:"mapping",get:function(){var e=this.state,t=e.mapping,r=(e.datasources,e.templatePaths),n=e.workspaces;if(t)return t;var o=new Gt(n.map((function(e){return Ht.extractPath(e)})),"/"),i=n.map((function(e){return{workspace:e}}));return(i=i.map((function(e,t){var r=o.getNewRoots((function(e){return e.ws===t}))[0].parentDs;return Xt(Xt({},e),{},{datasourcePath:r,datasource:{}})}))).map((function(e,t){var n=e.datasource,i=o.getNewRoots((function(e){return e.template&&e.ws===t}))[0],a=i.parentDs,u=i.template,s="Path = DataSources."+n.Name+' + "'+u.substring(a.length)+'";';s=(s=s.replace(/AJXP_USER/g,'" + User.Name + "')).replace(/ \+ "";$/,";");var c=r.filter((function(e){return e&&nr(e.MetaStore.resolution)===s}))[0];return Xt(Xt({},e),{},{templatePath:c||null,rootNodePath:u.substring(a.length)})}))}},{key:"linkWorkspacesToDatasources",get:function(){var e=this.state,t=e.datasources,r=e.highlight,n=e.selected,o=e.workspaces,i=e.offset,a=e.limit,u=this.mapping,s=Math.min(o.length-i,a),c=o.slice(i,i+s);return this.getLinks(c,t,(function(e,t){return u.filter((function(r){var n=r.workspace,o=r.datasource;return n==e&&o==t}))[0]}),(function(e){return e.workspace===n?"#7C0A02":e.workspace===r?"#000000":"#cccccc"}))}},{key:"linkWorkspacesToTemplatePaths",get:function(){var e=this.state,t=e.templatePaths,r=e.highlight,n=e.selected,o=e.workspaces,i=e.offset,a=e.limit,u=this.mapping,s=Math.min(o.length-i,a),c=o.slice(i,i+s);return this.getLinks(c,t,(function(e,t){return u.filter((function(r){var n=r.workspace,o=r.templatePath,i=r.datasource;return n==e&&o==t&&i&&i.Name}))[0]}),(function(e){return e.workspace===n?"#7C0A02":e.workspace===r?"#000000":"#cccccc"}))}},{key:"linkDatasourcesToTemplatePaths",get:function(){var e=this.state,t=e.datasources,r=e.templatePaths,n=e.highlight,o=e.selected,i=this.mapping;return this.getLinks(t,r,(function(e,t){return i.filter((function(t){return t.datasource==e})).filter((function(e){return e.templatePath==t}))[0]}),(function(e){return e.workspace===o?"#7C0A02":e.workspace===n?"#000000":"#cccccc"}))}},{key:"linkDatasourcesToWorkspaces",get:function(){var e=this.state,t=e.datasources,r=e.highlight,n=e.selected,o=e.workspaces,i=e.offset,a=e.limit,u=this.mapping,s=Math.min(o.length-i,a),c=o.slice(i,i+s);return this.getLinks(t,c,(function(e,t){return u.filter((function(r){var n=r.workspace,o=r.datasource;return n==t&&o==e}))[0]}),(function(e){return e.workspace===n?"#7C0A02":e.workspace===r?"#000000":"#cccccc"}))}},{key:"linkTemplatePathsToWorkspaces",get:function(){var e=this.state,t=e.templatePaths,r=e.highlight,n=e.selected,o=e.workspaces,i=e.offset,a=e.limit,u=this.mapping,s=Math.min(o.length-i,a),c=o.slice(i,i+s);return this.getLinks(t,c,(function(e,t){return u.filter((function(t){return t.templatePath==e})).filter((function(e){return e.workspace==t})).filter((function(e){return e.datasource.Name}))[0]}),(function(e){return e.workspace===n?"#7C0A02":e.workspace===r?"#000000":"#cccccc"}))}},{key:"linkWorkspacesToWorkspaces",get:function(){var e=this.state,t=(e.datasources,e.highlight),r=e.selected,n=e.workspaces,o=e.offset,i=e.limit,a=this.mapping,u=Math.min(n.length-o,i),s=n.slice(o,o+u);return this.getLinks(s,s,(function(e,t){return a.filter((function(r){var n=r.workspace;return n==e&&n==t}))[0]}),(function(e){return e.workspace===r?"#7C0A02":e.workspace===t?"#000000":"#cccccc"}))}},{key:"getLinks",value:function(e,t,r,n){return e.reduce((function(e,o,i){return[].concat(Kt(e),Kt(t.reduce((function(e,t,a){var u=r(o,t);return u?[].concat(Kt(e),[{left:i,right:a,color:n(u)}]):e}),[])))}),[])}},{key:"handleSelectWorkspace",value:function(e){this.setState({selected:e})}},{key:"handleSelectDatasource",value:function(e){var t=this.state.selected,r=this.mapping.map((function(r){return r.workspace===t?(delete r.datasource,delete r.templatePath,Xt(Xt({},r),{},{datasource:e})):r}));this.setState({mapping:r})}},{key:"handleSelectTemplatePath",value:function(e){var t=this.state,r=t.datasources,n=t.selected,o=this.mapping,i=or(nr(e.MetaStore.resolution)),a=r.filter((function(e){return e.Name===i}))[0],u=o.map((function(t){return t.workspace===n?(delete t.datasource,delete t.templatePath,Xt(Xt({},t),{},{datasource:a,templatePath:e})):t}));this.setState({mapping:u,selected:null})}},{key:"handleSelectRootNode",value:function(e,t){var r=this.mapping.map((function(r){return r.workspace===e?Xt(Xt({},r),{},{rootNode:t,valid:!0}):r}));this.setState({mapping:r})}},{key:"handleInvalidRootNode",value:function(e){var t=this.mapping.map((function(t){return t.workspace===e?Xt(Xt({},t),{},{valid:!1}):t}));this.setState({mapping:t})}},{key:"handleShowPath",value:function(e){this.setState({highlight:e})}},{key:"handleHidePath",value:function(){var e=this.state;delete e.highlight,this.setState(e)}},{key:"handleShowDatasources",value:function(){this.setState({showDatasources:!0})}},{key:"handleHideDatasources",value:function(){this.setState({showDatasources:!1})}},{key:"handleShowTemplatePaths",value:function(){this.setState({showTemplatePaths:!0})}},{key:"handleHideTemplatePaths",value:function(){this.setState({showTemplatePaths:!1})}},{key:"handleCreateDatasource",value:function(){var e,t=this,r=this.state.selected,n=this.props,o=n.pydio,i=n.openRightPane,a=n.closeRightPane,s=r.display,l=r.accessType,f=r.parameters;if("s3"===l)(e=new c.ObjectDataSource).Name=u().computeStringSlug(s).replace(/-/g,""),e.StorageType="S3",e.ApiKey=f.API_KEY,e.ApiSecret=f.SECRET_KEY,e.ObjectsBucket=f.CONTAINER,e.StorageConfiguration={},f.STORAGE_URL&&(e.StorageConfiguration={customEndpoint:f.STORAGE_URL}),f.PATH&&(e.ObjectsBaseFolder=f.PATH);else if("fs"===l){e=new c.ObjectDataSource;var p=f.PATH||"";r&&(p=this.mapping.filter((function(e){return e.workspace===r}))[0].datasourcePath),e.Name=u().computeStringSlug(p.substr(1)).replace(/-/g,""),e.StorageConfiguration={},e.StorageConfiguration.folder=p}i({COMPONENT:AdminWorkspaces.DataSourceEditor,PROPS:{ref:"editor",pydio:o,create:!0,dataSource:e,storageTypes:[],closeEditor:function(){a()},reloadList:function(){t.loadDatasources()}}})}},{key:"handleCreateTemplatePath",value:function(){var e=this,r=Re().findDOMNode(this.container),n=Re().findDOMNode(this.templatePaths),o=r.getBoundingClientRect(),i=n.getBoundingClientRect(),a=this.state.selected,u=this.mapping.filter((function(e){var t=e.workspace;return a===t}))[0],s=AdminWorkspaces,c=s.TemplatePathEditor,l=new(0,s.TemplatePath),f=' + "'+u.rootNodePath+'";';f=(f=f.replace(/AJXP_USER/g,'" + User.Name + "')).replace(/ \+ "";$/,";"),l.setName(a.slug),l.setValue("Path = DataSources."+u.datasource.Name+f),this.setState({dialogComponent:t().createElement(c,{dataSources:this.state.datasources,node:l,oneLiner:!0,onSave:function(){e.loadTemplatePaths(),e.setState({dialogComponent:null})},onClose:function(){return e.setState({dialogComponent:null})}}),dialogStyle:{position:"absolute",zIndex:2,background:"white",top:i.y-o.y+i.height,left:i.x+r.scrollLeft-o.x,width:i.w,height:48}})}},{key:"handleNext",value:function(){var e=this.props.onMapped,t=this.state.mappedWorkspaces,r=this.mapping,n={mapping:{},create:{},existing:{}};t.forEach((function(e){n.mapping[e.id]=e.id,n.existing[e.id]=e})),r.filter((function(e){return e.rootNode})).map((function(e){var t=e.workspace,r=e.rootNode,o=new AdminWorkspaces.Workspace,i=o.getModel();i.UUID=t.id,i.Label=t.display,i.Description=t.display,i.Slug=t.slug,i.Attributes.DEFAULT_RIGHTS="",t.parameters.DEFAULT_RIGHTS,t.features&&t.features["meta.syncable"]&&"true"===t.features["meta.syncable"].REPO_SYNCABLE&&(i.Attributes.ALLOW_SYNC="true"),i.RootNodes={},Object.keys(r).forEach((function(e){var t=r[e];i.RootNodes[t.Uuid]=t})),n.mapping[t.id]=i.UUID,n.create[t.id]=o})),e(n)}},{key:"isInvalid",value:function(e){return this.mapping.filter((function(t){var r=t.workspace,n=t.valid;return r===e&&!1===n})).length>0}},{key:"isValid",value:function(e){return this.mapping.filter((function(t){var r=t.workspace,n=t.valid;return r===e&&!0===n})).length>0}},{key:"isDatasourceSelectable",value:function(e){var t=this.state.selected;return t&&t.accessType===("string"==typeof e.StorageType&&e.StorageType.toLowerCase()||"fs")}},{key:"isDatasourceHighlighted",value:function(e){var t=this.state.highlight;return this.mapping.filter((function(r){var n=r.workspace,o=r.datasource;return t===n&&o===e})).length>0}},{key:"isTemplatePathSelectable",value:function(e){return this.state.selected&&e}},{key:"isTemplatePathHighlighted",value:function(e){var t=this.state.highlight;return this.mapping.filter((function(r){var n=r.workspace,o=r.datasource,i=r.templatePath;return t===n&&o&&o.Name&&i===e})).length>0}},{key:"paginator",value:function(){var e,r,n=this,o=this.state,i=o.workspaces,a=o.offset,u=o.limit;return i.length<=u?null:(i.length-a>u&&(e=a+u),a>0&&(r=a-u),t().createElement("div",{style:{display:"flex",justifyContent:"center",position:"absolute",top:-13,left:0,right:0}},t().createElement(s.FlatButton,{primary:!0,icon:t().createElement(s.FontIcon,{className:"mdi mdi-chevron-left"}),label:this.T("next10")+u,disabled:void 0===r,onClick:function(){n.setState({offset:r})}}),t().createElement(s.FlatButton,{primary:!0,icon:t().createElement(s.FontIcon,{className:"mdi mdi-chevron-right"}),label:this.T("prev10")+u,labelPosition:"before",disabled:void 0===e,onClick:function(){n.setState({offset:e})}})))}},{key:"render",value:function(){var e=this,r=this.props,n=r.loading,o=r.error,a=r.progress,u=r.onBack,c=this.state,l=c.selected,f=c.workspaces,p=c.datasources,d=c.templatePaths,h=c.dialogComponent,y=c.dialogStyle,m=c.mappedWorkspaces,b=c.cellsWorkspaces,v=c.offset,g=c.limit,w=this.state,O=w.showDatasources,k=w.showTemplatePaths,T=this.mapping.map((function(e){e.workspace;var t=e.datasource,r=e.templatePath,n=e.rootNodePath;return r?r.Path:t&&t.Name?t.Name+n:void 0})),P=Math.min(f.length-v,g);return t().createElement("div",{ref:function(t){return e.container=t},style:{position:"relative",overflowX:"scroll"}},b.length>0&&t().createElement("div",{style:{padding:16}},this.T("already")," :",b.map((function(r){var n=r.Label+" ("+r.UUID+")",o=m.filter((function(e){return r.UUID===e.id})).length;return t().createElement(s.Checkbox,{label:n,checked:o,onCheck:function(t,n){e.toggleRemap(n,r)}})}))),t().createElement("div",{style:{padding:16}},!n&&t().createElement("div",null,this.T("wsnumber").replace("%s",f.length)),n&&t().createElement("div",null,this.T("loading"),a&&t().createElement(s.LinearProgress,{mode:"determinate",max:a.max,value:a.value})),o&&t().createElement("div",{style:{color:"red"}},this.T("loading.error").replace("%s",o))),h&&t().createElement(s.Paper,{style:y},h),t().createElement("div",{style:{display:"flex",marginLeft:16,padding:16,backgroundColor:"#fafafa",overflowX:"scroll"},onMouseLeave:function(){return e.handleHidePath()}},t().createElement(s.Divider,null),t().createElement(s.Card,null,t().createElement(s.CardHeader,{title:this.T("p8.title"),openIcon:t().createElement(s.IconMenu,{iconButtonElement:t().createElement(s.FontIcon,{className:"mdi mdi-dots-vertical"})},t().createElement(s.MenuItem,{primaryText:this.T("p8.ds.show"),onClick:function(){return e.handleShowDatasources()}}),t().createElement(s.MenuItem,{primaryText:this.T("p8.tpl.show"),onClick:function(){return e.handleShowTemplatePaths()}})),closeIcon:t().createElement(s.IconMenu,{iconButtonElement:t().createElement(s.FontIcon,{className:"mdi mdi-dots-vertical"})},t().createElement(s.MenuItem,{primaryText:this.T("p8.ds.show"),onClick:function(){return e.handleShowDatasources()}}),t().createElement(s.MenuItem,{primaryText:this.T("p8.tpl.show"),onClick:function(){return e.handleShowTemplatePaths()}})),showExpandableButton:!0}),t().createElement(s.CardText,{style:{position:"relative",minWidth:400}},t().createElement(Ht,{workspaces:f.slice(v,v+P),selected:l,isValid:function(t){return e.isValid(t)},isInvalid:function(t){return e.isInvalid(t)},onHover:function(t){return e.handleShowPath(t)},onSelect:function(t){return e.handleSelectWorkspace(t)}}),this.paginator())),O&&t().createElement(ue,{style:tr.connect,leftNumber:P,rightNumber:p.length,links:this.linkWorkspacesToDatasources}),O&&t().createElement(s.Card,null,t().createElement(s.CardHeader,{title:this.T("cells.title"),closeIcon:t().createElement(s.FontIcon,{className:"mdi mdi-eye-off",onClick:function(){return e.handleHideDatasources()}}),showExpandableButton:!0}),t().createElement(s.CardText,null,t().createElement(Je,{datasources:p,selectable:function(t){return e.isDatasourceSelectable(t)},highlighted:function(t){return e.isDatasourceHighlighted(t)},onSelect:function(t){return e.handleSelectDatasource(t)}})),t().createElement(s.CardActions,null,l&&t().createElement(s.RaisedButton,{label:this.T("createds"),style:tr.button,icon:t().createElement(s.FontIcon,{className:"mdi mdi-plus-circle-outline",style:tr.addButton}),onClick:function(){return e.handleCreateDatasource()}}))),k&&(O&&t().createElement(ue,{style:tr.connect,leftNumber:p.length,rightNumber:d.length,links:this.linkDatasourcesToTemplatePaths})||t().createElement(ue,{style:tr.connect,leftNumber:P,rightNumber:d.length,links:this.linkWorkspacesToTemplatePaths})),k&&t().createElement(s.Card,{style:{position:"relative"}},t().createElement(s.CardHeader,{title:this.T("tpath.title"),closeIcon:t().createElement(s.FontIcon,{className:"mdi mdi-eye-off",onClick:function(){return e.handleHideTemplatePaths()}}),showExpandableButton:!0}),t().createElement(s.CardText,null,t().createElement(lt,{style:{flex:1},templatePaths:d,selectable:function(t){return e.isTemplatePathSelectable(t)},highlighted:function(t){return e.isTemplatePathHighlighted(t)},onSelect:function(t){return e.handleSelectTemplatePath(t)}})),t().createElement(s.CardActions,null,l&&t().createElement(s.RaisedButton,{label:this.T("tpath.create"),ref:function(t){return e.templatePaths=t},style:tr.button,icon:t().createElement(s.FontIcon,{className:"mdi mdi-plus-circle-outline",style:tr.addButton}),onClick:function(){return e.handleCreateTemplatePath()}}))),k&&t().createElement(ue,{style:tr.connect,leftNumber:d.length,rightNumber:P,links:this.linkTemplatePathsToWorkspaces}),!k&&O&&t().createElement(ue,{style:tr.connect,leftNumber:p.length,rightNumber:P,links:this.linkDatasourcesToWorkspaces}),!k&&!O&&t().createElement(ue,{style:tr.connect,leftNumber:P,rightNumber:P,links:this.linkWorkspacesToWorkspaces}),t().createElement(s.Card,{style:{marginRight:16}},t().createElement(s.CardHeader,{title:this.T("nodes.title")}),t().createElement(s.CardText,null,t().createElement(Ot,{pydio:i().getInstance(),style:{flex:1},workspaces:f.slice(v,v+P),paths:T.slice(v,v+P),onSelect:function(t,r){return e.handleSelectRootNode(t,r)},onError:function(t){return e.handleInvalidRootNode(t)}}))),t().createElement("div",{style:{minWidth:8}})),t().createElement("div",{style:{padding:"20px 16px 2px"}},t().createElement(s.RaisedButton,{label:this.T("back"),onClick:function(){return u()}}),"",t().createElement(s.RaisedButton,{label:this.T("next"),primary:!0,onClick:function(){e.handleNext()}})))}}])&&Yt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(t().Component),nr=function(e){return e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/(\r\n|\n|\r)/gm,"")},or=function(e){return e.replace(/^Path = DataSources\.([^ ]*) \+ .*$/,"$1")};function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lr(n.key),n)}}function ur(e,t){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ur(e,t)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}function lr(e){var t=function(e,t){if("object"!==ir(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ir(t)?t:String(t)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ur(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cr(o);if(a){var r=cr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}(this,e)});function c(e){var t,r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r=sr(t=u.call(this,e)),o=void 0,(n=lr(n="_loader"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t._loader=new Q,t.state={loaded:!1,workspaces:[],cellsWorkspaces:[]},t}return r=c,(n=[{key:"T",value:function(e){var t=i().getInstance().MessageHash;return t["migration.step.ws."+e]||t["migration."+e]||t[e]||e}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.url,n=t.user,o=t.pwd;AdminWorkspaces.Workspace.listWorkspaces().then((function(t){e.setState({cellsWorkspaces:t.Workspaces||[]})})).then((function(){e._loader.loadWorkspaces(r,n,o).catch((function(t){e.setState({err:t,loaded:!0})})).then((function(t){e.setState({workspaces:t,loaded:!0})}))}))}},{key:"startListeningToJob",value:function(){var e=this;this._loader=new Q,this._loader.observe("progress",(function(t){e.setState({workspacesProgress:t})}))}},{key:"render",value:function(){var e=this.props,r=e.onChange,n=e.onComplete,o=e.onBack,i=e.openRightPane,a=e.closeRightPane,u=e.pydio,c=e.styles,l=this.state,f=l.workspaces,p=l.cellsWorkspaces;return l.loaded?t().createElement(s.Step,this.props,t().createElement(s.StepLabel,null,this.T("title")),t().createElement(s.StepContent,null,t().createElement("div",{style:c.stepLegend},this.T("legend"),t().createElement("ul",null,t().createElement("li",null,this.T("step1")),t().createElement("li",null,this.T("step2")),t().createElement("li",null,this.T("step3")),t().createElement("li",null,this.T("step4")))),t().createElement(rr,{cellsWorkspaces:p,workspaces:f.filter((function(e){return("fs"===e.accessType||"s3"===e.accessType)&&!e.isTemplate})),onBack:function(){return o()},pydio:u,openRightPane:i,closeRightPane:a,onMapped:function(e){var t=e.mapping,o=e.create,i=e.existing;r({workspaceMapping:t,workspaceCreate:o,workspaceExisting:i}),n()}}))):t().createElement(s.Step,this.props,t().createElement(s.StepLabel,null,this.T("title")," ",this.T("loading")),t().createElement(s.StepContent,null,t().createElement("div",{style:{textAlign:"center",padding:40}},t().createElement(s.CircularProgress,{mode:"indeterminate"}))))}}])&&ar(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr.apply(this,arguments)}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==pr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===pr(o)?o:String(o)),n)}var o}function yr(e,t){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yr(e,t)}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mr(o);if(a){var r=mr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"T",value:function(e){return i().getInstance().MessageHash["migration."+e]||e}},{key:"render",value:function(){var e=this.props.advanced,r=t().createElement("div",null,t().createElement("p",null,this.T("step.prereq.welcome"),t().createElement("br",null),this.T("step.prereq.check")),t().createElement("div",{style:{display:"flex"}},t().createElement("div",{style:{border:"2px solid rgb(96, 125, 138)",borderRadius:8,padding:"8px 16px",flex:1,marginRight:8}},t().createElement("h4",{style:{color:"#607D8B",paddingTop:0}},this.T("step.prereq.step1")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.check.adminpydio")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.check.install")," : ",t().createElement("a",{href:"https://download.pydio.com/pub/plugins/archives/action.migration.tar.gz",target:"_blank"},t().createElement(s.FontIcon,{style:{fontSize:"inherit"},className:"mdi mdi-open-in-new"})))),t().createElement("div",{style:{border:"2px solid rgb(96, 125, 138)",borderRadius:8,padding:"8px 16px",flex:1}},t().createElement("h4",{style:{color:"#607D8B",paddingTop:0}},this.T("step.prereq.step2")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.check.admincell")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.check.copy"))),t().createElement("div",{style:{border:"2px solid rgb(96, 125, 138)",borderRadius:8,padding:"8px 16px",flex:1,marginLeft:8}},t().createElement("h4",{style:{color:"#607D8B",paddingTop:0}},this.T("step.prereq.step3")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.ds.create")),e&&t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.ds.tpl.ed")),!e&&t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-alert",style:{fontSize:"inherit"}})," ",this.T("step.prereq.ds.tpl.home")),t().createElement("p",null,t().createElement(s.FontIcon,{className:"mdi mdi-check",style:{fontSize:"inherit"}})," ",this.T("step.prereq.ds.done")))));return t().createElement(w,dr({},this.props,{title:this.T("step.prereq.title"),legend:r,nextLabel:this.T("step.prereq.start")}))}}])&&hr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function gr(){return gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gr.apply(this,arguments)}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===vr(o)?o:String(o)),n)}var o}function Or(e,t){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Or(e,t)}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}var Tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(c,e);var r,n,o,a,u=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kr(o);if(a){var r=kr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"T",value:function(e){return i().getInstance().MessageHash["migration."+e]||e}},{key:"render",value:function(){var e=this.props.advanced,r=t().createElement("div",null,t().createElement("p",{style:{border:"2px solid #C62828",color:"#C62828",borderRadius:4,padding:12,fontWeight:500,marginBottom:8}},this.T("step.disclaimer"),t().createElement("br",null),t().createElement("br",null),this.T("step.disclaimer."+(e?"ed":"home")))),n=[];return e?n.push(t().createElement(s.RaisedButton,{label:this.T("step.disclaimer.support"),onClick:function(){window.open("https://pydio.com/en/user/login")}})):n.push(t().createElement(s.RaisedButton,{label:this.T("step.disclaimer.quote"),onClick:function(){window.open("https://pydio.com/en/pricing/contact")}})),t().createElement(w,gr({},this.props,{title:this.T("step.disclaimer.title"),legend:r,nextLabel:this.T("step.disclaimer.start"),otherButtons:n}))}}])&&wr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);const Pr=require("pydio/http/resources-manager");var jr=r.n(Pr);function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xr(e,t,r){return(t=Cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cr(n.key),n)}}function Cr(e){var t=function(e,t){if("object"!==Er(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Er(t)?t:String(t)}function Ir(e,t){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ir(e,t)}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}var Mr=i().requireLib("components").MaterialTable,Dr=i().requireLib("boot").moment,Wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(u,e);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ar(o);if(i){var r=Ar(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={activity:[],loading:!1},t}return r=u,(n=[{key:"T",value:function(e){return this.props.pydio.MessageHash["migration."+e]||e}},{key:"componentDidMount",value:function(){this.loadActivity(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.task||this.loadActivity(e),e.task&&this.props.task&&e.task.ID!==this.props.task.ID&&this.loadActivity(e)}},{key:"loadActivity",value:function(e){var t=this,r=e.task;if(r){var n=r.JobID+"-"+r.ID.substr(0,8);return jr().loadClass("EnterpriseSDK").then((function(e){var r=new c.LogListLogRequest;r.Query='+OperationUuid:"'+n+'"',r.Page=0,r.Size=100,r.Format=c.ListLogRequestLogFormat.constructFromObject("JSON");var o=new e.EnterpriseLogServiceApi(U().getRestClient());t.setState({loading:!0}),o.audit(r).then((function(e){t.setState({activity:e.Logs||[],loading:!1})})).catch((function(){t.setState({activity:[],loading:!1})}))}))}}},{key:"render",value:function(){var e=this.props,r=e.pydio,n=e.task,o=e.styles,i=this.state.activity,a=[{name:"Ts",label:r.MessageHash["settings.17"],style:{width:"25%"},headerStyle:{width:"25%"},renderCell:function(e){return Dr(1e3*e.Ts).fromNow()}},{name:"Msg",label:r.MessageHash["ajxp_admin.logs.message"]}];return t().createElement("div",{className:"vertical-layout",style:{height:"100%"}},t().createElement("div",{style:_r({},o.body.block.headerFull)},this.T("logs.legend").replace("%s",n.ID)),t().createElement("div",{className:"layout-fill vertical-layout"},t().createElement(Mr,{columns:a,data:i,showCheckboxes:!1,emptyStateString:this.T("logs.empty")})))}}])&&Rr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(t().Component),Nr=r(99),Hr=r.n(Nr);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Lr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Lr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ur(e){var t=i().getInstance().MessageHash;return t["migration.action."+e]||t["migration."+e]||t[e]||e}function Gr(e,t){var r=e.url,n=e.user,o=e.pwd,i=e.skipVerify;return[{name:"actions.etl.users",params:{left:"pydio8",right:"cells-local",splitUsersRoles:"true",cellAdmin:e.cellAdmin,url:r,user:n,password:o,skipVerify:i?"true":"false"}}]}function zr(e,t){var r=e.url,n=e.user,o=e.pwd,i=e.skipVerify,a=e.cellAdmin,u=e.workspaceMapping;return[{name:"actions.etl.p8-workspaces",params:{type:"pydio8",url:r,user:n,password:o,skipVerify:i?"true":"false",mapping:JSON.stringify(u),cellAdmin:a}}]}function Vr(e,t){var r=e.workspaceCreate;return e.localStatus,Object.keys(r).forEach((function(e){r[e].save().then((function(){t(Ur("createws.success").replace("%s",r[e].getModel().Label))})).catch((function(n){t(Ur("createws.fail").replace("%1",r[e].getModel().Label).replace("%2",n.message))}))})),[]}function Xr(e){var t=e.workspaceMapping,r=e.workspaceCreate,n=void 0===r?{}:r;return React.createElement("div",null,Ur("createws.summary"),Object.keys(t).length>0&&React.createElement("table",{style:{width:400,marginTop:6}},React.createElement("tr",null,React.createElement("td",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px"}},Ur("createws.head.pydio")),React.createElement("td",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px"}},Ur("createws.head.cells")),React.createElement("td",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px"}},Ur("createws.head.status"))),Object.keys(t).map((function(e){return React.createElement("tr",null,React.createElement("td",{style:{padding:"2px 4px"}},e),React.createElement("td",{style:{padding:"2px 4px"}},t[e]),React.createElement("td",{style:{padding:"2px 4px"}},n[e]?Ur("createws.notexists"):Ur("createws.exists")))}))))}function Jr(e,t){var r=e.cellAdmin,n=e.url,o=e.user,i=e.pwd,a=e.skipVerify,u=e.workspaceMapping,s=e.sharesFeatures;return[{name:"actions.etl.shares",params:Fr({left:"pydio8",right:"cells-local",mapping:JSON.stringify(u),url:n,user:o,cellAdmin:r,skipVerify:a?"true":"false",password:i},s)}]}function Kr(e){var t=e.sharesFeatures;return React.createElement("div",null,t&&t.shareType&&React.createElement("div",null,"LINK"===t.shareType?Ur("share.linksonly"):Ur("share.cellsonly"),"."),(!t||!t.shareType)&&React.createElement("div",null,Ur("share.all")),t&&t.ownerId&&React.createElement("div",null,Ur("share.user").replace("%s",t.ownerId)))}function $r(e,t){var r,n,o=e.url,i=e.user,a=e.pwd,u=e.skipVerify,s=e.workspaceMapping,l=e.metadataFeatures,f=e.metadataMapping,p=e.metadataCreate,d=l.indexOf("watches")>-1||l.indexOf("bookmarks")>-1,h=l.indexOf("filesMeta")>-1,y=[];if(d&&(n={name:"actions.etl.p8-global-meta",params:{url:o,user:i,password:a,skipVerify:u?"true":"false",mapping:JSON.stringify(s)}},y.push(n)),h&&(r={name:"actions.etl.p8-legacy-meta",params:{metaMapping:JSON.stringify(f)}},y.push(r)),p.length){var m=new c.UserMetaServiceApi(U().getRestClient()),b=new c.IdmUpdateUserMetaNamespaceRequest;b.Operation=c.UpdateUserMetaNamespaceRequestUserMetaNsOp.constructFromObject("PUT"),b.Namespaces=p,m.updateUserMetaNamespace(b).then((function(e){t(Ur("meta.success"))})).catch((function(e){t(Ur("meta.fail").replace("%s",e.message))}))}return y}function Yr(e){var t=e.metadataFeatures,r=e.metadataMapping;return React.createElement("div",null,t&&React.createElement("div",null,Ur("meta.summary")," ",t.join(", ")),r&&React.createElement("div",null,Ur("meta.files"),React.createElement("table",{style:{width:400,marginTop:6}},React.createElement("tr",null,React.createElement("td",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px"}},Ur("createws.head.pydio")),React.createElement("td",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px"}},Ur("createws.head.cells"))),Object.keys(r).map((function(e){return React.createElement("tr",null,React.createElement("td",{style:{padding:"2px 4px"}},e),React.createElement("td",{style:{padding:"2px 4px"}},r[e]))})))))}var Qr=["activeStep","url","skipVerify","user","pwd","features","task","showLogs","localStatus","previousTasks"];function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tn.apply(this,arguments)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ln(n.key),n)}}function an(e,t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},an(e,t)}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sn(e)}function cn(e,t,r){return(t=ln(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ln(e){var t=function(e,t){if("object"!==Zr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Zr(t)?t:String(t)}var fn=i().requireLib("boot"),pn=fn.JobsStore,dn=fn.moment,hn=i().requireLib("hoc").ModernSelectField,yn={stepLegend:{color:"#757575",padding:"6px 0"}},mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(f,e);var r,n,o,a,l=(o=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sn(o);if(a){var r=sn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return un(e)}(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),cn(un(t=l.call(this,e)),"_observer",void 0);var r={users:{label:t.T("feature.users"),value:!1,action:Gr},workspaces:{label:t.T("feature.workspaces"),value:!1,action:Vr,summary:Xr},acls:{label:t.T("feature.acls"),value:!1,action:zr,depends:"workspaces"},metadata:{label:t.T("feature.meta"),value:!1,action:$r,summary:Yr,depends:"workspaces"},shares:{label:t.T("feature.shares"),value:!1,action:Jr,summary:Kr,depends:"workspaces"}};return t.state={activeStep:0,url:"",user:"importer",pwd:"",cellAdmin:e.pydio.user.id,skipVerify:!1,features:r,workspaces:[],workspaceMapping:{},localStatus:[],previousTasks:[],showLogs:null},t}return r=f,(n=[{key:"T",value:function(e){return this.props.pydio.MessageHash["migration.dash."+e]||this.props.pydio.MessageHash["migration."+e]||e}},{key:"loadPreviousTasks",value:function(){var e=this;pn.getInstance().getAdminJobs(null,null,"pydio8-data-import",20).then((function(t){if(t.Jobs&&t.Jobs.length){var r=t.Jobs[0].Tasks||[];r.sort(u().arraySorter("StartTime")),r.reverse(),e.setState({previousTasks:r})}}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.pydio;this._observer=function(t){var r=t.Job,n=t.TaskUpdated,o=c.JobsJob.constructFromObject(r);if("pydio8-data-import"===o.ID){var i=c.JobsTask.constructFromObject(n);e.setState({job:o,task:i})}},t.observe("task_message",this._observer),this.loadPreviousTasks()}},{key:"componentWillUnmount",value:function(){this._observer&&(this.props.pydio.stopObserving("task_message",this._observer),this._observer=null)}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.pydio,a=n.openRightPane,u=n.closeRightPane,c=n.advanced,l=n.currentNode,f=this.state,p=f.activeStep,d=f.url,h=f.skipVerify,y=f.user,m=f.pwd,b=f.features,v=f.task,g=f.showLogs,O=f.localStatus,k=f.previousTasks,T=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(f,Qr),P=AdminComponents.AdminStyles(),j=t().createElement(hn,{fullWidth:!0,value:g,onChange:function(e,t,n){r.setState({showLogs:n})},variant:"compact"},t().createElement(s.MenuItem,{value:null,primaryText:this.T("job.new")}),k.length>0&&t().createElement(s.Divider,null),k.map((function(e){var r;return r=e.EndTime?e.Status+" "+dn(new Date(1e3*e.EndTime)).fromNow():e.Status+" "+dn(new Date(1e3*e.StartTime)).fromNow(),t().createElement(s.MenuItem,{label:r,primaryText:r,value:e})})));if(g)e=t().createElement(s.Paper,P.body.block.props,t().createElement(Wr,{pydio:o,task:g,styles:P}));else{var E={pydio:o,onBack:function(){return r.setState({activeStep:p-1})},onComplete:function(){return r.setState({activeStep:p+1})},onChange:function(e){return r.setState(e)},url:d,skipVerify:h,user:y,pwd:m,styles:yn,hasRunning:v&&"Running"===v.Status};e=t().createElement(s.Paper,tn({},P.body.block.props,{style:nn(nn({},P.body.block.container),{},{paddingBottom:16})}),t().createElement(s.Stepper,{style:{display:"flex"},orientation:"vertical",activeStep:p},t().createElement(Tr,tn({},E,{onBack:null,advanced:c})),t().createElement(br,tn({},E,{onBack:null,advanced:c})),t().createElement(S,tn({},E,{url:d,skipVerify:h,user:y,pwd:m})),t().createElement(H,tn({},E,{features:b,onChange:function(e){return r.setState({features:nn(nn({},b),e)})}})),Object.keys(b).filter((function(e){return"configs"===e&&b[e].value})).map((function(e){return t().createElement(w,tn({},E,{title:r.T("feature.configs"),legend:r.T("feature.configs.legend"),style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"}}))})),Object.keys(b).filter((function(e){return"users"===e&&b[e].value})).map((function(e){return t().createElement(w,tn({},E,{title:r.T("feature.users"),legend:r.T("feature.users.legend"),style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"}}))})),Object.keys(b).filter((function(e){return"workspaces"===e&&b[e].value})).map((function(e){return t().createElement(fr,tn({},E,{style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"},openRightPane:a,closeRightPane:u}))})),Object.keys(b).filter((function(e){return"acls"===e&&b[e].value})).map((function(e){return t().createElement(w,tn({},E,{title:r.T("feature.acls"),legend:r.T("feature.acls.legend"),style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"}}))})),Object.keys(b).filter((function(e){return"metadata"===e&&b[e].value})).map((function(e){return t().createElement(ke,tn({},E,{style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"}}))})),Object.keys(b).filter((function(e){return"shares"===e&&b[e].value})).map((function(e){return t().createElement(_e,tn({},E,{style:{flex:1,paddingRight:20,borderRight:"1px solid #e0e0e0"}}))})),t().createElement(H,tn({},E,{features:b,summary:!0,summaryState:this.state},T,{onComplete:function(){r.setState({localStatus:[]},(function(){!function(e,t){var r=e.features,n=e.cellAdmin,o=[],a=Hr()();Object.keys(r).forEach((function(i){var u=r[i];u.value&&"function"==typeof u.action&&u.action(e,t).map((function(e){e.params=Fr(Fr({},e.params),{},{cellAdmin:n,sessionUuid:a}),o.push(e)}))})),o.length&&U().getRestClient().userJob("import-p8",o).then((function(e){console.log(e)})).catch((function(e){var t=e.Detail||e.message||e;i().getInstance().UI.displayMessage("ERROR",t)}))}(r.state,(function(e){var t;r.setState({localStatus:[].concat((t=O,function(e){if(Array.isArray(e))return en(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e])})})),setTimeout((function(){r.loadPreviousTasks()}),1e3)}))}}))))}return t().createElement("div",{className:"main-layout-nav-to-stack workspaces-board"},t().createElement("div",{className:"vertical-layout",style:{width:"100%"}},t().createElement(AdminComponents.Header,{title:this.T("title"),icon:l.getMetadata().get("icon_class"),actions:[j]}),t().createElement("div",{className:"layout-fill"},(v||O.length>0)&&t().createElement(s.Paper,P.body.block.props,t().createElement("div",{style:P.body.block.headerFull},this.T("importing")),t().createElement("div",{style:{padding:16}},O.length>0&&t().createElement("div",null,O.map((function(e){return t().createElement("div",null,e)}))),v&&t().createElement("div",null,t().createElement("h6",null,v.StatusMessage),"Finished"!==v.Status&&t().createElement(s.LinearProgress,{mode:"determinate",min:0,max:100,value:100*(v.Progress||0),style:{width:"100%"}})))),e)))}}])&&on(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(t().Component)})(),window.MigrationComponents=n})();