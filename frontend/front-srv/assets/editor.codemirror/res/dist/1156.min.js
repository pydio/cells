(self.webpackChunkeditor_codemirror=self.webpackChunkeditor_codemirror||[]).push([[1156],{3532:(e,t,n)=>{var o,r,i,s;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}e=n.nmd(e),s=function(e){function t(t,n,o){var r,i=t.getWrapperElement();return(r=i.appendChild(document.createElement("div"))).className=o?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?r.innerHTML=n:r.appendChild(n),e.addClass(i,"dialog-opened"),r}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",(function(o,r,i){i||(i={}),n(this,null);var s=t(this,o,i.bottom),l=!1,c=this;function a(t){if("string"==typeof t)f.value=t;else{if(l)return;l=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),c.focus(),i.onClose&&i.onClose(s)}}var u,f=s.getElementsByTagName("input")[0];return f?(f.focus(),i.value&&(f.value=i.value,!1!==i.selectValueOnOpen&&f.select()),i.onInput&&e.on(f,"input",(function(e){i.onInput(e,f.value,a)})),i.onKeyUp&&e.on(f,"keyup",(function(e){i.onKeyUp(e,f.value,a)})),e.on(f,"keydown",(function(t){i&&i.onKeyDown&&i.onKeyDown(t,f.value,a)||((27==t.keyCode||!1!==i.closeOnEnter&&13==t.keyCode)&&(f.blur(),e.e_stop(t),a()),13==t.keyCode&&r(f.value,t))})),!1!==i.closeOnBlur&&e.on(s,"focusout",(function(e){null!==e.relatedTarget&&a()}))):(u=s.getElementsByTagName("button")[0])&&(e.on(u,"click",(function(){a(),c.focus()})),!1!==i.closeOnBlur&&e.on(u,"blur",a),u.focus()),a})),e.defineExtension("openConfirm",(function(o,r,i){n(this,null);var s=t(this,o,i&&i.bottom),l=s.getElementsByTagName("button"),c=!1,a=this,u=1;function f(){c||(c=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),a.focus())}l[0].focus();for(var h=0;h<l.length;++h){var p=l[h];!function(t){e.on(p,"click",(function(n){e.e_preventDefault(n),f(),t&&t(a)}))}(r[h]),e.on(p,"blur",(function(){--u,setTimeout((function(){u<=0&&f()}),200)})),e.on(p,"focus",(function(){++u}))}})),e.defineExtension("openNotification",(function(o,r){n(this,a);var i,s=t(this,o,r&&r.bottom),l=!1,c=r&&void 0!==r.duration?r.duration:5e3;function a(){l||(l=!0,clearTimeout(i),e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}return e.on(s,"click",(function(t){e.e_preventDefault(t),a()})),c&&(i=setTimeout(a,c)),a}))},"object"==l(t)&&"object"==l(e)?s(n(1201)):(r=[n(1201)],void 0===(i="function"==typeof(o=s)?o.apply(t,r):o)||(e.exports=i))},1156:(e,t,n)=>{var o,r,i,s;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}e=n.nmd(e),s=function(e){"use strict";function t(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new t)}function o(e){return"string"==typeof e&&e==e.toLowerCase()}function r(e,t,n){return e.getSearchCursor(t,n,{caseFold:o(t),multiline:!0})}function i(e,t,n,o,r){e.openDialog?e.openDialog(t,r,{value:o,selectValueOnOpen:!0,bottom:e.options.search.bottom}):r(prompt(n,o))}function s(e){return e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e}))}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=s(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function c(e,t,n){t.queryText=n,t.query=l(n),e.removeOverlay(t.overlay,o(t.query)),t.overlay=function(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}(t.query,o(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,o(t.query)))}function a(t,o,r,s){var l=n(t);if(l.query)return u(t,o);var a=t.getSelection()||l.lastQuery;if(a instanceof RegExp&&"x^"==a.source&&(a=null),r&&t.openDialog){var p=null,m=function(n,o){e.e_stop(o),n&&(n!=l.queryText&&(c(t,l,n),l.posFrom=l.posTo=t.getCursor()),p&&(p.style.opacity=1),u(t,o.shiftKey,(function(e,n){var o;n.line<3&&document.querySelector&&(o=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&o.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((p=o).style.opacity=.4)})))};!function(e,t,n,o,r){e.openDialog(t,o,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){f(e)},onKeyDown:r,bottom:e.options.search.bottom})}(t,h(t),a,m,(function(o,r){var i=e.keyName(o),s=t.getOption("extraKeys"),l=s&&s[i]||e.keyMap[t.getOption("keyMap")][i];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(e.e_stop(o),c(t,n(t),r),t.execCommand(l)):"find"!=l&&"findPersistent"!=l||(e.e_stop(o),m(r,o))})),s&&a&&(c(t,l,a),u(t,o))}else i(t,h(t),"Search for:",a,(function(e){e&&!l.query&&t.operation((function(){c(t,l,e),l.posFrom=l.posTo=t.getCursor(),u(t,o)}))}))}function u(t,o,i){t.operation((function(){var s=n(t),l=r(t,s.query,o?s.posFrom:s.posTo);(l.find(o)||(l=r(t,s.query,o?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(o))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),s.posFrom=l.from(),s.posTo=l.to(),i&&i(l.from(),l.to()))}))}function f(e){e.operation((function(){var t=n(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}function h(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function p(e,t,n){e.operation((function(){for(var o=r(e,t);o.findNext();)if("string"!=typeof t){var i=e.getRange(o.from(),o.to()).match(t);o.replace(n.replace(/\$(\d)/g,(function(e,t){return i[t]})))}else o.replace(n)}))}function m(e,t){if(!e.getOption("readOnly")){var o=e.getSelection()||n(e).lastQuery,c='<span class="CodeMirror-search-label">'+(t?e.phrase("Replace all:"):e.phrase("Replace:"))+"</span>";i(e,c+function(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}(e),c,o,(function(n){n&&(n=l(n),i(e,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}(e),e.phrase("Replace with:"),"",(function(o){if(o=s(o),t)p(e,n,o);else{f(e);var i=r(e,n,e.getCursor("from")),l=function t(){var s,l=i.from();!(s=i.findNext())&&(i=r(e,n),!(s=i.findNext())||l&&i.from().line==l.line&&i.from().ch==l.ch)||(e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),function(e,t,n,o){e.openConfirm?e.openConfirm(t,o):confirm(n)&&o[0]()}(e,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}(e),e.phrase("Replace?"),[function(){c(s)},t,function(){p(e,n,o)}]))},c=function(e){i.replace("string"==typeof n?o:o.replace(/\$(\d)/g,(function(t,n){return e[n]}))),l()};l()}})))}))}}e.defineOption("search",{bottom:!1}),e.commands.find=function(e){f(e),a(e)},e.commands.findPersistent=function(e){f(e),a(e,!1,!0)},e.commands.findPersistentNext=function(e){a(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){a(e,!0,!0,!0)},e.commands.findNext=a,e.commands.findPrev=function(e){a(e,!0)},e.commands.clearSearch=f,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}},"object"==l(t)&&"object"==l(e)?s(n(1201),n(2297),n(3532)):(r=[n(1201),n(2297),n(3532)],void 0===(i="function"==typeof(o=s)?o.apply(t,r):o)||(e.exports=i))},2297:(e,t,n)=>{var o,r,i,s;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}e=n.nmd(e),s=function(e){"use strict";var t,n,o=e.Pos;function r(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),o=n,r=0;r<t.length;r++)-1==o.indexOf(t.charAt(r))&&(o+=t.charAt(r));return n==o?e:new RegExp(e.source,o)}function i(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function s(e,t,n){t=r(t,"g");for(var i=n.line,s=n.ch,l=e.lastLine();i<=l;i++,s=0){t.lastIndex=s;var c=e.getLine(i),a=t.exec(c);if(a)return{from:o(i,a.index),to:o(i,a.index+a[0].length),match:a}}}function c(e,t,n){if(!i(t))return s(e,t,n);t=r(t,"gm");for(var l,c=1,a=n.line,u=e.lastLine();a<=u;){for(var f=0;f<c&&!(a>u);f++){var h=e.getLine(a++);l=null==l?h:l+"\n"+h}c*=2,t.lastIndex=n.ch;var p=t.exec(l);if(p){var m=l.slice(0,p.index).split("\n"),g=p[0].split("\n"),d=n.line+m.length-1,y=m[m.length-1].length;return{from:o(d,y),to:o(d+g.length-1,1==g.length?y+g[0].length:g[g.length-1].length),match:p}}}}function a(e,t,n){for(var o,r=0;r<=e.length;){t.lastIndex=r;var i=t.exec(e);if(!i)break;var s=i.index+i[0].length;if(s>e.length-n)break;(!o||s>o.index+o[0].length)&&(o=i),r=i.index+1}return o}function u(e,t,n){t=r(t,"g");for(var i=n.line,s=n.ch,l=e.firstLine();i>=l;i--,s=-1){var c=e.getLine(i),u=a(c,t,s<0?0:c.length-s);if(u)return{from:o(i,u.index),to:o(i,u.index+u[0].length),match:u}}}function f(e,t,n){if(!i(t))return u(e,t,n);t=r(t,"gm");for(var s,l=1,c=e.getLine(n.line).length-n.ch,f=n.line,h=e.firstLine();f>=h;){for(var p=0;p<l&&f>=h;p++){var m=e.getLine(f--);s=null==s?m:m+"\n"+s}l*=2;var g=a(s,t,c);if(g){var d=s.slice(0,g.index).split("\n"),y=g[0].split("\n"),v=f+d.length,b=d[d.length-1].length;return{from:o(v,b),to:o(v+y.length-1,1==y.length?b+y[0].length:y[y.length-1].length),match:g}}}}function h(e,t,n,o){if(e.length==t.length)return n;for(var r=0,i=n+Math.max(0,e.length-t.length);;){if(r==i)return r;var s=r+i>>1,l=o(e.slice(0,s)).length;if(l==n)return s;l>n?i=s:r=s+1}}function p(e,r,i,s){if(!r.length)return null;var l=s?t:n,c=l(r).split(/\r|\n\r?/);e:for(var a=i.line,u=i.ch,f=e.lastLine()+1-c.length;a<=f;a++,u=0){var p=e.getLine(a).slice(u),m=l(p);if(1==c.length){var g=m.indexOf(c[0]);if(-1==g)continue e;return i=h(p,m,g,l)+u,{from:o(a,h(p,m,g,l)+u),to:o(a,h(p,m,g+c[0].length,l)+u)}}var d=m.length-c[0].length;if(m.slice(d)==c[0]){for(var y=1;y<c.length-1;y++)if(l(e.getLine(a+y))!=c[y])continue e;var v=e.getLine(a+c.length-1),b=l(v),x=c[c.length-1];if(b.slice(0,x.length)==x)return{from:o(a,h(p,m,d,l)+u),to:o(a+c.length-1,h(v,b,x.length,l))}}}}function m(e,r,i,s){if(!r.length)return null;var l=s?t:n,c=l(r).split(/\r|\n\r?/);e:for(var a=i.line,u=i.ch,f=e.firstLine()-1+c.length;a>=f;a--,u=-1){var p=e.getLine(a);u>-1&&(p=p.slice(0,u));var m=l(p);if(1==c.length){var g=m.lastIndexOf(c[0]);if(-1==g)continue e;return{from:o(a,h(p,m,g,l)),to:o(a,h(p,m,g+c[0].length,l))}}var d=c[c.length-1];if(m.slice(0,d.length)==d){var y=1;for(i=a-c.length+1;y<c.length-1;y++)if(l(e.getLine(i+y))!=c[y])continue e;var v=e.getLine(a+1-c.length),b=l(v);if(b.slice(b.length-c[0].length)==c[0])return{from:o(a+1-c.length,h(v,b,v.length-c[0].length,l)),to:o(a,h(p,m,d.length,l))}}}}function g(e,t,n,i){var a;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):o(0,0),this.pos={from:n,to:n},"object"==l(i)?a=i.caseFold:(a=i,i=null),"string"==typeof t?(null==a&&(a=!1),this.matches=function(n,o){return(n?m:p)(e,t,o,a)}):(t=r(t,"gm"),i&&!1===i.multiline?this.matches=function(n,o){return(n?u:s)(e,t,o)}:this.matches=function(n,o){return(n?f:c)(e,t,o)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),g.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=o(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(o(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=o(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,o(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var r=o(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var r=e.splitLines(t);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=o(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new g(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new g(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var o=[],r=this.getSearchCursor(t,this.getCursor("from"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)o.push({anchor:r.from(),head:r.to()});o.length&&this.setSelections(o,0)}))},"object"==l(t)&&"object"==l(e)?s(n(1201)):(r=[n(1201)],void 0===(i="function"==typeof(o=s)?o.apply(t,r):o)||(e.exports=i))}}]);