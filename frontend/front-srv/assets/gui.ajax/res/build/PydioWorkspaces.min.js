!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PydioWorkspaces=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)};function Item(fun,array){this.fun=fun,this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop(){}process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],2:[function(require,module,exports){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){(function(global){(function(){var undefined,VERSION="3.10.1",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=150,HOT_SPAN=16,LARGE_ARRAY_SIZE=200,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source),reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reHasHexPrefix=/^0[xX]/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^\d+$/,reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}(),contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},objectTypes={function:!0,object:!0},regexpEscapes={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=null===value,valIsUndef=value===undefined,valIsReflexive=value===value,othIsNull=null===other,othIsUndef=other===undefined,othIsReflexive=other===other;if(value>other&&!othIsNull||!valIsReflexive||valIsNull&&!othIsUndef&&othIsReflexive||valIsUndef&&othIsReflexive)return 1;if(value<other&&!valIsNull||!othIsReflexive||othIsNull&&!valIsUndef&&valIsReflexive||othIsUndef&&valIsReflexive)return-1}return 0}function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function baseIsFunction(value){return"function"==typeof value||!1}function baseToString(value){return null==value?"":value+""}function charsLeftIndex(string,chars){for(var index=-1,length=string.length;++index<length&&chars.indexOf(string.charAt(index))>-1;);return index}function charsRightIndex(string,chars){for(var index=string.length;index--&&chars.indexOf(string.charAt(index))>-1;);return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;var order=orders[index];return result*("asc"===order||!0===order?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeRegExpChar(chr,leadingChar,whitespaceChar){return leadingChar?chr=regexpEscapes[chr]:whitespaceChar&&(chr=stringEscapes[chr]),"\\"+chr}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:++index<length;){var other=array[index];if(other!==other)return index}return-1}function isObjectLike(value){return!!value&&"object"==typeof value}function isSpace(charCode){return charCode<=160&&charCode>=9&&charCode<=13||32==charCode||160==charCode||5760==charCode||6158==charCode||charCode>=8192&&(charCode<=8202||8232==charCode||8233==charCode||8239==charCode||8287==charCode||12288==charCode||65279==charCode)}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;)array[index]===placeholder&&(array[index]=PLACEHOLDER,result[++resIndex]=index);return result}function sortedUniq(array,iteratee){for(var seen,index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value,index,array):value;index&&seen===computed||(seen=computed,result[++resIndex]=value)}return result}function trimmedLeftIndex(string){for(var index=-1,length=string.length;++index<length&&isSpace(string.charCodeAt(index)););return index}function trimmedRightIndex(string){for(var index=string.length;index--&&isSpace(string.charCodeAt(index)););return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,objToString=objectProto.toString,oldDash=root._,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,"Set"),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,"WeakMap"),nativeCeil=Math.ceil,nativeCreate=getNative(Object,"create"),nativeFloor=Math.floor,nativeIsArray=getNative(Array,"isArray"),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),nativeParseInt=context.parseInt,nativeRandom=Math.random,NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,MAX_SAFE_INTEGER=9007199254740991,metaMap=WeakMap&&new WeakMap,realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value,this.__actions__=actions||[],this.__chain__=!!chainAll}lodash.support={};lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=POSITIVE_INFINITY,this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=arrayCopy(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=arrayCopy(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=arrayCopy(this.__views__),result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length)return baseWrapperValue(isRight&&isArr?array.reverse():array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){index+=dir;for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return"__proto__"==key?undefined:this.__data__[key]}function mapHas(key){return"__proto__"!=key&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){return"__proto__"!=key&&(this.__data__[key]=value),this}function SetCache(values){var length=values?values.length:0;for(this.data={hash:nativeCreate(null),set:new Set};length--;)this.push(values[length])}function cacheIndexOf(cache,value){var data=cache.data;return("string"==typeof value||isObject(value)?data.set.has(value):data.hash[value])?0:-1}function cachePush(value){var data=this.data;"string"==typeof value||isObject(value)?data.set.add(value):data.hash[value]=!0}function arrayConcat(array,other){for(var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);++index<length;)result[index]=array[index];for(;++othIndex<othLength;)result[index++]=other[othIndex];return result}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayExtremum(array,iteratee,comparator,exValue){for(var index=-1,length=array.length,computed=exValue,result=computed;++index<length;){var value=array[index],current=+iteratee(value);comparator(current,computed)&&(computed=current,result=value)}return result}function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;for(initFromArray&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;for(initFromArray&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function arraySum(array,iteratee){for(var length=array.length,result=0;length--;)result+=+iteratee(array[length])||0;return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue!==undefined&&hasOwnProperty.call(object,key)?objectValue:sourceValue}function assignWith(object,source,customizer){for(var index=-1,props=keys(source),length=props.length;++index<length;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(value!==undefined||key in object)||(object[key]=result)}return object}function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}function baseAt(collection,props){for(var index=-1,isNil=null==collection,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);++index<propsLength;){var key=props[index];result[index]=isArr?isIndex(key,length)?collection[key]:undefined:isNil?undefined:collection[key]}return result}function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined}return result||{}}}();function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length)return result;var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;cache&&(indexOf=cacheIndexOf,isCommon=!1,values=cache);outer:for(;++index<length;){var value=array[index];if(isCommon&&value===value){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===value)continue outer;result.push(value)}else indexOf(values,value,0)<0&&result.push(value)}return result}var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;return baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);(comparator(current,computed)||current===exValue&&current===result)&&(computed=current,result=value)}),result}function baseFill(array,value,start,end){var length=array.length;for(start=null==start?0:+start||0,start<0&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,end<0&&(end+=length),length=start>end?0:end>>>0,start>>>=0;start<length;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFind(collection,predicate,eachFunc,retKey){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=retKey?key:value,!1}),result}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);for(var index=-1,length=array.length;++index<length;){var value=array[index];isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))?isDeep?baseFlatten(value,isDeep,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){for(var index=-1,length=props.length,resIndex=-1,result=[];++index<length;){var key=props[index];isFunction(object[key])&&(result[++resIndex]=key)}return result}function baseGet(object,path,pathKey){if(null!=object){pathKey!==undefined&&pathKey in toObject(object)&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&index<length;)object=object[path[index++]];return index&&index==length?object:undefined}}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB))}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null!=object&&(object[key]===value&&(value!==undefined||key in toObject(object)))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),(isArr||!isCommon)&&!(key in object)){if(null==(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1))))return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,!0)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object))return object;var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);return arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObjectLike(srcValue))stackA||(stackA=[]),stackB||(stackB=[]),baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue),result===undefined&&(!isSrcArr||key in object)||!isCommon&&(result===result?result===value:value!==value)||(object[key]=result)}}),object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){for(var length=stackA.length,srcValue=source[key];length--;)if(stackA[length]==srcValue)return void(object[key]=stackB[length]);var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue,isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))?result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]:isPlainObject(srcValue)||isArguments(srcValue)?result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}:isCommon=!1),stackA.push(srcValue),stackB.push(result),isCommon?object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB):(result===result?result!==value:value===value)&&(object[key]=result)}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){for(var length=array?indexes.length:0;length--;){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,start<0&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;return iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee)}),baseSortBy(baseMap(collection,function(value){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}
}),function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;return baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0}),result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];seen?(indexOf=cacheIndexOf,isCommon=!1):(isLarge=!1,seen=iteratee?[]:result);outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else indexOf(seen,computed,0)<0&&((iteratee||isLarge)&&seen.push(computed),result.push(value))}return result}function baseValues(object,props){for(var index=-1,length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;result instanceof LazyWrapper&&(result=result.value());for(var index=-1,length=actions.length;++index<length;){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args))}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if("number"==typeof value&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){for(;low<high;){var mid=low+high>>>1,computed=array[mid];(retHighest?computed<=value:computed<value)&&null!==computed?low=mid+1:high=mid}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=null===value,valIsUndef=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN)var setLow=isReflexive||retHighest;else setLow=valIsNull?isReflexive&&isDef&&(retHighest||null!=computed):valIsUndef?isReflexive&&(retHighest||isDef):null!=computed&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength);return new Uint8Array(result).set(new Uint8Array(buffer)),result}function composeArgs(args,partials,holders){for(var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)result[holders[argsIndex]]=args[argsIndex];for(;argsLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders){for(var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);++argsIndex<argsLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)result[offset+holders[holdersIndex]]=args[argsIndex++];return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};if(iteratee=getCallback(iteratee,thisArg,3),isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}else baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)});return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:undefined,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(thisArg,arguments)}return wrapper}function createCache(values){return nativeCreate&&Set?new SetCache(values):null}function createCompounder(callback){return function(string){for(var index=-1,array=words(deburr(string)),length=array.length,result="";++index<length;)result=callback(result,array[index],index);return result}}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){guard&&isIterateeCall(func,arity,guard)&&(arity=undefined);var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curryFunc.placeholder,result}return curryFunc}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];return null==object?object:(args.push(customizer),assigner.apply(undefined,args))})}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=undefined),iteratee=getCallback(iteratee,thisArg,3),1==iteratee.length){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!collection.length||result!==exValue)return result}return baseExtremum(collection,iteratee,comparator,exValue)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){if(predicate=getCallback(predicate,thisArg,3),isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){return array&&array.length?(predicate=getCallback(predicate,thisArg,3),baseFindIndex(array,predicate,fromRight)):-1}}function createFindKey(objectFunc){return function(object,predicate,thisArg){return predicate=getCallback(predicate,thisArg,3),baseFind(object,predicate,objectFunc,!0)}}function createFlow(fromRight){return function(){for(var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);fromRight?index--:++index<length;){var func=funcs[leftIndex++]=arguments[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);!wrapper&&LodashWrapper.prototype.thru&&"wrapper"==getFuncName(func)&&(wrapper=new LodashWrapper([],!0))}for(index=wrapper?-1:length;++index<length;){func=funcs[index];var funcName=getFuncName(func),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE)return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined||(iteratee=bindCallback(iteratee,thisArg,3)),objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined||(iteratee=bindCallback(iteratee,thisArg,3)),objectFunc(object,iteratee)}}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};return iteratee=getCallback(iteratee,thisArg,3),baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key,value=isMapKeys?value:mapped,result[key]=value}),result}}function createPadDir(fromRight){return function(string,length,chars){return string=baseToString(string),(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){for(var length=arguments.length,index=length,args=Array(length);index--;)args[index]=arguments[index];if(partials&&(args=composeArgs(args,partials,holders)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight)),isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);if((length-=argsHolders.length)<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG),isCurryBound||(bitmask&=~(BIND_FLAG|BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return argPos&&(args=reorder(args,argPos)),isAry&&ary<args.length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtorWrapper(func)),fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;if(length=+length,strLength>=length||!nativeIsFinite(length))return"";var padLength=length-strLength;return chars=null==chars?" ":chars+"",repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,args)}return wrapper}function createRound(methodName){var func=Math[methodName];return function(number,precision){return precision=precision===undefined?0:+precision||0,precision?(precision=pow(10,precision),func(number*precision)/precision):func(number)}}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return null==iteratee&&callback===baseCallback?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG),partials=holders=undefined),length-=holders?holders.length:0,bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&(mergeData(newData,data),bitmask=newData[1],arity=newData[9]),newData[9]=null==arity?isBindKey?0:func.length:nativeMax(arity-length,0)||0,bitmask==BIND_FLAG)var result=createBindWrapper(newData[0],newData[2]);else result=bitmask!=PARTIAL_FLAG&&bitmask!=(BIND_FLAG|PARTIAL_FLAG)||newData[4].length?createHybridWrapper.apply(undefined,newData):createPartialWrapper.apply(undefined,newData);return(data?baseSetData:setData)(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length;if(objLength!=keys(other).length&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name,array=realNames[result],length=array?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;return result=result===indexOf?baseIndexOf:result,collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}function getNative(object,key){var value=null==object?undefined:object[key];return isNative(value)?value:undefined}function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){null==object||isKey(path,object)||(path=toPath(path),object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),path=last(path));var func=null==object?object:object[path];return null==func?undefined:func.apply(object,args)}function isArrayLike(value){return null!=value&&isLength(getLength(value))}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}function isKey(value,object){var type=typeof value;return!!("string"==type&&reIsPlainProp.test(value)||"number"==type)||!isArray(value)&&(!reIsDeepProp.test(value)||null!=object&&value in toObject(object))}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype))return!1;var other=lodash[funcName];if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG,isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value),data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value),data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])),value=source[7],value&&(data[7]=arrayCopy(value)),srcBitmask&ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults)}function pickByArray(object,props){object=toObject(object);for(var index=-1,length=props.length,result={};++index<length;){var key=props[index];key in object&&(result[key]=object[key])}return result}function pickByCallback(object,predicate){var result={};return baseForIn(object,function(value,key,object){predicate(value,key,object)&&(result[key]=value)}),result}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return key}else count=0;return baseSetData(key,value)}}();function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toIterable(value){return null==value?[]:isArrayLike(value)?isObject(value)?value:Object(value):values(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){size=(guard?isIterateeCall(array,size,guard):null==size)?1:nativeMax(nativeFloor(size)||1,1);for(var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));index<length;)result[++resIndex]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=array?array.length:0,resIndex=-1,result=[];++index<length;){var value=array[index];value&&(result[++resIndex]=value)}return result}var difference=restParam(function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,!1,!0)):[]});function drop(array,n,guard){return(array?array.length:0)?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),baseSlice(array,n<0?0:n)):[]}function dropRight(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),n=length-(+n||0),baseSlice(array,0,n<0?0:n)):[]}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!0,!0):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!0):[]}function fill(array,value,start,end){var length=array?array.length:0;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}var findIndex=createFindIndex(),findLastIndex=createFindIndex(!0);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;return guard&&isIterateeCall(array,isDeep,guard)&&(isDeep=!1),length?baseFlatten(array,isDeep):[]}function flattenDeep(array){return(array?array.length:0)?baseFlatten(array,!0):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;if("number"==typeof fromIndex)fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex;else if(fromIndex){var index=binaryIndex(array,value);return index<length&&(value===value?value===array[index]:array[index]!==array[index])?index:-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}var intersection=restParam(function(arrays){for(var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];othIndex--;){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:for(;++index<length;)if(value=array[index],(seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){for(var othIndex=othLength;--othIndex;){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0)continue outer}seen&&seen.push(value),result.push(value)}return result});function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=length;if("number"==typeof fromIndex)index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1;else if(fromIndex){index=binaryIndex(array,value,!0)-1;var other=array[index];return(value===value?value===other:other!==other)?index:-1}if(value!==value)return indexOfNaN(array,index,!0);for(;index--;)if(array[index]===value)return index;return-1}function pull(){var args=arguments,array=args[0];if(!array||!array.length)return array;for(var index=0,indexOf=getIndexOf(),length=args.length;++index<length;)for(var fromIndex=0,value=args[index];(fromIndex=indexOf(array,value,fromIndex))>-1;)splice.call(array,fromIndex,1);return array}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);return basePullAt(array,indexes.sort(baseCompareAscending)),result});function remove(array,predicate,thisArg){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getCallback(predicate,thisArg,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)&&(start=0,end=length),baseSlice(array,start,end)):[]}var sortedIndex=createSortedIndex(),sortedLastIndex=createSortedIndex(!0);function take(array,n,guard){return(array?array.length:0)?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),baseSlice(array,0,n<0?0:n)):[]}function takeRight(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),n=length-(+n||0),baseSlice(array,n<0?0:n)):[]}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!1,!0):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,!1,!0))});function uniq(array,isSorted,iteratee,thisArg){if(!(array?array.length:0))return[];null!=isSorted&&"boolean"!=typeof isSorted&&(thisArg=iteratee,iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted,isSorted=!1);var callback=getCallback();return null==iteratee&&callback===baseCallback||(iteratee=callback(iteratee,thisArg,3)),isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){if(!array||!array.length)return[];var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group))return length=nativeMax(group.length,length),!0});for(var result=Array(length);++index<length;)result[index]=arrayMap(array,baseProperty(index));return result}function unzipWith(array,iteratee,thisArg){if(!(array?array.length:0))return[];var result=unzip(array);return null==iteratee?result:(iteratee=bindCallback(iteratee,thisArg,4),arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,!0)}))}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[]});function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArrayLike(array))var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};for(!length||values||isArray(props[0])||(values=[]);++index<length;){var key=props[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;return length>2&&"function"==typeof iteratee?length-=2:(iteratee=length>1&&"function"==typeof thisArg?(--length,thisArg):undefined,thisArg=undefined),arrays.length=length,unzipWith(arrays,iteratee,thisArg)});function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor,thisArg){return interceptor.call(thisArg,value),value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}var wrapperConcat=restParam(function(values){return values=baseFlatten(values),this.thru(function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values)})});function wrapperPlant(value){
for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__,interceptor=function(value){return wrapped&&wrapped.__dir__<0?value:value.reverse()};if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(interceptor)}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props))}),countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=undefined),"function"==typeof predicate&&thisArg===undefined||(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=getCallback(predicate,thisArg,3),func(collection,predicate)}var find=createFind(baseEach),findLast=createFind(baseEachRight,!0);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach),forEachRight=createForEach(arrayEachRight,baseEachRight),groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):result[key]=[value]});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;return isLength(length)||(collection=values(collection),length=collection.length),fromIndex="number"!=typeof fromIndex||guard&&isIterateeCall(target,fromIndex,guard)?0:fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0,"string"==typeof collection||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value}),invoke=restParam(function(collection,path,args){var index=-1,isFunc="function"==typeof path,isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){var func=isFunc?path:isProp&&null!=value?value[path]:undefined;result[++index]=func?func.apply(value,args):invokePath(value,path,args)}),result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;return iteratee=getCallback(iteratee,thisArg,3),func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach),reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=getCallback(predicate,thisArg,3),func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):null==n){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;for(n=nativeMin(n<0?0:+n||0,length);++index<n;){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index],result[index]=value}return result.length=n,result}function shuffle(collection){return sample(collection,POSITIVE_INFINITY)}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=undefined),"function"==typeof predicate&&thisArg===undefined||(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(null==collection)return[];thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=undefined);var index=-1;return iteratee=getCallback(iteratee,thisArg,3),baseSortBy(baseMap(collection,function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}}),compareAscending)}var sortByAll=restParam(function(collection,iteratees){if(null==collection)return[];var guard=iteratees[2];return guard&&isIterateeCall(iteratees[0],iteratees[1],guard)&&(iteratees.length=1),baseSortByOrder(collection,baseFlatten(iteratees),[])});function sortByOrder(collection,iteratees,orders,guard){return null==collection?[]:(guard&&isIterateeCall(iteratees,orders,guard)&&(orders=undefined),isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),isArray(orders)||(orders=null==orders?[]:[orders]),baseSortByOrder(collection,iteratees,orders))}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if("function"!=typeof func){if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);var temp=n;n=func,func=temp}return n=nativeIsFinite(n=+n)?n:0,function(){if(--n<1)return func.apply(this,arguments)}}function ary(func,n,guard){return guard&&isIterateeCall(func,n,guard)&&(n=undefined),n=func&&null==n?func.length:nativeMax(+n||0,0),createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func){if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);var temp=n;n=func,func=temp}return function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)}),bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);for(var index=-1,length=methodNames.length;++index<length;){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object}),bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)}),curry=createCurry(CURRY_FLAG),curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(wait=wait<0?0:+wait||0,!0===options){var leading=!0;trailing=!1}else isObject(options)&&(leading=!!options.leading,maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait),trailing="trailing"in options?!!options.trailing:trailing);function cancel(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId&&clearTimeout(maxTimeoutId),lastCalled=0,maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){id&&clearTimeout(id),maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=undefined))}function delayed(){var remaining=wait-(now()-stamp);remaining<=0||remaining>wait?complete(trailingCall,maxTimeoutId):timeoutId=setTimeout(delayed,remaining)}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),!1===maxWait)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=undefined),result}return debounced.cancel=cancel,debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)}),delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)}),flow=createFlow(),flowRight=createFlow(!0);function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result),result};return memoized.cache=new memoize.Cache,memoized}var modArgs=restParam(function(func,transforms){if(transforms=baseFlatten(transforms),"function"!=typeof func||!arrayEvery(transforms,baseIsFunction))throw new TypeError(FUNC_ERROR_TEXT);var length=transforms.length;return restParam(function(args){for(var index=nativeMin(args.length,length);index--;)args[index]=transforms[index](args[index]);return func.apply(this,args)})});function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG),partialRight=createPartial(PARTIAL_RIGHT_FLAG),rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes))});function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function spread(func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return!1===options?leading=!1:isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function wrap(value,wrapper){return wrapper=null==wrapper?identity:wrapper,createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[])}function clone(value,isDeep,customizer,thisArg){return isDeep&&"boolean"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:"function"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),"function"==typeof customizer?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep)}function cloneDeep(value,customizer,thisArg){return"function"==typeof customizer?baseClone(value,!0,bindCallback(customizer,thisArg,1)):baseClone(value,!0)}function gt(value,other){return value>other}function gte(value,other){return value>=other}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return!0===value||!1===value||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&!isPlainObject(value)}function isEmpty(value){return null==value||(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))?!value.length:!keys(value).length)}function isEqual(value,other,customizer,thisArg){customizer="function"==typeof customizer?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&"string"==typeof value.message&&objToString.call(value)==errorTag}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isMatch(object,source,customizer,thisArg){return customizer="function"==typeof customizer?bindCallback(customizer,thisArg,3):undefined,baseIsMatch(object,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){return null!=value&&(isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value))}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}function isPlainObject(value){var Ctor;if(!isObjectLike(value)||objToString.call(value)!=objectTag||isArguments(value)||!hasOwnProperty.call(value,"constructor")&&"function"==typeof(Ctor=value.constructor)&&!(Ctor instanceof Ctor))return!1;var result;return baseForIn(value,function(subValue,key){result=key}),result===undefined||hasOwnProperty.call(value,result)}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag}function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function lt(value,other){return value<other}function lte(value,other){return value<=other}function toArray(value){var length=value?getLength(value):0;return isLength(length)?length?arrayCopy(value):[]:values(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var merge=createAssigner(baseMerge),assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});function create(prototype,properties,guard){var result=baseCreate(prototype);return guard&&isIterateeCall(prototype,properties,guard)&&(properties=undefined),properties?baseAssign(result,properties):result}var defaults=createDefaults(assign,assignDefaults),defaultsDeep=createDefaults(merge,mergeDefaults),findKey=createFindKey(baseForOwn),findLastKey=createFindKey(baseForOwnRight),forIn=createForIn(baseFor),forInRight=createForIn(baseForRight),forOwn=createForOwn(baseForOwn),forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(null==object)return!1;var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){if(path=toPath(path),null==(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1))))return!1;path=last(path),result=hasOwnProperty.call(object,path)}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object))}function invert(object,multiValue,guard){guard&&isIterateeCall(object,multiValue,guard)&&(multiValue=undefined);for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index],value=object[key];multiValue?hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]:result[value]=key}return result}var keys=nativeKeys?function(object){var Ctor=null==object?undefined:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||"function"!=typeof object&&isArrayLike(object)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto="function"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;++index<length;)result[index]=index+"";for(var key in object)skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}var mapKeys=createObjectMapper(!0),mapValues=createObjectMapper(),omit=restParam(function(object,props){if(null==object)return{};if("function"!=typeof props[0]){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){return null==object?{}:"function"==typeof props[0]?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,path,defaultValue){var result=null==object?undefined:object[path];return result===undefined&&(null==object||isKey(path,object)||(path=toPath(path),object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),result=null==object?undefined:object[last(path)]),result=result===undefined?defaultValue:result),isFunction(result)?result.call(object):result}function set(object,path,value){if(null==object)return object;var pathKey=path+"";path=null!=object[pathKey]||isKey(path,object)?[pathKey]:toPath(path);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=path[index];isObject(nested)&&(index==lastIndex?nested[key]=value:null==nested[key]&&(nested[key]=isIndex(path[index+1])?[]:{})),nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);if(iteratee=getCallback(iteratee,thisArg,4),null==accumulator)if(isArr||isObject(object)){var Ctor=object.constructor;accumulator=isArr?isArray(object)?new Ctor:[]:baseCreate(isFunction(Ctor)?Ctor.prototype:undefined)}else accumulator={};return(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){return start=+start||0,end===undefined?(end=start,start=0):end=+end||0,value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){floating&&isIterateeCall(min,max,floating)&&(max=floating=undefined);var noMin=null==min,noMax=null==max;if(null==floating&&(noMax&&"boolean"==typeof min?(floating=min,min=1):"boolean"==typeof max&&(floating=max,noMax=!0)),noMin&&noMax&&(max=1,noMax=!1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){return(string=baseToString(string))&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){return(string=baseToString(string))&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string),target+="";var length=string.length;return position=position===undefined?length:nativeMin(position<0?0:+position||0,length),(position-=target.length)>=0&&string.indexOf(target,position)==position}function escape(string){return string=baseToString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=baseToString(string),string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,escapeRegExpChar):string||"(?:)"}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string),length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length))return string;var mid=(length-strLength)/2,leftLength=nativeFloor(mid);return chars=createPadding("",nativeCeil(mid),chars),chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir(),padRight=createPadDir(!0);function parseInt(string,radix,guard){return(guard?isIterateeCall(string,radix,guard):null==radix)?radix=0:radix&&(radix=+radix),string=trim(string),nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}function repeat(string,n){var result="";if(string=baseToString(string),(n=+n)<1||!string||!nativeIsFinite(n))return result;do{n%2&&(result+=string),n=nativeFloor(n/2),string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}),startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){return string=baseToString(string),position=null==position?0:nativeMin(position<0?0:+position||0,string.length),string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;otherOptions&&isIterateeCall(string,options,otherOptions)&&(options=otherOptions=undefined),string=baseToString(string),options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var isEscaping,isEvaluating,imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result}function trim(string,chars,guard){var value=string;return(string=baseToString(string))?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1):(chars+="",string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)):string}function trimLeft(string,chars,guard){var value=string;return string=baseToString(string),string?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(trimmedLeftIndex(string)):string.slice(charsLeftIndex(string,chars+"")):string}function trimRight(string,chars,guard){var value=string;return string=baseToString(string),string?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(0,trimmedRightIndex(string)+1):string.slice(0,charsRightIndex(string,chars+"")+1):string}function trunc(string,options,guard){guard&&isIterateeCall(string,options,guard)&&(options=undefined);var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(null!=options)if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length,omission="omission"in options?baseToString(options.omission):omission}else length=+options||0;if(string=baseToString(string),length>=string.length)return string;var end=length-omission.length;if(end<1)return omission;var result=string.slice(0,end);if(null==separator)return result+omission;if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);for(separator.global||(separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")),separator.lastIndex=0;match=separator.exec(substring);)newEnd=match.index;result=result.slice(0,null==newEnd?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission}function unescape(string){return string=baseToString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){return guard&&isIterateeCall(string,pattern,guard)&&(pattern=undefined),string=baseToString(string),string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=undefined),isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,!0))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,!0))}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args)}}),methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args)}});function mixin(object,source,options){if(null==options){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=props&&props.length?baseFunctions(source,props):undefined;(methodNames?methodNames.length:isObj)||(methodNames=!1,options=source,source=object,object=this)}methodNames||(methodNames=baseFunctions(source,keys(source)));var chain=!0,index=-1,isFunc=isFunction(object),length=methodNames.length;!1===options?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);for(;++index<length;){var methodName=methodNames[index],func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=arrayCopy(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))}}(func))}return object}function noConflict(){return root._=oldDash,this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=+start||0,step=null==step?1:+step||0,null==end?(end=start,start=0):end=+end||0;for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function times(n,iteratee,thisArg){if((n=nativeFloor(n))<1||!nativeIsFinite(n))return[];var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));for(iteratee=bindCallback(iteratee,thisArg,1);++index<n;)index<MAX_ARRAY_LENGTH?result[index]=iteratee(index):iteratee(index);return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var ceil=createRound("ceil"),floor=createRound("floor"),max=createExtremum(gt,NEGATIVE_INFINITY),min=createExtremum(lt,POSITIVE_INFINITY),round=createRound("round");function sum(collection,iteratee,thisArg){return thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=undefined),iteratee=getCallback(iteratee,thisArg,3),1==iteratee.length?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee)}return lodash.prototype=baseLodash.prototype,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,MapCache.prototype.delete=mapDelete,MapCache.prototype.get=mapGet,MapCache.prototype.has=mapHas,MapCache.prototype.set=mapSet,SetCache.prototype.push=cachePush,memoize.Cache=MapCache,lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.callback=callback,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flow=flow,lodash.flowRight=flowRight,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.modArgs=modArgs,lodash.negate=negate,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,
lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAt=pullAt,lodash.range=range,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.restParam=restParam,lodash.set=set,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortByAll=sortByAll,lodash.sortByOrder=sortByOrder,lodash.spread=spread,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.times=times,lodash.toArray=toArray,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.zipWith=zipWith,lodash.backflow=flowRight,lodash.collect=map,lodash.compose=flowRight,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.iteratee=callback,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.deburr=deburr,lodash.endsWith=endsWith,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.findWhere=findWhere,lodash.first=first,lodash.floor=floor,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isMatch=isMatch,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.min=min,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padLeft=padLeft,lodash.padRight=padRight,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedLastIndex=sortedLastIndex,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.sum=sum,lodash.template=template,lodash.trim=trim,lodash.trimLeft=trimLeft,lodash.trimRight=trimRight,lodash.trunc=trunc,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.words=words,lodash.all=every,lodash.any=some,lodash.contains=includes,lodash.eq=isEqual,lodash.detect=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.head=first,lodash.include=includes,lodash.inject=reduce,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.sample=sample,lodash.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(value){return sample(value,n)}):sample(this.value())},lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index)return new LazyWrapper(this);n=null==n?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();return filtered?result.__takeCount__=nativeMin(result.__takeCount__,n):result.__views__.push({size:n,type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();return result.__iteratees__.push({iteratee:getCallback(iteratee,thisArg,1),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.reject=function(predicate,thisArg){return predicate=getCallback(predicate,thisArg,1),this.filter(function(value){return!predicate(value)})},LazyWrapper.prototype.slice=function(start,end){start=null==start?0:+start||0;var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(end=+end||0,result=end<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?"take"+("last"==methodName?"Right":""):methodName];lodashFunc&&(lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var interceptor=function(value){return retUnwrapped&&chainAll?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args))},action={func:thru,args:[interceptor],thisArg:undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll)return onlyLazy?(value=value.clone(),value.__actions__.push(action),func.call(value)):lodashFunc.call(undefined,this.value())[0];if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push(action),new LodashWrapper(result,chainAll)}return this.thru(interceptor)})}),arrayEach(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;return retUnwrapped&&!this.__chain__?func.apply(this.value(),args):this[chainName](function(value){return func.apply(value,args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name;(realNames[key]||(realNames[key]=[])).push({name:methodName,func:lodashFunc})}}),realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.concat=wrapperConcat,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toString=wrapperToString,lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.collect=lodash.prototype.map,lodash.prototype.head=lodash.prototype.first,lodash.prototype.select=lodash.prototype.filter,lodash.prototype.tail=lodash.prototype.rest,lodash}var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(require,module,exports){"use strict";module.exports={set:setNestedProperty,get:getNestedProperty,has:hasNestedProperty,hasOwn:function(object,property,options){return this.has(object,property,options||{own:!0})},isIn:isInNestedProperty};function getNestedProperty(object,property){if(object&&"object"==typeof object){if("string"==typeof property&&""!==property){return property.split(".").reduce(function(obj,prop){return obj&&obj[prop]},object)}return"number"==typeof property?object[property]:object}return object}function hasNestedProperty(object,property,options){if(options=options||{},object&&"object"==typeof object){if("string"==typeof property&&""!==property){return property.split(".").reduce(function(obj,prop,idx,array){return idx==array.length-1?options.own?!(!obj||!obj.hasOwnProperty(prop)):!!(null!==obj&&"object"==typeof obj&&prop in obj):obj&&obj[prop]},object)}return"number"==typeof property&&property in object}return!1}function setNestedProperty(object,property,value){if(object&&"object"==typeof object){if("string"==typeof property&&""!==property){var split=property.split(".");return split.reduce(function(obj,prop,idx){return obj[prop]=obj[prop]||{},split.length==idx+1&&(obj[prop]=value),obj[prop]},object)}return"number"==typeof property?(object[property]=value,object[property]):object}return object}function isInNestedProperty(object,property,objectInPath,options){if(options=options||{},object&&"object"==typeof object){if("string"==typeof property&&""!==property){var pathExists,split=property.split("."),isIn=!1;return pathExists=!!split.reduce(function(obj,prop){return isIn=isIn||obj===objectInPath||!!obj&&obj[prop]===objectInPath,obj&&obj[prop]},object),options.validPath?isIn&&pathExists:isIn}return!1}return!1}},{}],5:[function(require,module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}module.exports=shouldUseNative()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},{}],6:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-loadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},loadTime=getNanoSeconds()):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:1}],7:[function(require,module,exports){"use strict";function checkPropTypes(typeSpecs,values,location,componentName,getStack){}checkPropTypes.resetWarningCache=function(){},module.exports=checkPropTypes},{"./lib/ReactPropTypesSecret":11}],8:[function(require,module,exports){"use strict";var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},{"./lib/ReactPropTypesSecret":11}],9:[function(require,module,exports){"use strict";var ReactIs=require("react-is"),assign=require("object-assign"),ReactPropTypesSecret=require("./lib/ReactPropTypesSecret"),checkPropTypes=require("./checkPropTypes"),has=Function.call.bind(Object.prototype.hasOwnProperty),printWarning=function(){};function emptyFunctionThatReturnsNull(){return null}module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator;function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable["@@iterator"]);if("function"==typeof iteratorFn)return iteratorFn}var ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),elementType:createElementTypeTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};function is(x,y){return x===y?0!==x||1/x==1/y:x!==x&&y!==y}function PropTypeError(message){this.message=message,this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName,secret){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,secret!==ReactPropTypesSecret){if(throwOnDirectAccess){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}return null==props[propName]?isRequired?new PropTypeError(null===props[propName]?"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `null`.":"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `undefined`."):null:validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];if(getPropType(propValue)!==expectedType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPreciseType(propValue)+"` supplied to `"+componentName+"`, expected `"+expectedType+"`.");return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected an array.")}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(validate)}function createElementTypeTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement type.")}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getClassName(props[propName])+"` supplied to `"+componentName+"`, expected instance of `"+expectedClassName+"`.")}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues))return emptyFunctionThatReturnsNull;function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;var valuesString=JSON.stringify(expectedValues,function(key,value){return"symbol"===getPreciseType(value)?String(value):value});return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+String(propValue)+"` supplied to `"+componentName+"`, expected one of "+valuesString+".")}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected an object.");for(var key in propValue)if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers))return emptyFunctionThatReturnsNull;for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if("function"!=typeof checker)return printWarning("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+getPostfixForTypeWarning(checker)+" at index "+i+"."),emptyFunctionThatReturnsNull}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){if(null==(0,arrayOfTypeCheckers[i])(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`.")}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){return isNode(props[propName])?null:new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`, expected a ReactNode.")}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker)return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`.\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "));var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function isSymbol(propType,propValue){return"symbol"===propType||!!propValue&&("Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol)}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":isSymbol(propType,propValue)?"symbol":propType}function getPreciseType(propValue){if(void 0===propValue||null===propValue)return""+propValue;var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}return ReactPropTypes.checkPropTypes=checkPropTypes,ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},{"./checkPropTypes":7,"./lib/ReactPropTypesSecret":11,"object-assign":5,"react-is":17}],10:[function(require,module,exports){module.exports=require("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":8,"./factoryWithTypeCheckers":9,"react-is":17}],11:[function(require,module,exports){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],12:[function(require,module,exports){(function(global){for(var now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(0===queue.length){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now,setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++)if(!cp[i].cancelled)try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(next))}return queue.push({handle:++id,callback:callback,cancelled:!1}),id},caf=function(handle){for(var i=0;i<queue.length;i++)queue[i].handle===handle&&(queue[i].cancelled=!0)}}module.exports=function(fn){return raf.call(root,fn)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(object){object||(object=root),object.requestAnimationFrame=raf,object.cancelAnimationFrame=caf}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":13}],13:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime,moduleLoadTime,nodeLoadTime,upTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-nodeLoadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},moduleLoadTime=getNanoSeconds(),upTime=1e9*process.uptime(),nodeLoadTime=moduleLoadTime-upTime):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:1}],14:[function(require,module,exports){var global=require("global"),request=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||fallback,prev=+new Date;function fallback(fn){var curr=+new Date,ms=Math.max(0,16-(curr-prev)),req=setTimeout(fn,ms);return prev=curr,req}var cancel=global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(request=request.bind(global),cancel=cancel.bind(global)),exports=module.exports=request,exports.cancel=cancel},{global:2}],15:[function(require,module,exports){(function(process){"use strict";"production"!==process.env.NODE_ENV&&function(){var hasSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=hasSymbol?Symbol.for("react.element"):60103,REACT_PORTAL_TYPE=hasSymbol?Symbol.for("react.portal"):60106,REACT_FRAGMENT_TYPE=hasSymbol?Symbol.for("react.fragment"):60107,REACT_STRICT_MODE_TYPE=hasSymbol?Symbol.for("react.strict_mode"):60108,REACT_PROFILER_TYPE=hasSymbol?Symbol.for("react.profiler"):60114,REACT_PROVIDER_TYPE=hasSymbol?Symbol.for("react.provider"):60109,REACT_CONTEXT_TYPE=hasSymbol?Symbol.for("react.context"):60110,REACT_ASYNC_MODE_TYPE=hasSymbol?Symbol.for("react.async_mode"):60111,REACT_CONCURRENT_MODE_TYPE=hasSymbol?Symbol.for("react.concurrent_mode"):60111,REACT_FORWARD_REF_TYPE=hasSymbol?Symbol.for("react.forward_ref"):60112,REACT_SUSPENSE_TYPE=hasSymbol?Symbol.for("react.suspense"):60113,REACT_SUSPENSE_LIST_TYPE=hasSymbol?Symbol.for("react.suspense_list"):60120,REACT_MEMO_TYPE=hasSymbol?Symbol.for("react.memo"):60115,REACT_LAZY_TYPE=hasSymbol?Symbol.for("react.lazy"):60116,REACT_BLOCK_TYPE=hasSymbol?Symbol.for("react.block"):60121,REACT_FUNDAMENTAL_TYPE=hasSymbol?Symbol.for("react.fundamental"):60117,REACT_RESPONDER_TYPE=hasSymbol?Symbol.for("react.responder"):60118,REACT_SCOPE_TYPE=hasSymbol?Symbol.for("react.scope"):60119;function isValidElementType(type){return"string"==typeof type||"function"==typeof type||type===REACT_FRAGMENT_TYPE||type===REACT_CONCURRENT_MODE_TYPE||type===REACT_PROFILER_TYPE||type===REACT_STRICT_MODE_TYPE||type===REACT_SUSPENSE_TYPE||type===REACT_SUSPENSE_LIST_TYPE||"object"==typeof type&&null!==type&&(type.$$typeof===REACT_LAZY_TYPE||type.$$typeof===REACT_MEMO_TYPE||type.$$typeof===REACT_PROVIDER_TYPE||type.$$typeof===REACT_CONTEXT_TYPE||type.$$typeof===REACT_FORWARD_REF_TYPE||type.$$typeof===REACT_FUNDAMENTAL_TYPE||type.$$typeof===REACT_RESPONDER_TYPE||type.$$typeof===REACT_SCOPE_TYPE||type.$$typeof===REACT_BLOCK_TYPE)}function typeOf(object){if("object"==typeof object&&null!==object){var $$typeof=object.$$typeof;switch($$typeof){case REACT_ELEMENT_TYPE:var type=object.type;switch(type){case REACT_ASYNC_MODE_TYPE:case REACT_CONCURRENT_MODE_TYPE:case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:return type;default:var $$typeofType=type&&type.$$typeof;switch($$typeofType){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:case REACT_PROVIDER_TYPE:return $$typeofType;default:return $$typeof}}case REACT_PORTAL_TYPE:return $$typeof}}}var AsyncMode=REACT_ASYNC_MODE_TYPE,ConcurrentMode=REACT_CONCURRENT_MODE_TYPE,ContextConsumer=REACT_CONTEXT_TYPE,ContextProvider=REACT_PROVIDER_TYPE,Element=REACT_ELEMENT_TYPE,ForwardRef=REACT_FORWARD_REF_TYPE,Fragment=REACT_FRAGMENT_TYPE,Lazy=REACT_LAZY_TYPE,Memo=REACT_MEMO_TYPE,Portal=REACT_PORTAL_TYPE,Profiler=REACT_PROFILER_TYPE,StrictMode=REACT_STRICT_MODE_TYPE,Suspense=REACT_SUSPENSE_TYPE,hasWarnedAboutDeprecatedIsAsyncMode=!1;function isAsyncMode(object){return hasWarnedAboutDeprecatedIsAsyncMode||(hasWarnedAboutDeprecatedIsAsyncMode=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),isConcurrentMode(object)||typeOf(object)===REACT_ASYNC_MODE_TYPE}function isConcurrentMode(object){return typeOf(object)===REACT_CONCURRENT_MODE_TYPE}function isContextConsumer(object){return typeOf(object)===REACT_CONTEXT_TYPE}function isContextProvider(object){return typeOf(object)===REACT_PROVIDER_TYPE}function isElement(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE}
function isForwardRef(object){return typeOf(object)===REACT_FORWARD_REF_TYPE}function isFragment(object){return typeOf(object)===REACT_FRAGMENT_TYPE}function isLazy(object){return typeOf(object)===REACT_LAZY_TYPE}function isMemo(object){return typeOf(object)===REACT_MEMO_TYPE}function isPortal(object){return typeOf(object)===REACT_PORTAL_TYPE}function isProfiler(object){return typeOf(object)===REACT_PROFILER_TYPE}function isStrictMode(object){return typeOf(object)===REACT_STRICT_MODE_TYPE}function isSuspense(object){return typeOf(object)===REACT_SUSPENSE_TYPE}exports.AsyncMode=AsyncMode,exports.ConcurrentMode=ConcurrentMode,exports.ContextConsumer=ContextConsumer,exports.ContextProvider=ContextProvider,exports.Element=Element,exports.ForwardRef=ForwardRef,exports.Fragment=Fragment,exports.Lazy=Lazy,exports.Memo=Memo,exports.Portal=Portal,exports.Profiler=Profiler,exports.StrictMode=StrictMode,exports.Suspense=Suspense,exports.isAsyncMode=isAsyncMode,exports.isConcurrentMode=isConcurrentMode,exports.isContextConsumer=isContextConsumer,exports.isContextProvider=isContextProvider,exports.isElement=isElement,exports.isForwardRef=isForwardRef,exports.isFragment=isFragment,exports.isLazy=isLazy,exports.isMemo=isMemo,exports.isPortal=isPortal,exports.isProfiler=isProfiler,exports.isStrictMode=isStrictMode,exports.isSuspense=isSuspense,exports.isValidElementType=isValidElementType,exports.typeOf=typeOf}()}).call(this,require("_process"))},{_process:1}],16:[function(require,module,exports){"use strict";var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l,exports.ConcurrentMode=m,exports.ContextConsumer=k,exports.ContextProvider=h,exports.Element=c,exports.ForwardRef=n,exports.Fragment=e,exports.Lazy=t,exports.Memo=r,exports.Portal=d,exports.Profiler=g,exports.StrictMode=f,exports.Suspense=p,exports.isAsyncMode=function(a){return A(a)||z(a)===l},exports.isConcurrentMode=A,exports.isContextConsumer=function(a){return z(a)===k},exports.isContextProvider=function(a){return z(a)===h},exports.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},exports.isForwardRef=function(a){return z(a)===n},exports.isFragment=function(a){return z(a)===e},exports.isLazy=function(a){return z(a)===t},exports.isMemo=function(a){return z(a)===r},exports.isPortal=function(a){return z(a)===d},exports.isProfiler=function(a){return z(a)===g},exports.isStrictMode=function(a){return z(a)===f},exports.isSuspense=function(a){return z(a)===p},exports.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"==typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)},exports.typeOf=z},{}],17:[function(require,module,exports){(function(process){"use strict";"production"===process.env.NODE_ENV?module.exports=require("./cjs/react-is.production.min.js"):module.exports=require("./cjs/react-is.development.js")}).call(this,require("_process"))},{"./cjs/react-is.development.js":15,"./cjs/react-is.production.min.js":16,_process:1}],18:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var isTouch=!1;"undefined"!=typeof window&&(isTouch="ontouchstart"in window||navigator.msMaxTouchPoints);var JoyrideBeacon=function(_React$Component){_inherits(JoyrideBeacon,_React$Component);function JoyrideBeacon(){return _classCallCheck(this,JoyrideBeacon),_possibleConstructorReturn(this,(JoyrideBeacon.__proto__||Object.getPrototypeOf(JoyrideBeacon)).apply(this,arguments))}return _createClass(JoyrideBeacon,[{key:"render",value:function(){var _props=this.props,eventType=_props.eventType,onTrigger=_props.onTrigger,step=_props.step,xPos=_props.xPos,yPos=_props.yPos,styles={beacon:{left:xPos,position:!0===step.isFixed?"fixed":"absolute",top:yPos},inner:{},outer:{}},stepStyles=step.style||{},rgb=void 0;return stepStyles.beacon&&("string"==typeof stepStyles.beacon?(rgb=(0,_utils.hexToRGB)(stepStyles.beacon),styles.inner.backgroundColor=stepStyles.beacon,styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.2)",borderColor:stepStyles.beacon}):(stepStyles.beacon.inner&&(styles.inner.backgroundColor=stepStyles.beacon.inner),stepStyles.beacon.outer&&(rgb=(0,_utils.hexToRGB)(stepStyles.beacon.outer),styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.4)",borderColor:stepStyles.beacon.outer}))),_react2.default.createElement("button",{className:"joyride-beacon",style:styles.beacon,onClick:"click"===eventType||isTouch?onTrigger:null,onMouseEnter:"hover"!==eventType||isTouch?null:onTrigger},_react2.default.createElement("span",{className:"joyride-beacon__inner",style:styles.inner}),_react2.default.createElement("span",{className:"joyride-beacon__outer",style:styles.outer}))}}]),JoyrideBeacon}(_react2.default.Component);JoyrideBeacon.propTypes={eventType:_propTypes2.default.string.isRequired,onTrigger:_propTypes2.default.func.isRequired,step:_propTypes2.default.object.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideBeacon.defaultProps={xPos:-1e3,yPos:-1e3},exports.default=JoyrideBeacon},{"./utils":21,"prop-types":10,react:"react"}],19:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var JoyrideTooltip=function(_React$Component){_inherits(JoyrideTooltip,_React$Component);function JoyrideTooltip(props){_classCallCheck(this,JoyrideTooltip);var _this=_possibleConstructorReturn(this,(JoyrideTooltip.__proto__||Object.getPrototypeOf(JoyrideTooltip)).call(this,props));return _this.handleMouseMove=function(e){var event=e||window.e,hole=_this.state.styles.hole,offsetY="fixed"===hole.position?event.clientY:event.pageY,offsetX="fixed"===hole.position?event.clientX:event.pageX,inHoleHeight=offsetY>=hole.top&&offsetY<=hole.top+hole.height,inHoleWidth=offsetX>=hole.left&&offsetX<=hole.left+hole.width,inHole=inHoleWidth&&inHoleHeight;inHole&&!_this.state.mouseOverHole&&_this.setState({mouseOverHole:!0}),!inHole&&_this.state.mouseOverHole&&_this.setState({mouseOverHole:!1})},_this.state={},_this}return _createClass(JoyrideTooltip,[{key:"componentWillMount",value:function(){var opts=this.setOpts(),styles=this.setStyles(this.props.step.style,opts,this.props);this.setState({styles:styles,opts:opts})}},{key:"componentDidMount",value:function(){var _props=this.props,allowClicksThruHole=_props.allowClicksThruHole,onRender=_props.onRender,showOverlay=_props.showOverlay;this.forceUpdate(),onRender(),showOverlay&&allowClicksThruHole&&document.addEventListener("mousemove",this.handleMouseMove,!1)}},{key:"componentWillReceiveProps",value:function(nextProps){var nextAllowClicksThruHole=nextProps.allowClicksThruHole,nextAnimate=nextProps.animate,nextStandalone=nextProps.standalone,nextStep=nextProps.step,nextHolePadding=nextProps.holePadding,nextPosition=nextProps.position,nextXPos=nextProps.xPos,nextYPos=nextProps.yPos,nextShowOverlay=nextProps.showOverlay,_props2=this.props,allowClicksThruHole=_props2.allowClicksThruHole,animate=_props2.animate,standalone=_props2.standalone,step=_props2.step,holePadding=_props2.holePadding,position=_props2.position,xPos=_props2.xPos,yPos=_props2.yPos,showOverlay=_props2.showOverlay;if(nextAnimate!==animate||nextStandalone!==standalone||nextStep!==step||nextHolePadding!==holePadding||nextPosition!==position||nextXPos!==xPos||nextYPos!==yPos){var opts=this.setOpts(nextProps),styles=this.setStyles(nextProps.step.style,opts,nextProps);this.setState({styles:styles,opts:opts})}nextShowOverlay!==showOverlay&&(nextShowOverlay&&nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1)),nextAllowClicksThruHole!==allowClicksThruHole&&(nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1))}},{key:"componentDidUpdate",value:function(prevProps){var _props3=this.props,onRender=_props3.onRender,selector=_props3.selector;prevProps.selector!==selector&&(this.forceUpdate(),onRender())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!1)}},{key:"getArrowPosition",value:function(position){var arrowPosition=position;return window.innerWidth<480?position<8?arrowPosition=8:position>92&&(arrowPosition=92):window.innerWidth<1024?position<6?arrowPosition=6:position>94&&(arrowPosition=94):position<5?arrowPosition=5:position>95&&(arrowPosition=95),arrowPosition}},{key:"generateArrow",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.location=opts.location||"top",opts.color=opts.color||"#f04",opts.color=opts.color.replace("#","%23"),opts.width=opts.width||36,opts.height=opts.width/2,opts.scale=opts.width/16,opts.rotate="0";var height=opts.height,rotate=opts.rotate,width=opts.width;return"bottom"===opts.location?rotate="180 8 4":"left"===opts.location?(height=opts.width,width=opts.height,rotate="270 8 8"):"right"===opts.location&&(height=opts.width,width=opts.height,rotate="90 4 4"),"data:image/svg+xml,%3Csvg%20width%3D%22"+width+"%22%20height%3D%22"+height+"%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpolygon%20points%3D%220%2C%200%208%2C%208%2016%2C0%22%20fill%3D%22"+opts.color+"%22%20transform%3D%22scale%28"+opts.scale+"%29%20rotate%28"+rotate+"%29%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E"}},{key:"setStyles",value:function(stepStyles,opts,props){var holePadding=props.holePadding,step=props.step,xPos=props.xPos,yPos=props.yPos,isFixed=!0===step.isFixed,styles={arrow:{left:opts.arrowPosition},buttons:{},header:{},main:{},footer:{},hole:{},tooltip:{position:isFixed?"fixed":"absolute",top:Math.round(yPos),left:Math.round(xPos)}};return styles.hole={top:Math.round(opts.rect.top-(isFixed?0:document.body.getBoundingClientRect().top)-holePadding),left:Math.round(opts.rect.left-holePadding),width:Math.round(opts.rect.width+2*holePadding),height:Math.round(opts.rect.height+2*holePadding)},isFixed&&(styles.hole.position="fixed"),styles.buttons={back:{},close:{},primary:{},skip:{}},stepStyles&&(stepStyles.backgroundColor&&(styles.arrow.backgroundImage='url("'+this.generateArrow({location:opts.positonBaseClass,color:stepStyles.backgroundColor})+'")',styles.tooltip.backgroundColor=stepStyles.backgroundColor),stepStyles.borderRadius&&(styles.tooltip.borderRadius=stepStyles.borderRadius),stepStyles.color&&(styles.buttons.primary.color=stepStyles.color,styles.buttons.close.color=stepStyles.color,styles.buttons.skip.color=stepStyles.color,styles.header.color=stepStyles.color,styles.tooltip.color=stepStyles.color,stepStyles.mainColor&&stepStyles.mainColor===stepStyles.color&&(styles.buttons.primary.color=stepStyles.backgroundColor)),stepStyles.mainColor&&(styles.buttons.primary.backgroundColor=stepStyles.mainColor,styles.buttons.back.color=stepStyles.mainColor,styles.header.borderColor=stepStyles.mainColor),stepStyles.textAlign&&(styles.tooltip.textAlign=stepStyles.textAlign),stepStyles.width&&(styles.tooltip.width=stepStyles.width),stepStyles.header&&(styles.header=_extends({},styles.header,stepStyles.header)),stepStyles.main&&(styles.main=_extends({},styles.main,stepStyles.main)),stepStyles.footer&&(styles.footer=_extends({},styles.footer,stepStyles.footer)),stepStyles.back&&(styles.buttons.back=_extends({},styles.buttons.back,stepStyles.back)),stepStyles.arrow&&(styles.arrow=_extends({},styles.arrow,stepStyles.arrow)),stepStyles.button&&(styles.buttons.primary=_extends({},styles.buttons.primary,stepStyles.button)),stepStyles.close&&(styles.buttons.close=_extends({},styles.buttons.close,stepStyles.close)),stepStyles.skip&&(styles.buttons.skip=_extends({},styles.buttons.skip,stepStyles.skip)),stepStyles.hole&&(styles.hole=_extends({},stepStyles.hole,styles.hole))),styles}},{key:"setOpts",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,animate=props.animate,offsetParentSelector=props.offsetParentSelector,position=props.position,standalone=props.standalone,target=props.target,xPos=props.xPos,offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector)),tooltip=document.querySelector(".joyride-tooltip"),opts={classes:["joyride-tooltip"],rect:(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),positionClass:position};return opts.positonBaseClass=opts.positionClass.match(/-/)?opts.positionClass.split("-")[0]:opts.positionClass,(/^bottom$/.test(opts.positionClass)||/^top$/.test(opts.positionClass))&&xPos>-1&&(opts.tooltip={width:450},tooltip&&(opts.tooltip=(0,_utils.getOffsetBoundingClientRect)(tooltip,offsetParent)),opts.targetMiddle=opts.rect.left+opts.rect.width/2,opts.arrowPosition=((opts.targetMiddle-xPos)/opts.tooltip.width*100).toFixed(2),opts.arrowPosition=this.getArrowPosition(opts.arrowPosition)+"%"),standalone&&opts.classes.push("joyride-tooltip--standalone"),opts.positonBaseClass!==opts.positionClass&&opts.classes.push(opts.positonBaseClass),opts.classes.push(opts.positionClass),animate&&opts.classes.push("joyride-tooltip--animate"),opts}},{key:"render",value:function(){var _props4=this.props,buttons=_props4.buttons,disableOverlay=_props4.disableOverlay,onClick=_props4.onClick,selector=_props4.selector,showOverlay=_props4.showOverlay,step=_props4.step,target=_props4.target,type=_props4.type;if(target){var _state=this.state,opts=_state.opts,styles=_state.styles,output={};if(step.title&&(output.header=_react2.default.createElement("div",{className:"joyride-tooltip__header",style:styles.header},step.title)),buttons.skip&&(output.skip=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--skip",style:styles.buttons.skip,"data-type":"skip",onClick:onClick},buttons.skip)),step.text&&"string"!=typeof step.text?output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main},step.text):output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main,dangerouslySetInnerHTML:{__html:step.text||""}}),buttons.secondary&&(output.secondary=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--secondary",style:styles.buttons.back,"data-type":"back",onClick:onClick},buttons.secondary)),"hover"===step.event&&(styles.buttons.close.opacity=0),output.tooltipComponent=_react2.default.createElement("div",{className:opts.classes.join(" "),style:styles.tooltip,"data-target":selector},_react2.default.createElement("div",{className:"joyride-tooltip__triangle joyride-tooltip__triangle-"+opts.positionClass,style:styles.arrow}),_react2.default.createElement("button",{className:"joyride-tooltip__close"+(output.header?" joyride-tooltip__close--header":""),style:styles.buttons.close,"data-type":"close",onClick:onClick}),output.header,output.main,_react2.default.createElement("div",{className:"joyride-tooltip__footer",style:styles.footer},output.skip,output.secondary,_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--primary",style:styles.buttons.primary,"data-type":["single","casual"].includes(type)?"close":"next",onClick:onClick},buttons.primary))),showOverlay&&(output.hole=_react2.default.createElement("div",{className:"joyride-hole "+_utils.browser,style:styles.hole,onClick:function(){}})),!showOverlay)return output.tooltipComponent;var overlayStyles={cursor:disableOverlay?"default":"pointer",height:document.body.clientHeight,pointerEvents:this.state.mouseOverHole?"none":"auto"};return _react2.default.createElement("div",{className:"joyride-overlay",style:overlayStyles,"data-type":"close",onClick:disableOverlay?void 0:onClick},output.hole,output.tooltipComponent)}}}]),JoyrideTooltip}(_react2.default.Component);JoyrideTooltip.propTypes={allowClicksThruHole:_propTypes2.default.bool.isRequired,animate:_propTypes2.default.bool.isRequired,buttons:_propTypes2.default.object.isRequired,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,offsetParentSelector:_propTypes2.default.string,onClick:_propTypes2.default.func.isRequired,onRender:_propTypes2.default.func.isRequired,position:_propTypes2.default.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","right","left"]).isRequired,selector:_propTypes2.default.string.isRequired,showOverlay:_propTypes2.default.bool.isRequired,standalone:_propTypes2.default.bool,step:_propTypes2.default.object.isRequired,target:_propTypes2.default.object.isRequired,type:_propTypes2.default.string.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideTooltip.defaultProps={buttons:{primary:"Close"},step:{},xPos:-1e3,yPos:-1e3},exports.default=JoyrideTooltip},{"./utils":21,"prop-types":10,react:"react"}],20:[function(require,module,exports){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_scroll=require("scroll"),_scroll2=_interopRequireDefault(_scroll),_nestedProperty=require("nested-property"),_nestedProperty2=_interopRequireDefault(_nestedProperty),_utils=require("./utils"),_Beacon=require("./Beacon"),_Beacon2=_interopRequireDefault(_Beacon),_Tooltip=require("./Tooltip"),_Tooltip2=_interopRequireDefault(_Tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var defaultState={action:"",index:0,isRunning:!1,isTourSkipped:!1,shouldRedraw:!0,shouldRenderTooltip:!1,shouldRun:!1,standaloneData:!1,xPos:-1e3,yPos:-1e3},callbackTypes={STEP_BEFORE:"step:before",BEACON_BEFORE:"beacon:before",BEACON_TRIGGER:"beacon:trigger",TOOLTIP_BEFORE:"tooltip:before",STEP_AFTER:"step:after",STANDALONE_BEFORE:"standalone:before",STANDALONE_AFTER:"standalone:after",OVERLAY:"overlay:click",HOLE:"hole:click",FINISHED:"finished",TARGET_NOT_FOUND:"error:target_not_found"},DEFAULTS={position:"top",minWidth:290},hasTouch=!1,Joyride=function(_React$Component){_inherits(Joyride,_React$Component);function Joyride(props){_classCallCheck(this,Joyride);var _this=_possibleConstructorReturn(this,(Joyride.__proto__||Object.getPrototypeOf(Joyride)).call(this,props));return _this.handleKeyboardNavigation=function(e){var _this$state=_this.state,index=_this$state.index,shouldRenderTooltip=_this$state.shouldRenderTooltip,steps=_this.props.steps,intKey=window.Event?e.which:e.keyCode,hasSteps=void 0;shouldRenderTooltip&&([32,38,40].includes(intKey)&&e.preventDefault(),27===intKey?_this.toggleTooltip({show:!1,index:index+1,action:"esc"}):[13,32].includes(intKey)&&(hasSteps=Boolean(steps[index+1]),_this.toggleTooltip({show:hasSteps,index:index+1,action:"next"})))},_this.handleClickStandaloneTrigger=function(e){e.preventDefault();var _this$state2=_this.state,isRunning=_this$state2.isRunning,standaloneData=_this$state2.standaloneData,tooltipData=e.currentTarget.dataset.tooltip;["mouseenter","mouseleave"].includes(e.type)&&hasTouch||tooltipData&&(tooltipData=JSON.parse(tooltipData),standaloneData&&standaloneData.selector===tooltipData.selector?document.querySelector(".joyride-tooltip__close").click():_this.setState({isRunning:!1,shouldRenderTooltip:!1,shouldRun:isRunning,standaloneData:tooltipData,xPos:-1e3,yPos:-1e3}))},_this.handleClickBeacon=function(e){e.preventDefault();var index=_this.state.index,steps=_this.props.steps;_this.triggerCallback({action:e.type,index:index,type:callbackTypes.BEACON_TRIGGER,step:steps[index]}),_this.toggleTooltip({show:!0,index:index,action:"beacon:"+e.type})},_this.handleClickTooltip=function(e){var _this$state3=_this.state,index=_this$state3.index,shouldRun=_this$state3.shouldRun,_this$props=_this.props,steps=_this$props.steps,type=_this$props.type,el=e.currentTarget.className.includes("joyride-")&&["A","BUTTON"].includes(e.currentTarget.tagName)?e.currentTarget:e.target,dataType=el.dataset.type;if("string"==typeof el.className&&el.className.startsWith("joyride-")){e.preventDefault(),e.stopPropagation();var tooltip=document.querySelector(".joyride-tooltip"),newIndex=index+("back"===dataType?-1:1);if("skip"===dataType&&(_this.setState({isTourSkipped:!0}),newIndex=steps.length+1),tooltip.classList.contains("joyride-tooltip--standalone"))_this.setState({isRunning:shouldRun,shouldRedraw:!0,shouldRun:!1,standaloneData:!1});else if(dataType){var shouldDisplay=["continuous","guided"].includes(type)&&!["close","skip"].includes(dataType)&&Boolean(steps[newIndex]);_this.toggleTooltip({show:shouldDisplay,index:newIndex,action:dataType})}"joyride-overlay"===e.target.className&&_this.triggerCallback({action:"click",type:callbackTypes.OVERLAY,step:steps[index]}),e.target.classList.contains("joyride-hole")&&_this.triggerCallback({action:"click",type:callbackTypes.HOLE,step:steps[index]})}},_this.handleRenderTooltip=function(){_this.calcPlacement()},_this.state=_extends({},defaultState),_this.listeners={tooltips:{}},_this}return _createClass(Joyride,[{key:"componentDidMount",value:function(){var _this2=this,_props=this.props,autoStart=_props.autoStart,keyboardNavigation=_props.keyboardNavigation,resizeDebounce=_props.resizeDebounce,resizeDebounceDelay=_props.resizeDebounceDelay,run=_props.run,steps=_props.steps,type=_props.type;(0,_utils.logger)({type:"joyride:initialized",msg:[this.props],debug:this.props.debug});var stepsAreValid=this.checkStepsValidity(steps);if(steps&&stepsAreValid&&run&&this.start(autoStart),resizeDebounce){var timeoutId=void 0;this.listeners.resize=function(){clearTimeout(timeoutId),timeoutId=setTimeout(function(){timeoutId=null,_this2.calcPlacement()},resizeDebounceDelay)}}else this.listeners.resize=function(){_this2.calcPlacement()};window.addEventListener("resize",this.listeners.resize),keyboardNavigation&&"continuous"===type&&(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)),window.addEventListener("touchstart",function setHasTouch(){hasTouch=!0,window.removeEventListener("touchstart",setHasTouch)},!1)}},{key:"componentWillReceiveProps",value:function(nextProps){(0,_utils.logger)({type:"joyride:willReceiveProps",msg:[nextProps],debug:nextProps.debug});var _state=this.state,isRunning=_state.isRunning,shouldRun=_state.shouldRun,standaloneData=_state.standaloneData,_props2=this.props,keyboardNavigation=_props2.keyboardNavigation,run=_props2.run,steps=_props2.steps,stepIndex=_props2.stepIndex,stepsChanged=nextProps.steps!==steps,stepIndexChanged=nextProps.stepIndex!==stepIndex&&nextProps.stepIndex!==this.state.index,runChanged=nextProps.run!==run,shouldStart=!1,didStop=!1;if(stepsChanged&&this.checkStepsValidity(nextProps.steps)&&(nextProps.steps&&nextProps.steps.length?!steps.length&&nextProps.run&&(shouldStart=!0):this.reset()),runChanged&&(run&&!nextProps.run?(this.stop(),didStop=!0):!run&&nextProps.run?shouldStart=!0:isRunning||!shouldRun||standaloneData||(shouldStart=!0)),stepIndexChanged){var hasStep=nextProps.steps[nextProps.stepIndex],shouldDisplay=hasStep&&nextProps.autoStart;runChanged&&shouldStart?this.start(nextProps.autoStart,nextProps.steps,nextProps.stepIndex):nextProps.run&&!isRunning?this.start(nextProps.autoStart,nextProps.steps,nextProps.stepIndex):didStop||this.toggleTooltip({show:shouldDisplay,index:nextProps.stepIndex,steps:nextProps.steps,action:"jump"})}else shouldStart&&this.start(nextProps.autoStart,nextProps.steps);!this.listeners.keyboard&&(!keyboardNavigation&&nextProps.keyboardNavigation||keyboardNavigation)&&"continuous"===nextProps.type?(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)):!this.listeners.keyboard||!keyboardNavigation||nextProps.keyboardNavigation&&"continuous"===nextProps.type||(document.body.removeEventListener("keydown",this.listeners.keyboard),delete this.listeners.keyboard)}},{key:"componentWillUpdate",value:function(nextProps,nextState){var _state2=this.state,index=_state2.index,isRunning=_state2.isRunning,shouldRenderTooltip=_state2.shouldRenderTooltip,standaloneData=_state2.standaloneData,steps=this.props.steps,nextSteps=nextProps.steps,step=steps[index],nextStep=nextSteps[nextState.index],hasRenderedTarget=Boolean(this.getStepTargetElement(nextStep));!standaloneData&&nextState.standaloneData?this.triggerCallback({type:callbackTypes.STANDALONE_BEFORE,step:nextState.standaloneData}):standaloneData&&!nextState.standaloneData&&this.triggerCallback({type:callbackTypes.STANDALONE_AFTER,step:standaloneData}),"start"!==nextState.action||nextState.isRunning||nextStep&&!hasRenderedTarget&&(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})),!isRunning&&nextState.isRunning&&0===nextState.index&&(this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep}),nextState.shouldRenderTooltip||this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),isRunning&&nextState.index!==index&&(this.triggerCallback({action:nextState.action,index:index,type:callbackTypes.STEP_AFTER,step:step}),nextStep&&!hasRenderedTarget?(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})):nextStep&&nextState.index&&this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep})),
!nextState.isRunning||shouldRenderTooltip===nextState.shouldRenderTooltip&&nextState.index===index||(nextState.shouldRenderTooltip?this.triggerCallback({action:nextState.action||(0===nextState.index?"autostart":""),index:nextState.index,type:callbackTypes.TOOLTIP_BEFORE,step:nextStep}):this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),nextState.isRunning||!nextSteps.length||index===nextState.index||nextStep||this.triggerCallback({action:nextState.action,type:callbackTypes.FINISHED,steps:nextSteps,isTourSkipped:nextState.isTourSkipped})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _state3=this.state,index=_state3.index,shouldRedraw=_state3.shouldRedraw,isRunning=_state3.isRunning,shouldRun=_state3.shouldRun,standaloneData=_state3.standaloneData,_props3=this.props,scrollToFirstStep=_props3.scrollToFirstStep,scrollToSteps=_props3.scrollToSteps,steps=_props3.steps,step=steps[index],scrollTop=this.getScrollTop(),shouldScroll=(scrollToFirstStep||index>0||prevState.index>index)&&step&&!step.isFixed;shouldRedraw&&step&&this.calcPlacement(),isRunning&&scrollToSteps&&shouldScroll&&scrollTop>=0&&_scroll2.default.top((0,_utils.getRootEl)(),this.getScrollTop()),steps.length&&!isRunning&&shouldRun&&!standaloneData&&this.start()}},{key:"componentWillUnmount",value:function(){var _this3=this;window.removeEventListener("resize",this.listeners.resize),this.listeners.keyboard&&document.body.removeEventListener("keydown",this.listeners.keyboard),Object.keys(this.listeners.tooltips).length&&Object.keys(this.listeners.tooltips).map(function(key){return{el:document.querySelector(key),event:_this3.listeners.tooltips[key].event,cb:_this3.listeners.tooltips[key].cb,key:key}}).filter(function(_ref){return!!_ref.el}).forEach(function(_ref2){var el=_ref2.el,event=_ref2.event,cb=_ref2.cb,key=_ref2.key;el.removeEventListener(event,cb),delete _this3.listeners.tooltips[key]})}},{key:"start",value:function(autorun){var steps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.steps,startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.index,hasMountedTarget=Boolean(this.getStepTargetElement(steps[startIndex])),shouldRenderTooltip=!0===autorun&&hasMountedTarget;(0,_utils.logger)({type:"joyride:start",msg:["autorun:",!0===autorun],debug:this.props.debug}),this.setState({action:"start",index:startIndex,isRunning:Boolean(steps.length)&&hasMountedTarget,shouldRenderTooltip:shouldRenderTooltip,shouldRun:!steps.length})}},{key:"stop",value:function(){(0,_utils.logger)({type:"joyride:stop",debug:this.props.debug}),this.setState({isRunning:!1,shouldRenderTooltip:!1})}},{key:"next",value:function(){var _state4=this.state,index=_state4.index,shouldRenderTooltip=_state4.shouldRenderTooltip,steps=this.props.steps,nextIndex=index+1,shouldDisplay=Boolean(steps[nextIndex])&&shouldRenderTooltip;(0,_utils.logger)({type:"joyride:next",msg:["new index:",nextIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:nextIndex,action:"next"})}},{key:"back",value:function(){var _state5=this.state,index=_state5.index,shouldRenderTooltip=_state5.shouldRenderTooltip,steps=this.props.steps,previousIndex=index-1,shouldDisplay=Boolean(steps[previousIndex])&&shouldRenderTooltip;(0,_utils.logger)({type:"joyride:back",msg:["new index:",previousIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:previousIndex,action:"next"})}},{key:"reset",value:function(restart){var _state6=this.state,index=_state6.index,isRunning=_state6.isRunning,shouldRestart=!0===restart,newState=_extends({},defaultState,{isRunning:shouldRestart,shouldRenderTooltip:this.props.autoStart});(0,_utils.logger)({type:"joyride:reset",msg:["restart:",shouldRestart],debug:this.props.debug}),shouldRestart&&isRunning===shouldRestart&&0===index&&this.forceUpdate(),this.setState(newState)}},{key:"getProgress",value:function(){var index=this.state.index,steps=this.props.steps;return(0,_utils.logger)({type:"joyride:getProgress",msg:["steps:",steps],debug:this.props.debug}),{index:index,percentageComplete:parseFloat((index/steps.length*100).toFixed(2).replace(".00","")),step:steps[index]}}},{key:"addTooltip",value:function(data){if(!this.checkStepValidity(data))return void(0,_utils.logger)({type:"joyride:addTooltip:FAIL",msg:["data:",data],debug:this.props.debug});(0,_utils.logger)({type:"joyride:addTooltip",msg:["data:",data],debug:this.props.debug});var key=data.trigger||(0,_utils.sanitizeSelector)(data.selector),el=document.querySelector(key);if(el){el.setAttribute("data-tooltip",JSON.stringify(data));"hover"===(data.event||"click")&&(this.listeners.tooltips[key+"mouseenter"]={event:"mouseenter",cb:this.handleClickStandaloneTrigger},this.listeners.tooltips[key+"mouseleave"]={event:"mouseleave",cb:this.handleClickStandaloneTrigger},el.addEventListener("mouseenter",this.listeners.tooltips[key+"mouseenter"].cb),el.addEventListener("mouseleave",this.listeners.tooltips[key+"mouseleave"].cb)),this.listeners.tooltips[key+"click"]={event:"click",cb:this.handleClickStandaloneTrigger},el.addEventListener("click",this.listeners.tooltips[key+"click"].cb)}}},{key:"parseSteps",value:function(steps){return console.warn("joyride.parseSteps() is deprecated.  It is no longer necessary to parse steps before providing them to Joyride"),steps}},{key:"checkStepValidity",value:function(step){var _this4=this;if(!step||"object"!==(void 0===step?"undefined":_typeof(step))||Array.isArray(step))return(0,_utils.logger)({type:"joyride:checkStepValidity",msg:"Did not provide a step object.",warn:!0,debug:this.props.debug}),!1;var requiredFields=["selector"],hasRequiredField=function(requiredField){var hasField=Boolean(step[requiredField]);return hasField||(0,_utils.logger)({type:"joyride:checkStepValidity",msg:["Provided a step without the required "+requiredField+" property.","Step:",step],warn:!0,debug:_this4.props.debug}),hasField};return requiredFields.every(hasRequiredField)}},{key:"checkStepsValidity",value:function(steps){return Array.isArray(steps)||"object"!==(void 0===steps?"undefined":_typeof(steps))?steps.length>0&&steps.every(this.checkStepValidity):this.checkStepValidity(steps)}},{key:"getStepTargetElement",value:function(step){if(!this.checkStepValidity(step))return null;var el=document.querySelector((0,_utils.sanitizeSelector)(step.selector));return el||((0,_utils.logger)({type:"joyride:getStepTargetElement",msg:"Target not rendered. For best results only add steps after they are mounted.",warn:!0,debug:this.props.debug}),null)}},{key:"getElementDimensions",value:function(){var _state7=this.state,shouldRenderTooltip=_state7.shouldRenderTooltip,standaloneData=_state7.standaloneData,displayTooltip=!!standaloneData||shouldRenderTooltip,el=document.querySelector(displayTooltip?".joyride-tooltip":".joyride-beacon"),height=0,width=0;if(el){var styles=window.getComputedStyle(el);height=el.clientHeight+parseInt(styles.marginTop||0,10)+parseInt(styles.marginBottom||0,10),width=el.clientWidth+parseInt(styles.marginLeft||0,10)+parseInt(styles.marginRight||0,10)}return{height:height,width:width}}},{key:"getScrollTop",value:function(){var _state8=this.state,index=_state8.index,yPos=_state8.yPos,_props4=this.props,offsetParentSelector=_props4.offsetParentSelector,scrollOffset=_props4.scrollOffset,steps=_props4.steps,step=steps[index],target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector));if(!target)return 0;var rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),targetTop=rect.top+(window.pageYOffset||document.documentElement.scrollTop),position=this.calcPosition(step),scrollTo=0;return/^top/.test(position)?scrollTo=Math.floor(yPos-scrollOffset):/^bottom|^left|^right/.test(position)&&(scrollTo=Math.floor(targetTop-scrollOffset)),scrollTo}},{key:"triggerCallback",value:function(options){var callback=this.props.callback;"function"==typeof callback&&((0,_utils.logger)({type:"joyride:triggerCallback",msg:[options],debug:this.props.debug}),callback(options))}},{key:"toggleTooltip",value:function(_ref3){var show=_ref3.show,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.state.index:_ref3$index,action=_ref3.action,_ref3$steps=_ref3.steps,steps=void 0===_ref3$steps?this.props.steps:_ref3$steps,nextStep=steps[index],hasMountedTarget=Boolean(this.getStepTargetElement(nextStep));this.setState({action:action,index:index,isRunning:!(!nextStep||!hasMountedTarget)&&this.state.isRunning,shouldRedraw:!show||!hasMountedTarget,shouldRenderTooltip:show&&hasMountedTarget,xPos:-1e3,yPos:-1e3})}},{key:"calcPlacement",value:function(){var _state9=this.state,index=_state9.index,isRunning=_state9.isRunning,standaloneData=_state9.standaloneData,shouldRenderTooltip=_state9.shouldRenderTooltip,_props5=this.props,offsetParentSelector=_props5.offsetParentSelector,steps=_props5.steps,tooltipOffset=_props5.tooltipOffset,step=standaloneData||steps[index]||{},displayTooltip=!!standaloneData||shouldRenderTooltip,target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector));if((0,_utils.logger)({type:"joyride:calcPlacement"+this.getRenderStage(),msg:["step:",step],debug:this.props.debug}),target){var placement={x:-1e3,y:-1e3};if(step&&(standaloneData||isRunning&&steps[index])){var offsetX=_nestedProperty2.default.get(step,"style.beacon.offsetX")||0,offsetY=_nestedProperty2.default.get(step,"style.beacon.offsetY")||0,position=this.calcPosition(step),scrollingElement=(0,_utils.getRootEl)().getBoundingClientRect(),scrollTop=!0===step.isFixed?0:scrollingElement.top,component=this.getElementDimensions(),rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent);/^left/.test(position)?placement.x=rect.left-(displayTooltip?component.width+tooltipOffset:component.width/2+offsetX):/^right/.test(position)?placement.x=rect.left+rect.width-(displayTooltip?-tooltipOffset:component.width/2-offsetX):placement.x=rect.left+(rect.width/2-component.width/2),/^top/.test(position)?placement.y=rect.top-scrollTop-(displayTooltip?component.height+tooltipOffset:component.height/2+offsetY):/^bottom/.test(position)?placement.y=rect.top-scrollTop+(rect.height-(displayTooltip?-tooltipOffset:component.height/2-offsetY)):placement.y=rect.top-scrollTop,/^bottom|^top/.test(position)&&(/left/.test(position)?placement.x=rect.left-(displayTooltip?tooltipOffset:component.width/2):/right/.test(position)&&(placement.x=rect.left+(rect.width-(displayTooltip?component.width-tooltipOffset:component.width/2)))),this.setState({shouldRedraw:!1,xPos:this.preventWindowOverflow(Math.ceil(placement.x),"x",component.width,component.height),yPos:this.preventWindowOverflow(Math.ceil(placement.y),"y",component.width,component.height)})}}}},{key:"calcPosition",value:function(step){var _props6=this.props,offsetParentSelector=_props6.offsetParentSelector,tooltipOffset=_props6.tooltipOffset,scrollingElement=(0,_utils.getRootEl)(),scrollingElementRect=scrollingElement.getBoundingClientRect(),target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector)),rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),_getElementDimensions=this.getElementDimensions(),height=_getElementDimensions.height,_getElementDimensions2=_getElementDimensions.width,width=void 0===_getElementDimensions2?DEFAULTS.minWidth:_getElementDimensions2,position=step.position||DEFAULTS.position;return/^left/.test(position)&&rect.left-(width+tooltipOffset)<0?position="top":/^right/.test(position)&&rect.left+rect.width+(width+tooltipOffset)>scrollingElementRect.width&&(position="bottom"),/^top/.test(position)&&(rect.top+scrollingElement.scrollTop-(height+tooltipOffset)<0||step.isFixed&&rect.top-height<0)?position="bottom":/^bottom/.test(position)&&(rect.top+scrollingElement.scrollTop+(height+tooltipOffset)>(0,_utils.getDocHeight)()||step.isFixed&&rect.top+rect.height+height>scrollingElementRect.height)&&(position="top"),position}},{key:"getRenderStage",value:function(){var _state10=this.state,shouldRedraw=_state10.shouldRedraw,xPos=_state10.xPos;return shouldRedraw?":redraw":xPos<0?":pre-render":""}},{key:"preventWindowOverflow",value:function(value,axis,elWidth,elHeight){var winWidth=window.innerWidth,docHeight=(0,_utils.getDocHeight)(),newValue=value;return"x"===axis?value+elWidth>=winWidth?newValue=winWidth-elWidth-15:value<15&&(newValue=15):"y"===axis&&(value+elHeight>=docHeight?newValue=docHeight-elHeight-15:value<15&&(newValue=15)),newValue}},{key:"createComponent",value:function(){var _state11=this.state,index=_state11.index,shouldRedraw=_state11.shouldRedraw,shouldRenderTooltip=_state11.shouldRenderTooltip,standaloneData=_state11.standaloneData,xPos=_state11.xPos,yPos=_state11.yPos,_props7=this.props,disableOverlay=_props7.disableOverlay,holePadding=_props7.holePadding,locale=_props7.locale,offsetParentSelector=_props7.offsetParentSelector,showBackButton=_props7.showBackButton,showOverlay=_props7.showOverlay,showSkipButton=_props7.showSkipButton,showStepsProgress=_props7.showStepsProgress,steps=_props7.steps,type=_props7.type,currentStep=standaloneData||steps[index],step=_extends({},currentStep),target=this.getStepTargetElement(step),component=void 0,allowClicksThruHole=step&&step.allowClicksThruHole||this.props.allowClicksThruHole,shouldShowOverlay=!standaloneData&&showOverlay,buttons={primary:locale.close};if((0,_utils.logger)({type:"joyride:createComponent"+this.getRenderStage(),msg:["component:",shouldRenderTooltip||standaloneData?"Tooltip":"Beacon","animate:",xPos>-1&&!shouldRedraw,"step:",step],debug:this.props.debug,warn:!target}),!target)return!1;if(shouldRenderTooltip||standaloneData){var position=this.calcPosition(step);if(!standaloneData){if(["continuous","guided"].includes(type)){if(buttons.primary=locale.last,steps[index+1])if(showStepsProgress){var next=locale.next;"string"==typeof locale.next&&(next=_react2.default.createElement("span",null,locale.next)),buttons.primary=_react2.default.createElement("span",null,next," ",_react2.default.createElement("span",null,index+1+"/"+steps.length))}else buttons.primary=locale.next;showBackButton&&index>0&&(buttons.secondary=locale.back)}showSkipButton&&(buttons.skip=locale.skip)}component=_react2.default.createElement(_Tooltip2.default,{allowClicksThruHole:allowClicksThruHole,animate:xPos>-1&&!shouldRedraw,buttons:buttons,disableOverlay:disableOverlay,holePadding:holePadding,offsetParentSelector:offsetParentSelector,position:position,selector:(0,_utils.sanitizeSelector)(step.selector),showOverlay:shouldShowOverlay,step:step,standalone:Boolean(standaloneData),target:target,type:type,xPos:xPos,yPos:yPos,onClick:this.handleClickTooltip,onRender:this.handleRenderTooltip})}else component=_react2.default.createElement(_Beacon2.default,{step:step,xPos:xPos,yPos:yPos,onTrigger:this.handleClickBeacon,eventType:step.type||"click"});return component}},{key:"render",value:function(){var _state12=this.state,index=_state12.index,isRunning=_state12.isRunning,standaloneData=_state12.standaloneData,steps=this.props.steps,hasStep=Boolean(steps[index]),component=void 0,standaloneComponent=void 0;return isRunning&&hasStep?(0,_utils.logger)({type:"joyride:render"+this.getRenderStage(),msg:["step:",steps[index]],debug:this.props.debug}):!isRunning&&standaloneData&&(0,_utils.logger)({type:"joyride:render",msg:["tooltip:",standaloneData],debug:this.props.debug}),standaloneData?standaloneComponent=this.createComponent():isRunning&&hasStep&&(component=this.createComponent()),_react2.default.createElement("div",{className:"joyride"},component,standaloneComponent)}}]),Joyride}(_react2.default.Component);Joyride.propTypes={allowClicksThruHole:_propTypes2.default.bool,autoStart:_propTypes2.default.bool,callback:_propTypes2.default.func,debug:_propTypes2.default.bool,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,keyboardNavigation:_propTypes2.default.bool,locale:_propTypes2.default.object,offsetParentSelector:_propTypes2.default.string,resizeDebounce:_propTypes2.default.bool,resizeDebounceDelay:_propTypes2.default.number,run:_propTypes2.default.bool,scrollOffset:_propTypes2.default.number,scrollToFirstStep:_propTypes2.default.bool,scrollToSteps:_propTypes2.default.bool,showBackButton:_propTypes2.default.bool,showOverlay:_propTypes2.default.bool,showSkipButton:_propTypes2.default.bool,showStepsProgress:_propTypes2.default.bool,stepIndex:_propTypes2.default.number,steps:_propTypes2.default.array,tooltipOffset:_propTypes2.default.number,type:_propTypes2.default.string},Joyride.defaultProps={allowClicksThruHole:!1,autoStart:!1,debug:!1,disableOverlay:!1,holePadding:5,keyboardNavigation:!0,locale:{back:"Back",close:"Close",last:"Last",next:"Next",skip:"Skip"},offsetParentSelector:"body",resizeDebounce:!1,resizeDebounceDelay:200,run:!1,scrollOffset:20,scrollToFirstStep:!1,scrollToSteps:!0,showBackButton:!0,showOverlay:!0,showSkipButton:!1,showStepsProgress:!1,stepIndex:0,steps:[],tooltipOffset:15,type:"single"},exports.default=Joyride},{"./Beacon":18,"./Tooltip":19,"./utils":21,"nested-property":4,"prop-types":10,react:"react",scroll:34}],21:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.hexToRGB=hexToRGB,exports.getDocHeight=getDocHeight,exports.getRootEl=getRootEl,exports.logger=logger,exports.sanitizeSelector=sanitizeSelector,exports.getOffsetBoundingClientRect=getOffsetBoundingClientRect;function hexToRGB(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,newHex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b}),result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(newHex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null}function getBrowser(){if("undefined"==typeof window)return"node";var isOpera=Boolean(window.opera)||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox="undefined"!=typeof InstallTrigger,isChrome=!!window.chrome&&!!window.chrome.webstore,isSafari=(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!isChrome)&&!isOpera&&void 0!==window.webkitAudioContext,isIE=Boolean(document.documentMode);return isOpera?"opera":isFirefox?"firefox":isChrome?"chrome":isSafari?"safari":isIE?"ie":""}var browser=exports.browser=getBrowser();function getDocHeight(){var _document=document,body=_document.body,html=_document.documentElement;return Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)}function getRootEl(){var _document2=document,scrollingElement=_document2.scrollingElement;return scrollingElement||(["ie","firefox"].indexOf(browser)>-1?document.documentElement:document.body)}function logger(_ref){var _ref$type=_ref.type,type=void 0===_ref$type?"joyride":_ref$type,msg=_ref.msg,_ref$warn=_ref.warn,warn=void 0!==_ref$warn&&_ref$warn,_ref$debug=_ref.debug,debug=void 0!==_ref$debug&&_ref$debug,loggingFunction=warn?console.warn||console.error:console.log;debug&&(console.log("%c"+type,"color: #760bc5; font-weight: bold; font-size: 12px;"),msg&&(Array.isArray(msg)?loggingFunction.apply(console,msg):loggingFunction.apply(console,[msg])))}function sanitizeSelector(selector){return selector.dataset&&selector.dataset.reactid?(console.warn("Deprecation warning: React 15.0 removed reactid. Update your code."),'[data-reactid="'+selector.dataset.reactid+'"]'):selector.dataset&&(console.error("Unsupported error: React 15.0+ doesn’t write reactid to the DOM anymore, please use a plain class in your step.",selector),selector.className)?"."+selector.className.replace(" ","."):selector}function getOffsetBoundingClientRect(element,offsetParent){var elementRect=element.getBoundingClientRect();if(!offsetParent)return elementRect;var offsetParentRect=offsetParent.getBoundingClientRect(),offsetTop=offsetParentRect.top>0?elementRect.top-offsetParentRect.top:elementRect.top,offsetLeft=offsetParentRect.left>0?elementRect.left-offsetParentRect.left:elementRect.left;return{top:offsetTop,left:offsetLeft,right:offsetParentRect.right>0?offsetParentRect.right-elementRect.right:elementRect.right,bottom:offsetParentRect.bottom>0?offsetParentRect.bottom-elementRect.bottom:elementRect.bottom,x:offsetLeft,y:offsetTop,width:elementRect.width,height:elementRect.height}}},{}],22:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60,Motion=function(_React$Component){_inherits(Motion,_React$Component),_createClass(Motion,null,[{key:"propTypes",value:{defaultStyle:_propTypes2.default.objectOf(_propTypes2.default.number),style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired,children:_propTypes2.default.func.isRequired,onRest:_propTypes2.default.func},enumerable:!0}]);function Motion(props){var _this=this;_classCallCheck(this,Motion),_React$Component.call(this,props),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(destStyle){var dirty=!1,_state=_this.state,currentStyle=_state.currentStyle,currentVelocity=_state.currentVelocity,lastIdealStyle=_state.lastIdealStyle,lastIdealVelocity=_state.lastIdealVelocity;for(var key in destStyle)if(Object.prototype.hasOwnProperty.call(destStyle,key)){var styleValue=destStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,currentStyle=_extends({},currentStyle),currentVelocity=_extends({},currentVelocity),lastIdealStyle=_extends({},lastIdealStyle),lastIdealVelocity=_extends({},lastIdealVelocity)),currentStyle[key]=styleValue,currentVelocity[key]=0,lastIdealStyle[key]=styleValue,lastIdealVelocity[key]=0)}dirty&&_this.setState({currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:lastIdealStyle,lastIdealVelocity:lastIdealVelocity})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timestamp){var propsStyle=_this.props.style;if(_shouldStopAnimation2.default(_this.state.currentStyle,propsStyle,_this.state.currentVelocity))return _this.wasAnimating&&_this.props.onRest&&_this.props.onRest(),_this.animationID=null,_this.wasAnimating=!1,void(_this.accumulatedTime=0);_this.wasAnimating=!0;var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyle={},newLastIdealVelocity={},newCurrentStyle={},newCurrentVelocity={};for(var key in propsStyle)if(Object.prototype.hasOwnProperty.call(propsStyle,key)){var styleValue=propsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyle[key],newLastIdealVelocityValue=_this.state.lastIdealVelocity[key],i=0;i<framesToCatchUp;i++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyle:newCurrentStyle,currentVelocity:newCurrentVelocity,lastIdealStyle:newLastIdealStyle,lastIdealVelocity:newLastIdealVelocity}),_this.unreadPropStyle=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return Motion.prototype.defaultState=function(){var _props=this.props,defaultStyle=_props.defaultStyle,style=_props.style,currentStyle=defaultStyle||_stripStyle2.default(style),currentVelocity=_mapToZero2.default(currentStyle);return{currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:currentStyle,lastIdealVelocity:currentVelocity}},Motion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},Motion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=props.style,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},Motion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},Motion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyle);return renderedChildren&&_react2.default.Children.only(renderedChildren)},Motion}(_react2.default.Component);exports.default=Motion,module.exports=exports.default},{"./mapToZero":25,"./shouldStopAnimation":30,"./stepper":32,"./stripStyle":33,"performance-now":6,"prop-types":10,raf:12,react:"react"}],23:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60;function shouldStopAnimationAll(currentStyles,styles,currentVelocities){for(var i=0;i<currentStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],styles[i],currentVelocities[i]))return!1;return!0}var StaggeredMotion=function(_React$Component){_inherits(StaggeredMotion,_React$Component),_createClass(StaggeredMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.objectOf(_propTypes2.default.number)),styles:_propTypes2.default.func.isRequired,children:_propTypes2.default.func.isRequired},enumerable:!0}]);function StaggeredMotion(props){var _this=this;_classCallCheck(this,StaggeredMotion),_React$Component.call(this,props),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _state=_this.state,currentStyles=_state.currentStyles,currentVelocities=_state.currentVelocities,lastIdealStyles=_state.lastIdealStyles,lastIdealVelocities=_state.lastIdealVelocities,someDirty=!1,i=0;i<unreadPropStyles.length;i++){var unreadPropStyle=unreadPropStyles[i],dirty=!1;for(var key in unreadPropStyle)if(Object.prototype.hasOwnProperty.call(unreadPropStyle,key)){var styleValue=unreadPropStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,someDirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i])),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0)}}someDirty&&_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timestamp){var destStyles=_this.props.styles(_this.state.lastIdealStyles);if(shouldStopAnimationAll(_this.state.currentStyles,destStyles,_this.state.currentVelocities))return _this.animationID=null,
void(_this.accumulatedTime=0);var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyles=[],newLastIdealVelocities=[],newCurrentStyles=[],newCurrentVelocities=[],i=0;i<destStyles.length;i++){var destStyle=destStyles[i],newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(var key in destStyle)if(Object.prototype.hasOwnProperty.call(destStyle,key)){var styleValue=destStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyles[i][key],newLastIdealVelocityValue=_this.state.lastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity,newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return StaggeredMotion.prototype.defaultState=function(){var _props=this.props,defaultStyles=_props.defaultStyles,styles=_props.styles,currentStyles=defaultStyles||styles().map(_stripStyle2.default),currentVelocities=currentStyles.map(function(currentStyle){return _mapToZero2.default(currentStyle)});return{currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:currentStyles,lastIdealVelocities:currentVelocities}},StaggeredMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},StaggeredMotion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=props.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},StaggeredMotion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},StaggeredMotion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyles);return renderedChildren&&_react2.default.Children.only(renderedChildren)},StaggeredMotion}(_react2.default.Component);exports.default=StaggeredMotion,module.exports=exports.default},{"./mapToZero":25,"./shouldStopAnimation":30,"./stepper":32,"./stripStyle":33,"performance-now":6,"prop-types":10,raf:12,react:"react"}],24:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_mergeDiff=require("./mergeDiff"),_mergeDiff2=_interopRequireDefault(_mergeDiff),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60;function rehydrateStyles(mergedPropsStyles,unreadPropStyles,plainStyles){var cUnreadPropStyles=unreadPropStyles;return null==cUnreadPropStyles?mergedPropsStyles.map(function(mergedPropsStyle,i){return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}}):mergedPropsStyles.map(function(mergedPropsStyle,i){for(var j=0;j<cUnreadPropStyles.length;j++)if(cUnreadPropStyles[j].key===mergedPropsStyle.key)return{key:cUnreadPropStyles[j].key,data:cUnreadPropStyles[j].data,style:plainStyles[i]};return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}})}function shouldStopAnimationAll(currentStyles,destStyles,currentVelocities,mergedPropsStyles){if(mergedPropsStyles.length!==destStyles.length)return!1;for(var i=0;i<mergedPropsStyles.length;i++)if(mergedPropsStyles[i].key!==destStyles[i].key)return!1;for(var i=0;i<mergedPropsStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],destStyles[i].style,currentVelocities[i]))return!1;return!0}function mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,oldCurrentStyles,oldCurrentVelocities,oldLastIdealStyles,oldLastIdealVelocities){for(var newMergedPropsStyles=_mergeDiff2.default(oldMergedPropsStyles,destStyles,function(oldIndex,oldMergedPropsStyle){var leavingStyle=willLeave(oldMergedPropsStyle);return null==leavingStyle?(didLeave({key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data}),null):_shouldStopAnimation2.default(oldCurrentStyles[oldIndex],leavingStyle,oldCurrentVelocities[oldIndex])?(didLeave({key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data}),null):{key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data,style:leavingStyle}}),newCurrentStyles=[],newCurrentVelocities=[],newLastIdealStyles=[],newLastIdealVelocities=[],i=0;i<newMergedPropsStyles.length;i++){for(var newMergedPropsStyleCell=newMergedPropsStyles[i],foundOldIndex=null,j=0;j<oldMergedPropsStyles.length;j++)if(oldMergedPropsStyles[j].key===newMergedPropsStyleCell.key){foundOldIndex=j;break}if(null==foundOldIndex){var plainStyle=willEnter(newMergedPropsStyleCell);newCurrentStyles[i]=plainStyle,newLastIdealStyles[i]=plainStyle;var velocity=_mapToZero2.default(newMergedPropsStyleCell.style);newCurrentVelocities[i]=velocity,newLastIdealVelocities[i]=velocity}else newCurrentStyles[i]=oldCurrentStyles[foundOldIndex],newLastIdealStyles[i]=oldLastIdealStyles[foundOldIndex],newCurrentVelocities[i]=oldCurrentVelocities[foundOldIndex],newLastIdealVelocities[i]=oldLastIdealVelocities[foundOldIndex]}return[newMergedPropsStyles,newCurrentStyles,newCurrentVelocities,newLastIdealStyles,newLastIdealVelocities]}var TransitionMotion=function(_React$Component){_inherits(TransitionMotion,_React$Component),_createClass(TransitionMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.number).isRequired})),styles:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired}))]).isRequired,children:_propTypes2.default.func.isRequired,willEnter:_propTypes2.default.func,willLeave:_propTypes2.default.func,didLeave:_propTypes2.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(styleThatEntered){return _stripStyle2.default(styleThatEntered.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]);function TransitionMotion(props){var _this=this;_classCallCheck(this,TransitionMotion),_React$Component.call(this,props),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _mergeAndSync=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,unreadPropStyles,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),mergedPropsStyles=_mergeAndSync[0],currentStyles=_mergeAndSync[1],currentVelocities=_mergeAndSync[2],lastIdealStyles=_mergeAndSync[3],lastIdealVelocities=_mergeAndSync[4],i=0;i<unreadPropStyles.length;i++){var unreadPropStyle=unreadPropStyles[i].style,dirty=!1;for(var key in unreadPropStyle)if(Object.prototype.hasOwnProperty.call(unreadPropStyle,key)){var styleValue=unreadPropStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i]),mergedPropsStyles[i]={key:mergedPropsStyles[i].key,data:mergedPropsStyles[i].data,style:_extends({},mergedPropsStyles[i].style)}),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0,mergedPropsStyles[i].style[key]=styleValue)}}_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,mergedPropsStyles:mergedPropsStyles,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.unmounting||(_this.animationID=_raf2.default(function(timestamp){if(!_this.unmounting){var propStyles=_this.props.styles,destStyles="function"==typeof propStyles?propStyles(rehydrateStyles(_this.state.mergedPropsStyles,_this.unreadPropStyles,_this.state.lastIdealStyles)):propStyles;if(shouldStopAnimationAll(_this.state.currentStyles,destStyles,_this.state.currentVelocities,_this.state.mergedPropsStyles))return _this.animationID=null,void(_this.accumulatedTime=0);var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),_mergeAndSync2=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,destStyles,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),newMergedPropsStyles=_mergeAndSync2[0],newCurrentStyles=_mergeAndSync2[1],newCurrentVelocities=_mergeAndSync2[2],newLastIdealStyles=_mergeAndSync2[3],newLastIdealVelocities=_mergeAndSync2[4],i=0;i<newMergedPropsStyles.length;i++){var newMergedPropsStyle=newMergedPropsStyles[i].style,newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(var key in newMergedPropsStyle)if(Object.prototype.hasOwnProperty.call(newMergedPropsStyle,key)){var styleValue=newMergedPropsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=newLastIdealStyles[i][key],newLastIdealVelocityValue=newLastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity,newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities,mergedPropsStyles:newMergedPropsStyles}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return TransitionMotion.prototype.defaultState=function(){var _props=this.props,defaultStyles=_props.defaultStyles,styles=_props.styles,willEnter=_props.willEnter,willLeave=_props.willLeave,didLeave=_props.didLeave,destStyles="function"==typeof styles?styles(defaultStyles):styles,oldMergedPropsStyles=void 0;oldMergedPropsStyles=null==defaultStyles?destStyles:defaultStyles.map(function(defaultStyleCell){for(var i=0;i<destStyles.length;i++)if(destStyles[i].key===defaultStyleCell.key)return destStyles[i];return defaultStyleCell});var oldCurrentStyles=null==defaultStyles?destStyles.map(function(s){return _stripStyle2.default(s.style)}):defaultStyles.map(function(s){return _stripStyle2.default(s.style)}),oldCurrentVelocities=null==defaultStyles?destStyles.map(function(s){return _mapToZero2.default(s.style)}):defaultStyles.map(function(s){return _mapToZero2.default(s.style)}),_mergeAndSync3=mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,oldCurrentStyles,oldCurrentVelocities,oldCurrentStyles,oldCurrentVelocities),mergedPropsStyles=_mergeAndSync3[0];return{currentStyles:_mergeAndSync3[1],currentVelocities:_mergeAndSync3[2],lastIdealStyles:_mergeAndSync3[3],lastIdealVelocities:_mergeAndSync3[4],mergedPropsStyles:mergedPropsStyles}},TransitionMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},TransitionMotion.prototype.componentWillReceiveProps=function(props){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var styles=props.styles;this.unreadPropStyles="function"==typeof styles?styles(rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):styles,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},TransitionMotion.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},TransitionMotion.prototype.render=function(){var hydratedStyles=rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),renderedChildren=this.props.children(hydratedStyles);return renderedChildren&&_react2.default.Children.only(renderedChildren)},TransitionMotion}(_react2.default.Component);exports.default=TransitionMotion,module.exports=exports.default},{"./mapToZero":25,"./mergeDiff":26,"./shouldStopAnimation":30,"./stepper":32,"./stripStyle":33,"performance-now":6,"prop-types":10,raf:12,react:"react"}],25:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=mapToZero;function mapToZero(obj){var ret={};for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(ret[key]=0);return ret}module.exports=exports.default},{}],26:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=mergeDiff;function mergeDiff(prev,next,onRemove){for(var prevKeyIndex={},i=0;i<prev.length;i++)prevKeyIndex[prev[i].key]=i;for(var nextKeyIndex={},i=0;i<next.length;i++)nextKeyIndex[next[i].key]=i;for(var ret=[],i=0;i<next.length;i++)ret[i]=next[i];for(var i=0;i<prev.length;i++)if(!Object.prototype.hasOwnProperty.call(nextKeyIndex,prev[i].key)){var fill=onRemove(i,prev[i]);null!=fill&&ret.push(fill)}return ret.sort(function(a,b){var nextOrderA=nextKeyIndex[a.key],nextOrderB=nextKeyIndex[b.key],prevOrderA=prevKeyIndex[a.key],prevOrderB=prevKeyIndex[b.key];if(null!=nextOrderA&&null!=nextOrderB)return nextKeyIndex[a.key]-nextKeyIndex[b.key];if(null!=prevOrderA&&null!=prevOrderB)return prevKeyIndex[a.key]-prevKeyIndex[b.key];if(null!=nextOrderA){for(var i=0;i<next.length;i++){var pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderA<nextKeyIndex[pivot]&&prevOrderB>prevKeyIndex[pivot])return-1;if(nextOrderA>nextKeyIndex[pivot]&&prevOrderB<prevKeyIndex[pivot])return 1}}return 1}for(var i=0;i<next.length;i++){var pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderB<nextKeyIndex[pivot]&&prevOrderA>prevKeyIndex[pivot])return 1;if(nextOrderB>nextKeyIndex[pivot]&&prevOrderA<prevKeyIndex[pivot])return-1}}return-1})}module.exports=exports.default},{}],27:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},module.exports=exports.default},{}],28:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Motion=require("./Motion");exports.Motion=_interopRequire(_Motion);var _StaggeredMotion=require("./StaggeredMotion");exports.StaggeredMotion=_interopRequire(_StaggeredMotion);var _TransitionMotion=require("./TransitionMotion");exports.TransitionMotion=_interopRequire(_TransitionMotion);var _spring=require("./spring");exports.spring=_interopRequire(_spring);var _presets=require("./presets");exports.presets=_interopRequire(_presets);var _stripStyle=require("./stripStyle");exports.stripStyle=_interopRequire(_stripStyle);var _reorderKeys=require("./reorderKeys");exports.reorderKeys=_interopRequire(_reorderKeys)},{"./Motion":22,"./StaggeredMotion":23,"./TransitionMotion":24,"./presets":27,"./reorderKeys":29,"./spring":31,"./stripStyle":33}],29:[function(require,module,exports){(function(process){"use strict";exports.__esModule=!0,exports.default=reorderKeys;var hasWarned=!1;function reorderKeys(){"development"===process.env.NODE_ENV&&(hasWarned||(hasWarned=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))}module.exports=exports.default}).call(this,require("_process"))},{_process:1}],30:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=shouldStopAnimation;function shouldStopAnimation(currentStyle,style,currentVelocity){for(var key in style)if(Object.prototype.hasOwnProperty.call(style,key)){if(0!==currentVelocity[key])return!1;var styleValue="number"==typeof style[key]?style[key]:style[key].val;if(currentStyle[key]!==styleValue)return!1}return!0}module.exports=exports.default},{}],31:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=spring;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _presets=require("./presets"),_presets2=_interopRequireDefault(_presets),defaultConfig=_extends({},_presets2.default.noWobble,{precision:.01});function spring(val,config){return _extends({},defaultConfig,config,{val:val})}module.exports=exports.default},{"./presets":27}],32:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=stepper;var reusedTuple=[0,0];function stepper(secondPerFrame,x,v,destX,k,b,precision){var Fspring=-k*(x-destX),Fdamper=-b*v,a=Fspring+Fdamper,newV=v+a*secondPerFrame,newX=x+newV*secondPerFrame;return Math.abs(newV)<precision&&Math.abs(newX-destX)<precision?(reusedTuple[0]=destX,reusedTuple[1]=0,reusedTuple):(reusedTuple[0]=newX,reusedTuple[1]=newV,reusedTuple)}module.exports=exports.default},{}],33:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=stripStyle;function stripStyle(style){var ret={};for(var key in style)Object.prototype.hasOwnProperty.call(style,key)&&(ret[key]="number"==typeof style[key]?style[key]:style[key].val);return ret}module.exports=exports.default},{}],34:[function(require,module,exports){var raf=require("rafl"),E_NOSCROLL=new Error("Element already at target scroll position"),E_CANCELLED=new Error("Scroll cancelled"),min=Math.min;module.exports={left:make("scrollLeft"),top:make("scrollTop")};function make(prop){return function(el,to,opts,cb){opts=opts||{},"function"==typeof opts&&(cb=opts,opts={}),"function"!=typeof cb&&(cb=noop);var start=+new Date,from=el[prop],ease=opts.ease||inOutSine,duration=isNaN(opts.duration)?350:+opts.duration,cancelled=!1;return from===to?cb(E_NOSCROLL,el[prop]):raf(animate),cancel;function cancel(){cancelled=!0}function animate(timestamp){if(cancelled)return cb(E_CANCELLED,el[prop]);var now=+new Date,time=min(1,(now-start)/duration),eased=ease(time);el[prop]=eased*(to-from)+from,raf(time<1?animate:function(){cb(null,el[prop])})}}}function inOutSine(n){return.5*(1-Math.cos(Math.PI*n))}function noop(){}},{rafl:14}],35:[function(require,module,exports){"use strict"},{}],36:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EDITOR_SET_ACTIVE_TAB="EDITOR_SET_ACTIVE_TAB";exports.EDITOR_SET_ACTIVE_TAB=EDITOR_SET_ACTIVE_TAB;var editorSetActiveTab=function(activeTabId){return{type:EDITOR_SET_ACTIVE_TAB,activeTabId:activeTabId}};exports.editorSetActiveTab=editorSetActiveTab;var EDITOR_MODIFY="EDITOR_MODIFY";exports.EDITOR_MODIFY=EDITOR_MODIFY;var editorModify=function(data){return _extends({type:EDITOR_MODIFY},data)};exports.editorModify=editorModify;var TAB_CREATE="TAB_CREATE";exports.TAB_CREATE=TAB_CREATE;var tabCreate=function(data){return _extends({type:TAB_CREATE},data)};exports.tabCreate=tabCreate;var TAB_MODIFY="TAB_MODIFY";exports.TAB_MODIFY=TAB_MODIFY;var tabModify=function(data){return _extends({type:TAB_MODIFY},data)};exports.tabModify=tabModify;var TAB_ADD_CONTROLS="TAB_ADD_CONTROLS";exports.TAB_ADD_CONTROLS=TAB_ADD_CONTROLS;var tabAddControls=function(data){return _extends({type:TAB_ADD_CONTROLS},data)};exports.tabAddControls=tabAddControls;var TAB_DELETE="TAB_DELETE";exports.TAB_DELETE=TAB_DELETE;var tabDelete=function(id){return{type:TAB_DELETE,id:id}};exports.tabDelete=tabDelete;var TAB_DELETE_ALL="TAB_DELETE_ALL";exports.TAB_DELETE_ALL=TAB_DELETE_ALL;var tabDeleteAll=function(){return{type:TAB_DELETE_ALL}};exports.tabDeleteAll=tabDeleteAll},{}],37:[function(require,module,exports){"use strict";exports.__esModule=!0;var onLocate=(require("../utils"),function(_ref){var node=_ref.node,editors=pydio.Registry.findEditorsForMime("ol_layer");editors.length&&pydio.UI.openCurrentSelectionInEditor(editors[0],node)});exports.onLocate=onLocate},{"../utils":41}],38:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onToggleResolution=function(_ref){var dispatch=_ref.dispatch;return function(high){return dispatch(_utils.EditorActions.editorModify({resolution:high?"hi":"lo"}))}};exports.onToggleResolution=onToggleResolution},{"../utils":41}],39:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onSelectionChange=function(_ref){var dispatch=_ref.dispatch,tab=_ref.tab;return function(node){return dispatch(_utils.EditorActions.tabModify({id:tab.id,title:node.getLabel(),node:node}))}};exports.onSelectionChange=onSelectionChange;var onTogglePlaying=function(_ref2){var dispatch=_ref2.dispatch,tab=_ref2.tab;return function(playing){return dispatch(_utils.EditorActions.tabModify({id:tab.id,playing:playing}))}};exports.onTogglePlaying=onTogglePlaying},{"../utils":41}],40:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onSizeChange=function(_ref){var dispatch=_ref.dispatch;return function(data){return dispatch(_utils.EditorActions.editorModify(data))}};exports.onSizeChange=onSizeChange},{"../utils":41}],41:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}var _editorActions=require("./editor/actions"),EditorActions=_interopRequireWildcard(_editorActions),_contentActions=require("./content/actions"),contentActions=_interopRequireWildcard(_contentActions),_resolutionActions=require("./resolution/actions"),resolutionActions=_interopRequireWildcard(_resolutionActions),_selectionActions=require("./selection/actions"),selectionActions=_interopRequireWildcard(_selectionActions),_sizeActions=require("./size/actions"),sizeActions=_interopRequireWildcard(_sizeActions),_localisationActions=require("./localisation/actions"),localisationActions=_interopRequireWildcard(_localisationActions);exports.EditorActions=EditorActions;var getActions=(_extends({},contentActions,resolutionActions,selectionActions,sizeActions,localisationActions),function(_ref){var editorData=_ref.editorData;return editorData.editorActions&&FuncUtils.getFunctionByName(editorData.editorActions,window)||{}}),handler=function(func,_ref2){var dispatch=_ref2.dispatch,tab=_ref2.tab,fn=getActions(tab)[func];return"function"==typeof fn&&fn({dispatch:dispatch,tab:tab})};exports.handler=handler;var toTitleCase=function(str){return str.replace(/\w\S*/g,function(txt){return""+txt.charAt(0).toUpperCase()+txt.substr(1)})};exports.toTitleCase=toTitleCase;var getDisplayName=function(Component){return Component.displayName||Component.name||"Component"};exports.getDisplayName=getDisplayName;var getRatio={cover:function(_ref3){var widthRatio=_ref3.widthRatio,heightRatio=_ref3.heightRatio;return Math.max(widthRatio,heightRatio)},contain:function(_ref4){var widthRatio=_ref4.widthRatio,heightRatio=_ref4.heightRatio;return Math.min(widthRatio,heightRatio)},auto:function(_ref5){return _ref5.scale}};exports.getRatio=getRatio;var getBoundingRect=function(element){var style=window.getComputedStyle(element),keys=["left","right","top","bottom"],margin=keys.reduce(function(current,key){var _extends2;return _extends({},current,(_extends2={},_extends2[key]=parseInt(style["margin-"+key])||0,_extends2))},{}),padding=keys.reduce(function(current,key){var _extends3;return _extends({},current,(_extends3={},_extends3[key]=parseInt(style["padding-"+key])||0,_extends3))},{}),border=keys.reduce(function(current,key){var _extends4;return _extends({},current,(_extends4={},_extends4[key]=parseInt(style["border-"+key])||0,_extends4))},{}),rect=element.getBoundingClientRect(),res={left:rect.left-margin.left,right:rect.right-margin.right-padding.left-padding.right,top:rect.top-margin.top,bottom:rect.bottom-margin.bottom-padding.top-padding.bottom-border.bottom};return _extends({},res,{width:res.right-res.left,height:res.bottom-res.top})};exports.getBoundingRect=getBoundingRect},{"./content/actions":35,"./editor/actions":36,"./localisation/actions":37,"./resolution/actions":38,"./selection/actions":39,"./size/actions":40}],42:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default={childContextTypes:{messages:React.PropTypes.object,getMessage:React.PropTypes.func},getChildContext:function(){var messages=this.props.pydio.MessageHash;return{messages:messages,getMessage:function(messageId){try{return messages[messageId]||messageId}catch(e){return messageId}}}}},module.exports=exports.default},{}],43:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var OpenNodesModel=function(_Observable){_inherits(OpenNodesModel,_Observable);function OpenNodesModel(){var _this=this;_classCallCheck(this,OpenNodesModel),_Observable.call(this),this._openNodes=[],this._updatedTitles=new Map,pydio.UI.registerEditorOpener(this),pydio.observe("repository_list_refreshed",function(){_this._openNodes=[],_this.notify("update",_this._openNodes)})}return OpenNodesModel.getInstance=function(){return OpenNodesModel.__INSTANCE||(OpenNodesModel.__INSTANCE=new OpenNodesModel),OpenNodesModel.__INSTANCE},OpenNodesModel.prototype.openEditorForNode=function(selectedNode,editorData){this.pushNode(selectedNode,editorData)},OpenNodesModel.prototype.updateNodeTitle=function(object,newTitle){this._updatedTitles.set(object,newTitle),this.notify("titlesUpdated")},OpenNodesModel.prototype.getObjectLabel=function(object){
return this._updatedTitles.has(object)?this._updatedTitles.get(object):object.node.getLabel()},OpenNodesModel.prototype.pushNode=function(node,editorData){var found=!1,editorClass=editorData?editorData.editorClass:null,object={node:node,editorData:editorData};this.notify("willPushNode",object),this._openNodes.map(function(o){(o.node===node&&o.editorData&&o.editorData.editorClass==editorClass||!o.editorData&&!editorClass)&&(found=!0,object=o)}),found||this._openNodes.push(object),this.notify("nodePushed",object),this.notify("update",this._openNodes)},OpenNodesModel.prototype.removeNode=function(object){this.notify("willRemoveNode",object);var index=this._openNodes.indexOf(object);this._updatedTitles.has(object)&&this._updatedTitles.delete(object),this._openNodes=LangUtils.arrayWithout(this._openNodes,index),this.notify("nodeRemovedAtIndex",index),this.notify("update",this._openNodes)},OpenNodesModel.prototype.getNodes=function(){return this._openNodes},OpenNodesModel}(Observable);exports.default=OpenNodesModel,module.exports=exports.default},{}],44:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard),_pydioUtilPath=require("pydio/util/path"),_pydioUtilPath2=_interopRequireDefault(_pydioUtilPath),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,FileInfoCard=function(_React$Component){_inherits(FileInfoCard,_React$Component);function FileInfoCard(props){var _this=this;_classCallCheck(this,FileInfoCard),_React$Component.call(this,props),this._observer=function(){_this.forceUpdate()},props.node&&props.node.observe("node_replaced",this._observer)}return FileInfoCard.prototype.componentWillReceiveProps=function(newProps){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer),newProps.node&&newProps.node.observe("node_replaced",this._observer)},FileInfoCard.prototype.componentWillUnmount=function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer)},FileInfoCard.prototype.render=function(){var _props=this.props,node=_props.node,getMessage=_props.getMessage,meta=node.getMetadata(),size=meta.get("bytesize"),hSize=_pydioUtilPath2.default.roundFileSize(parseInt(size)),date=new Date;date.setTime(1e3*parseInt(meta.get("ajxp_modiftime")));var formattedDate=_pydioUtilPath2.default.formatModifDate(date),data=[{key:"size",label:getMessage("2"),value:hSize},{key:"date",label:getMessage("4"),value:formattedDate}],w=meta.get("image_width"),h=meta.get("image_height");return w&&h&&(data=[].concat(data,[{key:"image",label:getMessage("135"),value:w+"px X "+h+"px"}])),_react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{identifier:"file-info",title:getMessage("341"),standardData:data,contentStyle:{paddingBottom:10},icon:"information-outline",iconColor:"#2196f3"}))},FileInfoCard}(_react2.default.Component);exports.default=FileInfoCard=PydioContextConsumer(FileInfoCard),exports.default=FileInfoCard,module.exports=exports.default},{"./InfoPanelCard":47,pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],45:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard),_viewsFilePreview=require("../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),GenericInfoCard=function(_React$Component){_inherits(GenericInfoCard,_React$Component);function GenericInfoCard(props){_classCallCheck(this,GenericInfoCard),_React$Component.call(this,props),this.state=this.build(props)}return GenericInfoCard.prototype.componentWillReceiveProps=function(nextProps){this.setState(this.build(nextProps))},GenericInfoCard.prototype.build=function(props){var isMultiple=void 0,isLeaf=void 0,isDir=void 0,node=props.node;if(props.nodes)isMultiple=!0;else{if(!node)return{ready:!1};isLeaf=node.isLeaf(),isDir=!isLeaf}return{isMultiple:isMultiple,isLeaf:isLeaf,isDir:isDir,ready:!0}},GenericInfoCard.prototype.render=function(){if(!this.state.ready)return null;if(this.state.isMultiple){var nodes=this.props.nodes,more=void 0;if(nodes.length>10){var moreNumber=nodes.length-10;nodes=nodes.slice(0,10),more=_react2.default.createElement("div",null,"... and ",moreNumber," more.")}return _react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{primaryToolbars:["info_panel","info_panel_share"]}),_react2.default.createElement("div",{style:{padding:"0"}},nodes.map(function(node){return _react2.default.createElement("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px solid #eeeeee"}},_react2.default.createElement(_viewsFilePreview2.default,{key:node.getPath(),style:{height:50,width:50,fontSize:25,flexShrink:0},node:node,loadThumbnail:!0,richPreview:!1}),_react2.default.createElement("div",{style:{flex:1,fontSize:14,marginLeft:6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},node.getLabel()))}),more))}var processing=!!this.props.node.getMetadata().get("Processing");return _react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{primaryToolbars:["info_panel","info_panel_share"]}),_react2.default.createElement(_viewsFilePreview2.default,{key:this.props.node.getPath(),style:{backgroundColor:"white",height:200,padding:0},node:this.props.node,loadThumbnail:this.state.isLeaf&&!processing,richPreview:this.state.isLeaf,processing:processing}))},GenericInfoCard}(_react2.default.Component);exports.default=GenericInfoCard,module.exports=exports.default},{"../views/FilePreview":84,"./InfoPanelCard":47,react:"react"}],46:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_require$requireLib=(require("redux"),require("pydio").requireLib("hoc")),withVerticalScroll=(_require$requireLib.Animations,_require$requireLib.withVerticalScroll),Template=function(_ref){var id=_ref.id,style=_ref.style,children=_ref.children;return _react2.default.createElement("div",{id:id,style:style},children)},InfoPanel=function(_React$Component){_inherits(InfoPanel,_React$Component);function InfoPanel(props){_classCallCheck(this,InfoPanel),_React$Component.call(this,props);var initTemplates=ConfigsParser.parseConfigs();this._updateExpected=!0,this.state={templates:initTemplates,displayData:this.selectionToTemplates(initTemplates)}}return InfoPanel.prototype.shouldComponentUpdate=function(){return this._updateExpected},InfoPanel.prototype.componentDidMount=function(){var _this=this,scrollerRefresh=function(){try{_this.context.scrollArea.refresh()}catch(e){}};this._updateHandler=function(){_this._updateExpected=!0,_this.setState({displayData:_this.selectionToTemplates()},function(){_this._updateExpected=!1,_this.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this._componentConfigHandler=function(){_this._updateExpected=!0,_this.setState({templates:ConfigsParser.parseConfigs()},function(){_this._updateExpected=!1,_this.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this.props.pydio.observe("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.observe("registry_loaded",this._componentConfigHandler),this.state.displayData&&this.state.displayData.TEMPLATES&&this.props.onContentChange&&this.props.onContentChange(this.state.displayData.TEMPLATES.length)},InfoPanel.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.stopObserving("registry_loaded",this._componentConfigHandler)},InfoPanel.prototype.selectionToTemplates=function(){var initTemplates=arguments.length<=0||void 0===arguments[0]?null:arguments[0],refTemplates=initTemplates||this.state.templates,dataModel=this.props.dataModel,selection=dataModel.getSelectedNodes();selection&&selection.length||dataModel.getContextNode()!==dataModel.getRootNode()||(selection=[dataModel.getContextNode()]);var primaryMime=void 0,templates=[],uniqueNode=void 0,data={};return!selection||selection.length<1?primaryMime="no_selection":selection.length>1?(primaryMime="generic_multiple",data.nodes=selection):(uniqueNode=selection[0],uniqueNode.isLeaf()?primaryMime="generic_file":(primaryMime="generic_dir",this.props.dataModel.getRootNode()===uniqueNode&&(primaryMime="ajxp_root_node")),data.node=uniqueNode),refTemplates.has(primaryMime)&&(templates=templates.concat(refTemplates.get(primaryMime))),uniqueNode&&refTemplates.forEach(function(list,mimeName){mimeName!==primaryMime&&(0===mimeName.indexOf("meta:")&&uniqueNode.getMetadata().has(mimeName.substr(5))?templates=templates.concat(list):uniqueNode.getAjxpMime()===mimeName&&(templates=templates.concat(list)))}),this.props.onContentChange&&!initTemplates&&this.props.onContentChange(templates.length),templates.sort(function(a,b){return a.WEIGHT===b.WEIGHT?0:a.WEIGHT>b.WEIGHT?1:-1}),{TEMPLATES:templates,DATA:data}},InfoPanel.prototype.render=function(){var _this2=this,templates=this.state.displayData.TEMPLATES.map(function(tpl,i){var component=tpl.COMPONENT,_component$split=component.split(".",2),namespace=_component$split[0],name=_component$split[1];return _react2.default.createElement(PydioReactUI.AsyncComponent,_extends({},_this2.state.displayData.DATA,_this2.props,{key:"ip_"+component,namespace:namespace,componentName:name}))});return _react2.default.createElement(Template,{style:this.props.style},templates)},InfoPanel}(_react2.default.Component);InfoPanel.propTypes={dataModel:_react2.default.PropTypes.instanceOf(PydioDataModel).isRequired,pydio:_react2.default.PropTypes.instanceOf(Pydio).isRequired,style:_react2.default.PropTypes.object},InfoPanel.contextTypes={scrollArea:_react2.default.PropTypes.object},exports.default=InfoPanel=withVerticalScroll(InfoPanel,{id:"info_panel"});var ConfigsParser=function(){function ConfigsParser(){_classCallCheck(this,ConfigsParser)}return ConfigsParser.parseConfigs=function(){var panelsNodes=(new Map,XMLUtils.XPathSelectNodes(pydio.getXmlRegistry(),'client_configs/component_config[@component="InfoPanel"]/infoPanel')),panels=new Map;return panelsNodes.forEach(function(node){if(node.getAttribute("reactComponent")){var mimes=node.getAttribute("mime").split(","),component=node.getAttribute("reactComponent");mimes.map(function(mime){panels.has(mime)||panels.set(mime,[]),panels.get(mime).push({COMPONENT:component,THEME:node.getAttribute("theme"),ATTRIBUTES:node.getAttribute("attributes"),WEIGHT:node.getAttribute("weight")?parseInt(node.getAttribute("weight")):0})})}}),panels},ConfigsParser}();exports.default=InfoPanel,module.exports=exports.default},{pydio:"pydio",react:"react",redux:"redux"}],47:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_materialUiStyles=require("material-ui/styles"),styles={card:{backgroundColor:"white"}},CardsStates={},InfoPanelCard=function(_React$Component){_inherits(InfoPanelCard,_React$Component);function InfoPanelCard(props){_classCallCheck(this,InfoPanelCard),_React$Component.call(this,props),props.identifier&&void 0!==CardsStates[props.identifier]?this.state={open:CardsStates[props.identifier]}:this.state={open:!0}}return InfoPanelCard.prototype.toggle=function(){var newState=!this.state.open;this.setState({open:newState}),this.props.identifier&&(CardsStates[this.props.identifier]=newState)},InfoPanelCard.prototype.render=function(){var _this=this,open=this.state.open,icon=(this.props.primaryToolbars,_react2.default.createElement("div",{className:"panelIcon",style:{position:"absolute",right:2,top:open?8:2}},_react2.default.createElement(_materialUi.IconButton,{onClick:function(){_this.toggle()},iconClassName:"mdi mdi-chevron-"+(open?"up":"down")}))),openStyle=void 0;open||(openStyle={paddingTop:16});var title=this.props.title?_react2.default.createElement(_materialUi.Paper,{zDepth:0,className:"panelHeader",style:_extends({position:"relative"},openStyle)},icon,this.props.title):null,actions=this.props.actions?_react2.default.createElement("div",{className:"panelActions"},this.props.actions):null,rows=void 0,toolBar=void 0;if(this.props.standardData&&(rows=this.props.standardData.map(function(object){return _react2.default.createElement("div",{className:"infoPanelRow",key:object.key},_react2.default.createElement("div",{className:"infoPanelLabel"},object.label),_react2.default.createElement("div",{className:"infoPanelValue"},object.value))})),this.props.primaryToolbars){var themePalette=this.props.muiTheme.palette,tBarStyle={backgroundColor:themePalette.accent2Color,justifyContent:"flex-end",position:"relative"};toolBar=_react2.default.createElement(PydioComponents.Toolbar,{toolbarStyle:tBarStyle,flatButtonStyle:{minWidth:0},buttonStyle:{color:"white",paddingRight:8,paddingLeft:8},className:"primaryToolbar",renderingType:"button",toolbars:this.props.primaryToolbars,controller:this.props.pydio.getController(),fabAction:"share",buttonMenuNoLabel:!0,buttonMenuPopoverDirection:"right"})}return _react2.default.createElement(_materialUi.Paper,{zDepth:1,className:"panelCard",style:_extends({},this.props.style,styles.card)},title,open&&_react2.default.createElement("div",{className:"panelContent",style:this.props.contentStyle},this.props.children,rows,toolBar),open&&actions)},InfoPanelCard}(_react2.default.Component);InfoPanelCard.PropTypes={identifier:_react2.default.PropTypes.string,title:_react2.default.PropTypes.string,actions:_react2.default.PropTypes.array},exports.default=InfoPanelCard=_materialUiStyles.muiThemeable()(InfoPanelCard),exports.default=InfoPanelCard,module.exports=exports.default},{"material-ui":"material-ui","material-ui/styles":"material-ui/styles",react:"react"}],48:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=require("react"),_react2=_interopRequireDefault(_react),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard);exports.default=_react2.default.createClass({displayName:"RootNode",getInitialState:function(){return{repoKey:null}},componentDidMount:function(){this.loadData(this.props)},componentWillReceiveProps:function(nextProps){nextProps.pydio.user&&nextProps.pydio.user.activeRepository!==this.state.repoKey&&this.loadData(nextProps)},loadData:function(props){if(props.pydio.user){var cacheService=MetaCacheService.getInstance();cacheService.registerMetaStream("workspace.info","MANUAL_TRIGGER");var oThis=this,render=function(data){oThis.setState(_extends({},data["core.users"]))},repoKey=pydio.user.getActiveRepository();this.setState({repoKey:repoKey}),cacheService.hasKey("workspace.info",repoKey)?render(cacheService.getByKey("workspace.info",repoKey)):FuncUtils.bufferCallback("ajxp_load_repo_info_timer",700,function(){oThis.isMounted()})}},render:function(){var messages=this.props.pydio.MessageHash,internal=messages[528],external=messages[530],panelData=(messages[527],void 0);return this.state&&this.state.users&&(panelData=[{key:"internal",label:internal,value:this.state.users},{key:"external",label:external,value:this.state.groups}]),_react2.default.createElement(_InfoPanelCard2.default,{identifier:"file-info",title:messages[249],style:this.props.style,standardData:panelData,icon:"account-multiple-outline",iconColor:"00838f"},void 0)}}),module.exports=exports.default},{"./InfoPanelCard":47,react:"react"}],49:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_componentsEditor=require("./components/editor"),_componentsMenu=require("./components/menu"),_makeEditorOpen=require("./make-editor-open"),_Pydio$requireLib=(_interopRequireDefault(_makeEditorOpen),_pydio2.default.requireLib("hoc")),withContainerSize=_Pydio$requireLib.withContainerSize,EditorActions=_Pydio$requireLib.EditorActions,App=function(_React$Component){_inherits(App,_React$Component);function App(props){var _this=this;_classCallCheck(this,_App),_React$Component.call(this,props);var editorModify=props.editorModify,editorSetActiveTab=props.editorSetActiveTab;editorModify({isOpen:!1}),editorSetActiveTab(null),this.state={fullBrowserScreen:pydio.UI.MOBILE_EXTENSIONS||!0},this.onFullBrowserScreen=function(){return _this.setState({fullBrowserScreen:!_this.state.fullBrowserScreen})}}App.prototype.render=function(){var _props=this.props,isOpen=_props.isOpen,isMinimised=_props.isMinimised,displayToolbar=_props.displayToolbar,documentWidth=_props.documentWidth,documentHeight=_props.documentHeight,fullBrowserScreen=this.state.fullBrowserScreen;if(!isOpen)return null;var editorStyle={position:"fixed",top:fullBrowserScreen?0:"1%",left:fullBrowserScreen?0:"1%",right:fullBrowserScreen?0:"15%",bottom:fullBrowserScreen?0:"1%"},overlayStyle={position:"fixed",top:0,bottom:0,right:0,left:0,background:"#000000",opacity:"0.8",transition:"opacity .5s ease-in"},buttonCenterPositionTop=documentHeight-50,buttonCenterPositionLeft=documentWidth-50,menuStyle={position:"fixed",top:buttonCenterPositionTop,left:buttonCenterPositionLeft,cursor:"pointer",transform:"translate(-50%, -50%)",zIndex:5};return React.createElement("div",{style:{position:"fixed",top:0,left:0,zIndex:1400}},!isMinimised&&React.createElement("div",{style:overlayStyle}),React.createElement(_componentsEditor.Editor,{displayToolbar:displayToolbar,style:editorStyle,minimiseStyle:{transformOrigin:buttonCenterPositionLeft+"px "+buttonCenterPositionTop+"px"}}),isMinimised&&React.createElement(_componentsMenu.Menu,{style:menuStyle}))};var _App=App;return App=_reactRedux.connect(mapStateToProps,EditorActions)(App)||App,App=withContainerSize(App)||App}(React.Component);exports.default=App;function mapStateToProps(state,ownProps){var editor=state.editor,tabs=state.tabs,_editor$isMinimised=editor.isMinimised,isMinimised=void 0!==_editor$isMinimised&&_editor$isMinimised,_ownProps$displayToolbar=ownProps.displayToolbar,displayToolbar=void 0===_ownProps$displayToolbar||_ownProps$displayToolbar,remaining=_objectWithoutProperties(ownProps,["displayToolbar"]);return _extends({},remaining,{tabs:tabs,isOpen:tabs.filter(function(_ref){return _ref.editorData}).length>0,isMinimised:isMinimised,displayToolbar:displayToolbar})}module.exports=exports.default},{"./components/editor":54,"./components/menu":60,"./make-editor-open":64,pydio:"pydio","react-redux":"react-redux"}],50:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactDraggable=require("react-draggable"),_reactRedux=(_interopRequireDefault(_reactDraggable),require("react-redux")),_materialUi=require("material-ui"),_EditorTab=require("./EditorTab"),_EditorTab2=_interopRequireDefault(_EditorTab),_EditorToolbar=require("./EditorToolbar"),_EditorToolbar2=_interopRequireDefault(_EditorToolbar),_EditorButton=require("./EditorButton"),_EditorButton2=_interopRequireDefault(_EditorButton),_lodash=require("lodash"),_Pydio$requireLib=(_interopRequireDefault(_lodash),_pydio2.default.requireLib("hoc")),getActiveTab=_Pydio$requireLib.getActiveTab,makeMotion=_Pydio$requireLib.makeMotion,makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,withMouseTracker=_Pydio$requireLib.withMouseTracker,withSelectionControls=_Pydio$requireLib.withSelectionControls,EditorActions=(_Pydio$requireLib.withContainerSize,_Pydio$requireLib.EditorActions),styles={selectionButtonLeft:{position:"absolute",top:"calc(50% - 18px)",left:"40px"},selectionButtonRight:{position:"absolute",top:"calc(50% - 18px)",right:"40px"},iconSelectionButton:{borderRadius:"50%",width:"36px",height:"36px",lineHeight:"36px",backgroundColor:"rgb(0, 0, 0, 0.87)",color:"rgb(255, 255,255, 0.87)"},toolbar:{default:{top:0,left:0,right:0,flexShrink:0}}};var Editor=function(_React$Component){_inherits(Editor,_React$Component);function Editor(){_classCallCheck(this,_Editor),_React$Component.apply(this,arguments)}Editor.prototype.handleBlurOnSelection=function(e){(0,this.props.editorModify)({focusOnSelection:!1})},Editor.prototype.handleFocusOnSelection=function(e){return(0,this.props.editorModify)({focusOnSelection:!0}),e.preventDefault(),e.stopPropagation(),!1},Editor.prototype.renderChild=function(){var activeTab=this.props.activeTab;return React.createElement(_EditorTab2.default,{id:activeTab.id})},Editor.prototype.render=function(){var _this=this,_props=this.props,style=_props.style,activeTab=_props.activeTab,fixedToolbar=_props.fixedToolbar,hideToolbar=_props.hideToolbar,tabDeleteAll=_props.tabDeleteAll,hideSelectionControls=_props.hideSelectionControls,prevSelectionDisabled=_props.prevSelectionDisabled,nextSelectionDisabled=_props.nextSelectionDisabled,onSelectPrev=_props.onSelectPrev,onSelectNext=_props.onSelectNext,parentStyle={display:"flex",flex:1,overflow:"hidden",width:"100%",height:"100%",position:"relative"};activeTab||(parentStyle=_extends({},parentStyle,{alignItems:"center",justifyContent:"center"}));var paperStyle=_extends({display:"flex",flexDirection:"column",overflow:"hidden",width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:0},style),toolbarStyle=styles.toolbar.default,keyPress=void 0;return(onSelectNext||onSelectPrev)&&(keyPress=function(e){if("ArrowLeft"===e.key&&onSelectPrev&&!prevSelectionDisabled)try{onSelectPrev()}catch(e){}else if("ArrowRight"===e.key&&onSelectNext&&!nextSelectionDisabled)try{onSelectNext()}catch(e){}else"Escape"===e.key&&tabDeleteAll&&tabDeleteAll()}),React.createElement(_materialUi.Paper,{zDepth:5,style:paperStyle,onClick:function(e){return _this.handleBlurOnSelection(e)},tabIndex:"-1",onKeyDown:keyPress},!hideToolbar&&React.createElement(_EditorToolbar2.default,{style:toolbarStyle,display:fixedToolbar?"fixed":"removable"}),React.createElement("div",{className:"body",style:parentStyle,onClick:function(e){return _this.handleFocusOnSelection(e)}},this.props.transitionEnded&&this.renderChild()),!hideSelectionControls&&onSelectPrev&&React.createElement(_EditorButton2.default,{iconClassName:"mdi mdi-chevron-left",style:styles.selectionButtonLeft,iconStyle:styles.iconSelectionButton,disabled:prevSelectionDisabled,onClick:function(){return onSelectPrev()}}),!hideSelectionControls&&onSelectNext&&React.createElement(_EditorButton2.default,{iconClassName:"mdi mdi-chevron-right",style:styles.selectionButtonRight,iconStyle:styles.iconSelectionButton,disabled:nextSelectionDisabled,onClick:function(){return onSelectNext()}}))};var _Editor=Editor;return Editor=makeMotion({scale:1},{scale:0},{check:function(props){return props.isMinimised},style:function(props){return props.minimiseStyle}})(Editor)||Editor,Editor=_reactRedux.connect(mapStateToProps,EditorActions)(Editor)||Editor,Editor=withSelectionControls(Editor)||Editor,Editor=withMouseTracker()(Editor)||Editor,Editor=makeTransitionHOC({translateY:800},{translateY:0})(Editor)||Editor}(React.Component);exports.default=Editor;function mapStateToProps(state,ownProps){var _state$editor=state.editor,editor=void 0===_state$editor?{}:_state$editor,_state$tabs=state.tabs,tabs=void 0===_state$tabs?[]:_state$tabs,_editor$isMinimised=editor.isMinimised,isMinimised=void 0!==_editor$isMinimised&&_editor$isMinimised,_editor$fixedToolbar=editor.fixedToolbar,fixedToolbar=void 0!==_editor$fixedToolbar&&_editor$fixedToolbar,_editor$focusOnSelection=editor.focusOnSelection,focusOnSelection=void 0!==_editor$focusOnSelection&&_editor$focusOnSelection;return _extends({},ownProps,{fixedToolbar:fixedToolbar,hideToolbar:!ownProps.displayToolbar||!fixedToolbar&&focusOnSelection&&!ownProps.isNearTop,hideSelectionControls:!ownProps.browseable||focusOnSelection&&!ownProps.isNearTop&&!ownProps.isNearLeft&&!ownProps.isNearRight,activeTab:getActiveTab(state),tabs:tabs,isMinimised:isMinimised})}module.exports=exports.default},{"./EditorButton":51,"./EditorTab":52,"./EditorToolbar":53,lodash:3,"material-ui":"material-ui",pydio:"pydio","react-draggable":"react-draggable","react-redux":"react-redux"}],51:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _require=require("material-ui"),IconButton=_require.IconButton,_Pydio$requireLib=Pydio.requireLib("hoc"),makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,withHideDisabled=_Pydio$requireLib.withHideDisabled,_default=function(_React$Component){_inherits(_default,_React$Component);function _default(){_classCallCheck(this,_default2),_React$Component.apply(this,arguments)}_default.prototype.render=function(){return React.createElement(IconButton,this.props)};var _default2=_default;return _default=makeTransitionHOC({opacity:0},{opacity:1})(_default)||_default,_default=withHideDisabled()(_default)||_default}(React.Component);exports.default=_default,module.exports=exports.default},{"material-ui":"material-ui"}],52:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]
;descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_reactRedux=require("react-redux"),_reactDraggable=require("react-draggable"),_reactDraggable2=_interopRequireDefault(_reactDraggable),_makeMaximise=(require("redux"),require("./make-maximise")),_makeMaximise2=_interopRequireDefault(_makeMaximise),_lodash=require("lodash"),_Pydio$requireLib=(_interopRequireDefault(_lodash),_pydio2.default.requireLib("hoc")),EditorActions=_Pydio$requireLib.EditorActions,getActiveTab=(_Pydio$requireLib.ResolutionActions,_Pydio$requireLib.ContentActions,_Pydio$requireLib.SizeActions,_Pydio$requireLib.SelectionActions,_Pydio$requireLib.LocalisationActions,_Pydio$requireLib.getActiveTab),getEditorResolution=_Pydio$requireLib.getEditorResolution,withContentControls=(_Pydio$requireLib.withMenu,_Pydio$requireLib.withContentControls),withSizeControls=_Pydio$requireLib.withSizeControls,withAutoPlayControls=_Pydio$requireLib.withAutoPlayControls,withResolutionControls=_Pydio$requireLib.withResolutionControls,styles={textField:{width:150,marginRight:40},textInput:{color:"rgba(255, 255,255, 0.87)"},textHint:{color:"rgba(255, 255,255, 0.67)"},iconButton:{backgroundColor:"rgba(0, 0, 0, 0.87)",color:"rgba(255, 255, 255, 0.87)",fill:"rgba(255, 255, 255, 0.87)"},divider:{backgroundColor:"rgba(255, 255,255, 0.87)",marginLeft:"12px",marginRight:"12px",alignSelf:"center"}},Tab=function(_React$PureComponent){_inherits(Tab,_React$PureComponent);function Tab(){_classCallCheck(this,_Tab),_React$PureComponent.apply(this,arguments)}Tab.prototype.render=function(){var Editor=this.props.Editor,_props=this.props,id=_props.id,node=_props.node,snackbarMessage=_props.snackbarMessage,editorData=_props.editorData,isActive=_props.isActive,_props2=(_props.style,this.props),editorSetActiveTab=_props2.editorSetActiveTab,tabModify=_props2.tabModify;if(!Editor)return null;var select=function(){return editorSetActiveTab(id)},cardStyle={display:"flex",height:"40%",flex:1,margin:0,overflow:"hidden",whiteSpace:"nowrap",backgroundColor:"transparent",borderRadius:0};return isActive?React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:!0,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive}),React.createElement(BottomBar,{id:id,style:Tab.styles.toolbar}),React.createElement(_materialUi.Snackbar,{style:{left:"10%",bottom:24},open:""!==snackbarMessage,autoHideDuration:3e3,onRequestClose:function(){return tabModify({id:id,message:""})},message:React.createElement("span",null,snackbarMessage)})):React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:isActive,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(_materialUi.CardHeader,{title:id,actAsExpander:!0,showExpandableButton:!0}),React.createElement(_materialUi.CardMedia,{style:Tab.styles.child,mediaStyle:Tab.styles.child},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive})))},_createClass(Tab,null,[{key:"styles",get:function(){return{container:{display:"flex",flex:1,flexFlow:"column nowrap",overflow:"auto",alignItems:"center"},child:{display:"flex",flex:1},toolbar:{backgroundColor:"rgb(0, 0, 0)",color:"rgba(255, 255, 255, 0.87)",width:"min-content",margin:"0 auto",padding:0,position:"absolute",bottom:24,height:48,borderRadius:3,alignSelf:"center"}}}}]);var _Tab=Tab;return Tab=_reactRedux.connect(mapStateToProps,EditorActions)(Tab)||Tab}(React.PureComponent);exports.default=Tab;var BottomBar=function(_React$Component){_inherits(BottomBar,_React$Component);function BottomBar(props){_classCallCheck(this,_BottomBar),_React$Component.call(this,props);var size=props.size,scale=props.scale;this.state={minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:scale+.5>=20}}BottomBar.prototype.componentWillReceiveProps=function(props){var size=props.size,scale=props.scale;this.setState({minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:scale+.5>=20})},BottomBar.prototype.render=function(){var _state=this.state,_state$minusDisabled=_state.minusDisabled,minusDisabled=void 0!==_state$minusDisabled&&_state$minusDisabled,_state$magnifyDisabled=_state.magnifyDisabled,magnifyDisabled=void 0!==_state$magnifyDisabled&&_state$magnifyDisabled,_state$plusDisabled=_state.plusDisabled,plusDisabled=void 0!==_state$plusDisabled&&_state$plusDisabled,_props3=this.props,readonly=_props3.readonly,scale=(_props3.size,_props3.scale),_props3$playing=_props3.playing,playing=void 0!==_props3$playing&&_props3$playing,resolution=_props3.resolution,onAutoPlayToggle=_props3.onAutoPlayToggle,onSizeChange=_props3.onSizeChange,onResolutionToggle=_props3.onResolutionToggle,remaining=_objectWithoutProperties(_props3,["readonly","size","scale","playing","resolution","onAutoPlayToggle","onSizeChange","onResolutionToggle"]),_props4=this.props,saveable=_props4.saveable,undoable=_props4.undoable,redoable=_props4.redoable,onSave=_props4.onSave,onUndo=_props4.onUndo,onRedo=_props4.onRedo,saveDisabled=_props4.saveDisabled,undoDisabled=_props4.undoDisabled,redoDisabled=_props4.redoDisabled,_props5=this.props,onToggleLineNumbers=_props5.onToggleLineNumbers,onToggleLineWrapping=_props5.onToggleLineWrapping,_props6=this.props,onSearch=_props6.onSearch,onJumpTo=_props6.onJumpTo,editable=(saveable||undoable||redoable)&&!readonly,_props7=this.props,editortools=_props7.editortools,searchable=_props7.searchable,hdable=this.props.hdable,playable=this.props.playable,resizable=this.props.resizable;return editable||editortools||searchable||hdable||playable||resizable?React.createElement(_reactDraggable2.default,null,React.createElement(_materialUi.Toolbar,remaining,playable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+(playing?"mdi-pause":"mdi-play"),iconStyle:styles.iconButton,onClick:function(){return onAutoPlayToggle()}})),playable&&resizable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),resizable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale-.5})},disabled:minusDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-magnify-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"contain"})},disabled:magnifyDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-plus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale+.5})},disabled:plusDisabled})),(playable||resizable)&&hdable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),hdable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+("hi"==resolution?"mdi-quality-high":"mdi-image"),iconStyle:styles.iconButton,onClick:function(){return onResolutionToggle()}})),(playable||resizable||hdable)&&editable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editable&&React.createElement(_materialUi.ToolbarGroup,null,saveable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-content-save",iconStyle:styles.iconButton,onClick:function(){return onSave()},disabled:saveDisabled}),undoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-undo",iconStyle:styles.iconButton,onClick:function(){return onUndo()},disabled:undoDisabled}),redoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-redo",iconStyle:styles.iconButton,onClick:function(){return onRedo()},disabled:redoDisabled})),(playable||resizable||hdable||editable)&&editortools&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editortools&&React.createElement(_materialUi.ToolbarGroup,null,onToggleLineNumbers&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-format-list-numbers",iconStyle:styles.iconButton,onClick:function(){return onToggleLineNumbers()}}),onToggleLineWrapping&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-wrap",iconStyle:styles.iconButton,onClick:function(){return onToggleLineWrapping()}})),(playable||resizable||hdable||editable||editortools)&&searchable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),searchable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.TextField,{onKeyUp:function(_ref){var key=_ref.key,target=_ref.target;return"Enter"===key&&onJumpTo(target.value)},hintText:"Jump to Line",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput}),React.createElement(_materialUi.TextField,{onKeyUp:function(_ref2){var key=_ref2.key,target=_ref2.target;return"Enter"===key&&onSearch(target.value)},hintText:"Search...",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput})))):null};var _BottomBar=BottomBar;return BottomBar=_reactRedux.connect(mapStateToProps)(BottomBar)||BottomBar,BottomBar=withResolutionControls(BottomBar)||BottomBar,BottomBar=withSizeControls(BottomBar)||BottomBar,BottomBar=withAutoPlayControls(BottomBar)||BottomBar,BottomBar=withContentControls(BottomBar)||BottomBar}(React.Component);function mapStateToProps(state,ownProps){var editor=state.editor,current=getActiveTab(state),_current$readonly=current.readonly,readonly=void 0===_current$readonly||_current$readonly,_current$message=current.message,message=void 0===_current$message?"":_current$message,_current$editorData=current.editorData,editorData=void 0===_current$editorData?{editorClass:""}:_current$editorData,editorClass=FuncUtils.getFunctionByName(editorData.editorClass,window);return editorClass?_extends({},ownProps,current,{resolution:getEditorResolution(state),isActive:editor.activeTabId===current.id,snackbarMessage:message,readonly:readonly,Editor:editorClass.Editor,Controls:editorClass.Controls,Actions:editorClass.Actions}):_extends({},ownProps,current)}var AnimatedCard=_makeMaximise2.default(_materialUi.Card);module.exports=exports.default},{"./make-maximise":55,lodash:3,"material-ui":"material-ui",pydio:"pydio","react-draggable":"react-draggable","react-redux":"react-redux",redux:"redux"}],53:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactRedux=require("react-redux"),_materialUi=require("material-ui"),_PydioComponents=PydioComponents,ModalAppBar=_PydioComponents.ModalAppBar,_Pydio$requireLib=Pydio.requireLib("hoc"),getActiveTab=_Pydio$requireLib.getActiveTab,makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,EditorActions=_Pydio$requireLib.EditorActions,EditorToolbar=function(_React$Component){_inherits(EditorToolbar,_React$Component);function EditorToolbar(){_classCallCheck(this,_EditorToolbar),_React$Component.apply(this,arguments)}EditorToolbar.prototype.onClose=function(){(0,this.props.tabDeleteAll)()},EditorToolbar.prototype.onMinimise=function(){(0,this.props.editorModify)({isMinimised:!0})},EditorToolbar.prototype.render=function(){var _this=this,_props=this.props,title=_props.title,className=_props.className,style=_props.style,display=_props.display,mainStyle={},innerStyle={},spanStyle=void 0;return"fixed"===display?(mainStyle=_extends({position:"relative",backgroundColor:"#424242",boxShadow:"none"},style),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"},spanStyle={color:"#FFFFFF"}):(mainStyle=_extends({position:"absolute",background:"linear-gradient(to bottom,rgba(0,0,0,0.65) 0%,transparent 100%)",boxShadow:"none"},style),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"}),React.createElement(ModalAppBar,{className:className,style:mainStyle,title:React.createElement("span",{style:spanStyle},title),titleStyle:{innerStyle:innerStyle,fontSize:16},iconElementLeft:React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-arrow-left",iconStyle:innerStyle,touch:!0,onTouchTap:function(){return _this.onClose()}}),iconElementRight:React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-window-minimize",iconStyle:innerStyle,touch:!0,onTouchTap:function(){return _this.onMinimise()}}))})};var _EditorToolbar=EditorToolbar;return EditorToolbar=_reactRedux.connect(mapStateToProps,EditorActions)(EditorToolbar)||EditorToolbar,EditorToolbar=makeTransitionHOC({translateY:-60,opacity:0},{translateY:0,opacity:1})(EditorToolbar)||EditorToolbar}(React.Component);exports.default=EditorToolbar;function mapStateToProps(state,ownProps){var tab=getActiveTab(state);return _extends({},ownProps,{title:tab.title})}module.exports=exports.default},{"material-ui":"material-ui","react-redux":"react-redux"}],54:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Editor=require("./Editor");exports.Editor=_interopRequire(_Editor);var _EditorTab=require("./EditorTab");exports.EditorTab=_interopRequire(_EditorTab)},{"./Editor":50,"./EditorTab":52}],55:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _lodash=require("lodash"),_reactMotion=(_interopRequireDefault(_lodash),require("react-motion")),_HOCsUtils=require("../../../../HOCs/utils"),ANIMATION={stiffness:400,damping:30},TARGET=100,makeMaximise=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(props){_classCallCheck(this,_class),_React$Component.call(this,props),this.state={maximised:props.maximised}}return _class.prototype.componentWillReceiveProps=function(nextProps){this.setState({maximised:nextProps.maximised})},_class.prototype.render=function(){var _this=this,_props$style=this.props.style,style=void 0===_props$style?{}:_props$style,_style$width=style.width,width=void 0===_style$width?"0":_style$width,_style$height=style.height,height=void 0===_style$height?"0":_style$height,maximised=this.state.maximised,motionStyle={width:maximised?_reactMotion.spring(TARGET,ANIMATION):_reactMotion.spring(parseInt(width.replace(/%$/,"")),ANIMATION),height:maximised?_reactMotion.spring(TARGET,ANIMATION):_reactMotion.spring(parseInt(height.replace(/%$/,"")),ANIMATION)};return React.createElement(_reactMotion.Motion,{style:motionStyle},function(_ref){var width=_ref.width,height=_ref.height;return React.createElement(Target,_extends({},_this.props,{style:_extends({},style,{width:width+"%",height:height+"%",transition:"none"})}))})},_createClass(_class,null,[{key:"displayName",get:function(){return"MakeMaximise("+_HOCsUtils.getDisplayName(Target)+")"}}]),_class}(React.Component)};exports.default=makeMaximise,module.exports=exports.default},{"../../../../HOCs/utils":41,lodash:3,"react-motion":28}],56:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_makeRotate=require("./make-rotate"),_makeRotate2=_interopRequireDefault(_makeRotate),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,Button=function(_React$Component){_inherits(Button,_React$Component);function Button(){_classCallCheck(this,Button),_React$Component.apply(this,arguments)}return Button.prototype.render=function(){var rotated=this.props.rotated,iconClassName="mdi mdi-close";return rotated||(iconClassName="mdi mdi-animation"),React.createElement(_materialUi.FloatingActionButton,_extends({},this.props,{iconClassName:iconClassName}))},Button}(React.Component),AnimatedButton=_makeRotate2.default(Button);function mapStateToProps(state,ownProps){var editor=state.editor;return _extends({},editor.menu)}var ConnectedButton=_reactRedux.connect(mapStateToProps,EditorActions)(AnimatedButton);exports.default=ConnectedButton,module.exports=exports.default},{"./make-rotate":62,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],57:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_MainButton=require("./MainButton"),_MainButton2=_interopRequireDefault(_MainButton),_MenuGroup=require("./MenuGroup"),_MenuGroup2=_interopRequireDefault(_MenuGroup),_MenuItem=require("./MenuItem"),_MenuItem2=_interopRequireDefault(_MenuItem),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,Menu=function(_React$Component){_inherits(Menu,_React$Component);function Menu(props){var _this=this;_classCallCheck(this,Menu),_React$Component.call(this,props),this.state={ready:!1};var editorModify=props.editorModify;this.toggle=function(){return editorModify({isMenuActive:!_this.props.isActive})}}return Menu.prototype.renderChild=function(){var _props=this.props,isActive=_props.isActive,tabs=_props.tabs;return isActive?tabs.map(function(tab){var style={position:"absolute",top:0,left:0,right:0,bottom:0,transition:"transform 0.3s ease-in"};return React.createElement(_MenuItem2.default,{key:tab.id,id:tab.id,style:_extends({},style)})}):null},Menu.prototype.render=function(){var _props2=this.props,style=_props2.style,isActive=_props2.isActive;return React.createElement("div",null,React.createElement(_MenuGroup2.default,{style:style},this.renderChild()),React.createElement(_MainButton2.default,{ref:"button",open:isActive,style:style,onClick:this.toggle}))},Menu}(React.Component);function mapStateToProps(state,ownProps){var editor=state.editor,tabs=state.tabs,activeTab=tabs.filter(function(tab){return tab.id===editor.activeTabId})[0];return _extends({},editor,{activeTab:activeTab,tabs:tabs,isActive:editor.isMenuActive})}var ConnectedMenu=_reactRedux.connect(mapStateToProps,EditorActions)(Menu);exports.default=ConnectedMenu,module.exports=exports.default},{"./MainButton":56,"./MenuGroup":58,"./MenuItem":59,pydio:"pydio","react-redux":"react-redux"}],58:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _makeMenuTransition=require("./make-menu-transition"),_makeMenuTransition2=_interopRequireDefault(_makeMenuTransition),MenuGroup=function(props){return React.createElement("div",props,props.children)},AnimatedMenuGroup=_makeMenuTransition2.default(MenuGroup);exports.default=AnimatedMenuGroup,module.exports=exports.default},{"./make-menu-transition":61}],59:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=(_Pydio$requireLib.getActiveTab,_Pydio$requireLib.EditorActions),MenuItem=function(_React$PureComponent){_inherits(MenuItem,_React$PureComponent);function MenuItem(props){var _this=this;_classCallCheck(this,MenuItem),_React$PureComponent.call(this,props);var editorSetActiveTab=props.editorSetActiveTab,editorModify=props.editorModify;this.onClick=function(){editorModify({isMinimised:!1}),editorSetActiveTab(_this.props.id)}}return MenuItem.prototype.render=function(){var _props=this.props,style=_props.style,tab=_props.tab;if(_lodash2.default.isEmpty(tab))return null;var textStyle={position:"absolute",top:0,bottom:0,width:100,maxWidth:100,textAlign:"center",left:-120,lineHeight:"30px",margin:"5px 0",padding:"0 5px",borderRadius:4,background:"#000000",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",color:"#ffffff",opacity:"0.7"};return React.createElement("div",{style:style,onClick:this.onClick},React.createElement("span",{style:textStyle},tab.title),React.createElement(_materialUi.FloatingActionButton,{mini:!0,ref:"container",backgroundColor:"#FFFFFF",zDepth:2,iconStyle:{backgroundColor:"#FFFFFF"}},React.createElement(tab.icon,_extends({},this.props.tab,{style:{fill:"#000000",flex:1,alignItems:"center",justifyContent:"center",fontSize:28,color:"#607d8b"},loadThumbnail:!0}))))},MenuItem}(React.PureComponent);function mapStateToProps(state,ownProps){var _state$tabs=state.tabs,tabs=void 0===_state$tabs?{}:_state$tabs,current=tabs.filter(function(tab){return tab.id===ownProps.id})[0];return _extends({},ownProps,{tab:current})}var ConnectedMenuItem=_reactRedux.connect(mapStateToProps,EditorActions)(MenuItem);exports.default=ConnectedMenuItem,module.exports=exports.default},{lodash:3,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],60:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Menu=require("./Menu");exports.Menu=_interopRequire(_Menu)},{"./Menu":57}],61:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),OPACITY_ORIGIN=0,OPACITY_TARGET=1,TRANSLATEY_ORIGIN=0,TRANSLATEY_TARGET=70,ANIMATION={stifness:500,damping:20},makeMenuTransition=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(){_classCallCheck(this,_class),_React$Component.apply(this,arguments)}return _class.prototype.getStyles=function(){if(!this.props.children)return[];var counter=0;return React.Children.map(this.props.children,function(child){return{key:"t"+counter++,data:{element:child},style:{opacity:_reactMotion.spring(OPACITY_TARGET,ANIMATION),y:_reactMotion.spring(TRANSLATEY_TARGET*counter,ANIMATION)}}})},_class.prototype.willEnter=function(){return{opacity:OPACITY_ORIGIN,y:TRANSLATEY_ORIGIN}},_class.prototype.willLeave=function(){return{opacity:_reactMotion.spring(OPACITY_ORIGIN,ANIMATION),y:_reactMotion.spring(TRANSLATEY_ORIGIN,ANIMATION)}},_class.prototype.render=function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},function(styles){return React.createElement(Target,_this.props,styles.map(function(_ref){var key=_ref.key,style=_ref.style,data=_ref.data,loaded=1===style.opacity||0===style.opacity,childStyle={position:"absolute",opacity:style.opacity,transition:"none",transform:"translate3d(-50%, -50%, 0) translateY(-"+style.y+"px)"};return React.cloneElement(data.element,{key:key,loaded:loaded,style:childStyle})}))})},_class}(React.Component)};exports.default=makeMenuTransition,module.exports=exports.default},{"react-motion":28}],62:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),ORIGIN=-720,TARGET=0,makeRotate=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(props){_classCallCheck(this,_class),_React$Component.call(this,props),this.state={rotate:!1}}return _class.prototype.componentWillReceiveProps=function(nextProps){this.setState({rotate:nextProps.open})},_class.prototype.render=function(){var _this=this,style={rotate:this.state.rotate?ORIGIN:TARGET};return React.createElement(_reactMotion.Motion,{style:style},function(_ref){var rotate=_ref.rotate,rotated=rotate===ORIGIN;return React.createElement(Target,_extends({},_this.props,{rotated:rotated,style:_extends({},_this.props.style,{transform:_this.props.style.transform+" rotate("+rotate+"deg)"})}))})},_class}(React.Component)};exports.default=makeRotate,module.exports=exports.default},{"react-motion":28}],63:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _App=require("./App");exports.Editor=_interopRequire(_App)},{"./App":49}],64:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),
superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),ANIMATION={stiffness:150,damping:15,precision:1},TRANSLATEY_ORIGIN=800,TRANSLATEY_TARGET=0,makeEditorOpen=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(){_classCallCheck(this,_class),_React$Component.apply(this,arguments)}return _class.prototype.getStyle=function(){return{y:_reactMotion.spring(TRANSLATEY_TARGET,ANIMATION)}},_class.prototype.willEnter=function(){return{y:TRANSLATEY_ORIGIN}},_class.prototype.willLeave=function(){return{y:TRANSLATEY_ORIGIN}},_class.prototype.render=function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyle(),willLeave:this.willLeave,willEnter:this.willEnter},function(_ref){var y=_ref.y;return React.createElement(Target,_extends({},_this.props,{style:_extends({},_this.props.style,{transform:transform+" translateY("+y+"px)"})}))})},_class}(React.Component)};exports.default=makeEditorOpen,module.exports=exports.default},{"react-motion":28}],65:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _OpenNodesModel=require("./OpenNodesModel"),_OpenNodesModel2=_interopRequireDefault(_OpenNodesModel),_viewsMainFilesList=require("./views/MainFilesList"),_viewsMainFilesList2=_interopRequireDefault(_viewsMainFilesList),_viewsBreadcrumb=require("./views/Breadcrumb"),_viewsBreadcrumb2=_interopRequireDefault(_viewsBreadcrumb),_viewsFilePreview=require("./views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_viewsFSTemplate=require("./views/FSTemplate"),_viewsFSTemplate2=_interopRequireDefault(_viewsFSTemplate),_viewsEditionPanel=require("./views/EditionPanel"),_viewsEditionPanel2=_interopRequireDefault(_viewsEditionPanel),_search=require("./search"),_wslistWorkspacesList=require("./wslist/WorkspacesList"),_wslistWorkspacesList2=_interopRequireDefault(_wslistWorkspacesList),_wslistWorkspacesListMaterial=require("./wslist/WorkspacesListMaterial"),_wslistWorkspacesListMaterial2=_interopRequireDefault(_wslistWorkspacesListMaterial),_wslistWorkspacePickerDialog=require("./wslist/WorkspacePickerDialog"),_wslistWorkspacePickerDialog2=_interopRequireDefault(_wslistWorkspacePickerDialog),_leftnavLeftPanel=require("./leftnav/LeftPanel"),_leftnavLeftPanel2=_interopRequireDefault(_leftnavLeftPanel),_leftnavDynamicLeftPanel=require("./leftnav/DynamicLeftPanel"),_leftnavDynamicLeftPanel2=_interopRequireDefault(_leftnavDynamicLeftPanel),_leftnavUserWidget=require("./leftnav/UserWidget"),_leftnavUserWidget2=_interopRequireDefault(_leftnavUserWidget),_viewsTourGuide=require("./views/TourGuide"),_viewsTourGuide2=_interopRequireDefault(_viewsTourGuide),_viewsMasterLayout=require("./views/MasterLayout"),_viewsMasterLayout2=_interopRequireDefault(_viewsMasterLayout),_detailpanesInfoPanel=require("./detailpanes/InfoPanel"),_detailpanesInfoPanel2=_interopRequireDefault(_detailpanesInfoPanel),_detailpanesInfoPanelCard=require("./detailpanes/InfoPanelCard"),_detailpanesInfoPanelCard2=_interopRequireDefault(_detailpanesInfoPanelCard),_detailpanesRootNode=require("./detailpanes/RootNode"),_detailpanesRootNode2=_interopRequireDefault(_detailpanesRootNode),_detailpanesGenericInfoCard=require("./detailpanes/GenericInfoCard"),_detailpanesGenericInfoCard2=_interopRequireDefault(_detailpanesGenericInfoCard),_detailpanesFileInfoCard=require("./detailpanes/FileInfoCard"),_detailpanesFileInfoCard2=_interopRequireDefault(_detailpanesFileInfoCard),_editorComponentsEditor=require("./editor/components/editor"),classes={OpenNodesModel:_OpenNodesModel2.default,MainFilesList:_viewsMainFilesList2.default,EditionPanel:_viewsEditionPanel2.default,Breadcrumb:_viewsBreadcrumb2.default,SearchForm:_search.SearchForm,FilePreview:_viewsFilePreview2.default,FSTemplate:_viewsFSTemplate2.default,WorkspacesList:_wslistWorkspacesList2.default,WorkspacesListMaterial:_wslistWorkspacesListMaterial2.default,WorkspacePickerDialog:_wslistWorkspacePickerDialog2.default,LeftPanel:_leftnavLeftPanel2.default,DynamicLeftPanel:_leftnavDynamicLeftPanel2.default,UserWidget:_leftnavUserWidget2.default,TourGuide:_viewsTourGuide2.default,MasterLayout:_viewsMasterLayout2.default,InfoPanel:_detailpanesInfoPanel2.default,InfoPanelCard:_detailpanesInfoPanelCard2.default,InfoRootNode:_detailpanesRootNode2.default,FileInfoCard:_detailpanesFileInfoCard2.default,GenericInfoCard:_detailpanesGenericInfoCard2.default,Editor:_editorComponentsEditor.Editor};exports.default=classes,module.exports=exports.default},{"./OpenNodesModel":43,"./detailpanes/FileInfoCard":44,"./detailpanes/GenericInfoCard":45,"./detailpanes/InfoPanel":46,"./detailpanes/InfoPanelCard":47,"./detailpanes/RootNode":48,"./editor/components/editor":54,"./leftnav/DynamicLeftPanel":67,"./leftnav/LeftPanel":68,"./leftnav/UserWidget":69,"./search":77,"./views/Breadcrumb":79,"./views/EditionPanel":82,"./views/FSTemplate":83,"./views/FilePreview":84,"./views/MainFilesList":85,"./views/MasterLayout":86,"./views/TourGuide":88,"./wslist/WorkspacePickerDialog":93,"./wslist/WorkspacesList":94,"./wslist/WorkspacesListMaterial":95}],66:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_color=require("color"),_color2=_interopRequireDefault(_color),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_pydioModelMetaNodeProvider=require("pydio/model/meta-node-provider"),_pydioModelMetaNodeProvider2=_interopRequireDefault(_pydioModelMetaNodeProvider),_viewsFilePreview=require("../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_materialUiStyles=require("material-ui/styles"),_materialUi=require("material-ui"),_pydioHttpRestApi=require("pydio/http/rest-api"),_Pydio$requireLib=_pydio2.default.requireLib("components"),EmptyStateView=_Pydio$requireLib.EmptyStateView,listCss="\n.bmListEntry{\n    border-bottom: 1px solid rgba(0,0,0,0.025);\n    padding: 2px 0;\n}\n.bmListEntry:hover{\n    background-color:#FAFAFA;\n    border-bottom-color: #FAFAFA;\n}\n.bmListEntryWs:hover{\n    text-decoration:underline;\n}\n",BookmarksList=function(_React$Component){_inherits(BookmarksList,_React$Component);function BookmarksList(props){_classCallCheck(this,BookmarksList),_React$Component.call(this,props),this.state={open:!1,loading:!1,bookmarks:null}}return BookmarksList.prototype.load=function(){var _this=this;return this.setState({loading:!0}),new _pydioHttpRestApi.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()).userBookmarks(new _pydioHttpRestApi.RestUserBookmarksRequest).then(function(collection){_this.setState({bookmarks:collection.Nodes,loading:!1})}).catch(function(reason){_this.setState({loading:!1})})},BookmarksList.prototype.handleTouchTap=function(event){event.preventDefault(),this.load(),this.setState({open:!0,anchorEl:event.currentTarget})},BookmarksList.prototype.handleRequestClose=function(){this.setState({open:!1})},BookmarksList.prototype.entryClicked=function(node){this.handleRequestClose(),this.props.pydio.goTo(node)},BookmarksList.prototype.removeBookmark=function(node){var _this2=this,nodeUuid=node.getMetadata().get("uuid"),api=new _pydioHttpRestApi.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()),searchRequest=new _pydioHttpRestApi.IdmSearchUserMetaRequest;searchRequest.NodeUuids=[nodeUuid],searchRequest.Namespace="bookmark";var request=new _pydioHttpRestApi.IdmUpdateUserMetaRequest;return api.searchUserMeta(searchRequest).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_pydioHttpRestApi.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){_this2.load()}))})},BookmarksList.prototype.bmToNodes=function(bm){return bm.AppearsIn.map(function(ws){var copy=_extends({},bm);copy.Path=ws.WsSlug+"/"+ws.Path;var node=_pydioModelMetaNodeProvider2.default.parseTreeNode(copy,ws.WsSlug);return node.getMetadata().set("repository_id",ws.WsUuid),node.getMetadata().set("WsLabel",ws.WsLabel),node})},BookmarksList.prototype.render=function(){var _this3=this,_props=this.props,pydio=_props.pydio,muiTheme=_props.muiTheme,iconStyle=_props.iconStyle,_state=this.state,loading=_state.loading,open=_state.open,anchorEl=_state.anchorEl,bookmarks=_state.bookmarks,previewStyles={style:{height:40,width:40,borderRadius:"50%"},mimeFontStyle:{fontSize:24,lineHeight:"40px",textAlign:"center"}};if(!pydio.user.activeRepository)return null;var items=void 0;bookmarks&&(items=bookmarks.map(function(n){var nodes=_this3.bmToNodes(n);return _react2.default.createElement("div",{className:"bmListEntry",style:{display:"flex",alignItems:"center",width:"100%"}},_react2.default.createElement("div",{style:{padding:"12px 16px",cursor:"pointer"},onClick:function(){_this3.entryClicked(nodes[0])}},_react2.default.createElement(_viewsFilePreview2.default,_extends({pydio:pydio,node:nodes[0],loadThumbnail:!0},previewStyles))),_react2.default.createElement("div",{style:{flex:1,overflow:"hidden",cursor:"pointer"},onClick:function(){_this3.entryClicked(nodes[0])}},_react2.default.createElement("div",{style:{fontSize:15,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},nodes[0].getLabel()),_react2.default.createElement("div",{style:{opacity:.33}},"In ",nodes.map(function(n,i){var click=function(e){e.stopPropagation(),_this3.entryClicked(n)},link=_react2.default.createElement("a",{className:"bmListEntryWs",onClick:click,style:{fontWeight:500}},n.getMetadata().get("WsLabel"));return i===nodes.length-1?link:_react2.default.createElement("span",null,link,", ")}))),_react2.default.createElement("div",null,_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-delete",iconStyle:{opacity:.33,fontSize:18},onTouchTap:function(){_this3.removeBookmark(nodes[0])},tooltip:"Remove this bookmark",tooltipPosition:"bottom-left"})))}));var buttonStyle={borderRadius:"50%"};if(open&&iconStyle&&iconStyle.color){var c=_color2.default(iconStyle.color);buttonStyle=_extends({},buttonStyle,{backgroundColor:c.fade(.9).toString()})}return _react2.default.createElement("span",null,_react2.default.createElement(_materialUi.IconButton,{onTouchTap:this.handleTouchTap.bind(this),iconClassName:"userActionIcon mdi mdi-star",tooltip:pydio.MessageHash[147],tooltipPosition:"bottom-left",className:"userActionButton",iconStyle:iconStyle,style:buttonStyle}),_react2.default.createElement(_materialUi.Popover,{open:open,anchorEl:anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this),style:{width:320},zDepth:3},_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",borderRadius:"2px 2px 0 0",width:"100%",backgroundColor:"#f8fafc",borderBottom:"1px solid #ECEFF1",color:muiTheme.palette.primary1Color}},_react2.default.createElement("span",{className:"mdi mdi-star",style:{fontSize:18,margin:"12px 8px 14px 16px"}}),_react2.default.createElement("span",{style:{fontSize:15,fontWeight:500}},pydio.MessageHash[147])),loading&&_react2.default.createElement("div",{style:{height:260,backgroundColor:"white"}},_react2.default.createElement(_materialUi.RefreshIndicator,{size:40,left:140,top:120,status:"loading",style:{}})),!loading&&items&&items.length&&_react2.default.createElement("div",{style:{maxHeight:330,overflowY:"auto",overflowX:"hidden",padding:0}},items),!loading&&(!items||!items.length)&&_react2.default.createElement(EmptyStateView,{pydio:pydio,iconClassName:"mdi mdi-star-outline",primaryTextId:"145",secondaryTextId:"482",style:{minHeight:260,backgroundColor:"white"}}),_react2.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:listCss}})))},BookmarksList}(_react2.default.Component);exports.default=BookmarksList=_materialUiStyles.muiThemeable()(BookmarksList),exports.default=BookmarksList,module.exports=exports.default},{"../views/FilePreview":84,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/rest-api":"pydio/http/rest-api","pydio/model/meta-node-provider":"pydio/model/meta-node-provider",react:"react"}],67:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _wslistWorkspacesList=require("../wslist/WorkspacesList");_interopRequireDefault(_wslistWorkspacesList);exports.default=React.createClass({displayName:"DynamicLeftPanel",propTypes:{pydio:React.PropTypes.instanceOf(Pydio).isRequired,pydioId:React.PropTypes.string.isRequired},childContextTypes:{messages:React.PropTypes.object,getMessage:React.PropTypes.func},getChildContext:function(){var messages=this.props.pydio.MessageHash;return{messages:messages,getMessage:function(messageId){var namespace=arguments.length<=1||void 0===arguments[1]?"ajxp_admin":arguments[1];try{return messages[namespace+(namespace?".":"")+messageId]||messageId}catch(e){return messageId}}}},parseComponentConfigs:function(){var reg=this.props.pydio.Registry.getXML(),contentNodes=XMLUtils.XPathSelectNodes(reg,"client_configs/component_config/additional_content"),result=[],compId="AjxpReactComponent::"+this.props.pydioId;return contentNodes.map(function(node){node.parentNode.getAttribute("className")==compId&&result.push({id:node.getAttribute("id"),position:parseInt(node.getAttribute("position")),type:node.getAttribute("type"),options:JSON.parse(node.getAttribute("options"))})}),result.sort(function(a,b){return a.position>=b.position?1:-1}),result},getInitialState:function(){return{statusOpen:!0,blinkingBell:!1,additionalContents:this.parseComponentConfigs(),workspaces:this.props.pydio.user.getRepositoriesList()}},componentDidMount:function(){this._timer&&global.clearTimeout(this._timer),this._timer=global.setTimeout(this.closeNavigation,3e3),this._reloadObserver=function(){try{this.isMounted()&&this.setState({workspaces:this.props.pydio.user?this.props.pydio.user.getRepositoriesList():[]})}catch(e){global.console&&console.error("Error while setting state on LeftPanel component - Probably height error on IE8",e)}}.bind(this),this.props.pydio.observe("repository_list_refreshed",this._reloadObserver)},componentWillUnmount:function(){this._reloadObserver&&this.props.pydio.stopObserving("repository_list_refreshed",this._reloadObserver)},openNavigation:function(){this.state.statusOpen||this.setState({statusOpen:!0})},closeNavigation:function(){this.setState({statusOpen:!1})},listNodeClicked:function(node){this.props.pydio.goTo(node),this.closeNavigation()},closeMouseover:function(){this._timer&&global.clearTimeout(this._timer)},closeMouseout:function(){this._timer&&global.clearTimeout(this._timer),this._timer=global.setTimeout(this.closeNavigation,300)},onAlertPanelBadgeChange:function(paneData,newValue,oldValue,memoData){if("navigation_alerts"===paneData.id&&(newValue?this.setState({blinkingBell:newValue,blinkingBellClass:paneData.options.titleClassName}):this.setState({blinkingBell:!1}),newValue&&newValue!==oldValue&&Object.isNumber(newValue)&&""!==oldValue&&newValue>oldValue)){var notifText="Something happened!";if(memoData instanceof PydioDataModel){var node=memoData.getRootNode().getFirstChildIfExists();node&&(notifText=paneData.options.tipAttribute?node.getMetadata().get(paneData.options.tipAttribute):node.getLabel())}if(PydioTasks){PydioTasks.AlertTask.setCloser(this.openNavigation.bind(this));var title=global.pydio.MessageHash[paneData.options.title]||paneData.options.title;new PydioTasks.AlertTask(title,notifText).show()}}},render:function(){var additional=this.state.additionalContents.map(function(paneData){return"ListProvider"==paneData.type?React.createElement(PydioComponents.CollapsableListProvider,{pydio:this.props.pydio,paneData:paneData,nodeClicked:this.listNodeClicked,onBadgeChange:this.onAlertPanelBadgeChange}):null}.bind(this)),badge=void 0;return this.state.blinkingBell&&(badge=React.createElement("span",{className:"badge-icon icon-bell-alt"})),React.createElement("span",null,React.createElement("div",{id:"repo_chooser",onClick:this.openNavigation,onMouseOver:this.openNavigation,className:this.state.statusOpen?"open":""},React.createElement("span",{className:"icon-reorder"}),badge),React.createElement("div",{className:"left-panel"+(this.state.statusOpen?"":" hidden"),onMouseOver:this.closeMouseover,onMouseOut:this.closeMouseout},additional,React.createElement(UserWorkspacesList,{pydio:this.props.pydio,workspaces:this.state.workspaces})))}}),module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../wslist/WorkspacesList":94}],68:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _UserWidget=require("./UserWidget"),_UserWidget2=_interopRequireDefault(_UserWidget),_wslistWorkspacesList=require("../wslist/WorkspacesList"),_wslistWorkspacesList2=_interopRequireDefault(_wslistWorkspacesList),React=require("react"),Pydio=require("pydio"),_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,_Pydio$requireLib=Pydio.requireLib("boot"),TasksPanel=_Pydio$requireLib.TasksPanel,LeftPanel=function(_ref){var muiTheme=_ref.muiTheme,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,userWidgetProps=_ref.userWidgetProps,workspacesListProps=_ref.workspacesListProps,pydio=_ref.pydio,onClick=_ref.onClick,onMouseOver=_ref.onMouseOver,palette=muiTheme.palette,Color=require("color"),colorHue=Color(palette.primary1Color).hsl().array()[0],lightBg=new Color({h:colorHue,s:35,l:98}),taskBg=new Color({h:colorHue,s:30,l:96});style=_extends({backgroundColor:lightBg.toString()},style);var uWidgetProps=_extends({},userWidgetProps);uWidgetProps.style=_extends({backgroundColor:Color(palette.primary1Color).darken(.2).toString(),width:"100%"},uWidgetProps.style);var wsListStyle={backgroundColor:lightBg.toString(),color:Color(palette.primary1Color).darken(.1).alpha(.87).toString(),borderRight:"1px solid #e0e0e0"},wsSectionTitleStyle={color:Color(palette.primary1Color).darken(.1).alpha(.5).toString()},wsListProps=workspacesListProps||{};return React.createElement("div",{className:"left-panel vertical_fit vertical_layout",style:style,onClick:onClick,onMouseOver:onMouseOver},React.createElement(_UserWidget2.default,_extends({pydio:pydio,controller:pydio.getController(),toolbars:["aUser","user","zlogin"]},uWidgetProps)),React.createElement(_wslistWorkspacesList2.default,_extends({className:"vertical_fit",style:wsListStyle,sectionTitleStyle:wsSectionTitleStyle,pydio:pydio,showTreeForWorkspace:!!pydio.user&&pydio.user.activeRepository},wsListProps)),React.createElement(TasksPanel,{pydio:pydio,mode:"flex",panelStyle:_extends({},wsListStyle,{backgroundColor:taskBg.toString()})}))};LeftPanel.propTypes={pydio:React.PropTypes.instanceOf(Pydio).isRequired,userWidgetProps:React.PropTypes.object,workspacesListProps:React.PropTypes.object,style:React.PropTypes.object},exports.default=LeftPanel=muiThemeable()(LeftPanel),exports.default=LeftPanel,module.exports=exports.default},{"../wslist/WorkspacesList":94,"./UserWidget":69,color:"color","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],69:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_BookmarksList=require("./BookmarksList"),_BookmarksList2=_interopRequireDefault(_BookmarksList),React=require("react"),_Pydio$requireLib=_pydio2.default.requireLib("boot"),AsyncComponent=_Pydio$requireLib.AsyncComponent,_Pydio$requireLib2=_pydio2.default.requireLib("components"),UserAvatar=_Pydio$requireLib2.UserAvatar,MenuItemsConsumer=_Pydio$requireLib2.MenuItemsConsumer,MenuUtils=_Pydio$requireLib2.MenuUtils,Toolbar=_Pydio$requireLib2.Toolbar,_require=require("material-ui"),Paper=_require.Paper,Popover=_require.Popover,UserWidget=function(_React$Component){_inherits(UserWidget,_React$Component);function UserWidget(props){_classCallCheck(this,UserWidget),_React$Component.call(this,props),this.state={showMenu:!1}}return UserWidget.getPropTypes=function(){return{pydio:React.PropTypes.instanceOf(_pydio2.default),style:React.PropTypes.object,avatarStyle:React.PropTypes.object,actionBarStyle:React.PropTypes.object,avatarOnly:React.PropTypes.bool}},UserWidget.prototype.showMenu=function(event){this.setState({showMenu:!0,anchor:event.currentTarget})},UserWidget.prototype.closeMenu=function(event,index,menuItem){this.setState({showMenu:!1})},UserWidget.prototype.applyAction=function(actionName){switch(actionName){case"home":this.props.pydio.triggerRepositoryChange("homepage");break;case"settings":this.props.pydio.triggerRepositoryChange("settings");break;case"about_pydio":this.props.pydio.getController().fireAction("splash")}},UserWidget.prototype.render=function(){var _this=this,avatar=void 0,notificationsButton=void 0,currentIsSettings=void 0,bookmarksButton=void 0,_props=this.props,pydio=_props.pydio,displayLabel=_props.displayLabel,avatarStyle=_props.avatarStyle,popoverDirection=_props.popoverDirection,popoverTargetPosition=_props.popoverTargetPosition,color=_props.color,menuItems=_props.menuItems,_state=this.state,showMenu=_state.showMenu,anchor=_state.anchor;if(pydio.user){var user=this.props.pydio.user;currentIsSettings="settings"===user.activeRepository,avatarStyle=_extends({},avatarStyle,{position:"relative"});var menuProps={display:"right",width:160,desktop:!0};avatar=React.createElement("div",{onClick:function(e){_this.showMenu(e)},style:{cursor:"pointer",maxWidth:155}},React.createElement(UserAvatar,{pydio:pydio,userId:user.id,style:avatarStyle,className:"user-display",labelClassName:"userLabel",displayLabel:displayLabel,displayLabelChevron:!0,labelChevronStyle:{color:color},labelMaxChars:8,labelStyle:{flex:1,marginLeft:8,color:color},avatarSize:38}),React.createElement(Popover,{zDepth:2,open:showMenu,anchorEl:anchor,anchorOrigin:{horizontal:popoverDirection||"right",vertical:popoverTargetPosition||"bottom"},targetOrigin:{horizontal:popoverDirection||"right",vertical:"top"},onRequestClose:function(){_this.closeMenu()},useLayerForClickAway:!1,style:{marginTop:-10,marginLeft:10}},MenuUtils.itemsToMenu(menuItems,this.closeMenu.bind(this),!1,menuProps))),this.props.hideNotifications||(notificationsButton=React.createElement(AsyncComponent,_extends({namespace:"PydioActivityStreams",componentName:"UserPanel",noLoader:!0,iconClassName:"userActionIcon mdi mdi-bell",iconStyle:{color:color}},this.props))),bookmarksButton=React.createElement(_BookmarksList2.default,{pydio:this.props.pydio,iconStyle:{color:color}})}var actionBarStyle=this.props.actionBarStyle||{},actionBar=void 0;return currentIsSettings||(actionBar=React.createElement("div",{className:"action_bar",style:_extends({display:"flex"},actionBarStyle)},React.createElement(Toolbar,_extends({},this.props,{toolbars:["user-widget"],renderingType:"icon",toolbarStyle:{display:"inline"},buttonStyle:{color:color,fontSize:18},tooltipPosition:"bottom-right",className:"user-widget-toolbar"})),notificationsButton,bookmarksButton)),this.props.children?React.createElement(Paper,{zDepth:1,rounded:!1,style:_extends({},this.props.style,{display:"flex"}),className:"user-widget primaryColorDarkerPaper"},React.createElement("div",{style:{flex:1}},avatar,actionBar),this.props.children):React.createElement(Paper,{zDepth:1,rounded:!1,style:this.props.style,className:"user-widget primaryColorDarkerPaper"},avatar,this.props.style&&"flex"===this.props.style.display&&React.createElement("span",{style:{flex:1}}),actionBar)},UserWidget}(React.Component);exports.default=UserWidget=MenuItemsConsumer(UserWidget),exports.default=UserWidget,module.exports=exports.default},{"./BookmarksList":66,"material-ui":"material-ui",pydio:"pydio",react:"react"}],70:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydioUtilXml=require("pydio/util/xml"),_pydioUtilXml2=_interopRequireDefault(_pydioUtilXml),_materialUi=require("material-ui"),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_DatePanel=require("./DatePanel"),_DatePanel2=_interopRequireDefault(_DatePanel),_FileFormatPanel=require("./FileFormatPanel"),_FileFormatPanel2=_interopRequireDefault(_FileFormatPanel),_FileSizePanel=require("./FileSizePanel"),_FileSizePanel2=_interopRequireDefault(_FileSizePanel),_lodash=require("lodash"),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,_Pydio$requireLib2=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib2.ModernTextField,AdvancedSearch=function(_Component){_inherits(AdvancedSearch,_Component),_createClass(AdvancedSearch,null,[{key:"styles",get:function(){return{text:{width:"calc(100% - 32px)",margin:"0 16px"}}}}]);function AdvancedSearch(props){_classCallCheck(this,AdvancedSearch),_Component.call(this,props),this.state={basename:props.values.basename||""}}return AdvancedSearch.prototype.textFieldChange=function(fieldName,value){var _setState,_props$onChange;this.setState((_setState={},_setState[fieldName]=value,_setState)),this.props.onChange((_props$onChange={},_props$onChange[fieldName]=value,_props$onChange))},AdvancedSearch.prototype.onChange=function(values){this.props.onChange(values)},AdvancedSearch.prototype.renderField=function(key,val){var _this=this,text=AdvancedSearch.styles.text,fieldname="basename"===key?key:"ajxp_meta_"+key;if("object"==typeof val){var value=this.props.values[fieldname],label=val.label,renderComponent=val.renderComponent;if(renderComponent){var component=renderComponent(_extends({},this.props,{label:label,value:value,fieldname:key,onChange:function(object){_this.onChange(object)}}));return _react2.default.createElement("div",{style:{margin:"0 16px"}},component)}}return _react2.default.createElement(ModernTextField,{key:fieldname,value:this.state[fieldname]||"",style:text,hintText:val,onChange:function(e,v){_this.textFieldChange(fieldname,v)}})},AdvancedSearch.prototype.render=function(){var _this2=this,text=AdvancedSearch.styles.text,_props=this.props,pydio=_props.pydio,getMessage=_props.getMessage,values=_props.values,rootStyle=_props.rootStyle,headerStyle={fontSize:13,color:"#616161",fontWeight:500,marginBottom:-10,marginTop:10};return _react2.default.createElement("div",{className:"search-advanced",style:_extends({},rootStyle)},_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle,{marginTop:0})},getMessage(341)),this.renderField("basename",getMessage(1)),_react2.default.createElement(_FileFormatPanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}),_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle,{marginTop:0})},getMessage(489)),_react2.default.createElement(AdvancedMetaFields,this.props,function(fields){return _react2.default.createElement("div",null,Object.keys(fields).map(function(key){return _this2.renderField(key,fields[key])}))}),_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle)},getMessage(498)),_react2.default.createElement(_DatePanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}),_react2.default.createElement(_FileSizePanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}))},AdvancedSearch}(_react.Component);AdvancedSearch=PydioContextConsumer(AdvancedSearch);var AdvancedMetaFields=function(_Component2){_inherits(AdvancedMetaFields,_Component2);function AdvancedMetaFields(props){_classCallCheck(this,AdvancedMetaFields),_Component2.call(this,props);var pydio=props.pydio,registry=pydio.getXmlRegistry(),options=JSON.parse(_pydioUtilXml2.default.XPathGetSingleNodeText(registry,'client_configs/template_part[@ajxpClass="SearchEngine" and @theme="material"]/@ajxpOptions'));this.build=_lodash.debounce(this.build,500),this.state={options:options,fields:{}}}return AdvancedMetaFields.prototype.componentWillMount=function(){
this.build()},AdvancedMetaFields.prototype.build=function(){var _this3=this,options=this.state.options,_extends2=_extends({},options),metaColumns=_extends2.metaColumns,reactColumnsRenderers=_extends2.reactColumnsRenderers;metaColumns||(metaColumns={}),reactColumnsRenderers||(reactColumnsRenderers={});var generic={},specialRendererKeys=Object.keys(_extends({},reactColumnsRenderers)),standardRendererKeys=Object.keys(_extends({},metaColumns)).filter(function(key){return-1===specialRendererKeys.indexOf(key)}),textFields={};standardRendererKeys.forEach(function(k){textFields[k]=metaColumns[k]});var renderers=Object.keys(_extends({},reactColumnsRenderers)).map(function(key){var _ref,renderer=reactColumnsRenderers[key],namespace=renderer.split(".",1).shift();return window[namespace]?(_ref={},_ref[key]={label:metaColumns[key],renderComponent:FuncUtils.getFunctionByName(renderer,global)},_ref):void ResourcesManager.detectModuleToLoadAndApply(renderer,function(){return _this3.build()},!0)}).reduce(function(obj,current){return obj=_extends({},obj,current)},[]),fields=_extends({},generic,textFields,renderers);this.setState({fields:fields})},AdvancedMetaFields.prototype.render=function(){return this.props.children(this.state.fields)},AdvancedMetaFields}(_react.Component);AdvancedMetaFields.propTypes={children:_react2.default.PropTypes.func.isRequired},exports.default=AdvancedSearch,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DatePanel":71,"./FileFormatPanel":72,"./FileSizePanel":73,lodash:3,"material-ui":"material-ui",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],71:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernSelectField=_Pydio$requireLib.ModernSelectField,ModernStyles=_Pydio$requireLib.ModernStyles,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchDatePanel=function(_React$Component){_inherits(SearchDatePanel,_React$Component),_createClass(SearchDatePanel,null,[{key:"styles",get:function(){return{datePickerGroup:{display:"flex",justifyContent:"space-between"},datePicker:{flex:1,position:"relative"},dateInput:{width:"auto",flex:1},dateClose:{position:"absolute",lineHeight:"50px",right:5,top:0,cursor:"pointer",color:"rgba(0,0,0,0.5)"}}}}]);function SearchDatePanel(props){_classCallCheck(this,SearchDatePanel),_React$Component.call(this,props),this.state={value:"",startDate:null,endDate:null}}return SearchDatePanel.prototype.componentDidUpdate=function(prevProps,prevState){if(prevState!==this.state){var _state=this.state,value=_state.value,startDate=_state.startDate,endDate=_state.endDate;value||this.props.onChange({ajxp_modiftime:null});var startDay=function(date){return date.setHours(0),date.setMinutes(0),date.setSeconds(1),date},endDay=function(date){return date.setHours(23),date.setMinutes(59),date.setSeconds(59),date};if("custom"===value)startDate||(startDate=new Date(0)),endDate||(endDate=new Date,endDate.setFullYear(endDate.getFullYear()+1)),this.props.onChange({ajxp_modiftime:{from:startDate,to:endDate}});else if("PYDIO_SEARCH_RANGE_TODAY"===value)this.props.onChange({ajxp_modiftime:{from:startDay(new Date),to:endDay(new Date)}});else if("PYDIO_SEARCH_RANGE_YESTERDAY"===value){var y=new Date;y.setDate(y.getDate()-1);var e=new Date;e.setDate(e.getDate()-1),this.props.onChange({ajxp_modiftime:{from:startDay(y),to:endDay(e)}})}else if("PYDIO_SEARCH_RANGE_LAST_WEEK"===value){var s=new Date;s.setDate(s.getDate()-7);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}})}else if("PYDIO_SEARCH_RANGE_LAST_MONTH"===value){var s=new Date;s.setMonth(s.getMonth()-1);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}}),this.props.onChange({ajxp_modiftime:{from:startDate,to:endDate}})}else if("PYDIO_SEARCH_RANGE_LAST_YEAR"===value){var s=new Date;s.setFullYear(s.getFullYear()-1);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}})}}},SearchDatePanel.prototype.render=function(){var _this=this,today=new Date,_SearchDatePanel$styles=SearchDatePanel.styles,datePickerGroup=_SearchDatePanel$styles.datePickerGroup,datePicker=_SearchDatePanel$styles.datePicker,dateClose=_SearchDatePanel$styles.dateClose,_props=this.props,inputStyle=_props.inputStyle,getMessage=_props.getMessage,_state2=this.state,value=_state2.value,startDate=_state2.startDate,endDate=_state2.endDate;return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:{margin:"0 16px"}},_react2.default.createElement(DatePickerFeed,{pydio:this.props.pydio},function(items){return _react2.default.createElement(ModernSelectField,{hintText:getMessage(490),value:value,fullWidth:!0,onChange:function(e,index,value){return _this.setState({value:value})}},items.map(function(item){return _react2.default.createElement(_materialUi.MenuItem,{value:item.payload,label:item.text,primaryText:item.text})}))})),"custom"===value&&_react2.default.createElement("div",{style:_extends({},datePickerGroup,inputStyle)},_react2.default.createElement("div",{style:_extends({},datePicker,{marginRight:2})},_react2.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:startDate,onChange:function(e,date){return _this.setState({startDate:date})},hintText:getMessage(491),autoOk:!0,maxDate:endDate||today,defaultDate:startDate})),_react2.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this.setState({startDate:null})}})),_react2.default.createElement("div",{style:_extends({},datePicker,{marginLeft:2})},_react2.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:endDate,onChange:function(e,date){return _this.setState({endDate:date})},hintText:getMessage(492),autoOk:!0,minDate:startDate,maxDate:today,defaultDate:endDate})),_react2.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this.setState({endDate:null})}}))))},SearchDatePanel}(_react2.default.Component),DatePickerFeed=function(_ref){var getMessage=(_ref.pydio,_ref.getMessage);return(0,_ref.children)([{payload:"",text:""},{payload:"custom",text:getMessage("612")},{payload:"PYDIO_SEARCH_RANGE_TODAY",text:getMessage("493")},{payload:"PYDIO_SEARCH_RANGE_YESTERDAY",text:getMessage("494")},{payload:"PYDIO_SEARCH_RANGE_LAST_WEEK",text:getMessage("495")},{payload:"PYDIO_SEARCH_RANGE_LAST_MONTH",text:getMessage("496")},{payload:"PYDIO_SEARCH_RANGE_LAST_YEAR",text:getMessage("497")}])};SearchDatePanel=PydioContextConsumer(SearchDatePanel),DatePickerFeed=PydioContextConsumer(DatePickerFeed),exports.default=SearchDatePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],72:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernStyles=_Pydio$requireLib.ModernStyles,ModernTextField=_Pydio$requireLib.ModernTextField,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchFileFormatPanel=function(_Component){_inherits(SearchFileFormatPanel,_Component);function SearchFileFormatPanel(props){_classCallCheck(this,SearchFileFormatPanel),_Component.call(this,props),this.state={folder:!(!this.props.values.ajxp_mime||"ajxp_folder"!==this.props.values.ajxp_mime)||void 0,ext:this.props.values.ajxp_mime&&"ajxp_folder"!==this.props.values.ajxp_mime?this.props.values.ajxp_mime:void 0}}return SearchFileFormatPanel.prototype.componentDidUpdate=function(prevProps,prevState){if(prevState!==this.state){var _state=this.state,folder=_state.folder,ext=_state.ext;this.props.onChange({ajxp_mime:folder?"ajxp_folder":ext})}},SearchFileFormatPanel.prototype.render=function(){var _this=this,_props=this.props,inputStyle=_props.inputStyle,getMessage=_props.getMessage;return _react2.default.createElement("div",null,!this.state.folder&&_react2.default.createElement(ModernTextField,{style:inputStyle,className:"mui-text-field",hintText:getMessage(500),value:this.state.ext,onChange:function(e){return _this.setState({ext:e.target.value})}}),_react2.default.createElement("div",{style:_extends({},ModernStyles.div,{margin:"6px 16px",padding:6,paddingRight:6})},_react2.default.createElement(_materialUi.Toggle,{fullWidth:!0,name:"toggleFolder",value:"ajxp_folder",label:getMessage(502),labelStyle:{fontSize:16,color:"rgba(0,0,0,.4)"},toggled:this.state.folder,onToggle:function(e,toggled){return _this.setState({folder:toggled})}})))},SearchFileFormatPanel}(_react.Component);SearchFileFormatPanel=PydioContextConsumer(SearchFileFormatPanel),exports.default=SearchFileFormatPanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],73:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,ModernSelectField=_Pydio$requireLib.ModernSelectField,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchFileSizePanel=function(_React$Component){_inherits(SearchFileSizePanel,_React$Component);function SearchFileSizePanel(props){_classCallCheck(this,SearchFileSizePanel),_React$Component.call(this,props),this.state={from:!1,to:null,fromUnit:"k",toUnit:"k"}}return SearchFileSizePanel.prototype.multiple=function(v,u){switch(u){case"k":return 1024*v;case"M":return 1024*v*1024;case"G":return 1024*v*1024*1024;case"T":return 1024*v*1024*1024*1024;default:return v}},SearchFileSizePanel.prototype.componentWillUpdate=function(nextProps,nextState){if(nextState!==this.state){var from=nextState.from,to=nextState.to,fromUnit=nextState.fromUnit,toUnit=nextState.toUnit;this.props.onChange({ajxp_bytesize:from||to?{from:this.multiple(from,fromUnit),to:this.multiple(to,toUnit)}:null})}},SearchFileSizePanel.prototype.render=function(){var _this=this,sizeUnit=_pydio2.default.getMessages().byte_unit_symbol||"B",getMessage=this.props.getMessage,blockStyle={display:"flex",margin:"0 16px"};return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:blockStyle},_react2.default.createElement(ModernTextField,{style:{flex:2,marginRight:4},type:"number",hintText:getMessage(613),onChange:function(e,v){_this.setState({from:v||0})}}),_react2.default.createElement(ModernSelectField,{value:this.state.fromUnit,onChange:function(e,i,v){_this.setState({fromUnit:v})},style:{marginLeft:4,flex:1}},_react2.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit}))),_react2.default.createElement("div",{style:blockStyle},_react2.default.createElement(ModernTextField,{style:{flex:2,marginRight:4},type:"number",hintText:getMessage(614),onChange:function(e,v){_this.setState({to:v||109951162})}}),_react2.default.createElement(ModernSelectField,{style:{marginLeft:4,flex:1},value:this.state.toUnit,onChange:function(e,i,v){_this.setState({toUnit:v})}},_react2.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit}))))},SearchFileSizePanel}(_react2.default.Component);SearchFileSizePanel=PydioContextConsumer(SearchFileSizePanel),exports.default=SearchFileSizePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],74:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_SearchScopeSelector=require("./SearchScopeSelector"),_SearchScopeSelector2=_interopRequireDefault(_SearchScopeSelector),_lodash=require("lodash"),_materialUiStyles=(_interopRequireDefault(_lodash),require("material-ui/styles")),_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,MainSearch=function(_Component){_inherits(MainSearch,_Component),_createClass(MainSearch,null,[{key:"propTypes",get:function(){return{title:_react.PropTypes.string,mode:_react.PropTypes.string,onOpen:_react.PropTypes.func,onAdvanced:_react.PropTypes.func,onMore:_react.PropTypes.func,onClose:_react.PropTypes.func,hintText:_react.PropTypes.string,loading:_react.PropTypes.bool,scopeSelectorProps:_react.PropTypes.object,showAdvanced:_react.PropTypes.bool}}},{key:"styles",get:function(){return{main:{width:"100%",height:36,transition:"all .25s",display:"flex",backgroundColor:"transparent",border:"1px solid rgba(255,255,255,.1)",borderRadius:2},input:{padding:"0 4px",border:0,color:"rgba(255, 255, 255, 0.64)"},hint:{transition:"all .25s",width:"100%",padding:"0 4px",bottom:0,lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgba(255, 255, 255, 0.64)"},magnifier:{padding:"7px 0 0 8px",fontSize:18,color:"rgba(255, 255, 255, 0.64)"},underline:{display:"none"}}}}]);function MainSearch(props){_classCallCheck(this,MainSearch),_Component.call(this,props),this.state={mode:props.mode,value:props.value||""}}return MainSearch.prototype.componentWillReceiveProps=function(nextProps){this.setState({mode:nextProps.mode}),nextProps.value&&!this.state.value&&this.setState({value:nextProps.value})},MainSearch.prototype.componentDidUpdate=function(){"closed"!==this.state.mode&&this.input&&this.input.focus()},MainSearch.prototype.onChange=function(value){var _this=this;this.setState({value:value},function(){_this.props.onChange({basename:value})})},MainSearch.prototype.render=function(){var _this2=this,_props=this.props,mode=(_props.title,_props.mode),onOpen=_props.onOpen,onAdvanced=_props.onAdvanced,onMore=_props.onMore,onClose=_props.onClose,hintText=_props.hintText,loading=_props.loading,scopeSelectorProps=_props.scopeSelectorProps,showAdvanced=_props.showAdvanced,getMessage=_props.getMessage,_MainSearch$styles=MainSearch.styles,main=_MainSearch$styles.main,input=_MainSearch$styles.input,hint=_MainSearch$styles.hint,magnifier=_MainSearch$styles.magnifier,_props2=this.props,mainStyle=_props2.mainStyle,inputStyle=_props2.inputStyle,hintStyle=_props2.hintStyle,magnifierStyle=_props2.magnifierStyle;return _react2.default.createElement("div",{className:"search-input"},_react2.default.createElement("div",{className:"panel-header",style:{display:"flex"}},scopeSelectorProps&&_react2.default.createElement("span",null,_react2.default.createElement(_SearchScopeSelector2.default,_extends({style:{marginTop:-16,marginLeft:-26},labelStyle:{color:"white"}},scopeSelectorProps))),_react2.default.createElement("span",{style:{flex:1}}),showAdvanced&&_react2.default.createElement(_materialUi.FlatButton,{style:{textTransform:"none",color:"white",fontSize:15,marginTop:-5,padding:"0 16px"},onTouchTap:"advanced"===mode?onMore:onAdvanced},"advanced"===mode?"- "+getMessage(606):"+ "+getMessage(605)),"advanced"===mode&&loading&&_react2.default.createElement("div",{style:{marginRight:10}},_react2.default.createElement(_materialUi.CircularProgress,{size:20,thickness:3})),_react2.default.createElement("span",{className:"panel-header-close mdi mdi-close",onClick:this.props.onClose})),"advanced"!==mode&&_react2.default.createElement("div",{style:_extends({},main,mainStyle)},_react2.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-magnify",style:_extends({},magnifier,magnifierStyle)}),_react2.default.createElement(_materialUi.TextField,{ref:function(input){return _this2.input=input},style:{flex:1,height:main.height},inputStyle:_extends({},input,inputStyle),hintStyle:_extends({},hint,hintStyle),fullWidth:!0,underlineShow:!1,onFocus:onOpen,onBlur:"small"===mode?onClose:null,hintText:hintText,value:this.state.value||"",onChange:function(e,v){return _this2.onChange(v)},onKeyPress:function(e){return"Enter"===e.key?_this2.onChange(e.target.value):null}}),loading&&_react2.default.createElement("div",{style:{marginTop:9,marginRight:9}},_react2.default.createElement(_materialUi.CircularProgress,{size:20,thickness:3}))))},MainSearch}(_react.Component);exports.default=MainSearch=PydioContextConsumer(_materialUiStyles.muiThemeable()(MainSearch)),exports.default=MainSearch,module.exports=exports.default},{"./SearchScopeSelector":76,lodash:3,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],75:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_viewsFilePreview=require("../../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_AdvancedSearch=require("./AdvancedSearch"),_AdvancedSearch2=_interopRequireDefault(_AdvancedSearch),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioUtilLang=require("pydio/util/lang"),_pydioUtilLang2=_interopRequireDefault(_pydioUtilLang),_pydioHttpSearchApi=require("pydio/http/search-api"),_pydioHttpSearchApi2=_interopRequireDefault(_pydioHttpSearchApi),_SearchScopeSelector=require("./SearchScopeSelector"),_SearchScopeSelector2=_interopRequireDefault(_SearchScopeSelector),_MainSearch=require("./MainSearch"),_MainSearch2=_interopRequireDefault(_MainSearch),_materialUi=require("material-ui"),_lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_Pydio$requireLib=_pydio2.default.requireLib("components"),EmptyStateView=_Pydio$requireLib.EmptyStateView,_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,SearchForm=function(_Component){_inherits(SearchForm,_Component);function SearchForm(props){var _this=this;_classCallCheck(this,SearchForm),_Component.call(this,props),this._basicDataModel=new PydioDataModel(!0);var rNodeProvider=new EmptyNodeProvider;this._basicDataModel.setAjxpNodeProvider(rNodeProvider);var rootNode=new AjxpNode("/",!1,"","",rNodeProvider);this._basicDataModel.setRootNode(rootNode),this.state={values:props.advancedPanel&&props.values?props.values:{},display:props.advancedPanel?"advanced":"closed",dataModel:this._basicDataModel,empty:!0,loading:!1,searchScope:props.uniqueSearchScope||props.searchScope||"folder"},this.setMode=_lodash2.default.debounce(this.setMode,250),this.update=_lodash2.default.debounce(this.update,500),this.submit=_lodash2.default.debounce(this.submit,500),this.props.pydio.observe("repository_list_refreshed",function(){props.advancedPanel||_this.setState({values:{},display:"closed",dataModel:_this._basicDataModel,empty:!0,loading:!1})}),props.advancedPanel&&props.values&&Object.keys(props.values).length&&this.submit()}return SearchForm.prototype.componentDidUpdate=function(prevProps,prevState){var _this2=this;this.refs.results&&this.refs.results.refs.list&&(this.refs.results.refs.list.updateInfiniteContainerHeight(),FuncUtils.bufferCallback("search_results_resize_list",550,function(){try{_this2.refs.results.refs.list.updateInfiniteContainerHeight()}catch(e){}}))},SearchForm.prototype.setMode=function(mode){if("small"!==mode||"closed"===this.state.display){if("small"===mode&&"closed"===this.state.display){var _state$values=this.state.values,otherValues=(_state$values.basename,_objectWithoutProperties(_state$values,["basename"]));otherValues&&Object.keys(otherValues).length&&(mode="advanced")}this.setState({display:mode})}},SearchForm.prototype.update=function(newValues){var _props=this.props,onUpdateState=_props.onUpdateState,searchScope=_props.searchScope,values=_extends({},this.state.values,newValues);Object.keys(values).forEach(function(key){return!values[key]&&delete values[key]}),this.setState({values:values},this.submit),onUpdateState&&onUpdateState({searchScope:searchScope,values:values})},SearchForm.prototype.changeSearchScope=function(scope){var _this3=this,onUpdateState=this.props.onUpdateState,_state=this.state,display=_state.display,values=_state.values;"small"===display&&setTimeout(function(){return _this3.setMode("small")},250),this.setState({searchScope:scope},this.submit),onUpdateState&&onUpdateState({searchScope:scope,values:values})},SearchForm.prototype.submit=function(){var _this4=this,_state2=this.state,display=_state2.display,values=_state2.values,searchScope=_state2.searchScope,dataModel=_state2.dataModel,crossWorkspace=this.props.crossWorkspace,limit=crossWorkspace||"all"===searchScope?6:"small"===display?9:100,rootNode=dataModel.getRootNode();rootNode.setChildren([]),rootNode.setLoaded(!1);var keys=Object.keys(values);if(0===keys.length||1===keys.length&&"basename"===keys[0]&&!values.basename)return void this.setState({loading:!1,empty:!0});this.setState({loading:!0,empty:!1}),rootNode.setLoading(!0),new _pydioHttpSearchApi2.default(this.props.pydio).search(values,crossWorkspace?"all":searchScope,limit).then(function(results){rootNode.setChildren(results),rootNode.setLoading(!1),rootNode.setLoaded(!0),_this4.setState({loading:!1})}).catch(function(){rootNode.setLoading(!1),_this4.setState({loading:!1})})},SearchForm.prototype.render=function(){var _this5=this,_props2=this.props,crossWorkspace=_props2.crossWorkspace,pydio=_props2.pydio,getMessage=_props2.getMessage,advancedPanel=_props2.advancedPanel,onOpenAdvanced=_props2.onOpenAdvanced,onCloseAdvanced=_props2.onCloseAdvanced,id=_props2.id,xtraSmallScreen=_props2.xtraSmallScreen,_state3=this.state,searchScope=_state3.searchScope,display=_state3.display,loading=_state3.loading,dataModel=_state3.dataModel,empty=_state3.empty,values=_state3.values,renderSecondLine=null,renderIcon=null,elementHeight=49;"small"!==display&&"closed"!==display?(elementHeight=PydioComponents.SimpleList.HEIGHT_TWO_LINES+10,renderSecondLine=function(node){var path=node.getPath();if("folder"===searchScope){var crtFolder=pydio.getContextHolder().getContextNode().getPath();0===path.indexOf(crtFolder)&&(path="./"+_pydioUtilLang2.default.trimLeft(path.substr(crtFolder.length),"/"))}return _react2.default.createElement("div",null,path)},renderIcon=function(node){var entryProps=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _react2.default.createElement(_viewsFilePreview2.default,{loadThumbnail:!entryProps.parentIsScrolling,node:node})}):renderIcon=function(node){arguments.length<=1||void 0===arguments[1]||arguments[1];return _react2.default.createElement(_viewsFilePreview2.default,{loadThumbnail:!1,richPreview:!1,node:node,style:{width:30,height:30,borderRadius:"50%",margin:"9px 6px"},mimeFontStyle:{fontSize:16,display:"block",padding:"4px 7px"}})};var nodeClicked=function(node){if(pydio.goTo(node),advancedPanel){var targetRepo=node.getMetadata().get("repository_id");targetRepo&&targetRepo!==pydio.user.activeRepository&&onCloseAdvanced()}else _this5.setMode("closed")},style=_extends({},this.props.style,{backgroundColor:"transparent"}),searchResultsStyle={};"closed"===display||advancedPanel||(searchResultsStyle={backgroundColor:"white",position:"absolute",right:0,display:"block",width:256}),xtraSmallScreen&&(searchResultsStyle.width="100%",searchResultsStyle.flex=2);var results=_react2.default.createElement(_materialUi.Paper,{className:"search-results",zDepth:advancedPanel?0:2,style:searchResultsStyle,rounded:!advancedPanel},empty&&_react2.default.createElement(EmptyStateView,{iconClassName:"",primaryTextId:611,style:{minHeight:180,backgroundColor:"transparent",padding:"0 20px"}}),_react2.default.createElement(PydioComponents.NodeListCustomProvider,{ref:"results",className:"small"!==display?"files-list":null,elementHeight:elementHeight,entryRenderIcon:renderIcon,entryRenderActions:function(){return null},entryRenderSecondLine:renderSecondLine,presetDataModel:dataModel,heightAutoWithMax:advancedPanel?0:500,openCollection:nodeClicked,nodeClicked:nodeClicked,defaultGroupBy:crossWorkspace||"all"===searchScope?"repository_id":null,groupByLabel:crossWorkspace||"all"===searchScope?"repository_display":null,emptyStateProps:{iconClassName:"",primaryTextId:478,style:{minHeight:"small"===display?180:advancedPanel?240:412,backgroundColor:"transparent",padding:"0 20px"},secondaryTextId:"ws"===searchScope?620:"folder"===searchScope?619:null,actionLabelId:"ws"===searchScope?610:"folder"===searchScope?609:null,actionCallback:"all"!==searchScope?function(){_this5.changeSearchScope("ws"===searchScope?"all":"ws")}:null,actionStyle:{marginTop:10}}}),"small"===display&&_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:4,paddingTop:0,backgroundColor:"#eeeeee",width:"100%"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react2.default.createElement(_SearchScopeSelector2.default,{style:{flex:1},labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)},onTouchTap:function(){return _this5.setMode("small")}}),_react2.default.createElement(_materialUi.FlatButton,{style:{marginTop:4,minWidth:0},labelStyle:{padding:"0 8px"},primary:!0,label:getMessage(456),onTouchTap:function(){onOpenAdvanced()}})));if(advancedPanel)return _react2.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 8px 8px",height:44,width:"100%",backgroundColor:"#eee",borderBottom:"1px solid #e0e0e0"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react2.default.createElement("div",{style:{flex:1,height:48}
},_react2.default.createElement(_SearchScopeSelector2.default,{labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)}})),_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-close",style:{minWidth:0,marginTop:4},tooltip:getMessage(86),onTouchTap:function(){onCloseAdvanced()}})),_react2.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:xtraSmallScreen?"column":"row"}},_react2.default.createElement(_AdvancedSearch2.default,_extends({},this.props,{values:values,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},rootStyle:xtraSmallScreen?{flex:1,width:"100%",borderRight:0}:{}})),results));var formStyles=this.props.formStyles;return _react2.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react2.default.createElement(_MainSearch2.default,_extends({mode:display,value:values.basename,onOpen:function(){return _this5.setMode("small")},onClose:function(){return _this5.setMode("closed")},showAdvanced:!crossWorkspace,onAdvanced:onOpenAdvanced,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},hintText:getMessage(crossWorkspace||"all"===searchScope?607:87)+"...",loading:loading,scopeSelectorProps:crossWorkspace||this.props.uniqueSearchScope?null:{value:searchScope,onChange:this.changeSearchScope.bind(this)}},formStyles)),results)},SearchForm}(_react.Component);SearchForm=PydioContextConsumer(SearchForm),exports.default=SearchForm,module.exports=exports.default},{"../../views/FilePreview":84,"./AdvancedSearch":70,"./MainSearch":74,"./SearchScopeSelector":76,lodash:3,"material-ui":"material-ui",pydio:"pydio","pydio/http/search-api":"pydio/http/search-api","pydio/util/lang":"pydio/util/lang",react:"react"}],76:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,SearchScopeSelector=function(_Component){_inherits(SearchScopeSelector,_Component);function SearchScopeSelector(){_classCallCheck(this,SearchScopeSelector),_Component.apply(this,arguments)}return SearchScopeSelector.prototype.render=function(){var _this=this,getMessage=this.props.getMessage;return _react2.default.createElement(_materialUi.DropDownMenu,{value:this.props.value,onChange:function(e,i,v){_this.props.onChange(v)},onTouchTap:this.props.onTouchTap,autoWidth:!0,style:this.props.style,underlineStyle:{display:"none"},labelStyle:this.props.labelStyle},_react2.default.createElement(_materialUi.MenuItem,{value:"folder",primaryText:getMessage(608)}),_react2.default.createElement(_materialUi.MenuItem,{value:"ws",primaryText:getMessage(609)}),_react2.default.createElement(_materialUi.MenuItem,{value:"all",primaryText:getMessage(610)}))},_createClass(SearchScopeSelector,null,[{key:"propTypes",get:function(){return{value:_react.PropTypes.string,onChange:_react.PropTypes.func.isRequired,onTouchTap:_react.PropTypes.func.isRequired,style:_react.PropTypes.object,labelStyle:_react.PropTypes.object}}}]),SearchScopeSelector}(_react.Component);exports.default=SearchScopeSelector=PydioContextConsumer(SearchScopeSelector),exports.default=SearchScopeSelector,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],77:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _componentsSearchForm=require("./components/SearchForm");exports.SearchForm=_interopRequire(_componentsSearchForm)},{"./components/SearchForm":75}],78:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_pydioModelIdmObjectHelper=require("pydio/model/idm-object-helper"),_pydioModelIdmObjectHelper2=_interopRequireDefault(_pydioModelIdmObjectHelper),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_Pydio$requireLib=_pydio2.default.requireLib("components"),AddressBook=_Pydio$requireLib.AddressBook,UserAvatar=_Pydio$requireLib.UserAvatar,CellActionsRenderer=_Pydio$requireLib.CellActionsRenderer,AddressBookPanel=function(_React$Component){_inherits(AddressBookPanel,_React$Component);function AddressBookPanel(props){var _this=this;_classCallCheck(this,AddressBookPanel),_React$Component.call(this,props),this.state={noCell:!1,cellModel:null},this._observer=function(){_this.forceUpdate()}}return AddressBookPanel.prototype.componentDidMount=function(){this.loadCell()},AddressBookPanel.prototype.componentWillUnmount=function(){this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer)},AddressBookPanel.prototype.loadCell=function(){var _this2=this,pydio=this.props.pydio;pydio.user.getActiveRepositoryAsCell().then(function(cell){cell?(cell.observe("update",_this2._observer),_this2.setState({cellModel:cell,noCell:!1,cellId:pydio.user.activeRepository})):_this2.setState({noCell:!0,cellId:pydio.user.activeRepository})})},AddressBookPanel.prototype.componentWillReceiveProps=function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&(this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer),this.loadCell())},AddressBookPanel.prototype.renderListItem=function(acl){var pydio=this.props.pydio,cellModel=this.state.cellModel,label=_pydioModelIdmObjectHelper2.default.extractLabel(pydio,acl),userAvatar=void 0,userType=void 0,userId=void 0;acl.User&&acl.User.Attributes&&acl.User.Attributes.avatar&&(userAvatar=acl.User.Attributes.avatar),acl.User?(userType="user",userId=acl.User.Login):acl.Group?(userType="group",userId=acl.Group.Uuid):(userId=acl.Role.Uuid,userType="team");var avatar=_react2.default.createElement(UserAvatar,{avatarSize:36,pydio:pydio,userType:userType,userId:userId,userLabel:label,avatar:userAvatar,avatarOnly:!0,useDefaultAvatar:!0}),rightMenu=void 0,menuItems=new CellActionsRenderer(pydio,cellModel,acl).renderItems();return menuItems.length&&(rightMenu=_react2.default.createElement(_materialUi.IconMenu,{iconButtonElement:_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-dots-vertical",iconStyle:{color:"rgba(0,0,0,.33)"}}),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},menuItems)),_react2.default.createElement(_materialUi.ListItem,{primaryText:label,leftAvatar:avatar,rightIconButton:rightMenu})},AddressBookPanel.prototype.render=function(){var _this3=this,_props=this.props,pydio=_props.pydio,style=_props.style,zDepth=_props.zDepth,_state=this.state,cellModel=_state.cellModel,noCell=_state.noCell,cellInfo=void 0;!noCell&&cellModel&&function(){var acls=cellModel.getAcls(),items=[];Object.keys(acls).map(function(roleId){items.push(_this3.renderListItem(acls[roleId])),items.push(_react2.default.createElement(_materialUi.Divider,{inset:!0}))}),items.pop(),cellInfo=_react2.default.createElement("div",{style:{borderBottom:"1px solid #e0e0e0"}},_react2.default.createElement(_materialUi.List,null,_react2.default.createElement(_materialUi.Subheader,null,pydio.MessageHash[639]),items))}();var columnStyle=_extends({position:"absolute",width:270,top:100,bottom:0,backgroundColor:"#fafafa",transition:_pydioUtilDom2.default.getBeziersTransition()},style);return _react2.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,style:_extends({},columnStyle,{display:"flex",flexDirection:"column"})},cellInfo,pydio.Controller.getActionByName("open_address_book")&&_react2.default.createElement(AddressBook,{mode:"selector",bookColumn:!0,pydio:pydio,disableSearch:!1,style:{height:null,flex:1},actionsForCell:!(!noCell&&cellModel)||cellModel}))},AddressBookPanel}(_react2.default.Component);exports.default=AddressBookPanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio","pydio/model/idm-object-helper":"pydio/model/idm-object-helper","pydio/util/dom":"pydio/util/dom",react:"react"}],79:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},React=require("react"),PydioNode=require("pydio/model/node"),_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,LangUtils=require("pydio/util/lang"),_require2=require("react-textfit"),Textfit=_require2.Textfit,Breadcrumb=React.createClass({displayName:"Breadcrumb",getInitialState:function(){return{node:null,minFit:!1}},componentDidMount:function(){var n=this.props.pydio.getContextHolder().getContextNode();n&&this.setState({node:n}),this._observer=function(event){this.setState({node:event.memo,minFit:!1})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._observer)},componentWillUnmount:function(){this.props.pydio.getContextHolder().stopObserving("context_changed",this._observer)},goTo:function(target,event){var targetNode=new PydioNode(target);this.props.pydio.getContextHolder().requireContextChange(targetNode)},toggleMinFit:function(font){var minFit=this.state.minFit,newMinFit=12===font;newMinFit!==minFit&&this.setState({minFit:newMinFit})},render:function(){var _this=this,_props=this.props,pydio=_props.pydio,muiTheme=_props.muiTheme,rootStyle=_props.rootStyle,_state=this.state,node=_state.node,minFit=_state.minFit,styles={main:{fontSize:21,height:36,lineHeight:"44px",padding:"0 20px",color:muiTheme.appBar.textColor,width:"100%"}};if(!pydio.user)return React.createElement("span",{className:"react_breadcrumb"});var repoLabel=" ";pydio.user&&pydio.user.activeRepository&&pydio.user.repositories.has(pydio.user.activeRepository)&&(repoLabel=pydio.user.repositories.get(pydio.user.activeRepository).getLabel());var segments=[],path=node?LangUtils.trimLeft(node.getPath(),"/"):"",label=node?node.getLabel():"",rebuilt="",mainStyle=rootStyle||{};mainStyle=_extends({},styles.main,mainStyle),minFit&&(mainStyle=_extends({},mainStyle,{overflow:"hidden"}));var parts=path.split("/");return parts.forEach(function(seg,i){seg&&(rebuilt+="/"+seg,segments.push(React.createElement("span",{key:"bread_sep_"+i,className:"separator"}," / ")),segments.push(React.createElement("span",{key:"bread_"+i,className:"segment",onClick:this.goTo.bind(this,rebuilt)},i===parts.length-1?label:seg)))}.bind(this)),React.createElement(Textfit,{mode:"single",perfectFit:!1,min:12,max:22,className:"react_breadcrumb",style:mainStyle,onReady:function(f){_this.toggleMinFit(f)}},this.props.startWithSeparator&&React.createElement("span",{className:"separator"}," / "),React.createElement("span",{className:"segment first",onClick:this.goTo.bind(this,"/")},repoLabel),segments)}});exports.default=Breadcrumb=muiThemeable()(Breadcrumb),exports.default=Breadcrumb,module.exports=exports.default},{"material-ui/styles":"material-ui/styles","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react","react-textfit":"react-textfit"}],80:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("components"),Chat=_Pydio$requireLib.Chat,CellChat=function(_React$Component){_inherits(CellChat,_React$Component);function CellChat(props){_classCallCheck(this,CellChat),_React$Component.call(this,props),this.state={cellModel:null,cellId:""}}return CellChat.prototype.loadRoomData=function(){var _this=this,user=this.props.pydio.user;user.getActiveRepositoryAsCell().then(function(c){_this.setState({cellModel:c,cellId:c?user.activeRepository:""})})},CellChat.prototype.componentWillMount=function(){this.loadRoomData()},CellChat.prototype.componentWillReceiveProps=function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&this.loadRoomData()},CellChat.prototype.render=function(){var _props=this.props,pydio=_props.pydio,style=_props.style,zDepth=_props.zDepth,onRequestClose=_props.onRequestClose,_state=this.state,cellModel=_state.cellModel,cellId=_state.cellId;return _react2.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,rounded:!1,style:_extends({display:"flex",flexDirection:"column"},style)},_react2.default.createElement(Chat,{pydio:pydio,roomType:"WORKSPACE",roomObjectId:cellId,style:{flex:1,display:"flex",flexDirection:"column"},msgContainerStyle:{maxHeight:null,flex:1,paddingTop:"10px !important",backgroundColor:"#FAFAFA"},fieldHint:pydio.MessageHash[636],pushMessagesToBottom:!0,emptyStateProps:{iconClassName:"mdi mdi-comment-account-outline",primaryTextId:pydio.MessageHash[637],style:{padding:"0 10px",backgroundColor:"transparent"}},computePresenceFromACLs:cellModel?cellModel.getAcls():{},onRequestClose:onRequestClose}))},CellChat}(_react2.default.Component);exports.default=CellChat,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],81:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydioUtilDom=require("pydio/util/dom"),CellsMessageToolbar=(_interopRequireDefault(_pydioUtilDom),function(_React$Component){_inherits(CellsMessageToolbar,_React$Component);function CellsMessageToolbar(props){_classCallCheck(this,CellsMessageToolbar),_React$Component.call(this,props);var pydio=props.pydio,node=pydio.getContextHolder().getContextNode();node&&node.getMetadata().has("virtual_root")?this.state={display:!0}:this.state={display:!1}}return CellsMessageToolbar.prototype.componentDidMount=function(){var _this=this,pydio=this.props.pydio;this._observer=function(){var node=pydio.getContextHolder().getContextNode();node&&node.getMetadata().has("virtual_root")?_this.setState({display:!0}):_this.setState({display:!1})},pydio.observe("context_changed",this._observer)},CellsMessageToolbar.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("context_changed",this._observer)},CellsMessageToolbar.prototype.render=function(){var display=this.state.display,pydio=this.props.pydio;if(!display)return null;var s={padding:16,color:"#9E9E9E",borderBottom:"1px solid #F5F5F5"};return _react2.default.createElement("div",{style:s},pydio.MessageHash[638])},CellsMessageToolbar}(_react2.default.Component));exports.default=CellsMessageToolbar,module.exports=exports.default},{"pydio/util/dom":"pydio/util/dom",react:"react"}],82:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_OpenNodesModel=require("../OpenNodesModel"),_OpenNodesModel2=_interopRequireDefault(_OpenNodesModel),_reactRedux=require("react-redux"),_editor=require("../editor"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,EditionPanel=function(_React$Component){_inherits(EditionPanel,_React$Component);function EditionPanel(props){_classCallCheck(this,EditionPanel),_React$Component.call(this,props)}return EditionPanel.prototype.componentDidMount=function(){var _this=this;this._updateObserver=function(nodes){return _this._handleUpdate(nodes)},this._nodesModelObserver=function(node){return _this._handleNodePushed(node)},this._nodesRemoveObserver=function(index){return _this._handleNodeRemoved(index)},this._titlesObserver=function(){return _this.forceUpdate()},_OpenNodesModel2.default.getInstance().observe("update",this._updateObserver),_OpenNodesModel2.default.getInstance().observe("nodePushed",this._nodesModelObserver),_OpenNodesModel2.default.getInstance().observe("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel2.default.getInstance().observe("titlesUpdated",this._titlesObserver)},EditionPanel.prototype.componentWillUnmount=function(){(0,this.props.tabDeleteAll)(),_OpenNodesModel2.default.getInstance().stopObserving("update",this._updateObserver),_OpenNodesModel2.default.getInstance().stopObserving("nodePushed",this._nodesModelObserver),_OpenNodesModel2.default.getInstance().stopObserving("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel2.default.getInstance().stopObserving("titlesUpdated",this._titlesObserver)},EditionPanel.prototype._handleUpdate=function(nodes){var tabDeleteAll=this.props.tabDeleteAll;0===nodes.length&&tabDeleteAll()},EditionPanel.prototype._handleNodePushed=function(object){var _props=this.props,pydio=_props.pydio,tabCreate=_props.tabCreate,editorModify=_props.editorModify,editorSetActiveTab=_props.editorSetActiveTab,_object$node=object.node,node=void 0===_object$node?{}:_object$node,editorData=object.editorData;pydio.Registry.loadEditorResources(editorData.resourcesManager,function(){var tabId=tabCreate({id:node.getLabel(),title:node.getLabel(),url:node.getPath(),metadata:node.getMetadata(),readonly:"true"===node.getMetadata().get("node_readonly"),node:node,editorData:editorData,icon:PydioWorkspaces.FilePreview}).id;editorSetActiveTab(tabId),editorModify({isMinimised:!1})})},EditionPanel.prototype._handleNodeRemoved=function(index){},EditionPanel.prototype.render=function(){return React.createElement(_editor.Editor,null)},EditionPanel}(React.Component);EditionPanel.PropTypes={pydio:React.PropTypes.instanceOf(_pydio2.default)},exports.default=_reactRedux.connect(null,EditorActions)(EditionPanel),module.exports=exports.default},{"../OpenNodesModel":43,"../editor":63,pydio:"pydio","react-redux":"react-redux"}],83:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_MessagesProviderMixin=require("../MessagesProviderMixin"),_MessagesProviderMixin2=_interopRequireDefault(_MessagesProviderMixin),_Breadcrumb=require("./Breadcrumb"),_Breadcrumb2=_interopRequireDefault(_Breadcrumb),_search=require("../search"),_MainFilesList=require("./MainFilesList"),_MainFilesList2=_interopRequireDefault(_MainFilesList),_EditionPanel=require("./EditionPanel"),_EditionPanel2=_interopRequireDefault(_EditionPanel),_detailpanesInfoPanel=require("../detailpanes/InfoPanel"),_detailpanesInfoPanel2=_interopRequireDefault(_detailpanesInfoPanel),_WelcomeTour=require("./WelcomeTour"),_WelcomeTour2=_interopRequireDefault(_WelcomeTour),_CellChat=require("./CellChat"),_CellChat2=_interopRequireDefault(_CellChat),_materialUi=require("material-ui"),_AddressBookPanel=require("./AddressBookPanel"),_AddressBookPanel2=_interopRequireDefault(_AddressBookPanel),_MasterLayout=require("./MasterLayout"),_MasterLayout2=_interopRequireDefault(_MasterLayout),_materialUiStyles=require("material-ui/styles"),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_Pydio$requireLib=_pydio2.default.requireLib("components"),ButtonMenu=_Pydio$requireLib.ButtonMenu,Toolbar=_Pydio$requireLib.Toolbar,ListPaginator=_Pydio$requireLib.ListPaginator,FSTemplate=_react2.default.createClass({displayName:"FSTemplate",mixins:[_MessagesProviderMixin2.default],propTypes:{pydio:_react2.default.PropTypes.instanceOf(_pydio2.default)},statics:{INFO_PANEL_WIDTH:270},componentDidMount:function(){var _this=this,pydio=this.props.pydio;this._themeObserver=function(user){if(user){var uTheme=void 0;uTheme=user.getPreference("theme")&&"default"!==user.getPreference("theme")?user.getPreference("theme"):pydio.getPluginConfigs("gui.ajax").get("GUI_THEME"),_this.setState({themeLight:"light"===uTheme})}},pydio.observe("user_logged",this._themeObserver),this._resizer=function(){var w=_pydioUtilDom2.default.getViewportWidth();_this.setState({smallScreen:w<758,xtraSmallScreen:w<=420})},_pydioUtilDom2.default.observeWindowResize(this._resizer)},componentWillUnmount:function(){this.props.pydio.stopObserving("user_logged",this._themeObserver),_pydioUtilDom2.default.stopObservingWindowResize(this._resizer)},openRightPanel:function(name){var _this2=this,rightColumnState=this.state.rightColumnState;if(name===rightColumnState)return void this.closeRightPanel();this.setState({rightColumnState:name},function(){var infoPanelOpen=_this2.state.infoPanelOpen;"info-panel"!==name&&(infoPanelOpen=!0),"advanced-search"!==name&&(localStorage.setItem("pydio.layout.rightColumnState",name),localStorage.setItem("pydio.layout.infoPanelToggle","open"),localStorage.setItem("pydio.layout.infoPanelOpen",infoPanelOpen?"open":"closed")),_this2.setState({infoPanelToggle:!0,infoPanelOpen:infoPanelOpen},function(){return _this2.resizeAfterTransition()})})},closeRightPanel:function(){var _this3=this;if("advanced-search"===this.state.rightColumnState){var rState=localStorage.getItem("pydio.layout.rightColumnState");void 0!==rState&&rState&&"advanced-search"!==rState?this.openRightPanel(rState):this.setState({infoPanelToggle:!1},function(){_this3.resizeAfterTransition()})}else this.setState({infoPanelToggle:!1},function(){_this3.resizeAfterTransition()}),localStorage.setItem("pydio.layout.rightColumnState",""),localStorage.setItem("pydio.layout.infoPanelToggle","closed")},getInitialState:function(){var rState="info-panel";void 0!==localStorage.getItem("pydio.layout.rightColumnState")&&localStorage.getItem("pydio.layout.rightColumnState")&&(rState=localStorage.getItem("pydio.layout.rightColumnState"));var closedToggle="closed"===localStorage.getItem("pydio.layout.infoPanelToggle"),closedInfo="closed"===localStorage.getItem("pydio.layout.infoPanelOpen"),pydio=this.props.pydio,themeLight=!1;pydio.user&&pydio.user.getPreference("theme")&&"default"!==pydio.user.getPreference("theme")?themeLight="light"===pydio.user.getPreference("theme"):"light"===pydio.getPluginConfigs("gui.ajax").get("GUI_THEME")&&(themeLight=!0);var w=_pydioUtilDom2.default.getViewportWidth();return{infoPanelOpen:!closedInfo,infoPanelToggle:!closedToggle,drawerOpen:!1,rightColumnState:rState,searchFormState:{},themeLight:themeLight,smallScreen:w<=758,xtraSmallScreen:w<=420}},resizeAfterTransition:function(){var _this4=this;setTimeout(function(){_this4.refs.list&&_this4.refs.list.resize(),_this4.state.infoPanelToggle||_this4.setState({rightColumnState:null})},300)},infoPanelContentChange:function(numberOfCards){var _this5=this;this.setState({infoPanelOpen:numberOfCards>0},function(){return _this5.resizeAfterTransition()})},openDrawer:function(event){event.stopPropagation(),this.setState({drawerOpen:!0})},render:function(){var _this6=this,muiTheme=this.props.muiTheme,mobile=this.props.pydio.UI.MOBILE_EXTENSIONS,Color=MaterialUI.Color,appBarTextColor=Color(muiTheme.appBar.textColor),appBarBackColor=Color(muiTheme.appBar.color),colorHue=Color(muiTheme.palette.primary1Color).hsl().array()[0],superLightBack=new Color({h:colorHue,s:35,l:98}),_state=this.state,themeLight=_state.themeLight,smallScreen=_state.smallScreen,xtraSmallScreen=_state.xtraSmallScreen;themeLight&&(appBarBackColor=superLightBack,appBarTextColor=Color(muiTheme.appBar.color));var headerHeight=72,buttonsHeight=23,buttonsFont=11,crtWidth=_pydioUtilDom2.default.getViewportWidth(),styles={appBarStyle:{zIndex:1,backgroundColor:appBarBackColor.toString(),height:headerHeight,display:"flex"},buttonsStyle:{width:40,height:40,padding:10,borderRadius:"50%",color:appBarTextColor.fade(.03).toString(),transition:_pydioUtilDom2.default.getBeziersTransition()},buttonsIconStyle:{fontSize:18,color:appBarTextColor.fade(.03).toString()},activeButtonStyle:{backgroundColor:appBarTextColor.fade(.9).toString()},activeButtonIconStyle:{color:appBarTextColor.fade(.03).toString()},raisedButtonStyle:{height:buttonsHeight,minWidth:0},raisedButtonLabelStyle:{height:buttonsHeight,paddingLeft:12,paddingRight:8,lineHeight:buttonsHeight+"px",fontSize:buttonsFont},flatButtonStyle:{height:buttonsHeight,lineHeight:buttonsHeight+"px",minWidth:0},flatButtonLabelStyle:{height:buttonsHeight,fontSize:buttonsFont,paddingLeft:8,paddingRight:8,color:appBarTextColor.fade(.03).toString()},infoPanelStyle:{backgroundColor:"transparent",top:headerHeight},otherPanelsStyle:{top:headerHeight,borderLeft:0,margin:10,width:290},searchFormPanelStyle:{top:headerHeight,borderLeft:0,margin:10,width:smallScreen?xtraSmallScreen?crtWidth:420:520,right:xtraSmallScreen?-10:null,overflowY:"hidden",display:"flex",flexDirection:"column",backgroundColor:"white"},breadcrumbStyle:{},searchForm:{}};styles.activeButtonStyle=_extends({},styles.buttonsStyle,styles.activeButtonStyle),styles.activeButtonIconStyle=_extends({},styles.buttonsIconStyle,styles.activeButtonIconStyle);var _state2=this.state,infoPanelOpen=_state2.infoPanelOpen,drawerOpen=_state2.drawerOpen,infoPanelToggle=_state2.infoPanelToggle,filesListDisplayMode=_state2.filesListDisplayMode,rightColumnState=this.state.rightColumnState,mainToolbars=["change_main","info_panel","info_panel_share"],mainToolbarsOthers=["change","other"],pydio=this.props.pydio,guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):[],wTourEnabled=pydio.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR"),showChatTab=!pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS"),showAddressBook=!pydio.getPluginConfigs("action.user").get("DASH_DISABLE_ADDRESS_BOOK")&&!smallScreen,showInfoPanel=!xtraSmallScreen;if(showChatTab){var repo=pydio.user.getRepositoriesList().get(pydio.user.activeRepository);repo&&!repo.getOwner()&&(showChatTab=!1)}showChatTab||"chat"!==rightColumnState||(rightColumnState="info-panel"),showInfoPanel||"info-panel"!==rightColumnState||(rightColumnState="");var classes=["vertical_layout","vertical_fit","react-fs-template"],thumbDisplay=filesListDisplayMode&&0===filesListDisplayMode.indexOf("grid-");(infoPanelOpen||thumbDisplay)&&infoPanelToggle&&(classes.push("info-panel-open"),"info-panel"!==rightColumnState&&classes.push("info-panel-open-lg"));var _props=this.props,style=_props.style,props=_objectWithoutProperties(_props,["style"]),tutorialComponent=void 0;wTourEnabled&&!guiPrefs["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]&&(tutorialComponent=_react2.default.createElement(_WelcomeTour2.default,{ref:"welcome",pydio:this.props.pydio}));var uWidgetColor="rgba(255,255,255,.93)",uWidgetBack=null;if(themeLight){var _colorHue=Color(muiTheme.palette.primary1Color).hsl().array()[0];uWidgetColor=Color(muiTheme.palette.primary1Color).darken(.1).alpha(.87).toString(),uWidgetBack=new Color({h:_colorHue,s:35,l:98}).toString()}var newButtonProps={buttonStyle:_extends({},styles.flatButtonStyle,{marginRight:4}),buttonLabelStyle:_extends({},styles.flatButtonLabelStyle),buttonBackgroundColor:"rgba(255,255,255,0.17)",buttonHoverColor:"rgba(255,255,255,0.33)"},leftPanelProps={headerHeight:headerHeight,userWidgetProps:{color:uWidgetColor,mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:headerHeight,display:"flex",alignItems:"center"}}}
;themeLight&&(leftPanelProps.userWidgetProps.style=_extends({},leftPanelProps.userWidgetProps.style,{boxShadow:"none",backgroundColor:uWidgetBack,borderRight:"1px solid #e0e0e0"}),styles.breadcrumbStyle={color:appBarTextColor.toString()},styles.searchForm={mainStyle:{border:"1px solid "+appBarTextColor.fade(.8).toString()},inputStyle:{color:appBarTextColor.toString()},hintStyle:{color:appBarTextColor.fade(.5).toString()},magnifierStyle:{color:appBarTextColor.fade(.1).toString()}},newButtonProps.buttonLabelStyle.color=muiTheme.palette.accent1Color,newButtonProps.buttonBackgroundColor="rgba(0,0,0,0.05)",newButtonProps.buttonHoverColor="rgba(0,0,0,0.10)");var searchForm=_react2.default.createElement(_search.SearchForm,_extends({},props,this.state.searchFormState,{formStyles:styles.searchForm,style:"advanced-search"===rightColumnState?styles.searchFormPanelStyle:{},id:"advanced-search"===rightColumnState?"info_panel":null,headerHeight:headerHeight,advancedPanel:"advanced-search"===rightColumnState,onOpenAdvanced:function(){_this6.openRightPanel("advanced-search")},onCloseAdvanced:function(){_this6.closeRightPanel()},onUpdateState:function(s){_this6.setState({searchFormState:s})},smallScreen:smallScreen,xtraSmallScreen:xtraSmallScreen}));return _react2.default.createElement(_MasterLayout2.default,{pydio:pydio,style:_extends({},style,{overflow:"hidden"}),classes:classes,tutorialComponent:tutorialComponent,drawerOpen:drawerOpen,leftPanelProps:leftPanelProps,onCloseDrawerRequested:function(){_this6.setState({drawerOpen:!1})}},_react2.default.createElement(_materialUi.Paper,{zDepth:themeLight?0:1,style:styles.appBarStyle,rounded:!1},_react2.default.createElement("div",{id:"workspace_toolbar",style:{flex:1,width:"calc(100% - 430px)",display:"flex"}},_react2.default.createElement("span",{className:"drawer-button",style:{marginLeft:12,marginRight:-6}},_react2.default.createElement(_materialUi.IconButton,{iconStyle:{color:appBarTextColor.fade(.03).toString()},iconClassName:"mdi mdi-menu",onTouchTap:this.openDrawer})),_react2.default.createElement("div",{style:{flex:1,overflow:"hidden"}},_react2.default.createElement(_Breadcrumb2.default,_extends({},props,{startWithSeparator:!1,rootStyle:styles.breadcrumbStyle})),_react2.default.createElement("div",{style:{height:32,paddingLeft:20,alignItems:"center",display:"flex",overflow:"hidden"}},_react2.default.createElement(ButtonMenu,_extends({},props,newButtonProps,{id:"create-button-menu",toolbars:["upload","create"],buttonTitle:this.props.pydio.MessageHash[198],raised:!1,secondary:!0,controller:props.pydio.Controller,openOnEvent:"tutorial-open-create-menu"})),_react2.default.createElement(ListPaginator,{id:"paginator-toolbar",style:{height:23,borderRadius:2,background:newButtonProps.buttonBackgroundColor,marginRight:5},dataModel:props.pydio.getContextHolder(),smallDisplay:!0,toolbarDisplay:!0,toolbarColor:appBarTextColor}),!mobile&&_react2.default.createElement(Toolbar,_extends({},props,{id:"main-toolbar",toolbars:mainToolbars,groupOtherList:mainToolbarsOthers,renderingType:"button",toolbarStyle:{flex:1,overflow:"hidden"},flatButtonStyle:styles.flatButtonStyle,buttonStyle:styles.flatButtonLabelStyle})),mobile&&_react2.default.createElement("span",{style:{flex:1}})))),_react2.default.createElement("div",{style:{display:"flex",alignItems:"center"}},_react2.default.createElement(Toolbar,_extends({},props,{id:"display-toolbar",toolbars:["display_toolbar"],renderingType:"icon-font",mergeItemsAsOneMenu:!0,mergedMenuIcom:"mdi mdi-settings",mergedMenuTitle:this.props.pydio.MessageHash[151],buttonStyle:styles.buttonsIconStyle,flatButtonStyle:styles.buttonsStyle})),_react2.default.createElement("div",{style:{position:"relative",width:"advanced-search"===rightColumnState||smallScreen?40:150,transition:_pydioUtilDom2.default.getBeziersTransition()}},!smallScreen&&"advanced-search"!==rightColumnState&&searchForm,("advanced-search"===rightColumnState||smallScreen)&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-magnify",style:"advanced-search"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"advanced-search"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onTouchTap:function(){_this6.openRightPanel("advanced-search")},tooltip:pydio.MessageHash["info-panel"===rightColumnState?"86":"87"]})),_react2.default.createElement("div",{style:{borderLeft:"1px solid "+appBarTextColor.fade(.77).toString(),margin:"0 10px",height:headerHeight,display:"none"}}),_react2.default.createElement("div",{style:{display:"flex",paddingRight:10}},showInfoPanel&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-information",style:"info-panel"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"info-panel"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onTouchTap:function(){_this6.openRightPanel("info-panel")},tooltip:pydio.MessageHash["info-panel"===rightColumnState?"86":"341"]}),showAddressBook&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-account-card-details",style:"address-book"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"address-book"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onTouchTap:function(){_this6.openRightPanel("address-book")},tooltip:pydio.MessageHash["address-book"===rightColumnState?"86":"592"],tooltipPosition:showChatTab?"bottom-center":"bottom-left"}),showChatTab&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-message-text",style:"chat"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"chat"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onTouchTap:function(){_this6.openRightPanel("chat")},tooltip:pydio.MessageHash["chat"===rightColumnState?"86":"635"],tooltipPosition:"bottom-left"})))),_react2.default.createElement(_MainFilesList2.default,{ref:"list",pydio:pydio,onDisplayModeChange:function(dMode){_this6.setState({filesListDisplayMode:dMode})}}),"info-panel"===rightColumnState&&_react2.default.createElement(_detailpanesInfoPanel2.default,_extends({},props,{dataModel:props.pydio.getContextHolder(),onRequestClose:function(){_this6.closeRightPanel()},onContentChange:this.infoPanelContentChange,style:styles.infoPanelStyle})),"chat"===rightColumnState&&_react2.default.createElement(_CellChat2.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:1,onRequestClose:function(){_this6.closeRightPanel()}}),"address-book"===rightColumnState&&_react2.default.createElement(_AddressBookPanel2.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:1,onRequestClose:function(){_this6.closeRightPanel()}}),"advanced-search"===rightColumnState&&searchForm,_react2.default.createElement(_EditionPanel2.default,props))}});exports.default=FSTemplate=_materialUiStyles.muiThemeable()(FSTemplate),exports.default=FSTemplate,module.exports=exports.default},{"../MessagesProviderMixin":42,"../detailpanes/InfoPanel":46,"../search":77,"./AddressBookPanel":78,"./Breadcrumb":79,"./CellChat":80,"./EditionPanel":82,"./MainFilesList":85,"./MasterLayout":86,"./WelcomeTour":89,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],84:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_materialUiStyles=require("material-ui/styles"),_materialUi=require("material-ui"),_color=require("color"),_color2=_interopRequireDefault(_color),FilePreview=function(_PureComponent){_inherits(FilePreview,_PureComponent),_createClass(FilePreview,null,[{key:"propTypes",get:function(){return{node:_react.PropTypes.instanceOf(AjxpNode).isRequired,loadThumbnail:_react.PropTypes.bool,richPreview:_react.PropTypes.bool,processing:_react.PropTypes.bool,style:_react.PropTypes.object,mimeFontStyle:_react.PropTypes.object,mimeClassName:_react.PropTypes.string}}},{key:"defaultProps",get:function(){return{richPreview:!1}}}]);function FilePreview(props){_classCallCheck(this,FilePreview),_PureComponent.call(this,props),this.state={loading:!1}}return FilePreview.prototype.getStyles=function(){var _props=this.props,style=_props.style,mimeFontStyle=_props.mimeFontStyle,color=new _color2.default(this.props.muiTheme.palette.primary1Color).saturationl(18).lightness(44).toString(),light=new _color2.default(this.props.muiTheme.palette.primary1Color).saturationl(15).lightness(94).toString();return{rootStyle:_extends({backgroundColor:light,alignItems:"initial"},style),mimeFontStyle:_extends({color:color},mimeFontStyle)}},FilePreview.prototype.insertPreviewNode=function(previewNode){this._previewNode=previewNode;var containerNode=this.refs.container;containerNode.innerHTML="",containerNode.className="richPreviewContainer",containerNode.appendChild(this._previewNode)},FilePreview.prototype.destroyPreviewNode=function(){this._previewNode&&(this._previewNode.destroyElement(),this._previewNode.parentNode&&this._previewNode.parentNode.removeChild(this._previewNode),this._previewNode=null)},FilePreview.prototype.componentDidMount=function(){this.loadCoveringImage()},FilePreview.prototype.componentWillUnmount=function(){this.destroyPreviewNode()},FilePreview.prototype.componentWillReceiveProps=function(nextProps){if(nextProps.node.getPath()!==this.props.node.getPath())return this.destroyPreviewNode(),void this.loadCoveringImage();this._previewNode||nextProps.loadThumbnail!==this.props.loadThumbnail&&nextProps.loadThumbnail&&this.loadCoveringImage(!0)},FilePreview.prototype.loadCoveringImage=function(){var force=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.props.loadThumbnail||force){var pydio=window.pydio,node=this.props.node,editors=window.pydio.Registry.findEditorsForMime(node.isLeaf()?node.getAjxpMime():"mime_folder",!0);if(editors&&editors.length){var editorClassName=(editors[0],editors[0].editorClass);pydio.Registry.loadEditorResources(editors[0].resourcesManager,function(){var component=FuncUtils.getFunctionByName(editorClassName,window);component&&this.loadPreviewFromEditor(component,node)}.bind(this))}}},FilePreview.prototype.loadPreviewFromEditor=function(editorClass,node){this.setState({EditorClass:this.props.richPreview?editorClass.Panel:editorClass.Badge})},FilePreview.prototype.render=function(){var _getStyles=this.getStyles(),rootStyle=_getStyles.rootStyle,mimeFontStyle=_getStyles.mimeFontStyle,_props2=this.props,node=_props2.node,mimeClassName=_props2.mimeClassName,processing=_props2.processing,EditorClass=this.state.EditorClass,element=void 0;if(processing)element=React.createElement(_materialUi.CircularProgress,{size:40,thickness:2});else if(EditorClass)element=React.createElement(EditorClass,_extends({pydio:pydio},this.props,{preview:!0,mimeFontStyle:mimeFontStyle}));else{var icClass=node.getSvgSource()||(node.isLeaf()?"file":"folder");icClass&&!icClass.startsWith("icomoon")&&(icClass="mdi mdi-"+icClass),element=React.createElement("div",{key:"icon",className:mimeClassName||"mimefont "+icClass,style:mimeFontStyle})}return React.createElement("div",{ref:"container",style:rootStyle,className:"mimefont-container"+(EditorClass?" with-editor-badge":""),onTouchTap:this.props.onTouchTap},element)},FilePreview}(_react.PureComponent);exports.default=_materialUiStyles.muiThemeable()(FilePreview),module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",react:"react"}],85:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioUtilPath=require("pydio/util/path"),_pydioUtilPath2=_interopRequireDefault(_pydioUtilPath),_pydioModelAction=require("pydio/model/action"),_pydioModelAction2=_interopRequireDefault(_pydioModelAction),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_FilePreview=require("./FilePreview"),_FilePreview2=_interopRequireDefault(_FilePreview),_materialUi=require("material-ui"),_CellsMessageToolbar=require("./CellsMessageToolbar"),_CellsMessageToolbar2=_interopRequireDefault(_CellsMessageToolbar),_OverlayIcon=require("./OverlayIcon"),_OverlayIcon2=_interopRequireDefault(_OverlayIcon),_Pydio$requireLib=_pydio2.default.requireLib("components"),SimpleList=_Pydio$requireLib.SimpleList,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),moment=_Pydio$requireLib2.moment,SingleJobProgress=_Pydio$requireLib2.SingleJobProgress,ComponentConfigsParser=function(){function ComponentConfigsParser(){_classCallCheck(this,ComponentConfigsParser)}return ComponentConfigsParser.prototype.getDefaultListColumns=function(){return{text:{label:"File Name",message:"1",width:"50%",renderCell:MainFilesList.tableEntryRenderCell,sortType:"file-natural",remoteSortAttribute:"ajxp_label"},filesize:{label:"File Size",message:"2",sortType:"number",sortAttribute:"bytesize",remoteSortAttribute:"filesize"},mimestring:{label:"File Type",message:"3",sortType:"string"},ajxp_modiftime:{label:"Mofidied on",message:"4",sortType:"number"}}},ComponentConfigsParser.prototype.loadConfigs=function(componentName){var configs=new Map,columnsNodes=XMLUtils.XPathSelectNodes(global.pydio.getXmlRegistry(),'client_configs/component_config[@component="FilesList"]/columns/column|client_configs/component_config[@component="FilesList"]/columns/additional_column'),columns={},messages=global.pydio.MessageHash;return columnsNodes.forEach(function(colNode){var name=colNode.getAttribute("attributeName"),sortType=colNode.getAttribute("sortType");sortType={String:"string",StringDirFile:"string",MyDate:"number",CellSorterValue:"number"}[sortType]||"string","bytesize"===name&&(sortType="number"),columns[name]={message:colNode.getAttribute("messageId"),label:colNode.getAttribute("messageString")?colNode.getAttribute("messageString"):messages[colNode.getAttribute("messageId")],sortType:sortType},"ajxp_label"===name&&(columns[name].renderCell=MainFilesList.tableEntryRenderCell),colNode.getAttribute("reactModifier")&&function(){var reactModifier=colNode.getAttribute("reactModifier");ResourcesManager.detectModuleToLoadAndApply(reactModifier,function(){columns[name].renderComponent=columns[name].renderCell=FuncUtils.getFunctionByName(reactModifier,global)},!0)}()}),configs.set("columns",columns),configs},ComponentConfigsParser}(),MainFilesList=_react2.default.createClass({displayName:"MainFilesList",propTypes:{pydio:_react2.default.PropTypes.instanceOf(_pydio2.default),horizontalRibbon:_react2.default.PropTypes.bool},statics:{computeLabel:function(node){var label=node.getLabel();if(node.isLeaf()&&"."!==label[0]){var ext=_pydioUtilPath2.default.getFileExtension(label);ext&&(ext="."+ext,label=_react2.default.createElement("span",null,label.substring(0,label.length-ext.length),_react2.default.createElement("span",{className:"label-extension",style:{opacity:.33,display:"none"}},ext)))}return label},tableEntryRenderCell:function(node){return _react2.default.createElement("span",null,_react2.default.createElement(_FilePreview2.default,{rounded:!0,loadThumbnail:!1,node:node,style:{backgroundColor:"transparent"}}),_react2.default.createElement("span",{style:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:node.getLabel()},node.getLabel()))}},getInitialState:function(){var configParser=new ComponentConfigsParser,columns=configParser.loadConfigs("FilesList").get("columns"),dMode=this.displayModeFromPrefs(this.props.displayMode),tSize=200;return"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80),{contextNode:this.props.pydio.getContextHolder().getContextNode(),displayMode:dMode,thumbNearest:tSize,thumbSize:tSize,elementsPerLine:5,columns:columns||configParser.getDefaultListColumns(),parentIsScrolling:this.props.parentIsScrolling,repositoryId:this.props.pydio.repositoryId}},displayModeFromPrefs:function(defaultMode){var pydio=this.props.pydio;if(!pydio.user)return defaultMode||"list";var slug=pydio.user.getActiveRepositoryObject().getSlug(),guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):{};return guiPrefs.FilesListDisplayMode&&guiPrefs.FilesListDisplayMode[slug]?guiPrefs.FilesListDisplayMode[slug]:defaultMode||"list"},displayModeToPrefs:function(mode){var pydio=this.props.pydio;if(!pydio.user)return"list";var slug=pydio.user.getActiveRepositoryObject().getSlug(),guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):{},dPrefs=guiPrefs.FilesListDisplayMode||{};dPrefs[slug]=mode,guiPrefs.FilesListDisplayMode=dPrefs,pydio.user.setPreference("gui_preferences",guiPrefs,!0),pydio.user.savePreference("gui_preferences")},componentDidMount:function(){this._contextObserver=function(){this.setState({contextNode:this.props.pydio.getContextHolder().getContextNode()})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._contextObserver),this.props.pydio.getController().updateGuiActions(this.getPydioActions()),this.recomputeThumbnailsDimension(),window.addEventListener?window.addEventListener("resize",this.recomputeThumbnailsDimension):window.attachEvent("onresize",this.recomputeThumbnailsDimension),this.props.onDisplayModeChange&&this.state&&this.state.displayMode&&this.props.onDisplayModeChange(this.state.displayMode)},componentWillUnmount:function(){this.props.pydio.getContextHolder().stopObserving("context_changed",this._contextObserver),this.getPydioActions(!0).map(function(key){this.props.pydio.getController().deleteFromGuiActions(key)}.bind(this)),window.addEventListener?window.removeEventListener("resize",this.recomputeThumbnailsDimension):window.detachEvent("onresize",this.recomputeThumbnailsDimension)},shouldComponentUpdate:function(nextProps,nextState){return!this.state||this.state.repositoryId!==nextProps.pydio.repositoryId||nextState!==this.state},componentWillReceiveProps:function(){var _this=this;this.state&&this.state.repositoryId!==this.props.pydio.repositoryId&&function(){_this.props.pydio.getController().updateGuiActions(_this.getPydioActions());var configParser=new ComponentConfigsParser,columns=configParser.loadConfigs("FilesList").get("columns"),dMode=_this.displayModeFromPrefs(_this.state?_this.state.displayMode:"list");if(_this.state.displayMode!==dMode&&0===dMode.indexOf("grid-")){var tSize=200;"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80),_this.setState({thumbNearest:tSize,thumbSize:tSize})}_this.setState({repositoryId:_this.props.pydio.repositoryId,columns:columns||configParser.getDefaultListColumns(),displayMode:dMode},function(){_this.props.onDisplayModeChange&&_this.props.onDisplayModeChange(dMode)})}()},resize:function(){this.recomputeThumbnailsDimension()},recomputeThumbnailsDimension:function(nearest){var _this2=this,THUMBNAIL_MARGIN=1,containerWidth=void 0;try{containerWidth=_reactDom2.default.findDOMNode(this.refs.list.refs.infinite).clientWidth-2}catch(e){containerWidth=200}if(0===this.state.displayMode.indexOf("grid")){(!nearest||nearest instanceof Event)&&(nearest=this.state.thumbNearest);var blockNumber=Math.floor(containerWidth/nearest),width=Math.floor(containerWidth/blockNumber)-2*THUMBNAIL_MARGIN;this.props.horizontalRibbon&&(blockNumber=this.state.contextNode.getChildren().size,width="grid-160"===this.state.displayMode?160:"grid-320"===this.state.displayMode?320:"grid-80"===this.state.displayMode?80:200),this.setState({elementsPerLine:blockNumber,thumbSize:width,thumbNearest:nearest})}else!function(){var columns=_this2.state.columns,columnKeys=Object.keys(columns),defaultFirstWidthPercent=10,firstColWidth=Math.max(250,containerWidth*defaultFirstWidthPercent/100),otherColWidth=(containerWidth-firstColWidth)/(Object.keys(_this2.state.columns).length-1);columnKeys.map(function(columnKey){columns[columnKey].width=otherColWidth}),_this2.setState({columns:columns})}()},entryRenderIcon:function(node){var _this3=this,entryProps=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(entryProps&&entryProps.parent)return _react2.default.createElement(_FilePreview2.default,{loadThumbnail:!1,node:node,mimeClassName:"mimefont mdi mdi-chevron-left",onTouchTap:function(){_this3.entryHandleClicks(node,SimpleList.CLICK_TYPE_DOUBLE)},style:{cursor:"pointer"}});var hasThumbnail=!!node.getMetadata().get("thumbnails"),processing=!!node.getMetadata().get("Processing");return _react2.default.createElement(_FilePreview2.default,{loadThumbnail:!entryProps.parentIsScrolling&&hasThumbnail&&!processing,node:node,processing:processing})},entryRenderActions:function(node){var content=null,pydio=this.props.pydio,mobile=pydio.UI.MOBILE_EXTENSIONS,dm=pydio.getContextHolder();if(mobile){var _ret4=function(){var ContextMenuModel=require("pydio/model/context-menu");return{v:_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-dots-vertical",style:{zIndex:0,padding:10},tooltip:"Info",onClick:function(event){pydio.observeOnce("actions_refreshed",function(){ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}),event.stopPropagation(),dm.setSelectedNodes([node]),ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}})}}();if("object"==typeof _ret4)return _ret4.v}else if(node.getMetadata().get("overlay_class")){var elements=node.getMetadata().get("overlay_class").split(",").filter(function(c){return!!c}).map(function(c){return _react2.default.createElement(_OverlayIcon2.default,{node:node,key:c,overlay:c,pydio:pydio})});content=_react2.default.createElement("div",{className:"overlay_icon_div"},elements)}return content},entryHandleClicks:function(node,clickType,event){var dm=this.props.pydio.getContextHolder(),mobile=this.props.pydio.UI.MOBILE_EXTENSIONS||this.props.horizontalRibbon;if(dm.getContextNode().getParent()!==node||clickType!==SimpleList.CLICK_TYPE_SIMPLE)if(mobile||clickType&&clickType!==SimpleList.CLICK_TYPE_SIMPLE)(mobile||clickType===SimpleList.CLICK_TYPE_DOUBLE)&&(node.isBrowsable()?dm.requireContextChange(node):(dm.setSelectedNodes([node]),this.props.pydio.Controller.fireAction("open_with_unique")));else{var crtSelection=dm.getSelectedNodes();if(event&&event.shiftKey&&crtSelection.length){var newSelection=this.refs.list.computeSelectionFromCurrentPlusTargetNode(crtSelection,node);dm.setSelectedNodes(newSelection)}else if(event&&(event.ctrlKey||event.metaKey)&&crtSelection.length)if(-1===crtSelection.indexOf(node))dm.setSelectedNodes([].concat(crtSelection,[node]));else{var otherSelection=crtSelection.filter(function(obj){return obj!==node});dm.setSelectedNodes(otherSelection)}else dm.setSelectedNodes([node])}},entryRenderSecondLine:function(node){var metaData=node.getMetadata(),pieces=[],standardPieces=[],otherPieces=[];if(metaData.has("pending_operation"))return metaData.has("pending_operation_uuid")?_react2.default.createElement(SingleJobProgress,{jobID:metaData.get("pending_operation_uuid"),style:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},progressStyle:{width:60,paddingRight:10},labelStyle:{flex:1}}):_react2.default.createElement("span",{style:{fontStyle:"italic",color:"rgba(0,0,0,.33)"}},metaData.get("pending_operation"));if(metaData.get("ajxp_modiftime")){var mDate=moment(1e3*parseFloat(metaData.get("ajxp_modiftime"))),dateString=mDate.calendar();dateString.indexOf("/")>-1&&(dateString=mDate.fromNow()),pieces.push(_react2.default.createElement("span",{key:"time_description",className:"metadata_chunk metadata_chunk_description"},dateString))}for(var first=!1,attKeys=Object.keys(this.state.columns),i=0;i<attKeys.length;i++){var s=attKeys[i],columnDef=this.state.columns[s],label=void 0,standard=!1;if("ajxp_label"!==s&&"text"!==s){if("ajxp_modiftime"===s){var date=new Date;date.setTime(1e3*parseInt(metaData.get(s))),label=_pydioUtilPath2.default.formatModifDate(date),standard=!0}else if("ajxp_dirname"===s&&metaData.get("filename")){var dirName=_pydioUtilPath2.default.getDirname(metaData.get("filename"));label=dirName||"/",standard=!0}else if("bytesize"===s){if("-"===metaData.get(s))continue;var test=_pydioUtilPath2.default.roundFileSize(parseInt(metaData.get(s)));if(NaN===test)continue;label=test,standard=!0}else if(columnDef.renderComponent){if(columnDef.name=s,null===(label=columnDef.renderComponent(node,columnDef)))continue}else{"mimestring"!==s&&"readable_dimension"!==s||(standard=!0);var metaValue=metaData.get(s)||"";if(!metaValue)continue;label=metaValue}var sep=void 0;first||(sep=_react2.default.createElement("span",{className:"icon-angle-right"}));var cellClass="metadata_chunk metadata_chunk_"+(standard?"standard":"other")+" metadata_chunk_"+s,cell=_react2.default.createElement("span",{key:s,className:cellClass},sep,_react2.default.createElement("span",{className:"text_label"},label));standard?standardPieces.push(cell):otherPieces.push(cell)}}return pieces.push.apply(pieces,otherPieces.concat(standardPieces)),pieces},switchDisplayMode:function(displayMode){var _this4=this;this.setState({displayMode:displayMode},function(){var near=null;0===displayMode.indexOf("grid-")&&(near=parseInt(displayMode.split("-")[1])),_this4.recomputeThumbnailsDimension(near),_this4.displayModeToPrefs(displayMode),_this4.props.onDisplayModeChange&&_this4.props.onDisplayModeChange(displayMode),_this4.props.pydio.notify("actions_refreshed")})},buildDisplayModeItems:function(){var _this5=this,displayMode=this.state.displayMode;return[{name:"List",title:227,icon_class:"mdi mdi-view-list",value:"list",hasAccessKey:!0,accessKey:"list_access_key"},{name:"Detail",title:461,icon_class:"mdi mdi-view-headline",value:"detail",hasAccessKey:!0,accessKey:"detail_access_key"},{name:"Thumbs",title:229,icon_class:"mdi mdi-view-grid",value:"grid-160",hasAccessKey:!0,accessKey:"thumbs_access_key"},{name:"Thumbs large",title:229,icon_class:"mdi mdi-view-agenda",value:"grid-320",hasAccessKey:!1},{name:"Thumbs small",title:229,icon_class:"mdi mdi-view-module",value:"grid-80",hasAccessKey:!1}].map(function(item){var i=_extends({},item),value=item.value;return i.callback=function(){_this5.switchDisplayMode(i.value)},value===displayMode&&(i.icon_class="mdi mdi-check"),i})},getPydioActions:function(){if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return["switch_display_mode"];var multiAction=new _pydioModelAction2.default({name:"switch_display_mode",icon_class:"mdi mdi-view-list",text_id:150,title_id:151,text:MessageHash[150],title:MessageHash[151],hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!0},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:this.buildDisplayModeItems.bind(this)}),buttons=new Map;return buttons.set("switch_display_mode",multiAction),buttons},render:function(){var tableKeys=void 0,sortKeys=void 0,elementStyle=void 0,className="files-list layout-fill main-files-list",elementHeight=void 0,entryRenderSecondLine=void 0,elementsPerLine=1,near=void 0,dMode=this.state.displayMode;0===dMode.indexOf("grid-")&&(near=parseInt(dMode.split("-")[1]),dMode="grid");var infiniteSliceCount=50;"detail"===dMode?(elementHeight=SimpleList.HEIGHT_ONE_LINE,tableKeys=this.state.columns):"grid"===dMode?(sortKeys=this.state.columns,className+=" material-list-grid grid-size-"+near,elementHeight=Math.ceil(this.state.thumbSize/this.state.elementsPerLine),elementHeight&&!this.props.horizontalRibbon||(elementHeight=1),elementsPerLine=this.state.elementsPerLine,elementStyle={width:this.state.thumbSize,height:this.state.thumbSize},this.props.horizontalRibbon&&(className+=" horizontal-ribbon"),320===near?infiniteSliceCount=25:160===near?infiniteSliceCount=80:80===near&&(infiniteSliceCount=200)):"list"===dMode&&(sortKeys=this.state.columns,elementHeight=SimpleList.HEIGHT_TWO_LINES,entryRenderSecondLine=this.entryRenderSecondLine);var pydio=this.props.pydio,contextNode=this.state.contextNode,messages=pydio.MessageHash,canUpload=pydio.Controller.getActionByName("upload")&&!contextNode.getMetadata().has("node_readonly"),secondary=messages[canUpload?"565":"566"],iconClassName=canUpload?"mdi mdi-cloud-upload":"mdi mdi-folder-outline",emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:messages[562],secondaryTextId:secondary};if(contextNode.isRoot())!function(){var isCell=!(!pydio.user||!pydio.user.activeRepository)&&pydio.user.getRepositoriesList().get(pydio.user.activeRepository).getOwner(),recyclePath=contextNode.getMetadata().get("repo_has_recycle");emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:isCell?messages[631]:messages[563],secondaryTextId:secondary},recyclePath&&(emptyStateProps=_extends({},emptyStateProps,{checkEmptyState:function(node){return node.isLoaded()&&1===node.getChildren().size&&node.getChildren().get(recyclePath)},actionLabelId:messages[567],actionIconClassName:"mdi mdi-delete",actionCallback:function(e){pydio.goTo(recyclePath)}}))}();else{var recycle=pydio.getContextHolder().getRootNode().getMetadata().get("repo_has_recycle");contextNode.getPath()===recycle&&(emptyStateProps=_extends({},emptyStateProps,{iconClassName:"mdi mdi-delete-empty",primaryTextId:messages[564],secondaryTextId:null}))}return _react2.default.createElement(SimpleList,{ref:"list",tableKeys:tableKeys,sortKeys:sortKeys,node:this.state.contextNode,dataModel:pydio.getContextHolder(),className:className,actionBarGroups:["change_main"],infiniteSliceCount:infiniteSliceCount,skipInternalDataModel:!0,style:this.props.style,elementsPerLine:elementsPerLine,elementHeight:elementHeight,elementStyle:elementStyle,passScrollingStateToChildren:!0,entryRenderIcon:this.entryRenderIcon,entryRenderParentIcon:this.entryRenderIcon,entryRenderFirstLine:function(node){return MainFilesList.computeLabel(node)},entryRenderSecondLine:entryRenderSecondLine,entryRenderActions:this.entryRenderActions,entryHandleClicks:this.entryHandleClicks,horizontalRibbon:this.props.horizontalRibbon,emptyStateProps:emptyStateProps,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"},hideToolbar:!0,
customToolbar:_react2.default.createElement(_CellsMessageToolbar2.default,{pydio:pydio})})}});exports.default=MainFilesList,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CellsMessageToolbar":81,"./FilePreview":84,"./OverlayIcon":87,"material-ui":"material-ui",pydio:"pydio","pydio/model/action":"pydio/model/action","pydio/model/context-menu":"pydio/model/context-menu","pydio/util/path":"pydio/util/path",react:"react","react-dom":"react-dom"}],86:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_leftnavLeftPanel=require("../leftnav/LeftPanel"),_leftnavLeftPanel2=_interopRequireDefault(_leftnavLeftPanel),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),withContextMenu=_Pydio$requireLib.withContextMenu,dropProvider=_Pydio$requireLib.dropProvider,_Pydio$requireLib2=_pydio2.default.requireLib("components"),ContextMenu=_Pydio$requireLib2.ContextMenu,MasterLayout=function(_React$Component){_inherits(MasterLayout,_React$Component);function MasterLayout(){_classCallCheck(this,MasterLayout),_React$Component.apply(this,arguments)}return MasterLayout.prototype.closeDrawer=function(e){if(this.props.drawerOpen){var widgets=document.getElementsByClassName("left-panel");widgets&&widgets.length>0&&widgets[0].contains(_reactDom2.default.findDOMNode(e.target))||this.props.onCloseDrawerRequested()}},MasterLayout.prototype.render=function(){var _props=this.props,pydio=_props.pydio,tutorialComponent=_props.tutorialComponent,onContextMenu=_props.onContextMenu,classes=_props.classes,style=_props.style,leftPanelProps=_props.leftPanelProps,children=_props.children,drawerOpen=_props.drawerOpen,connectDropTarget=this.props.connectDropTarget||function(c){return c},allClasses=[].concat(classes);return drawerOpen&&allClasses.push("drawer-open"),connectDropTarget(_react2.default.createElement("div",{style:_extends({},style,{overflow:"hidden"}),className:allClasses.join(" "),onTouchTap:this.closeDrawer.bind(this),onContextMenu:onContextMenu},tutorialComponent,_react2.default.createElement(_leftnavLeftPanel2.default,_extends({className:"left-panel",pydio:pydio},leftPanelProps)),_react2.default.createElement("div",{className:"desktop-container vertical_layout vertical_fit"},children),_react2.default.createElement("span",{className:"context-menu"},_react2.default.createElement(ContextMenu,{pydio:this.props.pydio}))))},MasterLayout}(_react2.default.Component);exports.default=MasterLayout=dropProvider(MasterLayout),exports.default=MasterLayout=withContextMenu(MasterLayout),exports.default=MasterLayout,module.exports=exports.default},{"../leftnav/LeftPanel":68,pydio:"pydio",react:"react","react-dom":"react-dom"}],87:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUiStyles=require("material-ui/styles"),_color=require("color"),_color2=_interopRequireDefault(_color),_materialUi=require("material-ui"),OverlayIcon=function(_React$Component){_inherits(OverlayIcon,_React$Component);function OverlayIcon(){_classCallCheck(this,OverlayIcon),_React$Component.apply(this,arguments)}return OverlayIcon.prototype.findAction=function(){var _props=this.props,overlay=_props.overlay,pydio=_props.pydio,node=_props.node,tooltip=void 0,action=void 0,m=function(id){return pydio.MessageHash[id]||id},isLeaf=node.isLeaf();switch(overlay){case"mdi mdi-star":tooltip=m(isLeaf?"overlay.bookmark.file":"overlay.bookmark.folder");break;case"mdi mdi-share-variant":action=pydio.Controller.getActionByName("share-edit-shared"),tooltip=m(isLeaf?"overlay.shared.file":"overlay.shared.folder");break;case"mdi mdi-lock-outline":tooltip=m(isLeaf?"overlay.lock.file":"overlay.lock.folder");break;case"mdi mdi-bell":tooltip=m(isLeaf?"overlay.watch.file":"overlay.watch.folder")}return{tooltip:tooltip,action:action}},OverlayIcon.prototype.render=function(){var _props2=this.props,muiTheme=_props2.muiTheme,overlay=_props2.overlay,selected=_props2.selected,light=new _color2.default(muiTheme.palette.primary1Color).saturationl(15).lightness(73).toString(),onClick=void 0,_findAction=this.findAction(),tooltip=_findAction.tooltip,action=_findAction.action;return action&&(onClick=function(){action.apply()}),_react2.default.createElement(_materialUi.IconButton,{tooltip:tooltip,tooltipPosition:"bottom-left",iconClassName:overlay+" overlay-icon-span",style:{width:30,height:30,padding:6,margin:"6px 2px",zIndex:0,cursor:onClick?"pointer":"default"},iconStyle:{color:selected?"white":light,fontSize:15,transition:"none"},onTouchTap:onClick})},OverlayIcon}(_react2.default.Component);exports.default=OverlayIcon=_materialUiStyles.muiThemeable()(OverlayIcon),exports.default=OverlayIcon,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",react:"react"}],88:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactJoyride=require("react-joyride"),_reactJoyride2=_interopRequireDefault(_reactJoyride),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,TourGuide=function(_Component){_inherits(TourGuide,_Component);function TourGuide(){_classCallCheck(this,TourGuide),_Component.apply(this,arguments)}return TourGuide.prototype.render=function(){var _this=this,message=function(id){return _this.props.getMessage("ajax_gui.tour.locale."+id)},locales=["back","close","last","next","skip"],locale={};return locales.forEach(function(k){locale[k]=message(k)}),React.createElement(_reactJoyride2.default,_extends({},this.props,{locale:locale,allowClicksThruHole:!0}))},TourGuide}(_react.Component);exports.default=TourGuide=PydioContextConsumer(TourGuide),exports.default=TourGuide,module.exports=exports.default},{pydio:"pydio",react:"react","react-joyride":20}],89:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_materialUi=require("material-ui"),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_TourGuide=require("./TourGuide"),_TourGuide2=_interopRequireDefault(_TourGuide),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,DOMUtils=require("pydio/util/dom"),Scheme=function(_Component){_inherits(Scheme,_Component);function Scheme(){_classCallCheck(this,Scheme),_Component.apply(this,arguments)}return Scheme.prototype.render=function(){var style={position:"relative",fontSize:24,width:this.props.dimension||100,height:this.props.dimension||100,backgroundColor:"#ECEFF1",color:"#607d8b",borderRadius:"50%",margin:"0 auto"};return React.createElement("div",{style:_extends({},style,this.props.style)},this.props.children)},Scheme}(_react.Component),IconScheme=function(_Component2){_inherits(IconScheme,_Component2);function IconScheme(props){_classCallCheck(this,IconScheme),_Component2.call(this,props),this.state={icon:props.icon||props.icons[0],index:0}}return IconScheme.prototype.componentDidMount=function(){this.componentWillReceiveProps(this.props)},IconScheme.prototype.componentWillReceiveProps=function(nextProps){var _this=this,icon=nextProps.icon,icons=nextProps.icons;this._interval&&clearInterval(this._interval);var state=void 0;icon?state={icon:icon}:icons&&(state={icon:icons[0],index:0},this._interval=setInterval(function(){_this.nextIcon()},1700)),this.setState(state)},IconScheme.prototype.nextIcon=function(){var icons=this.props.icons,next=this.state.index+1;next>icons.length-1&&(next=0),this.setState({index:next,icon:icons[next]})},IconScheme.prototype.componentWillUnmount=function(){this._interval&&clearInterval(this._interval)},IconScheme.prototype.render=function(){var icon=this.state.icon;return React.createElement(Scheme,{dimension:80},React.createElement("span",{className:"mdi mdi-"+icon,style:{position:"absolute",top:14,left:14,fontSize:50}}))},IconScheme}(_react.Component),CreateMenuCard=function(_Component3){_inherits(CreateMenuCard,_Component3);function CreateMenuCard(){_classCallCheck(this,CreateMenuCard),_Component3.apply(this,arguments)}return CreateMenuCard.prototype.componentDidMount=function(){var _this2=this;setTimeout(function(){_this2.props.pydio.notify("tutorial-open-create-menu")},950)},CreateMenuCard.prototype.render=function(){return React.createElement("div",null,React.createElement("p",null,this.props.message("create-menu")),React.createElement(IconScheme,{icons:["file-plus","folder-plus"]}))},CreateMenuCard}(_react.Component),InfoPanelCard=function(_Component4){_inherits(InfoPanelCard,_Component4);function InfoPanelCard(){_classCallCheck(this,InfoPanelCard),_Component4.apply(this,arguments)}return InfoPanelCard.prototype.componentDidMount=function(){var _this3=this;this._int=setInterval(function(){_this3.setState({closed:!(_this3.state&&_this3.state.closed)})},1500)},InfoPanelCard.prototype.componentWillUnmount=function(){this._int&&clearInterval(this._int)},InfoPanelCard.prototype.render=function(){var leftStyle={width:24,transition:DOMUtils.getBeziersTransition(),transform:"scaleX(1)",transformOrigin:"right"};return this.state&&this.state.closed&&(leftStyle=_extends({},leftStyle,{width:0,transform:"scaleX(0)"})),React.createElement("div",null,React.createElement("p",null,this.props.message("infopanel.1")),React.createElement(Scheme,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC",display:"flex"}},React.createElement("div",{style:{backgroundColor:"white",flex:3}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",this.props.message("infopanel.folder")," 1 "),React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white"}},React.createElement("span",{className:"mdi mdi-folder"}),"  ",this.props.message("infopanel.folder")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 3"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 4")),React.createElement("div",{style:leftStyle},React.createElement("div",{style:{backgroundColor:"#edf4f7",padding:4,height:"100%",fontSize:17}},React.createElement("span",{className:"mdi mdi-information-variant"}))))),React.createElement("p",null,this.props.message("infopanel.2")," (",React.createElement("span",{className:"mdi mdi-information",style:{fontSize:18,color:"#5c7784"}}),")."))},InfoPanelCard}(_react.Component),UserWidgetCard=function(_Component5){_inherits(UserWidgetCard,_Component5);function UserWidgetCard(){_classCallCheck(this,UserWidgetCard),_Component5.apply(this,arguments)}return UserWidgetCard.prototype.render=function(){var iconStyle={display:"inline-block",textAlign:"center",fontSize:17,lineHeight:"20px",backgroundColor:"#ECEFF1",color:"#607D8B",borderRadius:"50%",padding:"5px 6px",width:30,height:30,marginRight:5};return React.createElement("div",null,React.createElement("p",null,React.createElement("span",{className:"mdi mdi-book-open-variant",style:iconStyle})," ",this.props.message("uwidget.addressbook")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-bell-outline",style:iconStyle})," ",this.props.message("uwidget.alerts")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-dots-vertical",style:iconStyle})," ",this.props.message("uwidget.menu")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-home-variant",style:iconStyle})," ",this.props.message("uwidget.home")))},UserWidgetCard}(_react.Component),WelcomeTour=function(_Component6){_inherits(WelcomeTour,_Component6);function WelcomeTour(props,context){_classCallCheck(this,WelcomeTour),_Component6.call(this,props,context),this.state={started:!(props.pydio.user&&!props.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])}}return WelcomeTour.prototype.discard=function(){var finished=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],user=this.props.pydio.user,guiPrefs=user.getPreference("gui_preferences",!0);guiPrefs["UserAccount.WelcomeModal.Shown"]=!0,finished&&(guiPrefs["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]=!0),user.setPreference("gui_preferences",guiPrefs,!0),user.savePreference("gui_preferences")},WelcomeTour.prototype.componentDidMount=function(){var _this4=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(skip){skip?_this4.discard(!0):(_this4.discard(),_this4.setState({started:!0,skip:skip}))}})},WelcomeTour.prototype.render=function(){var _this5=this;if(!this.state.started||this.state.skip)return null;var _props=this.props,getMessage=_props.getMessage,pydio=_props.pydio,message=function(id){return getMessage("ajax_gui.tour."+id)},tourguideSteps=[],Controller=pydio.Controller,user=pydio.user,mkdir=Controller.getActionByName("mkdir")||{},upload=Controller.getActionByName("upload")||{};!user||!user.activeRepository||mkdir.deny&&upload.deny||tourguideSteps.push({title:message("create-menu.title"),text:React.createElement(CreateMenuCard,{message:message,pydio:this.props.pydio}),selector:"#create-button-menu",position:"left",style:{width:220}}),document.getElementById("display-toolbar")&&tourguideSteps.push({title:message("display-bar.title"),text:React.createElement("div",null,React.createElement("p",null,message("display-bar")),React.createElement(IconScheme,{icons:["view-list","view-grid","view-carousel","sort-ascending","sort-descending"]})),selector:"#display-toolbar",position:"left"}),document.getElementById("info_panel")&&tourguideSteps.push({title:message("infopanel.title"),text:React.createElement(InfoPanelCard,{message:message}),selector:"#info_panel",position:"left"}),tourguideSteps.push({title:message("uwidget.title"),text:React.createElement(UserWidgetCard,{message:message}),selector:".user-widget",position:"right",style:{width:320}});var callback=function(data){("step:after"===data.type&&data.index===tourguideSteps.length-1||"skip"===data.action)&&_this5.discard(!0)};return React.createElement(_TourGuide2.default,{ref:"joyride",steps:tourguideSteps,run:!0,autoStart:!0,debug:!1,callback:callback,type:"continuous",showSkipButton:!0})},WelcomeTour}(_react.Component);exports.default=WelcomeTour=PydioContextConsumer(WelcomeTour),exports.default=WelcomeTour,module.exports=exports.default},{"./TourGuide":88,"material-ui":"material-ui",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],90:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_Pydio$requireLib=_pydio2.default.requireLib("components"),GenericCard=_Pydio$requireLib.GenericCard,GenericLine=_Pydio$requireLib.GenericLine,WorkspaceCard=function(_React$Component){_inherits(WorkspaceCard,_React$Component);function WorkspaceCard(props){var _this=this;_classCallCheck(this,WorkspaceCard),_React$Component.call(this,props),this.state={};var rootNode=this.props.rootNode;rootNode.getMetadata().has("virtual_root")?rootNode.isLoaded()?(this.state.rootNodes=[],rootNode.getChildren().forEach(function(n){return _this.state.rootNodes.push(n)})):(rootNode.observeOnce("loaded",function(){var rootNodes=[];rootNode.getChildren().forEach(function(n){return rootNodes.push(n)}),_this.setState({rootNodes:rootNodes})}),rootNode.load()):this.state.rootNodes=[rootNode],_pydioHttpResourcesManager2.default.loadClassesAndApply(["PydioActivityStreams"],function(){_this.setState({ASLib:!0})}),_pydioHttpResourcesManager2.default.loadClassesAndApply(["PydioCoreActions"],function(){_this.setState({CALib:!0})})}return WorkspaceCard.prototype.render=function(){var _props=this.props,pydio=_props.pydio,workspace=_props.workspace,onDismiss=_props.onDismiss,rootNodes=this.state.rootNodes,_state=this.state,ASLib=_state.ASLib,CALib=_state.CALib,watchLine=void 0,bookmarkAction=void 0;if(pydio.getPluginConfigs("core.activitystreams").get("ACTIVITY_SHOW_ACTIVITIES")&&ASLib&&rootNodes){var selector=_react2.default.createElement(PydioActivityStreams.WatchSelector,{pydio:pydio,nodes:rootNodes});watchLine=_react2.default.createElement(GenericLine,{iconClassName:"mdi mdi-bell-outline",legend:"Get notifications...",iconStyle:{marginTop:32},data:selector})}return CALib&&rootNodes&&(bookmarkAction=_react2.default.createElement(PydioCoreActions.BookmarkButton,{pydio:pydio,nodes:rootNodes,styles:{iconStyle:{color:"white"}}})),_react2.default.createElement(GenericCard,{pydio:pydio,title:workspace.getLabel(),onDismissAction:onDismiss,style:{width:350},otherActions:[bookmarkAction]},workspace.getDescription()&&_react2.default.createElement(GenericLine,{iconClassName:"mdi mdi-information",legend:"Description",data:workspace.getDescription()}),watchLine)},WorkspaceCard}(_react2.default.Component);exports.default=WorkspaceCard,module.exports=exports.default},{pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],91:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _WorkspaceCard=require("./WorkspaceCard"),_WorkspaceCard2=_interopRequireDefault(_WorkspaceCard),_color=require("color"),_color2=_interopRequireDefault(_color),_materialUi=require("material-ui"),_reactDnd=require("react-dnd"),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_pydioModelContextMenu=require("pydio/model/context-menu"),_pydioHttpResourcesManager=(_interopRequireDefault(_pydioModelContextMenu),require("pydio/http/resources-manager")),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),React=require("react"),_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,Pydio=require("pydio"),Node=(require("pydio/http/api"),require("pydio/model/node")),_Pydio$requireLib=Pydio.requireLib("components"),FoldersTree=_Pydio$requireLib.FoldersTree,DND=_Pydio$requireLib.DND,ChatIcon=_Pydio$requireLib.ChatIcon,_Pydio$requireLib2=(_Pydio$requireLib.MenuUtils,Pydio.requireLib("hoc")),Types=(_Pydio$requireLib2.withContextMenu,DND.Types),collectDrop=(DND.collect,DND.collectDrop),nodeDropTarget=(DND.nodeDragSource,DND.nodeDropTarget),Badge=function(_ref){var children=_ref.children,muiTheme=_ref.muiTheme,style={display:"inline-block",backgroundColor:muiTheme.palette.accent1Color,color:"white",fontSize:10,borderRadius:6,padding:"0 5px",marginLeft:5,height:16,lineHeight:"17px",fontWeight:500};return React.createElement("span",{style:style},children)};Badge=muiThemeable()(Badge);var Confirm=React.createClass({displayName:"Confirm",propTypes:{pydio:React.PropTypes.instanceOf(Pydio),onDecline:React.PropTypes.func,onAccept:React.PropTypes.func,mode:React.PropTypes.oneOf(["new_share","reject_accepted"])},render:function(){var messages=this.props.pydio.MessageHash,messageTitle=messages[545],messageBody=messages[546],actions=[{text:messages[548],ref:"decline",onClick:this.props.onDecline},{text:messages[547],ref:"accept",onClick:this.props.onAccept}];"reject_accepted"===this.props.mode&&(messageBody=messages[549],actions=[{text:messages[54],ref:"decline",onClick:this.props.onDecline},{text:messages[551],ref:"accept",onClick:this.props.onAccept}]);for(var key in this.props.replacements)messageTitle=messageTitle.replace(new RegExp(key),this.props.replacements[key]),messageBody=messageBody.replace(new RegExp(key),this.props.replacements[key]);return React.createElement("div",{className:"react-mui-context",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"transparent"}},React.createElement(_materialUi.Dialog,{title:messageTitle,actions:actions,modal:!1,dismissOnClickAway:!0,onDismiss:this.props.onDismiss.bind(this),open:!0},messageBody))}}),WorkspaceEntry=React.createClass({displayName:"WorkspaceEntry",propTypes:{pydio:React.PropTypes.instanceOf(Pydio).isRequired,workspace:React.PropTypes.instanceOf(Repository).isRequired,showFoldersTree:React.PropTypes.bool,onHoverLink:React.PropTypes.func,onOutLink:React.PropTypes.func},getInitialState:function(){return{openAlert:!1,openFoldersTree:!1,currentContextNode:this.props.pydio.getContextHolder().getContextNode()}},getLetterBadge:function(){return{__html:this.props.workspace.getHtmlBadge(!0)}},componentDidMount:function(){this.props.showFoldersTree&&(this._monitorFolder=function(){this.setState({currentContextNode:this.props.pydio.getContextHolder().getContextNode()})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._monitorFolder))},componentWillUnmount:function(){this._monitorFolder&&this.props.pydio.getContextHolder().stopObserving("context_changed",this._monitorFolder)},handleAccept:function(){this.props.workspace.setAccessStatus("accepted"),this.handleCloseAlert(),this.onClick()},handleDecline:function(){this.props.workspace.setAccessStatus("declined"),this.props.pydio.fire("repository_list_refreshed",{list:this.props.pydio.user.getRepositoriesList(),active:this.props.pydio.user.getActiveRepository()}),this.handleCloseAlert()},handleOpenAlert:function(mode,event){void 0===mode&&(mode="new_share"),event.stopPropagation(),this.wrapper=document.body.appendChild(document.createElement("div")),this.wrapper.style.zIndex=11;var replacements={"%%OWNER%%":this.props.workspace.getOwner()};ReactDOM.render(React.createElement(Confirm,_extends({},this.props,{mode:mode,replacements:replacements,onAccept:"new_share"===mode?this.handleAccept.bind(this):this.handleDecline.bind(this),onDecline:"new_share"===mode?this.handleDecline.bind(this):this.handleCloseAlert.bind(this),onDismiss:this.handleCloseAlert})),this.wrapper)},handleCloseAlert:function(){ReactDOM.unmountComponentAtNode(this.wrapper),this.wrapper.remove()},onClick:function(){var _this=this;this.props.workspace.getId()===this.props.pydio.user.activeRepository&&this.props.showFoldersTree?this.props.pydio.goTo("/"):(this.props.pydio.observeOnce("repository_list_refreshed",function(){_this.setState({loading:!1})}),this.setState({loading:!0}),this.props.pydio.triggerRepositoryChange(this.props.workspace.getId()))},toggleFoldersPanelOpen:function(ev){ev.stopPropagation(),this.setState({openFoldersTree:!this.state.openFoldersTree})},getRootItemStyle:function(node){var isContext=this.props.pydio.getContextHolder().getContextNode()===node,accent2=this.props.muiTheme.palette.accent2Color;return isContext?{borderLeft:"4px solid "+accent2,paddingLeft:12}:{}},getItemStyle:function(node){var isContext=this.props.pydio.getContextHolder().getContextNode()===node,accent2=this.props.muiTheme.palette.accent2Color;return isContext?{color:"rgba(0,0,0,.77)",fontWeight:500,backgroundColor:_color2.default(accent2).fade(.9).toString()}:-1!==this.props.pydio.getContextHolder().getSelectedNodes().indexOf(node)?{color:accent2,fontWeight:500}:{}},workspacePopover:function(event,menuNode){var _this2=this,_props=this.props,pydio=_props.pydio,workspace=_props.workspace;event.stopPropagation();var target=event.target,offsetTop=target.getBoundingClientRect().top,viewportH=_pydioUtilDom2.default.getViewportHeight(),viewportW=_pydioUtilDom2.default.getViewportWidth(),popoverTop=viewportH-offsetTop<250;if(workspace.getOwner())_pydioHttpResourcesManager2.default.loadClassesAndApply(["ShareDialog"],function(){var popoverContent=React.createElement(ShareDialog.CellCard,{pydio:pydio,cellId:workspace.getId(),onDismiss:function(){_this2.setState({popoverOpen:!1})},onHeightChange:function(){_this2.setState({popoverHeight:500})},editorOneColumn:viewportW<700,rootNode:menuNode});_this2.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null})});else{var popoverContent=React.createElement(_WorkspaceCard2.default,{pydio:pydio,workspace:workspace,rootNode:menuNode,onDismiss:function(){_this2.setState({popoverOpen:!1})}});this.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null})}},render:function(){var _this3=this,_props2=this.props,workspace=_props2.workspace,pydio=_props2.pydio,onHoverLink=_props2.onHoverLink,onOutLink=_props2.onOutLink,showFoldersTree=_props2.showFoldersTree,nonActiveRoot=_props2.nonActiveRoot,current=pydio.user.getActiveRepository()===workspace.getId(),currentClass="workspace-entry",onHover=(pydio.MessageHash,void 0),onOut=void 0,onClick=void 0,additionalAction=void 0,treeToggle=void 0,style={};current&&(currentClass+=" workspace-current",style=this.getRootItemStyle(pydio.getContextHolder().getContextNode())),style=_extends({paddingLeft:16},style),currentClass+=" workspace-access-"+workspace.getAccessType(),onHoverLink&&(onHover=function(event){onHoverLink(event,workspace)}.bind(this)),onOutLink&&(onOut=function(event){onOutLink(event,workspace)}.bind(this)),onClick=this.onClick;var chatIcon=void 0,accent2=this.props.muiTheme.palette.accent2Color,icon="mdi mdi-folder",iconStyle={fontSize:20,marginRight:10,opacity:.3};"workspace-personal"===workspace.getRepositoryType()?icon="mdi mdi-folder-account":"cell"===workspace.getRepositoryType()&&(icon="icomoon-cells",iconStyle=_extends({},iconStyle,{fontSize:22}));var menuNode=void 0;if(workspace.getId()===pydio.user.activeRepository){if(menuNode=pydio.getContextHolder().getRootNode(),showFoldersTree){var children=menuNode.getChildren(),hasFolders=!1;if(children.forEach(function(c){c.isLeaf()||(hasFolders=!0)}),hasFolders){var toggleIcon=this.state.openFoldersTree?"mdi mdi-chevron-down":"mdi mdi-chevron-right";treeToggle=React.createElement("span",{style:{opacity:.3},className:"workspace-additional-action "+toggleIcon,onClick:this.toggleFoldersPanelOpen})}}iconStyle.opacity=1,iconStyle.color=accent2}else menuNode=new Node("/",!1,workspace.getLabel()),nonActiveRoot&&(menuNode=nonActiveRoot),menuNode.setRoot(!0),menuNode.getMetadata().set("repository_id",workspace.getId()),menuNode.getMetadata().set("workspaceEntry",workspace);var _state=this.state,popoverOpen=_state.popoverOpen,popoverAnchor=_state.popoverAnchor,popoverTop=_state.popoverTop,popoverHeight=_state.popoverHeight;if(_state.loading)additionalAction=React.createElement(_materialUi.CircularProgress,{size:20,thickness:3,style:{marginTop:2,marginRight:6,opacity:.5}});else{var addStyle=popoverOpen?{opacity:1}:{};popoverOpen&&(style=_extends({},style,{backgroundColor:"rgba(133, 133, 133, 0.1)"})),additionalAction=React.createElement("span",{className:"workspace-additional-action with-hover mdi mdi-dots-vertical",onClick:function(e){return _this3.workspacePopover(e,menuNode)},style:addStyle})}workspace.getOwner()&&(pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS")||(chatIcon=React.createElement(ChatIcon,{pydio:pydio,roomType:"WORKSPACE",objectId:workspace.getId()})));var title=workspace.getLabel();workspace.getDescription()&&(title+=" - "+workspace.getDescription());var entryIcon=React.createElement("span",{className:icon,style:iconStyle
}),wsBlock=React.createElement(ContextMenuWrapper,{node:menuNode,className:currentClass,onClick:onClick,onMouseOver:onHover,onMouseOut:onOut,style:style},entryIcon,React.createElement("span",{className:"workspace-label",title:title},workspace.getLabel()),chatIcon,treeToggle,React.createElement("span",{style:{flex:1}}),additionalAction,React.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,autoCloseWhenOffScreen:!1,canAutoPosition:!0,onRequestClose:function(){_this3.setState({popoverOpen:!1})},anchorOrigin:{horizontal:"right",vertical:popoverTop?"bottom":"center"},targetOrigin:{horizontal:"left",vertical:popoverTop?"bottom":"center"},zDepth:3,style:{overflow:"hidden",borderRadius:10,height:popoverHeight}},this.state.popoverContent));return showFoldersTree?React.createElement("div",null,wsBlock,React.createElement(FoldersTree,{pydio:pydio,dataModel:pydio.getContextHolder(),className:this.state.openFoldersTree?"open":"closed",draggable:!0,getItemStyle:this.getItemStyle})):wsBlock}}),ContextMenuWrapper=function(props){var canDrop=props.canDrop,isOver=props.isOver,connectDropTarget=props.connectDropTarget,className=props.className||"";return canDrop&&isOver&&(className+=" droppable-active"),React.createElement("div",_extends({},props,{className:className,ref:function(instance){var node=ReactDOM.findDOMNode(instance);"function"==typeof connectDropTarget&&connectDropTarget(node)}}))};ContextMenuWrapper=_reactDnd.DropTarget(Types.NODE_PROVIDER,nodeDropTarget,collectDrop)(ContextMenuWrapper),exports.default=WorkspaceEntry=muiThemeable()(WorkspaceEntry),exports.default=WorkspaceEntry,module.exports=exports.default},{"./WorkspaceCard":90,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/context-menu":"pydio/model/context-menu","pydio/model/node":"pydio/model/node","pydio/util/dom":"pydio/util/dom",react:"react","react-dnd":"react-dnd"}],92:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var React=require("react"),_require=require("material-ui"),ListItem=_require.ListItem,Avatar=_require.Avatar,FontIcon=_require.FontIcon,_require2=require("material-ui/styles"),muiThemeable=_require2.muiThemeable,Pydio=(require("color"),require("pydio")),Repository=require("pydio/model/repository"),WorkspaceEntryMaterial=function(_React$Component){_inherits(WorkspaceEntryMaterial,_React$Component);function WorkspaceEntryMaterial(){_classCallCheck(this,WorkspaceEntryMaterial),_React$Component.apply(this,arguments)}return WorkspaceEntryMaterial.prototype.onClick=function(){if(this.props.onWorkspaceTouchTap)return void this.props.onWorkspaceTouchTap(this.props.workspace.getId());this.props.workspace.getId()===this.props.pydio.user.activeRepository&&this.props.showFoldersTree?this.props.pydio.goTo("/"):this.props.pydio.triggerRepositoryChange(this.props.workspace.getId())},WorkspaceEntryMaterial.prototype.render=function(){var _props=this.props,workspace=_props.workspace,muiTheme=_props.muiTheme,leftAvatar=void 0,leftIcon=void 0,color=muiTheme.palette.primary1Color,backgroundColor="#ECEFF1";if(workspace.getOwner()||"inbox"===workspace.getAccessType()){color=MaterialUI.Style.colors.teal500;var icon="inbox"===workspace.getAccessType()?"file-multiple":"folder-outline";"remote"===workspace.getRepositoryType()&&(icon="cloud-outline"),leftAvatar=React.createElement(Avatar,{backgroundColor:backgroundColor,color:color,icon:React.createElement(FontIcon,{className:"mdi mdi-"+icon})})}else leftAvatar=React.createElement(Avatar,{style:{fontSize:18},backgroundColor:backgroundColor,color:color},workspace.getLettersBadge());return React.createElement(ListItem,{leftAvatar:leftAvatar,leftIcon:leftIcon,primaryText:workspace.getLabel(),secondaryText:workspace.getDescription(),onTouchTap:this.onClick.bind(this)})},WorkspaceEntryMaterial}(React.Component);WorkspaceEntryMaterial.propTypes={pydio:React.PropTypes.instanceOf(Pydio).isRequired,workspace:React.PropTypes.instanceOf(Repository).isRequired,muiTheme:React.PropTypes.object},exports.default=WorkspaceEntryMaterial=muiThemeable()(WorkspaceEntryMaterial),exports.default=WorkspaceEntryMaterial,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}],93:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _WorkspacesListMaterial=require("./WorkspacesListMaterial"),_WorkspacesListMaterial2=_interopRequireDefault(_WorkspacesListMaterial),React=require("react"),_require$requireLib=require("pydio").requireLib("boot"),ActionDialogMixin=_require$requireLib.ActionDialogMixin,CancelButtonProviderMixin=_require$requireLib.CancelButtonProviderMixin,WorkspacePickerDialog=React.createClass({displayName:"WorkspacePickerDialog",mixins:[ActionDialogMixin,CancelButtonProviderMixin],getDefaultProps:function(){return{dialogTitleId:"user_home.90",dialogSize:"sm",dialogPadding:!1,dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){this.dismiss()},workspaceTouchTap:function(wsId){this.dismiss(),UploaderModel.Store.getInstance().handleDropEventResults(this.props.items,this.props.files,new AjxpNode("/"),null,null,wsId),this.props.switchAtUpload&&pydio.triggerRepositoryChange(wsId)},render:function(){var _props=this.props,pydio=_props.pydio,files=_props.files,legend=files&&files[0]?React.createElement("div",{style:{fontSize:13,padding:16,backgroundColor:"#FFEBEE"}},pydio.MessageHash["user_home.89"],": ",files[0].name):void 0;return React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},legend,React.createElement(_WorkspacesListMaterial2.default,{pydio:pydio,workspaces:pydio.user?pydio.user.getRepositoriesList():[],showTreeForWorkspace:!1,onWorkspaceTouchTap:this.workspaceTouchTap,filterByType:"entries",sectionTitleStyle:{display:"none"},style:{flex:1,overflowY:"auto",maxHeight:400}}))}});exports.default=WorkspacePickerDialog,module.exports=exports.default},{"./WorkspacesListMaterial":95,pydio:"pydio",react:"react"}],94:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_WorkspaceEntry=require("./WorkspaceEntry"),_WorkspaceEntry2=_interopRequireDefault(_WorkspaceEntry),_pydioModelRepository=require("pydio/model/repository"),_pydioModelRepository2=_interopRequireDefault(_pydioModelRepository),_pydioModelMetaNodeProvider=require("pydio/model/meta-node-provider"),_pydioModelMetaNodeProvider2=_interopRequireDefault(_pydioModelMetaNodeProvider),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_materialUi=require("material-ui"),_color=require("color"),_color2=_interopRequireDefault(_color),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),withVerticalScroll=_Pydio$requireLib.withVerticalScroll,ModernTextField=_Pydio$requireLib.ModernTextField,_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,Entries=function(_React$Component){_inherits(Entries,_React$Component);function Entries(props){_classCallCheck(this,Entries),_React$Component.call(this,props),this.state={toggleFilter:!1,filterValue:""}}return Entries.prototype.computePagination=function(entries){if(!entries||!entries.length)return{use:!1};var pageSize=15;if(entries.length<=pageSize)return{use:!1};var page=this.state.page,activeWorkspace=this.props.activeWorkspace;if(!page&&(page=1,activeWorkspace)){var wsIndex=entries.map(function(ws){return ws.getId()}).indexOf(activeWorkspace);wsIndex>-1&&(page=Math.floor(wsIndex/pageSize)+1)}for(var max=Math.ceil(entries.length/pageSize),sliceStart=(page-1)*pageSize,sliceEnd=Math.min(page*pageSize,entries.length),pages=[],i=1;i<=max;i++)pages.push(i);return{use:!0,sliceStart:sliceStart,sliceEnd:sliceEnd,total:entries.length,pages:pages,page:page,pageSize:pageSize}},Entries.prototype.renderPagination=function(pagination){var _this=this,titleStyle=this.props.titleStyle,page=pagination.page,pages=pagination.pages,sliceStart=pagination.sliceStart,sliceEnd=pagination.sliceEnd,total=pagination.total,chevStyles={style:{width:36,height:36,padding:6},iconStyle:{color:titleStyle.color}};return _react2.default.createElement("div",{style:{display:"flex",backgroundColor:"rgba(0, 0, 0, 0.03)",color:titleStyle.color,alignItems:"center",justifyContent:"center",fontWeight:400}},_react2.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-left",disabled:1===page,onTouchTap:function(){return _this.setState({page:page-1})}},chevStyles)),_react2.default.createElement("div",null,sliceStart+1,"-",sliceEnd," of ",total),_react2.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-right",disabled:page===pages.length,onTouchTap:function(){return _this.setState({page:page+1})}},chevStyles)))},Entries.prototype.render=function(){var _this2=this,_props=this.props,title=_props.title,entries=_props.entries,filterHint=_props.filterHint,titleStyle=_props.titleStyle,pydio=_props.pydio,createAction=_props.createAction,activeWorkspace=_props.activeWorkspace,palette=_props.palette,buttonStyles=_props.buttonStyles,emptyState=_props.emptyState,nonActiveRoots=_props.nonActiveRoots,_state=this.state,toggleFilter=_state.toggleFilter,filterValue=_state.filterValue,filterFunc=function(t,f,ws){return!t||!f||ws.getLabel().toLowerCase().indexOf(f.toLowerCase())>=0},wss=entries.filter(function(ws){return filterFunc(toggleFilter,filterValue,ws)}),pagination=this.computePagination(wss);pagination.use&&(wss=wss.slice(pagination.sliceStart,pagination.sliceEnd));var uniqueResult=void 0;return toggleFilter&&filterValue&&1===wss.length&&wss[0].getId()!==activeWorkspace&&(uniqueResult=wss[0]),_react2.default.createElement("div",null,!toggleFilter&&_react2.default.createElement("div",{key:"shared-title",className:"section-title",style:titleStyle},_react2.default.createElement("span",{style:{cursor:"pointer"},title:filterHint,onClick:function(){_this2.setState({toggleFilter:!0})}},title,_react2.default.createElement("span",{style:{fontSize:12,opacity:"0.4",marginLeft:3},className:"mdi mdi-filter"})),createAction),toggleFilter&&_react2.default.createElement("div",{key:"shared-title",className:"section-title",style:_extends({},titleStyle,{paddingLeft:12,paddingRight:8,textTransform:"none",transition:"none"})},_react2.default.createElement(ModernTextField,{focusOnMount:!0,fullWidth:!0,style:{marginTop:-16,marginBottom:-16,top:-1},hintText:filterHint,hintStyle:{fontWeight:400},inputStyle:{fontWeight:400,color:palette.primary1Color},value:filterValue,onChange:function(e,v){_this2.setState({filterValue:v})},onBlur:function(){setTimeout(function(){filterValue||_this2.setState({toggleFilter:!1})},150)},onKeyPress:function(ev){"Enter"===ev.key&&uniqueResult&&(pydio.triggerRepositoryChange(uniqueResult.getId()),_this2.setState({filterValue:"",toggleFilter:!1}))}}),uniqueResult&&_react2.default.createElement("div",{style:_extends({},buttonStyles.button,{right:28,lineHeight:"24px",fontSize:20,opacity:.5})},_react2.default.createElement("span",{className:"mdi mdi-keyboard-return"})),_react2.default.createElement(_materialUi.IconButton,{key:"close-filter",iconClassName:"mdi mdi-close",style:buttonStyles.button,iconStyle:buttonStyles.icon,onTouchTap:function(){_this2.setState({toggleFilter:!1,filterValue:""})}})),_react2.default.createElement("div",{className:"workspaces"},wss.map(function(ws){return _react2.default.createElement(_WorkspaceEntry2.default,{pydio:pydio,key:ws.getId(),workspace:ws,showFoldersTree:activeWorkspace&&activeWorkspace===ws.getId(),nonActiveRoot:nonActiveRoots[ws.getSlug()]})}),!entries.length&&emptyState,pagination.use&&this.renderPagination(pagination)))},Entries}(_react2.default.Component),WorkspacesList=function(_React$Component2){_inherits(WorkspacesList,_React$Component2);function WorkspacesList(props,context){var _this3=this;_classCallCheck(this,WorkspacesList),_React$Component2.call(this,props,context),this.state=this.stateFromPydio(props.pydio),this._reloadObserver=function(){_this3.setState(_this3.stateFromPydio(_this3.props.pydio))}}return WorkspacesList.prototype.shouldComponentUpdate=function(nextProps,nextState){return nextState.random!==this.state.random||nextState.popoverOpen!==this.state.popoverOpen},WorkspacesList.prototype.stateFromPydio=function(pydio){var workspaces=pydio.user?pydio.user.getRepositoriesList():[],wsList=[];workspaces.forEach(function(o){return wsList.push(o)});var notActives=wsList.filter(function(ws){return!(pydio&&pydio.user&&pydio.user.activeRepository===ws.getId())}).filter(function(ws){return ws.getNodeProviderDef()&&"MetaNodeProvider"===ws.getNodeProviderDef().name});return notActives.length&&this.loadNonActiveRoots(notActives),{random:Math.random(),workspaces:workspaces,nonActiveRoots:{},activeWorkspace:!!pydio.user&&pydio.user.activeRepository,activeRepoIsHome:pydio.user&&"homepage"===pydio.user.activeRepository}},WorkspacesList.prototype.loadNonActiveRoots=function(workspaces){var _this4=this;_pydioModelMetaNodeProvider2.default.loadRoots(workspaces.map(function(ws){return ws.getSlug()})).then(function(nonActiveRoots){_this4.setState({nonActiveRoots:nonActiveRoots,random:Math.random()})}).catch(function(e){_this4.setState({nonActiveRoots:{},random:Math.random()})})},WorkspacesList.prototype.componentDidMount=function(){this.props.pydio.observe("repository_list_refreshed",this._reloadObserver)},WorkspacesList.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("repository_list_refreshed",this._reloadObserver)},WorkspacesList.prototype.createRepositoryEnabled=function(){return this.props.pydio.getPluginConfigs("auth").get("USER_CREATE_CELLS")},WorkspacesList.prototype.render=function(){var _this6=this,createAction=void 0,_state2=this.state,workspaces=_state2.workspaces,activeWorkspace=_state2.activeWorkspace,nonActiveRoots=_state2.nonActiveRoots,popoverOpen=_state2.popoverOpen,popoverAnchor=_state2.popoverAnchor,popoverContent=_state2.popoverContent,_props2=this.props,pydio=_props2.pydio,className=_props2.className,muiTheme=_props2.muiTheme,sectionTitleStyle=_props2.sectionTitleStyle,wsList=[];workspaces.forEach(function(o){return wsList.push(o)}),wsList=wsList.filter(function(ws){return!_pydioModelRepository2.default.isInternal(ws.getId())}),wsList.sort(function(oA,oB){var res=oA.getLabel().localeCompare(oB.getLabel(),void 0,{numeric:!0});return 0===res?oA.getSlug().localeCompare(oB.getSlug()):res});var entries=wsList.filter(function(ws){return!ws.getOwner()}),sharedEntries=wsList.filter(function(ws){return ws.getOwner()}),messages=pydio.MessageHash,createClick=function(event){var _this5=this,target=event.target;_pydioHttpResourcesManager2.default.loadClassesAndApply(["ShareDialog"],function(){_this5.setState({popoverOpen:!0,popoverAnchor:target,popoverContent:_react2.default.createElement(ShareDialog.CreateCellDialog,{pydio:pydio,onDismiss:function(){_this5.setState({popoverOpen:!1})}})})})}.bind(this),buttonStyles={button:{width:36,height:36,padding:6,position:"absolute",right:4,top:8},icon:{fontSize:22,color:muiTheme.palette.primary1Color}};this.createRepositoryEnabled()&&sharedEntries.length&&(createAction=_react2.default.createElement(_materialUi.IconButton,{key:"create-cell",style:buttonStyles.button,iconStyle:buttonStyles.icon,iconClassName:"mdi mdi-plus",tooltip:messages[417],tooltipPosition:"top-left",onTouchTap:createClick}));var classNames=["user-workspaces-list"];return className&&classNames.push(className),_react2.default.createElement("div",{className:classNames.join(" ")},_react2.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,onRequestClose:function(){_this6.setState({popoverOpen:!1})},anchorOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},targetOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},zDepth:3,style:{borderRadius:6,overflow:"hidden",marginLeft:sharedEntries.length?-10:0,marginTop:sharedEntries.length?-10:0}},popoverContent),entries.length>0&&_react2.default.createElement(Entries,{title:messages[468],entries:entries,filterHint:messages["ws.quick-filter"],titleStyle:_extends({},sectionTitleStyle,{marginTop:5,position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,activeWorkspace:activeWorkspace,nonActiveRoots:nonActiveRoots,palette:muiTheme.palette,buttonStyles:buttonStyles}),_react2.default.createElement(Entries,{title:messages[469],entries:sharedEntries,filterHint:messages["cells.quick-filter"],titleStyle:_extends({},sectionTitleStyle,{position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,createAction:createAction,activeWorkspace:activeWorkspace,nonActiveRoots:nonActiveRoots,palette:muiTheme.palette,buttonStyles:buttonStyles,emptyState:_react2.default.createElement("div",{style:{textAlign:"center",color:_color2.default(muiTheme.palette.primary1Color).fade(.6).toString()}},_react2.default.createElement("div",{className:"icomoon-cells",style:{fontSize:80}}),this.createRepositoryEnabled()&&_react2.default.createElement(_materialUi.FlatButton,{style:{color:muiTheme.palette.accent2Color,marginTop:5},primary:!0,label:messages[418],onTouchTap:createClick}),_react2.default.createElement("div",{style:{fontSize:13,padding:"5px 20px"}},messages[633]))}))},WorkspacesList}(_react2.default.Component);WorkspacesList.PropTypes={pydio:_react2.default.PropTypes.instanceOf(_pydio2.default),workspaces:_react2.default.PropTypes.instanceOf(Map),onHoverLink:_react2.default.PropTypes.func,onOutLink:_react2.default.PropTypes.func,className:_react2.default.PropTypes.string,style:_react2.default.PropTypes.object,sectionTitleStyle:_react2.default.PropTypes.object,filterByType:_react2.default.PropTypes.oneOf(["shared","entries","create"])},exports.default=WorkspacesList=withVerticalScroll(WorkspacesList),exports.default=WorkspacesList=muiThemeable()(WorkspacesList),exports.default=WorkspacesList,module.exports=exports.default},{"./WorkspaceEntry":91,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/meta-node-provider":"pydio/model/meta-node-provider","pydio/model/repository":"pydio/model/repository",react:"react"}],95:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _WorkspaceEntryMaterial=require("./WorkspaceEntryMaterial"),_WorkspaceEntryMaterial2=_interopRequireDefault(_WorkspaceEntryMaterial),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),React=require("react"),Repository=require("pydio/model/repository"),_require=require("material-ui"),List=_require.List,Subheader=_require.Subheader,Divider=_require.Divider,WorkspacesListMaterial=function(_React$Component){_inherits(WorkspacesListMaterial,_React$Component);function WorkspacesListMaterial(){_classCallCheck(this,WorkspacesListMaterial),_React$Component.apply(this,arguments)}return WorkspacesListMaterial.prototype.render=function(){var _props=this.props,workspaces=_props.workspaces,showTreeForWorkspace=_props.showTreeForWorkspace,filterByType=_props.filterByType,inboxEntry=void 0,entries=[],sharedEntries=[],remoteShares=[];workspaces.forEach(function(object,key){if(!Repository.isInternal(object.getId())&&!object.hasContentFilter()&&"declined"!==object.getAccessStatus()){var entry=React.createElement(_WorkspaceEntryMaterial2.default,_extends({},this.props,{key:key,workspace:object,showFoldersTree:showTreeForWorkspace&&showTreeForWorkspace===key}));"inbox"==object.getAccessType()?inboxEntry=entry:object.getOwner()?"remote"===object.getRepositoryType()?remoteShares.push(entry):sharedEntries.push(entry):entries.push(entry)}}.bind(this));var messages=pydio.MessageHash,allEntries=void 0;return sharedEntries.length&&sharedEntries.unshift(React.createElement(Subheader,null,messages[626])),inboxEntry&&(sharedEntries.length&&sharedEntries.unshift(React.createElement(Divider,null)),sharedEntries.unshift(inboxEntry),sharedEntries.unshift(React.createElement(Subheader,null,messages[630]))),remoteShares.length&&(remoteShares.unshift(React.createElement(Subheader,null,messages[627])),remoteShares.unshift(React.createElement(Divider,null)),sharedEntries=sharedEntries.concat(remoteShares)),"entries"===filterByType&&entries.unshift(React.createElement(Subheader,null,messages[468])),allEntries=filterByType?"shared"===filterByType?sharedEntries:entries:entries.concat(sharedEntries),React.createElement(List,{style:this.props.style},allEntries)},WorkspacesListMaterial}(React.Component);WorkspacesListMaterial.propTypes={pydio:React.PropTypes.instanceOf(_pydio2.default),workspaces:React.PropTypes.instanceOf(Map),filterByType:React.PropTypes.oneOf(["shared","entries","create"]),sectionTitleStyle:React.PropTypes.object,showTreeForWorkspace:React.PropTypes.string,onHoverLink:React.PropTypes.func,onOutLink:React.PropTypes.func,className:React.PropTypes.string,style:React.PropTypes.object},exports.default=WorkspacesListMaterial,module.exports=exports.default},{"./WorkspaceEntryMaterial":92,"material-ui":"material-ui",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}]},{},[65])(65)});