!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PydioWorkspaces=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict"},{}],2:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},EDITOR_SET_ACTIVE_TAB="EDITOR_SET_ACTIVE_TAB";exports.EDITOR_SET_ACTIVE_TAB=EDITOR_SET_ACTIVE_TAB;var editorSetActiveTab=function(activeTabId){return{type:EDITOR_SET_ACTIVE_TAB,activeTabId:activeTabId}};exports.editorSetActiveTab=editorSetActiveTab;var EDITOR_MODIFY="EDITOR_MODIFY";exports.EDITOR_MODIFY=EDITOR_MODIFY;var editorModify=function(data){return _extends({type:EDITOR_MODIFY},data)};exports.editorModify=editorModify;var TAB_CREATE="TAB_CREATE";exports.TAB_CREATE=TAB_CREATE;var tabCreate=function(data){return _extends({type:TAB_CREATE},data)};exports.tabCreate=tabCreate;var TAB_MODIFY="TAB_MODIFY";exports.TAB_MODIFY=TAB_MODIFY;var tabModify=function(data){return _extends({type:TAB_MODIFY},data)};exports.tabModify=tabModify;var TAB_ADD_CONTROLS="TAB_ADD_CONTROLS";exports.TAB_ADD_CONTROLS=TAB_ADD_CONTROLS;var tabAddControls=function(data){return _extends({type:TAB_ADD_CONTROLS},data)};exports.tabAddControls=tabAddControls;var TAB_DELETE="TAB_DELETE";exports.TAB_DELETE=TAB_DELETE;var tabDelete=function(id){return{type:TAB_DELETE,id:id}};exports.tabDelete=tabDelete;var TAB_DELETE_ALL="TAB_DELETE_ALL";exports.TAB_DELETE_ALL=TAB_DELETE_ALL;var tabDeleteAll=function(){return{type:TAB_DELETE_ALL}};exports.tabDeleteAll=tabDeleteAll},{}],3:[function(require,module,exports){"use strict";exports.__esModule=!0;var onLocate=(require("../utils"),function(_ref){var node=_ref.node,editors=pydio.Registry.findEditorsForMime("ol_layer");editors.length&&pydio.UI.openCurrentSelectionInEditor(editors[0],node)});exports.onLocate=onLocate},{"../utils":7}],4:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onToggleResolution=function(_ref){var dispatch=_ref.dispatch;return function(high){return dispatch(_utils.EditorActions.editorModify({resolution:high?"hi":"lo"}))}};exports.onToggleResolution=onToggleResolution},{"../utils":7}],5:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onSelectionChange=function(_ref){var dispatch=_ref.dispatch,tab=_ref.tab;return function(node){return dispatch(_utils.EditorActions.tabModify({id:tab.id,title:node.getLabel(),node:node}))}};exports.onSelectionChange=onSelectionChange;var onTogglePlaying=function(_ref2){var dispatch=_ref2.dispatch,tab=_ref2.tab;return function(playing){return dispatch(_utils.EditorActions.tabModify({id:tab.id,playing:playing}))}};exports.onTogglePlaying=onTogglePlaying},{"../utils":7}],6:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils"),onSizeChange=function(_ref){var dispatch=_ref.dispatch;return function(data){return dispatch(_utils.EditorActions.editorModify(data))}};exports.onSizeChange=onSizeChange},{"../utils":7}],7:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}var _editorActions=require("./editor/actions"),EditorActions=_interopRequireWildcard(_editorActions),_contentActions=require("./content/actions"),contentActions=_interopRequireWildcard(_contentActions),_resolutionActions=require("./resolution/actions"),resolutionActions=_interopRequireWildcard(_resolutionActions),_selectionActions=require("./selection/actions"),selectionActions=_interopRequireWildcard(_selectionActions),_sizeActions=require("./size/actions"),sizeActions=_interopRequireWildcard(_sizeActions),_localisationActions=require("./localisation/actions"),localisationActions=_interopRequireWildcard(_localisationActions);exports.EditorActions=EditorActions;var getActions=(_extends({},contentActions,resolutionActions,selectionActions,sizeActions,localisationActions),function(_ref){var editorData=_ref.editorData;return editorData.editorActions&&FuncUtils.getFunctionByName(editorData.editorActions,window)||{}}),handler=function(func,_ref2){var dispatch=_ref2.dispatch,tab=_ref2.tab,fn=getActions(tab)[func];return"function"==typeof fn&&fn({dispatch:dispatch,tab:tab})};exports.handler=handler;var toTitleCase=function(str){return str.replace(/\w\S*/g,function(txt){return""+txt.charAt(0).toUpperCase()+txt.substr(1)})};exports.toTitleCase=toTitleCase;var getDisplayName=function(Component){return Component.displayName||Component.name||"Component"};exports.getDisplayName=getDisplayName;var getRatio={cover:function(_ref3){var widthRatio=_ref3.widthRatio,heightRatio=_ref3.heightRatio;return Math.max(widthRatio,heightRatio)},contain:function(_ref4){var widthRatio=_ref4.widthRatio,heightRatio=_ref4.heightRatio;return Math.min(widthRatio,heightRatio)},auto:function(_ref5){return _ref5.scale}};exports.getRatio=getRatio;var getBoundingRect=function(element){var style=window.getComputedStyle(element),keys=["left","right","top","bottom"],margin=keys.reduce(function(current,key){var _extends2;return _extends({},current,(_extends2={},_extends2[key]=parseInt(style["margin-"+key])||0,_extends2))},{}),padding=keys.reduce(function(current,key){var _extends3;return _extends({},current,(_extends3={},_extends3[key]=parseInt(style["padding-"+key])||0,_extends3))},{}),border=keys.reduce(function(current,key){var _extends4;return _extends({},current,(_extends4={},_extends4[key]=parseInt(style["border-"+key])||0,_extends4))},{}),rect=element.getBoundingClientRect(),res={left:rect.left-margin.left,right:rect.right-margin.right-padding.left-padding.right,top:rect.top-margin.top,bottom:rect.bottom-margin.bottom-padding.top-padding.bottom-border.bottom};return _extends({},res,{width:res.right-res.left,height:res.bottom-res.top})};exports.getBoundingRect=getBoundingRect},{"./content/actions":1,"./editor/actions":2,"./localisation/actions":3,"./resolution/actions":4,"./selection/actions":5,"./size/actions":6}],8:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var OpenNodesModel=function(_Observable){_inherits(OpenNodesModel,_Observable);function OpenNodesModel(){var _this=this;_classCallCheck(this,OpenNodesModel),_Observable.call(this),this._openNodes=[],this._updatedTitles=new Map,pydio.UI.registerEditorOpener(this),pydio.observe("repository_list_refreshed",function(){_this._openNodes=[],_this.notify("update",_this._openNodes)})}return OpenNodesModel.getInstance=function(){return OpenNodesModel.__INSTANCE||(OpenNodesModel.__INSTANCE=new OpenNodesModel),OpenNodesModel.__INSTANCE},OpenNodesModel.prototype.openEditorForNode=function(selectedNode,editorData){this.pushNode(selectedNode,editorData)},OpenNodesModel.prototype.updateNodeTitle=function(object,newTitle){this._updatedTitles.set(object,newTitle),this.notify("titlesUpdated")},OpenNodesModel.prototype.getObjectLabel=function(object){return this._updatedTitles.has(object)?this._updatedTitles.get(object):object.node.getLabel()},OpenNodesModel.prototype.pushNode=function(node,editorData){var found=!1,editorClass=editorData?editorData.editorClass:null,object={node:node,editorData:editorData};this.notify("willPushNode",object),this._openNodes.map(function(o){(o.node===node&&o.editorData&&o.editorData.editorClass==editorClass||!o.editorData&&!editorClass)&&(found=!0,object=o)}),found||this._openNodes.push(object),this.notify("nodePushed",object),this.notify("update",this._openNodes)},OpenNodesModel.prototype.removeNode=function(object){this.notify("willRemoveNode",object);var index=this._openNodes.indexOf(object);this._updatedTitles.has(object)&&this._updatedTitles.delete(object),this._openNodes=LangUtils.arrayWithout(this._openNodes,index),this.notify("nodeRemovedAtIndex",index),this.notify("update",this._openNodes)},OpenNodesModel.prototype.getNodes=function(){return this._openNodes},OpenNodesModel}(Observable);exports.default=OpenNodesModel,module.exports=exports.default},{}],9:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard),_pydioUtilPath=require("pydio/util/path"),_pydioUtilPath2=_interopRequireDefault(_pydioUtilPath),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,FileInfoCard=function(_React$Component){_inherits(FileInfoCard,_React$Component);function FileInfoCard(props){var _this=this;_classCallCheck(this,FileInfoCard),_React$Component.call(this,props),this._observer=function(){_this.forceUpdate()},props.node&&props.node.observe("node_replaced",this._observer)}return FileInfoCard.prototype.componentWillReceiveProps=function(newProps){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer),newProps.node&&newProps.node.observe("node_replaced",this._observer)},FileInfoCard.prototype.componentWillUnmount=function(){this.props.node&&this.props.node.stopObserving("node_replaced",this._observer)},FileInfoCard.prototype.render=function(){var _props=this.props,node=_props.node,getMessage=_props.getMessage,meta=node.getMetadata(),size=meta.get("bytesize"),hSize=_pydioUtilPath2.default.roundFileSize(parseInt(size)),unit=_pydio2.default.getMessages().byte_unit_symbol||"B",date=new Date;date.setTime(1e3*parseInt(meta.get("ajxp_modiftime")));var formattedDate=_pydioUtilPath2.default.formatModifDate(date),data=[{key:"size",label:getMessage("2"),value:hSize,hoverValue:size+" "+unit},{key:"date",label:getMessage("4"),value:formattedDate}],w=meta.get("image_width"),h=meta.get("image_height");return w&&h&&(data=[].concat(data,[{key:"image",label:getMessage("135"),value:w+"px X "+h+"px"}])),_react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{identifier:"file-info",title:getMessage("341"),standardData:data,contentStyle:{paddingBottom:10},icon:"information-outline",iconColor:"#2196f3"}))},FileInfoCard}(_react2.default.Component);exports.default=FileInfoCard=PydioContextConsumer(FileInfoCard),exports.default=FileInfoCard,module.exports=exports.default},{"./InfoPanelCard":12,pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],10:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard),_viewsFilePreview=require("../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),GenericInfoCard=function(_React$Component){_inherits(GenericInfoCard,_React$Component);function GenericInfoCard(props){_classCallCheck(this,GenericInfoCard),_React$Component.call(this,props),this.state=this.build(props)}return GenericInfoCard.prototype.componentWillReceiveProps=function(nextProps){this.setState(this.build(nextProps))},GenericInfoCard.prototype.build=function(props){var isMultiple=void 0,isLeaf=void 0,isDir=void 0,recycleContext=void 0,node=props.node,nodes=props.nodes;if(nodes)isMultiple=!0,recycleContext=nodes[0].hasAjxpMimeInBranch("ajxp_recycle");else{if(!node)return{ready:!1};isLeaf=node.isLeaf(),isDir=!isLeaf,recycleContext=node.hasAjxpMimeInBranch("ajxp_recycle")}return{isMultiple:isMultiple,isLeaf:isLeaf,isDir:isDir,recycleContext:recycleContext,ready:!0}},GenericInfoCard.prototype.render=function(){var _state=this.state,ready=_state.ready,isMultiple=_state.isMultiple,recycleContext=_state.recycleContext;if(!ready)return null;var toolbars=[];if(recycleContext?toolbars.push("info_panel_recycle"):toolbars.push("info_panel"),isMultiple){var nodes=this.props.nodes,more=void 0;if(nodes.length>10){var moreNumber=nodes.length-10;nodes=nodes.slice(0,10),more=_react2.default.createElement("div",null,"... and ",moreNumber," more.")}return _react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{primaryToolbars:toolbars}),_react2.default.createElement("div",{style:{padding:"0"}},nodes.map(function(node){return _react2.default.createElement("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px solid #eeeeee"}},_react2.default.createElement(_viewsFilePreview2.default,{key:node.getPath(),style:{height:50,width:50,fontSize:25,flexShrink:0},node:node,loadThumbnail:!0,richPreview:!1}),_react2.default.createElement("div",{style:{flex:1,fontSize:14,marginLeft:6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},node.getLabel()))}),more))}var processing=!!this.props.node.getMetadata().get("Processing");return toolbars.push("info_panel_share"),_react2.default.createElement(_InfoPanelCard2.default,_extends({},this.props,{primaryToolbars:toolbars}),_react2.default.createElement(_viewsFilePreview2.default,{key:this.props.node.getPath(),style:{backgroundColor:"white",height:200,padding:0},node:this.props.node,loadThumbnail:this.state.isLeaf&&!processing,richPreview:this.state.isLeaf,processing:processing}))},GenericInfoCard}(_react2.default.Component);exports.default=GenericInfoCard,module.exports=exports.default},{"../views/FilePreview":49,"./InfoPanelCard":12,react:"react"}],11:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_pydioUtilXml=require("pydio/util/xml"),_pydioUtilXml2=_interopRequireDefault(_pydioUtilXml),_require$requireLib=require("pydio").requireLib("hoc"),withVerticalScroll=(_require$requireLib.Animations,_require$requireLib.withVerticalScroll),Template=function(_ref){var id=_ref.id,style=_ref.style,children=_ref.children;return _react2.default.createElement("div",{id:id,style:style},children)},InfoPanel=function(_React$Component){_inherits(InfoPanel,_React$Component);function InfoPanel(props){_classCallCheck(this,InfoPanel),_React$Component.call(this,props);var initTemplates=ConfigsParser.parseConfigs();this._updateExpected=!0,this.state={templates:initTemplates,displayData:this.selectionToTemplates(initTemplates)}}return InfoPanel.prototype.shouldComponentUpdate=function(){return this._updateExpected},InfoPanel.prototype.componentDidMount=function(){var _this=this,scrollerRefresh=function(){try{_this.context.scrollArea.refresh()}catch(e){}};this._updateHandler=function(){_this._updateExpected=!0,_this.setState({displayData:_this.selectionToTemplates()},function(){_this._updateExpected=!1,_this.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this._componentConfigHandler=function(){_this._updateExpected=!0,_this.setState({templates:ConfigsParser.parseConfigs()},function(){_this._updateExpected=!1,_this.context.scrollArea&&setTimeout(scrollerRefresh,750)})},this.props.pydio.observe("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.observe("registry_loaded",this._componentConfigHandler),this.state.displayData&&this.state.displayData.TEMPLATES&&this.props.onContentChange&&this.props.onContentChange(this.state.displayData.TEMPLATES.length)},InfoPanel.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("actions_refreshed",this._updateHandler),this.props.pydio.observe("selection_reloaded",this._updateHandler),this.props.pydio.stopObserving("registry_loaded",this._componentConfigHandler)},InfoPanel.prototype.selectionToTemplates=function(){var initTemplates=arguments.length<=0||void 0===arguments[0]?null:arguments[0],refTemplates=initTemplates||this.state.templates,dataModel=this.props.dataModel,selection=dataModel.getSelectedNodes();selection&&selection.length||dataModel.getContextNode()!==dataModel.getRootNode()||(selection=[dataModel.getContextNode()]);var primaryMime=void 0,templates=[],uniqueNode=void 0,data={};return!selection||selection.length<1?primaryMime="no_selection":selection.length>1?(primaryMime="generic_multiple",data.nodes=selection):(uniqueNode=selection[0],uniqueNode.isLeaf()?primaryMime="generic_file":(primaryMime="generic_dir",this.props.dataModel.getRootNode()===uniqueNode&&(primaryMime="ajxp_root_node")),data.node=uniqueNode),refTemplates.has(primaryMime)&&(templates=templates.concat(refTemplates.get(primaryMime))),uniqueNode&&refTemplates.forEach(function(list,mimeName){mimeName!==primaryMime&&(0===mimeName.indexOf("meta:")&&uniqueNode.getMetadata().has(mimeName.substr(5))?templates=templates.concat(list):uniqueNode.getAjxpMime()===mimeName&&(templates=templates.concat(list)))}),this.props.onContentChange&&!initTemplates&&this.props.onContentChange(templates.length),templates.sort(function(a,b){return a.WEIGHT===b.WEIGHT?0:a.WEIGHT>b.WEIGHT?1:-1}),{TEMPLATES:templates,DATA:data}},InfoPanel.prototype.render=function(){var _this2=this,templates=this.state.displayData.TEMPLATES.map(function(tpl,i){var component=tpl.COMPONENT,_component$split=component.split(".",2),namespace=_component$split[0],name=_component$split[1];return _react2.default.createElement(PydioReactUI.AsyncComponent,_extends({},_this2.state.displayData.DATA,_this2.props,{key:"ip_"+component,namespace:namespace,componentName:name}))});return _react2.default.createElement(Template,{style:this.props.style},templates)},InfoPanel}(_react2.default.Component);InfoPanel.propTypes={dataModel:_propTypes2.default.instanceOf(PydioDataModel).isRequired,pydio:_propTypes2.default.instanceOf(Pydio).isRequired,style:_propTypes2.default.object},InfoPanel.contextTypes={scrollArea:_propTypes2.default.object},exports.default=InfoPanel=withVerticalScroll(InfoPanel,{id:"info_panel"});var ConfigsParser=function(){function ConfigsParser(){_classCallCheck(this,ConfigsParser)}return ConfigsParser.parseConfigs=function(){var panelsNodes=_pydioUtilXml2.default.XPathSelectNodes(pydio.getXmlRegistry(),'client_configs/component_config[@component="InfoPanel"]/infoPanel'),panels=new Map;return panelsNodes.forEach(function(node){if(node.getAttribute("reactComponent")){var mimes=node.getAttribute("mime").split(","),component=node.getAttribute("reactComponent");mimes.map(function(mime){panels.has(mime)||panels.set(mime,[]),panels.get(mime).push({COMPONENT:component,THEME:node.getAttribute("theme"),ATTRIBUTES:node.getAttribute("attributes"),WEIGHT:node.getAttribute("weight")?parseInt(node.getAttribute("weight")):0})})}}),panels},ConfigsParser}();exports.default=InfoPanel,module.exports=exports.default},{"prop-types":"prop-types",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_color=require("color"),_color2=_interopRequireDefault(_color),_materialUi=require("material-ui"),_materialUiStyles=require("material-ui/styles"),getStyles=function(palette){var colorHue=_color2.default(palette.primary1Color).hsl().array()[0];return{card:{panel:{backgroundColor:"white",borderRadius:6,boxShadow:"rgba(0, 0, 0, .15) 0px 0px 12px",margin:10,marginBottom:0,overflow:"hidden"},header:{backgroundColor:"transparent",position:"relative",color:new _color2.default({h:colorHue,s:30,l:43}).toString(),fontSize:14,fontWeight:500,padding:"12px 16px",cursor:"pointer"},content:{backgroundColor:"transparent",paddingBottom:0},headerIcon:{position:"absolute",top:-1,right:0,color:"#ccc"},actions:{padding:2,textAlign:"right",borderTop:"1px solid #e0e0e0"}},toolbar:{container:{backgroundColor:palette.accent2Color,justifyContent:"flex-end",position:"relative"},button:{color:"white",paddingRight:8,paddingLeft:8},flatButton:{minWidth:0}}}},storageKey="pydio.layout.infoPanel.cardStatuses",CardsStates={};if(localStorage.getItem(storageKey))try{CardsStates=JSON.parse(localStorage.getItem(storageKey))}catch(e){}var InfoPanelCard=function(_React$Component){_inherits(InfoPanelCard,_React$Component);function InfoPanelCard(props){_classCallCheck(this,InfoPanelCard),_React$Component.call(this,props),props.identifier&&void 0!==CardsStates[props.identifier]?this.state={open:CardsStates[props.identifier]}:props.identifier?this.state={open:props.defaultOpen||!1}:this.state={open:!0}}return InfoPanelCard.prototype.toggle=function(){var newState=!this.state.open;this.setState({open:newState}),this.props.identifier&&(CardsStates[this.props.identifier]=newState,localStorage.setItem(storageKey,JSON.stringify(CardsStates)))},InfoPanelCard.prototype.render=function(){var _this=this,_state=this.state,open=_state.open,hoverRow=_state.hoverRow,_props=this.props,primaryToolbars=_props.primaryToolbars,muiTheme=_props.muiTheme,pydio=_props.pydio,standardData=_props.standardData,styles=getStyles(muiTheme.palette),icon=_react2.default.createElement("div",{style:styles.card.headerIcon},_react2.default.createElement(_materialUi.IconButton,{onClick:function(){_this.toggle()},iconStyle:{color:styles.card.headerIcon.color},iconClassName:"mdi mdi-chevron-"+(open?"up":"down")})),title=this.props.title?_react2.default.createElement(_materialUi.Paper,{zDepth:0,style:styles.card.header,onClick:function(){_this.toggle()}},icon,this.props.title):null,actions=this.props.actions?_react2.default.createElement("div",{style:styles.card.actions},this.props.actions):null,rows=void 0,toolBar=void 0;return standardData&&(rows=standardData.map(function(object){var key=object.key,label=object.label,value=object.value,hoverValue=object.hoverValue;return _react2.default.createElement("div",{className:"infoPanelRow",key:key},_react2.default.createElement("div",{className:"infoPanelLabel"},label),_react2.default.createElement("div",{className:"infoPanelValue",onMouseOver:function(){return _this.setState({hoverRow:key})},onMouseOut:function(){return _this.setState({hoverRow:null})}},hoverValue&&hoverRow===key?hoverValue:value))})),primaryToolbars&&(toolBar=_react2.default.createElement(PydioComponents.Toolbar,{toolbarStyle:styles.toolbar.container,flatButtonStyle:styles.toolbar.flatButton,buttonStyle:styles.toolbar.button,className:"primaryToolbar",renderingType:"button",toolbars:primaryToolbars,controller:pydio.getController(),fabAction:"share",buttonMenuNoLabel:!0,buttonMenuPopoverDirection:"right"})),_react2.default.createElement(_materialUi.Paper,{zDepth:1,className:"panelCard",style:_extends({},this.props.style,styles.card.panel)},title,open&&_react2.default.createElement("div",{className:"panelContent",style:_extends({},this.props.contentStyle,styles.card.content)},this.props.children,rows,toolBar),open&&actions)},InfoPanelCard}(_react2.default.Component);InfoPanelCard.PropTypes={identifier:_propTypes2.default.string,title:_propTypes2.default.string,actions:_propTypes2.default.array},exports.default=InfoPanelCard=_materialUiStyles.muiThemeable()(InfoPanelCard),exports.default=InfoPanelCard,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",react:"react"}],13:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=require("react"),_react2=_interopRequireDefault(_react),_createReactClass=require("create-react-class"),_createReactClass2=_interopRequireDefault(_createReactClass),_InfoPanelCard=require("./InfoPanelCard"),_InfoPanelCard2=_interopRequireDefault(_InfoPanelCard);exports.default=_createReactClass2.default({displayName:"RootNode",getInitialState:function(){return{repoKey:null}},componentDidMount:function(){this.loadData(this.props)},componentWillReceiveProps:function(nextProps){nextProps.pydio.user&&nextProps.pydio.user.activeRepository!==this.state.repoKey&&this.loadData(nextProps)},loadData:function(props){if(props.pydio.user){var cacheService=MetaCacheService.getInstance();cacheService.registerMetaStream("workspace.info","MANUAL_TRIGGER");var oThis=this,render=function(data){oThis.setState(_extends({},data["core.users"]))},repoKey=pydio.user.getActiveRepository();this.setState({repoKey:repoKey}),cacheService.hasKey("workspace.info",repoKey)?render(cacheService.getByKey("workspace.info",repoKey)):FuncUtils.bufferCallback("ajxp_load_repo_info_timer",700,function(){oThis.isMounted()})}},render:function(){var messages=this.props.pydio.MessageHash,internal=messages[528],external=messages[530],panelData=(messages[527],void 0);return this.state&&this.state.users&&(panelData=[{key:"internal",label:internal,value:this.state.users},{key:"external",label:external,value:this.state.groups}]),_react2.default.createElement(_InfoPanelCard2.default,{identifier:"file-info",title:messages[249],style:this.props.style,standardData:panelData,icon:"account-multiple-outline",iconColor:"00838f"},void 0)}}),module.exports=exports.default},{"./InfoPanelCard":12,"create-react-class":"create-react-class",react:"react"}],14:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_componentsEditor=require("./components/editor"),_componentsMenu=require("./components/menu"),_makeEditorOpen=require("./make-editor-open"),_Pydio$requireLib=(_interopRequireDefault(_makeEditorOpen),
_pydio2.default.requireLib("hoc")),withContainerSize=_Pydio$requireLib.withContainerSize,EditorActions=_Pydio$requireLib.EditorActions,App=function(_React$Component){_inherits(App,_React$Component);function App(props){var _this=this;_classCallCheck(this,_App),_React$Component.call(this,props);var editorModify=props.editorModify,editorSetActiveTab=props.editorSetActiveTab;editorModify({isOpen:!1}),editorSetActiveTab(null),this.state={fullBrowserScreen:pydio.UI.MOBILE_EXTENSIONS||!0},this.onFullBrowserScreen=function(){return _this.setState({fullBrowserScreen:!_this.state.fullBrowserScreen})}}App.prototype.render=function(){var _props=this.props,isOpen=_props.isOpen,isMinimised=_props.isMinimised,displayToolbar=_props.displayToolbar,documentWidth=_props.documentWidth,documentHeight=_props.documentHeight,fullBrowserScreen=this.state.fullBrowserScreen;if(!isOpen)return null;var editorStyle={position:"fixed",top:fullBrowserScreen?0:"1%",left:fullBrowserScreen?0:"1%",right:fullBrowserScreen?0:"15%",bottom:fullBrowserScreen?0:"1%"},overlayStyle={position:"fixed",top:0,bottom:0,right:0,left:0,background:"#000000",opacity:"0.8",transition:"opacity .5s ease-in"},buttonCenterPositionTop=documentHeight-50,buttonCenterPositionLeft=documentWidth-50,menuStyle={position:"fixed",top:buttonCenterPositionTop,left:buttonCenterPositionLeft,cursor:"pointer",transform:"translate(-50%, -50%)",zIndex:5};return React.createElement("div",{style:{position:"fixed",top:0,left:0,zIndex:1400}},!isMinimised&&React.createElement("div",{style:overlayStyle}),React.createElement(_componentsEditor.Editor,{displayToolbar:displayToolbar,style:editorStyle,minimiseStyle:{transformOrigin:buttonCenterPositionLeft+"px "+buttonCenterPositionTop+"px"}}),isMinimised&&React.createElement(_componentsMenu.Menu,{style:menuStyle}))};var _App=App;return App=_reactRedux.connect(mapStateToProps,EditorActions)(App)||App,App=withContainerSize(App)||App}(React.Component);function mapStateToProps(state,ownProps){var editor=state.editor,tabs=state.tabs,_editor$isMinimised=editor.isMinimised,isMinimised=void 0!==_editor$isMinimised&&_editor$isMinimised,_ownProps$displayToolbar=ownProps.displayToolbar,displayToolbar=void 0===_ownProps$displayToolbar||_ownProps$displayToolbar,remaining=_objectWithoutProperties(ownProps,["displayToolbar"]);return _extends({},remaining,{tabs:tabs,isOpen:tabs.filter(function(_ref){return _ref.editorData}).length>0,isMinimised:isMinimised,displayToolbar:displayToolbar})}exports.default=App,module.exports=exports.default},{"./components/editor":19,"./components/menu":25,"./make-editor-open":29,pydio:"pydio","react-redux":"react-redux"}],15:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_EditorTab=require("./EditorTab"),_EditorTab2=_interopRequireDefault(_EditorTab),_EditorToolbar=require("./EditorToolbar"),_EditorToolbar2=_interopRequireDefault(_EditorToolbar),_EditorButton=require("./EditorButton"),_EditorButton2=_interopRequireDefault(_EditorButton),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),getActiveTab=_Pydio$requireLib.getActiveTab,makeMotion=_Pydio$requireLib.makeMotion,makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,withMouseTracker=_Pydio$requireLib.withMouseTracker,withSelectionControls=_Pydio$requireLib.withSelectionControls,EditorActions=_Pydio$requireLib.EditorActions,styles={selectionButtonLeft:{zIndex:3,position:"absolute",top:"calc(50% - 18px)",left:"40px"},selectionButtonRight:{zIndex:3,position:"absolute",top:"calc(50% - 18px)",right:"40px"},iconSelectionButton:{borderRadius:"50%",width:"36px",height:"36px",lineHeight:"36px",backgroundColor:"rgb(0, 0, 0, 0.87)",color:"rgb(255, 255,255, 0.87)"},toolbar:{default:{top:0,left:0,right:0,flexShrink:0}}};var Editor=function(_React$Component){_inherits(Editor,_React$Component);function Editor(){_classCallCheck(this,_Editor),_React$Component.apply(this,arguments)}Editor.prototype.handleBlurOnSelection=function(e){(0,this.props.editorModify)({focusOnSelection:!1})},Editor.prototype.handleFocusOnSelection=function(e){return(0,this.props.editorModify)({focusOnSelection:!0}),e.preventDefault(),e.stopPropagation(),!1},Editor.prototype.renderChild=function(){var activeTab=this.props.activeTab;return React.createElement(_EditorTab2.default,{id:activeTab.id})},Editor.prototype.render=function(){var _this=this,_props=this.props,style=_props.style,activeTab=_props.activeTab,fixedToolbar=_props.fixedToolbar,hideToolbar=_props.hideToolbar,tabDeleteAll=_props.tabDeleteAll,hideSelectionControls=_props.hideSelectionControls,prevSelectionDisabled=_props.prevSelectionDisabled,nextSelectionDisabled=_props.nextSelectionDisabled,onSelectPrev=_props.onSelectPrev,onSelectNext=_props.onSelectNext,parentStyle={display:"flex",flex:1,overflow:"hidden",width:"100%",height:"100%",position:"relative"};activeTab||(parentStyle=_extends({},parentStyle,{alignItems:"center",justifyContent:"center"}));var paperStyle=_extends({display:"flex",flexDirection:"column",overflow:"hidden",width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:0},style),toolbarStyle=styles.toolbar.default,keyPress=void 0;return(onSelectNext||onSelectPrev)&&(keyPress=function(e){if("ArrowLeft"===e.key&&onSelectPrev&&!prevSelectionDisabled)try{onSelectPrev()}catch(e){}else if("ArrowRight"===e.key&&onSelectNext&&!nextSelectionDisabled)try{onSelectNext()}catch(e){}else"Escape"===e.key&&tabDeleteAll&&tabDeleteAll()}),React.createElement(_materialUi.Paper,{zDepth:5,style:paperStyle,onClick:function(e){return _this.handleBlurOnSelection(e)},tabIndex:"-1",onKeyDown:keyPress},!hideToolbar&&React.createElement(_EditorToolbar2.default,{style:toolbarStyle,display:fixedToolbar?"fixed":"removable"}),React.createElement("div",{className:"body",style:parentStyle,onClick:function(e){return _this.handleFocusOnSelection(e)}},this.props.transitionEnded&&this.renderChild()),!hideSelectionControls&&onSelectPrev&&React.createElement(_EditorButton2.default,{iconClassName:"mdi mdi-chevron-left",style:styles.selectionButtonLeft,iconStyle:styles.iconSelectionButton,disabled:prevSelectionDisabled,onClick:function(){return onSelectPrev()}}),!hideSelectionControls&&onSelectNext&&React.createElement(_EditorButton2.default,{iconClassName:"mdi mdi-chevron-right",style:styles.selectionButtonRight,iconStyle:styles.iconSelectionButton,disabled:nextSelectionDisabled,onClick:function(){return onSelectNext()}}))};var _Editor=Editor;return Editor=makeMotion({scale:1},{scale:0},{check:function(props){return props.isMinimised},style:function(props){return props.minimiseStyle}})(Editor)||Editor,Editor=_reactRedux.connect(mapStateToProps,EditorActions)(Editor)||Editor,Editor=withSelectionControls(Editor)||Editor,Editor=withMouseTracker()(Editor)||Editor,Editor=makeTransitionHOC({translateY:800},{translateY:0})(Editor)||Editor}(React.Component);function mapStateToProps(state,ownProps){var _state$editor=state.editor,editor=void 0===_state$editor?{}:_state$editor,_state$tabs=state.tabs,tabs=void 0===_state$tabs?[]:_state$tabs,_editor$isMinimised=editor.isMinimised,isMinimised=void 0!==_editor$isMinimised&&_editor$isMinimised,_editor$fixedToolbar=editor.fixedToolbar,fixedToolbar=void 0!==_editor$fixedToolbar&&_editor$fixedToolbar,_editor$focusOnSelection=editor.focusOnSelection,focusOnSelection=void 0!==_editor$focusOnSelection&&_editor$focusOnSelection;return _extends({},ownProps,{fixedToolbar:fixedToolbar,hideToolbar:!ownProps.displayToolbar||!fixedToolbar&&focusOnSelection&&!ownProps.isNearTop,hideSelectionControls:!ownProps.browseable||focusOnSelection&&!ownProps.isNearTop&&!ownProps.isNearLeft&&!ownProps.isNearRight,activeTab:getActiveTab(state),tabs:tabs,isMinimised:isMinimised})}exports.default=Editor,module.exports=exports.default},{"./EditorButton":16,"./EditorTab":17,"./EditorToolbar":18,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],16:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _require=require("material-ui"),IconButton=_require.IconButton,_Pydio$requireLib=Pydio.requireLib("hoc"),makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,withHideDisabled=_Pydio$requireLib.withHideDisabled,EditorButton=function(_React$Component){_inherits(EditorButton,_React$Component);function EditorButton(){_classCallCheck(this,_EditorButton),_React$Component.apply(this,arguments)}EditorButton.prototype.render=function(){return React.createElement(IconButton,this.props)};var _EditorButton=EditorButton;return EditorButton=makeTransitionHOC({opacity:0},{opacity:1})(EditorButton)||EditorButton,EditorButton=withHideDisabled()(EditorButton)||EditorButton}(React.Component);exports.default=EditorButton,module.exports=exports.default},{"material-ui":"material-ui"}],17:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_reactRedux=require("react-redux"),_reactDraggable=require("react-draggable"),_reactDraggable2=_interopRequireDefault(_reactDraggable),_makeMaximise=(require("redux"),require("./make-maximise")),_makeMaximise2=_interopRequireDefault(_makeMaximise),_lodash=require("lodash"),_Pydio$requireLib=(_interopRequireDefault(_lodash),_pydio2.default.requireLib("hoc")),EditorActions=_Pydio$requireLib.EditorActions,getActiveTab=(_Pydio$requireLib.ResolutionActions,_Pydio$requireLib.ContentActions,_Pydio$requireLib.SizeActions,_Pydio$requireLib.SelectionActions,_Pydio$requireLib.LocalisationActions,_Pydio$requireLib.getActiveTab),getEditorResolution=_Pydio$requireLib.getEditorResolution,withContentControls=(_Pydio$requireLib.withMenu,_Pydio$requireLib.withContentControls),withSizeControls=_Pydio$requireLib.withSizeControls,withAutoPlayControls=_Pydio$requireLib.withAutoPlayControls,withResolutionControls=_Pydio$requireLib.withResolutionControls,styles={textField:{width:150,marginRight:40},textInput:{color:"rgba(255, 255,255, 0.87)"},textHint:{color:"rgba(255, 255,255, 0.67)"},iconButton:{backgroundColor:"rgba(0, 0, 0, 0.87)",color:"rgba(255, 255, 255, 0.87)",fill:"rgba(255, 255, 255, 0.87)"},divider:{backgroundColor:"rgba(255, 255,255, 0.87)",marginLeft:"12px",marginRight:"12px",alignSelf:"center"}},_default=function(_React$PureComponent){_inherits(Tab,_React$PureComponent);function Tab(){_classCallCheck(this,_Tab),_React$PureComponent.apply(this,arguments)}Tab.prototype.render=function(){var Editor=this.props.Editor,_props=this.props,id=_props.id,node=_props.node,snackbarMessage=_props.snackbarMessage,editorData=_props.editorData,isActive=_props.isActive,_props2=(_props.style,this.props),editorSetActiveTab=_props2.editorSetActiveTab,tabModify=_props2.tabModify;if(!Editor)return null;var select=function(){return editorSetActiveTab(id)},cardStyle={display:"flex",height:"40%",flex:1,margin:0,overflow:"hidden",whiteSpace:"nowrap",backgroundColor:"transparent",borderRadius:0};return isActive?React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:!0,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive}),React.createElement(BottomBar,{id:id,style:Tab.styles.toolbar}),React.createElement(_materialUi.Snackbar,{style:{left:"10%",bottom:24},open:""!==snackbarMessage,autoHideDuration:3e3,onRequestClose:function(){return tabModify({id:id,message:""})},message:React.createElement("span",null,snackbarMessage)})):React.createElement(AnimatedCard,{style:cardStyle,containerStyle:Tab.styles.container,maximised:isActive,expanded:isActive,onExpandChange:isActive?null:select},React.createElement(_materialUi.CardHeader,{title:id,actAsExpander:!0,showExpandableButton:!0}),React.createElement(_materialUi.CardMedia,{style:Tab.styles.child,mediaStyle:Tab.styles.child},React.createElement(Editor,{pydio:pydio,node:node,editorData:editorData,isActive:isActive})))},_createClass(Tab,null,[{key:"styles",get:function(){return{container:{display:"flex",flex:1,flexFlow:"column nowrap",overflow:"auto",alignItems:"center"},child:{display:"flex",flex:1},toolbar:{backgroundColor:"rgb(0, 0, 0)",color:"rgba(255, 255, 255, 0.87)",width:"min-content",margin:"0 auto",padding:0,position:"absolute",bottom:24,height:48,borderRadius:3,alignSelf:"center"}}}}]);var _Tab=Tab;return Tab=_reactRedux.connect(mapStateToProps,EditorActions)(Tab)||Tab}(React.PureComponent);exports.default=_default;var BottomBar=function(_React$Component){_inherits(BottomBar,_React$Component);function BottomBar(props){_classCallCheck(this,_BottomBar),_React$Component.call(this,props);var size=props.size,scale=props.scale;this.state={minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:scale+.5>=20}}BottomBar.prototype.componentWillReceiveProps=function(props){var size=props.size,scale=props.scale;this.setState({minusDisabled:scale-.5<=0,magnifyDisabled:"contain"==size,plusDisabled:scale+.5>=20})},BottomBar.prototype.render=function(){var _state=this.state,_state$minusDisabled=_state.minusDisabled,minusDisabled=void 0!==_state$minusDisabled&&_state$minusDisabled,_state$magnifyDisabled=_state.magnifyDisabled,magnifyDisabled=void 0!==_state$magnifyDisabled&&_state$magnifyDisabled,_state$plusDisabled=_state.plusDisabled,plusDisabled=void 0!==_state$plusDisabled&&_state$plusDisabled,_props3=this.props,readonly=_props3.readonly,scale=(_props3.size,_props3.scale),_props3$playing=_props3.playing,playing=void 0!==_props3$playing&&_props3$playing,resolution=_props3.resolution,onAutoPlayToggle=_props3.onAutoPlayToggle,onSizeChange=_props3.onSizeChange,onResolutionToggle=_props3.onResolutionToggle,remaining=_objectWithoutProperties(_props3,["readonly","size","scale","playing","resolution","onAutoPlayToggle","onSizeChange","onResolutionToggle"]),_props4=this.props,saveable=_props4.saveable,undoable=_props4.undoable,redoable=_props4.redoable,onSave=_props4.onSave,onUndo=_props4.onUndo,onRedo=_props4.onRedo,saveDisabled=_props4.saveDisabled,undoDisabled=_props4.undoDisabled,redoDisabled=_props4.redoDisabled,_props5=this.props,onToggleLineNumbers=_props5.onToggleLineNumbers,onToggleLineWrapping=_props5.onToggleLineWrapping,_props6=this.props,onSearch=_props6.onSearch,onJumpTo=_props6.onJumpTo,editable=(saveable||undoable||redoable)&&!readonly,_props7=this.props,editortools=_props7.editortools,searchable=_props7.searchable,hdable=this.props.hdable,playable=this.props.playable,resizable=this.props.resizable;return editable||editortools||searchable||hdable||playable||resizable?React.createElement(_reactDraggable2.default,null,React.createElement(_materialUi.Toolbar,remaining,playable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+(playing?"mdi-pause":"mdi-play"),iconStyle:styles.iconButton,onClick:function(){return onAutoPlayToggle()}})),playable&&resizable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),resizable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale-.5})},disabled:minusDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-magnify-minus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"contain"})},disabled:magnifyDisabled}),React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-plus",iconStyle:styles.iconButton,onClick:function(){return onSizeChange({size:"auto",scale:scale+.5})},disabled:plusDisabled})),(playable||resizable)&&hdable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),hdable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.IconButton,{iconClassName:"mdi "+("hi"==resolution?"mdi-quality-high":"mdi-image"),iconStyle:styles.iconButton,onClick:function(){return onResolutionToggle()}})),(playable||resizable||hdable)&&editable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editable&&React.createElement(_materialUi.ToolbarGroup,null,saveable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-content-save",iconStyle:styles.iconButton,onClick:function(){return onSave()},disabled:saveDisabled}),undoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-undo",iconStyle:styles.iconButton,onClick:function(){return onUndo()},disabled:undoDisabled}),redoable&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-redo",iconStyle:styles.iconButton,onClick:function(){return onRedo()},disabled:redoDisabled})),(playable||resizable||hdable||editable)&&editortools&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),editortools&&React.createElement(_materialUi.ToolbarGroup,null,onToggleLineNumbers&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-format-list-numbers",iconStyle:styles.iconButton,onClick:function(){return onToggleLineNumbers()}}),onToggleLineWrapping&&React.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-wrap",iconStyle:styles.iconButton,onClick:function(){return onToggleLineWrapping()}})),(playable||resizable||hdable||editable||editortools)&&searchable&&React.createElement(_materialUi.ToolbarSeparator,{style:styles.divider}),searchable&&React.createElement(_materialUi.ToolbarGroup,null,React.createElement(_materialUi.TextField,{onKeyUp:function(_ref){var key=_ref.key,target=_ref.target;return"Enter"===key&&onJumpTo(target.value)},hintText:"Jump to Line",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput}),React.createElement(_materialUi.TextField,{onKeyUp:function(_ref2){var key=_ref2.key,target=_ref2.target;return"Enter"===key&&onSearch(target.value)},hintText:"Search...",style:styles.textField,hintStyle:styles.textHint,inputStyle:styles.textInput})))):null};var _BottomBar=BottomBar;return BottomBar=_reactRedux.connect(mapStateToProps)(BottomBar)||BottomBar,BottomBar=withResolutionControls(BottomBar)||BottomBar,BottomBar=withSizeControls(BottomBar)||BottomBar,BottomBar=withAutoPlayControls(BottomBar)||BottomBar,BottomBar=withContentControls(BottomBar)||BottomBar}(React.Component);function mapStateToProps(state,ownProps){var editor=state.editor,current=getActiveTab(state),_current$readonly=current.readonly,readonly=void 0===_current$readonly||_current$readonly,_current$message=current.message,message=void 0===_current$message?"":_current$message,_current$editorData=current.editorData,editorData=void 0===_current$editorData?{editorClass:""}:_current$editorData,editorClass=FuncUtils.getFunctionByName(editorData.editorClass,window);return editorClass?_extends({},ownProps,current,{resolution:getEditorResolution(state),isActive:editor.activeTabId===current.id,snackbarMessage:message,readonly:readonly,Editor:editorClass.Editor,Controls:editorClass.Controls,Actions:editorClass.Actions}):_extends({},ownProps,current)}var AnimatedCard=_makeMaximise2.default(_materialUi.Card);module.exports=exports.default},{"./make-maximise":20,lodash:62,"material-ui":"material-ui",pydio:"pydio","react-draggable":"react-draggable","react-redux":"react-redux",redux:"redux"}],18:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_pydioModelDataModel=require("pydio/model/data-model"),_pydioModelDataModel2=_interopRequireDefault(_pydioModelDataModel),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_PydioComponents=PydioComponents,ModalAppBar=_PydioComponents.ModalAppBar,_Pydio$requireLib=_pydio2.default.requireLib("hoc"),getActiveTab=_Pydio$requireLib.getActiveTab,makeTransitionHOC=_Pydio$requireLib.makeTransitionHOC,EditorActions=_Pydio$requireLib.EditorActions,EditorToolbar=function(_React$Component){_inherits(EditorToolbar,_React$Component);function EditorToolbar(){_classCallCheck(this,_EditorToolbar),_React$Component.apply(this,arguments)}EditorToolbar.prototype.onClose=function(){(0,this.props.tabDeleteAll)()},EditorToolbar.prototype.onMinimise=function(){(0,this.props.editorModify)({isMinimised:!0})},EditorToolbar.prototype.render=function(){var _this=this,_props=this.props,title=_props.title,className=_props.className,style=_props.style,display=_props.display,node=_props.node,mainStyle={},innerStyle={},spanStyle=void 0;"fixed"===display?(mainStyle=_extends({position:"relative",backgroundColor:"#424242",boxShadow:"none"},style),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"},spanStyle={color:"#FFFFFF"}):(mainStyle=_extends({position:"absolute",background:"linear-gradient(to bottom,rgba(0,0,0,0.65) 0%,transparent 100%)",boxShadow:"none"},style),innerStyle={color:"#FFFFFF",fill:"#FFFFFF"});var onDL=void 0,a=_pydio2.default.getInstance().getController().getActionByName("download");return!a||a.deny||a.contextHidden||(onDL=function(){var selection=new _pydioModelDataModel2.default(!0);selection.setSelectedNodes([node]),_pydioHttpApi2.default.getClient().downloadSelection(selection)}),_react2.default.createElement(ModalAppBar,{className:className,style:mainStyle,title:_react2.default.createElement("span",{style:spanStyle},title),titleStyle:{innerStyle:innerStyle,fontSize:16},iconElementLeft:_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-arrow-left",iconStyle:innerStyle,touch:!0,onClick:function(){return _this.onClose()}}),iconElementRight:_react2.default.createElement(_materialUi.ToolbarGroup,null,onDL&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-download",iconStyle:innerStyle,touch:!0,onClick:onDL,tooltip:_pydio2.default.getMessages()[88],tooltipPosition:"bottom-left"}),_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-window-minimize",iconStyle:innerStyle,touch:!0,onClick:function(){return _this.onMinimise()}}))})};var _EditorToolbar=EditorToolbar;return EditorToolbar=_reactRedux.connect(mapStateToProps,EditorActions)(EditorToolbar)||EditorToolbar,EditorToolbar=makeTransitionHOC({translateY:-60,opacity:0},{translateY:0,opacity:1})(EditorToolbar)||EditorToolbar}(_react2.default.Component);function mapStateToProps(state,ownProps){var tab=getActiveTab(state);return _extends({},ownProps,{title:tab.title,node:tab.node})}exports.default=EditorToolbar,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/data-model":"pydio/model/data-model",react:"react","react-redux":"react-redux"}],19:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Editor=require("./Editor");exports.Editor=_interopRequire(_Editor);var _EditorTab=require("./EditorTab");exports.EditorTab=_interopRequire(_EditorTab)},{"./Editor":15,"./EditorTab":17}],20:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _lodash=require("lodash"),_reactMotion=(_interopRequireDefault(_lodash),require("react-motion")),_HOCsUtils=require("../../../../HOCs/utils"),ANIMATION={stiffness:400,damping:30},TARGET=100,makeMaximise=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(props){_classCallCheck(this,_class),_React$Component.call(this,props),this.state={maximised:props.maximised}}return _class.prototype.componentWillReceiveProps=function(nextProps){this.setState({maximised:nextProps.maximised})},_class.prototype.render=function(){var _this=this,_props$style=this.props.style,style=void 0===_props$style?{}:_props$style,_style$width=style.width,width=void 0===_style$width?"0":_style$width,_style$height=style.height,height=void 0===_style$height?"0":_style$height,maximised=this.state.maximised,motionStyle={width:maximised?_reactMotion.spring(TARGET,ANIMATION):_reactMotion.spring(parseInt(width.replace(/%$/,"")),ANIMATION),height:maximised?_reactMotion.spring(TARGET,ANIMATION):_reactMotion.spring(parseInt(height.replace(/%$/,"")),ANIMATION)};return React.createElement(_reactMotion.Motion,{style:motionStyle},function(_ref){var width=_ref.width,height=_ref.height;return React.createElement(Target,_extends({},_this.props,{style:_extends({},style,{width:width+"%",height:height+"%",transition:"none"})}))})},_createClass(_class,null,[{key:"displayName",get:function(){return"MakeMaximise("+_HOCsUtils.getDisplayName(Target)+")"}}]),_class}(React.Component)};exports.default=makeMaximise,module.exports=exports.default},{"../../../../HOCs/utils":7,lodash:62,"react-motion":79}],21:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_makeRotate=require("./make-rotate"),_makeRotate2=_interopRequireDefault(_makeRotate),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,Button=function(_React$Component){_inherits(Button,_React$Component);function Button(){_classCallCheck(this,Button),_React$Component.apply(this,arguments)}return Button.prototype.render=function(){var rotated=this.props.rotated,iconClassName="mdi mdi-close";return rotated||(iconClassName="mdi mdi-animation"),React.createElement(_materialUi.FloatingActionButton,_extends({},this.props,{iconClassName:iconClassName}))},Button}(React.Component),AnimatedButton=_makeRotate2.default(Button);function mapStateToProps(state,ownProps){var editor=state.editor
;return _extends({},editor.menu)}var ConnectedButton=_reactRedux.connect(mapStateToProps,EditorActions)(AnimatedButton);exports.default=ConnectedButton,module.exports=exports.default},{"./make-rotate":27,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],22:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_MainButton=require("./MainButton"),_MainButton2=_interopRequireDefault(_MainButton),_MenuGroup=require("./MenuGroup"),_MenuGroup2=_interopRequireDefault(_MenuGroup),_MenuItem=require("./MenuItem"),_MenuItem2=_interopRequireDefault(_MenuItem),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,Menu=function(_React$Component){_inherits(Menu,_React$Component);function Menu(props){var _this=this;_classCallCheck(this,Menu),_React$Component.call(this,props),this.state={ready:!1};var editorModify=props.editorModify;this.toggle=function(){return editorModify({isMenuActive:!_this.props.isActive})}}return Menu.prototype.renderChild=function(){var _props=this.props,isActive=_props.isActive,tabs=_props.tabs;return isActive?tabs.map(function(tab){var style={position:"absolute",top:0,left:0,right:0,bottom:0,transition:"transform 0.3s ease-in"};return React.createElement(_MenuItem2.default,{key:tab.id,id:tab.id,style:_extends({},style)})}):null},Menu.prototype.render=function(){var _props2=this.props,style=_props2.style,isActive=_props2.isActive;return React.createElement("div",null,React.createElement(_MenuGroup2.default,{style:style},this.renderChild()),React.createElement(_MainButton2.default,{ref:"button",open:isActive,style:style,onClick:this.toggle}))},Menu}(React.Component);function mapStateToProps(state,ownProps){var editor=state.editor,tabs=state.tabs,activeTab=tabs.filter(function(tab){return tab.id===editor.activeTabId})[0];return _extends({},editor,{activeTab:activeTab,tabs:tabs,isActive:editor.isMenuActive})}var ConnectedMenu=_reactRedux.connect(mapStateToProps,EditorActions)(Menu);exports.default=ConnectedMenu,module.exports=exports.default},{"./MainButton":21,"./MenuGroup":23,"./MenuItem":24,pydio:"pydio","react-redux":"react-redux"}],23:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _makeMenuTransition=require("./make-menu-transition"),_makeMenuTransition2=_interopRequireDefault(_makeMenuTransition),MenuGroup=function(props){return React.createElement("div",props,props.children)},AnimatedMenuGroup=_makeMenuTransition2.default(MenuGroup);exports.default=AnimatedMenuGroup,module.exports=exports.default},{"./make-menu-transition":26}],24:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactRedux=require("react-redux"),_materialUi=require("material-ui"),_lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=(_Pydio$requireLib.getActiveTab,_Pydio$requireLib.EditorActions),MenuItem=function(_React$PureComponent){_inherits(MenuItem,_React$PureComponent);function MenuItem(props){var _this=this;_classCallCheck(this,MenuItem),_React$PureComponent.call(this,props);var editorSetActiveTab=props.editorSetActiveTab,editorModify=props.editorModify;this.onClick=function(){editorModify({isMinimised:!1}),editorSetActiveTab(_this.props.id)}}return MenuItem.prototype.render=function(){var _props=this.props,style=_props.style,tab=_props.tab;if(_lodash2.default.isEmpty(tab))return null;var textStyle={position:"absolute",top:0,bottom:0,width:100,maxWidth:100,textAlign:"center",left:-120,lineHeight:"30px",margin:"5px 0",padding:"0 5px",borderRadius:4,background:"#000000",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",color:"#ffffff",opacity:"0.7"};return React.createElement("div",{style:style,onClick:this.onClick},React.createElement("span",{style:textStyle},tab.title),React.createElement(_materialUi.FloatingActionButton,{mini:!0,ref:"container",backgroundColor:"#FFFFFF",zDepth:2,iconStyle:{backgroundColor:"#FFFFFF"}},React.createElement(tab.icon,_extends({},this.props.tab,{style:{fill:"#000000",flex:1,alignItems:"center",justifyContent:"center",fontSize:28,color:"#607d8b"},loadThumbnail:!0}))))},MenuItem}(React.PureComponent);function mapStateToProps(state,ownProps){var _state$tabs=state.tabs,tabs=void 0===_state$tabs?{}:_state$tabs,current=tabs.filter(function(tab){return tab.id===ownProps.id})[0];return _extends({},ownProps,{tab:current})}var ConnectedMenuItem=_reactRedux.connect(mapStateToProps,EditorActions)(MenuItem);exports.default=ConnectedMenuItem,module.exports=exports.default},{lodash:62,"material-ui":"material-ui",pydio:"pydio","react-redux":"react-redux"}],25:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Menu=require("./Menu");exports.Menu=_interopRequire(_Menu)},{"./Menu":22}],26:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),OPACITY_ORIGIN=0,OPACITY_TARGET=1,TRANSLATEY_ORIGIN=0,TRANSLATEY_TARGET=70,ANIMATION={stifness:500,damping:20},makeMenuTransition=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(){_classCallCheck(this,_class),_React$Component.apply(this,arguments)}return _class.prototype.getStyles=function(){if(!this.props.children)return[];var counter=0;return React.Children.map(this.props.children,function(child){return{key:"t"+counter++,data:{element:child},style:{opacity:_reactMotion.spring(OPACITY_TARGET,ANIMATION),y:_reactMotion.spring(TRANSLATEY_TARGET*counter,ANIMATION)}}})},_class.prototype.willEnter=function(){return{opacity:OPACITY_ORIGIN,y:TRANSLATEY_ORIGIN}},_class.prototype.willLeave=function(){return{opacity:_reactMotion.spring(OPACITY_ORIGIN,ANIMATION),y:_reactMotion.spring(TRANSLATEY_ORIGIN,ANIMATION)}},_class.prototype.render=function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},function(styles){return React.createElement(Target,_this.props,styles.map(function(_ref){var key=_ref.key,style=_ref.style,data=_ref.data,loaded=1===style.opacity||0===style.opacity,childStyle={position:"absolute",opacity:style.opacity,transition:"none",transform:"translate3d(-50%, -50%, 0) translateY(-"+style.y+"px)"};return React.cloneElement(data.element,{key:key,loaded:loaded,style:childStyle})}))})},_class}(React.Component)};exports.default=makeMenuTransition,module.exports=exports.default},{"react-motion":79}],27:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),ORIGIN=-720,TARGET=0,makeRotate=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(props){_classCallCheck(this,_class),_React$Component.call(this,props),this.state={rotate:!1}}return _class.prototype.componentWillReceiveProps=function(nextProps){this.setState({rotate:nextProps.open})},_class.prototype.render=function(){var _this=this,style={rotate:this.state.rotate?ORIGIN:TARGET};return React.createElement(_reactMotion.Motion,{style:style},function(_ref){var rotate=_ref.rotate,rotated=rotate===ORIGIN;return React.createElement(Target,_extends({},_this.props,{rotated:rotated,style:_extends({},_this.props.style,{transform:_this.props.style.transform+" rotate("+rotate+"deg)"})}))})},_class}(React.Component)};exports.default=makeRotate,module.exports=exports.default},{"react-motion":79}],28:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _App=require("./App");exports.Editor=_interopRequire(_App)},{"./App":14}],29:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _reactMotion=require("react-motion"),ANIMATION={stiffness:150,damping:15,precision:1},TRANSLATEY_ORIGIN=800,TRANSLATEY_TARGET=0,makeEditorOpen=function(Target){return function(_React$Component){_inherits(_class,_React$Component);function _class(){_classCallCheck(this,_class),_React$Component.apply(this,arguments)}return _class.prototype.getStyle=function(){return{y:_reactMotion.spring(TRANSLATEY_TARGET,ANIMATION)}},_class.prototype.willEnter=function(){return{y:TRANSLATEY_ORIGIN}},_class.prototype.willLeave=function(){return{y:TRANSLATEY_ORIGIN}},_class.prototype.render=function(){var _this=this;return React.createElement(_reactMotion.TransitionMotion,{styles:this.getStyle(),willLeave:this.willLeave,willEnter:this.willEnter},function(_ref){var y=_ref.y;return React.createElement(Target,_extends({},_this.props,{style:_extends({},_this.props.style,{transform:transform+" translateY("+y+"px)"})}))})},_class}(React.Component)};exports.default=makeEditorOpen,module.exports=exports.default},{"react-motion":79}],30:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _OpenNodesModel=require("./OpenNodesModel"),_OpenNodesModel2=_interopRequireDefault(_OpenNodesModel),_viewsMainFilesList=require("./views/MainFilesList"),_viewsMainFilesList2=_interopRequireDefault(_viewsMainFilesList),_viewsBreadcrumb=require("./views/Breadcrumb"),_viewsBreadcrumb2=_interopRequireDefault(_viewsBreadcrumb),_viewsFilePreview=require("./views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_viewsFSTemplate=require("./views/FSTemplate"),_viewsFSTemplate2=_interopRequireDefault(_viewsFSTemplate),_viewsEditionPanel=require("./views/EditionPanel"),_viewsEditionPanel2=_interopRequireDefault(_viewsEditionPanel),_search=require("./search"),_wslistWorkspacesList=require("./wslist/WorkspacesList"),_wslistWorkspacesList2=_interopRequireDefault(_wslistWorkspacesList),_wslistWorkspacesListMaterial=require("./wslist/WorkspacesListMaterial"),_wslistWorkspacesListMaterial2=_interopRequireDefault(_wslistWorkspacesListMaterial),_wslistWorkspacePickerDialog=require("./wslist/WorkspacePickerDialog"),_wslistWorkspacePickerDialog2=_interopRequireDefault(_wslistWorkspacePickerDialog),_leftnavLeftPanel=require("./leftnav/LeftPanel"),_leftnavLeftPanel2=_interopRequireDefault(_leftnavLeftPanel),_leftnavDynamicLeftPanel=require("./leftnav/DynamicLeftPanel"),_leftnavDynamicLeftPanel2=_interopRequireDefault(_leftnavDynamicLeftPanel),_leftnavUserWidget=require("./leftnav/UserWidget"),_leftnavUserWidget2=_interopRequireDefault(_leftnavUserWidget),_viewsTourGuide=require("./views/TourGuide"),_viewsTourGuide2=_interopRequireDefault(_viewsTourGuide),_viewsMasterLayout=require("./views/MasterLayout"),_viewsMasterLayout2=_interopRequireDefault(_viewsMasterLayout),_detailpanesInfoPanel=require("./detailpanes/InfoPanel"),_detailpanesInfoPanel2=_interopRequireDefault(_detailpanesInfoPanel),_detailpanesInfoPanelCard=require("./detailpanes/InfoPanelCard"),_detailpanesInfoPanelCard2=_interopRequireDefault(_detailpanesInfoPanelCard),_detailpanesRootNode=require("./detailpanes/RootNode"),_detailpanesRootNode2=_interopRequireDefault(_detailpanesRootNode),_detailpanesGenericInfoCard=require("./detailpanes/GenericInfoCard"),_detailpanesGenericInfoCard2=_interopRequireDefault(_detailpanesGenericInfoCard),_detailpanesFileInfoCard=require("./detailpanes/FileInfoCard"),_detailpanesFileInfoCard2=_interopRequireDefault(_detailpanesFileInfoCard),_editorComponentsEditor=require("./editor/components/editor"),classes={OpenNodesModel:_OpenNodesModel2.default,MainFilesList:_viewsMainFilesList2.default,EditionPanel:_viewsEditionPanel2.default,Breadcrumb:_viewsBreadcrumb2.default,SearchForm:_search.SearchForm,FilePreview:_viewsFilePreview2.default,FSTemplate:_viewsFSTemplate2.default,WorkspacesList:_wslistWorkspacesList2.default,WorkspacesListMaterial:_wslistWorkspacesListMaterial2.default,WorkspacePickerDialog:_wslistWorkspacePickerDialog2.default,LeftPanel:_leftnavLeftPanel2.default,DynamicLeftPanel:_leftnavDynamicLeftPanel2.default,UserWidget:_leftnavUserWidget2.default,TourGuide:_viewsTourGuide2.default,MasterLayout:_viewsMasterLayout2.default,InfoPanel:_detailpanesInfoPanel2.default,InfoPanelCard:_detailpanesInfoPanelCard2.default,InfoRootNode:_detailpanesRootNode2.default,FileInfoCard:_detailpanesFileInfoCard2.default,GenericInfoCard:_detailpanesGenericInfoCard2.default,Editor:_editorComponentsEditor.Editor};exports.default=classes,module.exports=exports.default},{"./OpenNodesModel":8,"./detailpanes/FileInfoCard":9,"./detailpanes/GenericInfoCard":10,"./detailpanes/InfoPanel":11,"./detailpanes/InfoPanelCard":12,"./detailpanes/RootNode":13,"./editor/components/editor":19,"./leftnav/DynamicLeftPanel":32,"./leftnav/LeftPanel":33,"./leftnav/UserWidget":34,"./search":42,"./views/Breadcrumb":44,"./views/EditionPanel":47,"./views/FSTemplate":48,"./views/FilePreview":49,"./views/MainFilesList":50,"./views/MasterLayout":51,"./views/TourGuide":53,"./wslist/WorkspacePickerDialog":58,"./wslist/WorkspacesList":59,"./wslist/WorkspacesListMaterial":60}],31:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_color=require("color"),_color2=_interopRequireDefault(_color),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_pydioModelMetaNodeProvider=require("pydio/model/meta-node-provider"),_pydioModelMetaNodeProvider2=_interopRequireDefault(_pydioModelMetaNodeProvider),_viewsFilePreview=require("../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_materialUiStyles=require("material-ui/styles"),_materialUi=require("material-ui"),_cellsSdk=require("cells-sdk"),_Pydio$requireLib=_pydio2.default.requireLib("components"),EmptyStateView=_Pydio$requireLib.EmptyStateView,_Pydio$requireLib2=_pydio2.default.requireLib("hoc"),PlaceHolder=_Pydio$requireLib2.PlaceHolder,PhTextRow=_Pydio$requireLib2.PhTextRow,PhRoundShape=_Pydio$requireLib2.PhRoundShape,listCss="\n.bmListEntry{\n    border-bottom: 1px solid rgba(0,0,0,0.025);\n    padding: 2px 0;\n}\n.bmListEntry:hover{\n    background-color:#FAFAFA;\n    border-bottom-color: #FAFAFA;\n}\n.bmListEntryWs:hover{\n    text-decoration:underline;\n}\n",BookmarkLine=function(_React$Component){_inherits(BookmarkLine,_React$Component);function BookmarkLine(props){_classCallCheck(this,BookmarkLine),_React$Component.call(this,props),this.state={}}return BookmarkLine.prototype.render=function(){var _this=this,_props=this.props,pydio=_props.pydio,placeHolder=_props.placeHolder,nodes=_props.nodes,onClick=_props.onClick,onRemove=_props.onRemove,removing=this.state.removing,previewStyles={style:{height:40,width:40,borderRadius:"50%"},mimeFontStyle:{fontSize:24,lineHeight:"40px",textAlign:"center"}},firstClick=void 0,preview=void 0,primaryText=void 0,secondaryTexts=void 0,iconButton=void 0;if(placeHolder)firstClick=function(){},preview=_react2.default.createElement(PhRoundShape,{style:{width:previewStyles.style.width,height:previewStyles.style.height}}),primaryText=_react2.default.createElement(PhTextRow,{style:{width:"90%"}}),secondaryTexts=[_react2.default.createElement(PhTextRow,{style:{width:"60%"}})],iconButton=_react2.default.createElement("div",null);else{var _secondaryTexts;firstClick=function(){return onClick(nodes[0])},preview=_react2.default.createElement(_viewsFilePreview2.default,_extends({pydio:pydio,node:nodes[0],loadThumbnail:!0},previewStyles)),primaryText=nodes[0].getLabel()||nodes[0].getMetadata().get("WsLabel"),secondaryTexts=[_react2.default.createElement("span",null,pydio.MessageHash["bookmark.secondary.inside"]," ")];var nodeLinks=nodes.map(function(n,i){var link=_react2.default.createElement("a",{className:"bmListEntryWs",onClick:function(e){e.stopPropagation(),onClick(n)},style:{fontWeight:500}},n.getMetadata().get("WsLabel"));return i===nodes.length-1?link:_react2.default.createElement("span",null,link,", ")});(_secondaryTexts=secondaryTexts).push.apply(_secondaryTexts,nodeLinks),iconButton=_react2.default.createElement(_materialUi.IconButton,{disabled:removing,iconClassName:"mdi mdi-delete",iconStyle:{opacity:.33,fontSize:18},onClick:function(){_this.setState({removing:!0}),onRemove(nodes[0])},tooltip:pydio.MessageHash["bookmark.button.tip.remove"],tooltipPosition:"bottom-left"})}var block=_react2.default.createElement("div",{className:"bmListEntry",style:{display:"flex",alignItems:"center",width:"100%"}},_react2.default.createElement("div",{style:{padding:"12px 16px",cursor:"pointer"},onClick:firstClick},preview),_react2.default.createElement("div",{style:{flex:1,overflow:"hidden",cursor:"pointer"},onClick:firstClick},_react2.default.createElement("div",{style:{fontSize:15,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},primaryText),_react2.default.createElement("div",{style:{opacity:.33}},secondaryTexts)),_react2.default.createElement("div",null,iconButton));return placeHolder?_react2.default.createElement(PlaceHolder,{customPlaceholder:block,showLoadingAnimation:!0}):block},BookmarkLine}(_react2.default.Component),BookmarksList=function(_React$Component2){_inherits(BookmarksList,_React$Component2);function BookmarksList(props){_classCallCheck(this,BookmarksList),_React$Component2.call(this,props),this.state={open:!1,loading:!1,bookmarks:null}}return BookmarksList.prototype.load=function(){var _this2=this;return!(arguments.length<=0||void 0===arguments[0])&&arguments[0]||this.setState({loading:!0}),new _cellsSdk.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()).userBookmarks(new _cellsSdk.RestUserBookmarksRequest).then(function(collection){_this2.setState({bookmarks:collection.Nodes,loading:!1})}).catch(function(reason){_this2.setState({loading:!1})})},BookmarksList.prototype.handleTouchTap=function(event){event.preventDefault(),this.load(),this.setState({open:!0,anchorEl:event.currentTarget})},BookmarksList.prototype.handleRequestClose=function(){this.setState({open:!1})},BookmarksList.prototype.entryClicked=function(node){this.handleRequestClose(),this.props.pydio.goTo(node)},BookmarksList.prototype.removeBookmark=function(node){var _this3=this,nodeUuid=node.getMetadata().get("uuid"),api=new _cellsSdk.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()),searchRequest=new _cellsSdk.IdmSearchUserMetaRequest;searchRequest.NodeUuids=[nodeUuid],searchRequest.Namespace="bookmark";var request=new _cellsSdk.IdmUpdateUserMetaRequest;return api.searchUserMeta(searchRequest).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){_this3.load(!0)}))})},BookmarksList.prototype.bmToNodes=function(bm){return bm.AppearsIn.map(function(ws){var copy=_extends({},bm);copy.Path=ws.WsSlug+"/"+ws.Path;var node=_pydioModelMetaNodeProvider2.default.parseTreeNode(copy,ws.WsSlug);return node.getMetadata().set("repository_id",ws.WsUuid),node.getMetadata().set("WsLabel",ws.WsLabel),node})},BookmarksList.prototype.render=function(){var _this4=this,_props2=this.props,pydio=_props2.pydio,muiTheme=_props2.muiTheme,iconStyle=_props2.iconStyle,_state=this.state,loading=_state.loading,open=_state.open,anchorEl=_state.anchorEl,bookmarks=_state.bookmarks;if(!pydio.user.activeRepository)return null;var items=void 0;bookmarks&&(items=bookmarks.map(function(n){var nodes=_this4.bmToNodes(n);return _react2.default.createElement(BookmarkLine,{key:nodes[0].getPath(),pydio:pydio,nodes:nodes,onClick:_this4.entryClicked.bind(_this4),onRemove:_this4.removeBookmark.bind(_this4)})}));var buttonStyle={borderRadius:"50%"};if(open&&iconStyle&&iconStyle.color){var c=_color2.default(iconStyle.color);buttonStyle=_extends({},buttonStyle,{backgroundColor:c.fade(.9).toString()})}return _react2.default.createElement("span",null,_react2.default.createElement(_materialUi.IconButton,{onClick:this.handleTouchTap.bind(this),iconClassName:"userActionIcon mdi mdi-star",tooltip:pydio.MessageHash[147],tooltipPosition:"bottom-left",className:"userActionButton",iconStyle:iconStyle,style:buttonStyle}),_react2.default.createElement(_materialUi.Popover,{open:open,anchorEl:anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this),style:{width:320},zDepth:3},_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",borderRadius:"2px 2px 0 0",width:"100%",backgroundColor:"#f8fafc",borderBottom:"1px solid #ECEFF1",color:muiTheme.palette.primary1Color}},_react2.default.createElement("span",{className:"mdi mdi-star",style:{fontSize:18,margin:"12px 8px 14px 16px"}}),_react2.default.createElement("span",{style:{fontSize:15,fontWeight:500}},pydio.MessageHash[147])),loading&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(BookmarkLine,{placeHolder:!0}),_react2.default.createElement(BookmarkLine,{placeHolder:!0}),_react2.default.createElement(BookmarkLine,{placeHolder:!0})),!loading&&items&&items.length&&_react2.default.createElement("div",{style:{maxHeight:330,minHeight:195,overflowY:"auto",overflowX:"hidden",padding:0}},items),!loading&&(!items||!items.length)&&_react2.default.createElement(EmptyStateView,{pydio:pydio,iconClassName:"mdi mdi-star-outline",primaryTextId:"145",secondaryTextId:"482",style:{minHeight:200,backgroundColor:"white"}}),_react2.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:listCss}})))},BookmarksList}(_react2.default.Component);exports.default=BookmarksList=_materialUiStyles.muiThemeable()(BookmarksList),exports.default=BookmarksList,module.exports=exports.default},{"../views/FilePreview":49,"cells-sdk":"cells-sdk",color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/meta-node-provider":"pydio/model/meta-node-provider",react:"react"}],32:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_createReactClass=require("create-react-class"),_createReactClass2=_interopRequireDefault(_createReactClass);exports.default=_createReactClass2.default({displayName:"DynamicLeftPanel",propTypes:{pydio:_propTypes2.default.instanceOf(Pydio).isRequired,pydioId:_propTypes2.default.string.isRequired},childContextTypes:{messages:_propTypes2.default.object,getMessage:_propTypes2.default.func},getChildContext:function(){var messages=this.props.pydio.MessageHash;return{messages:messages,getMessage:function(messageId){var namespace=arguments.length<=1||void 0===arguments[1]?"ajxp_admin":arguments[1];try{return messages[namespace+(namespace?".":"")+messageId]||messageId}catch(e){return messageId}}}},parseComponentConfigs:function(){var reg=this.props.pydio.Registry.getXML(),contentNodes=XMLUtils.XPathSelectNodes(reg,"client_configs/component_config/additional_content"),result=[],compId="AjxpReactComponent::"+this.props.pydioId;return contentNodes.map(function(node){node.parentNode.getAttribute("className")==compId&&result.push({id:node.getAttribute("id"),position:parseInt(node.getAttribute("position")),type:node.getAttribute("type"),options:JSON.parse(node.getAttribute("options"))})}),result.sort(function(a,b){return a.position>=b.position?1:-1}),result},getInitialState:function(){return{statusOpen:!0,blinkingBell:!1,additionalContents:this.parseComponentConfigs(),workspaces:this.props.pydio.user.getRepositoriesList()}},componentDidMount:function(){this._timer&&global.clearTimeout(this._timer),this._timer=global.setTimeout(this.closeNavigation,3e3),this._reloadObserver=function(){try{this.isMounted()&&this.setState({workspaces:this.props.pydio.user?this.props.pydio.user.getRepositoriesList():[]})}catch(e){global.console&&console.error("Error while setting state on LeftPanel component - Probably height error on IE8",e)}}.bind(this),this.props.pydio.observe("repository_list_refreshed",this._reloadObserver)},componentWillUnmount:function(){this._reloadObserver&&this.props.pydio.stopObserving("repository_list_refreshed",this._reloadObserver)},openNavigation:function(){this.state.statusOpen||this.setState({statusOpen:!0})},closeNavigation:function(){this.setState({statusOpen:!1})},listNodeClicked:function(node){this.props.pydio.goTo(node),this.closeNavigation()},closeMouseover:function(){this._timer&&global.clearTimeout(this._timer)},closeMouseout:function(){this._timer&&global.clearTimeout(this._timer),this._timer=global.setTimeout(this.closeNavigation,300)},onAlertPanelBadgeChange:function(paneData,newValue,oldValue,memoData){if("navigation_alerts"===paneData.id&&(newValue?this.setState({blinkingBell:newValue,blinkingBellClass:paneData.options.titleClassName}):this.setState({blinkingBell:!1}),newValue&&newValue!==oldValue&&Object.isNumber(newValue)&&""!==oldValue&&newValue>oldValue)){var notifText="Something happened!";if(memoData instanceof PydioDataModel){var node=memoData.getRootNode().getFirstChildIfExists();node&&(notifText=paneData.options.tipAttribute?node.getMetadata().get(paneData.options.tipAttribute):node.getLabel())}if(PydioTasks){PydioTasks.AlertTask.setCloser(this.openNavigation.bind(this));var title=global.pydio.MessageHash[paneData.options.title]||paneData.options.title;new PydioTasks.AlertTask(title,notifText).show()}}},render:function(){var additional=this.state.additionalContents.map(function(paneData){return"ListProvider"===paneData.type?_react2.default.createElement(PydioComponents.CollapsableListProvider,{pydio:this.props.pydio,paneData:paneData,nodeClicked:this.listNodeClicked,onBadgeChange:this.onAlertPanelBadgeChange}):null}.bind(this)),badge=void 0;return this.state.blinkingBell&&(badge=_react2.default.createElement("span",{className:"badge-icon icon-bell-alt"})),_react2.default.createElement("span",null,_react2.default.createElement("div",{id:"repo_chooser",onClick:this.openNavigation,onMouseOver:this.openNavigation,className:this.state.statusOpen?"open":""},_react2.default.createElement("span",{className:"icon-reorder"}),badge),_react2.default.createElement("div",{className:"left-panel"+(this.state.statusOpen?"":" hidden"),onMouseOver:this.closeMouseover,onMouseOut:this.closeMouseout},additional,_react2.default.createElement(UserWorkspacesList,{pydio:this.props.pydio,workspaces:this.state.workspaces})))}}),module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"create-react-class":"create-react-class","prop-types":"prop-types",react:"react"}],33:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _UserWidget=require("./UserWidget"),_UserWidget2=_interopRequireDefault(_UserWidget),_wslistWorkspacesList=require("../wslist/WorkspacesList"),_wslistWorkspacesList2=_interopRequireDefault(_wslistWorkspacesList),_color=require("color"),_color2=_interopRequireDefault(_color),React=require("react"),PropTypes=require("prop-types"),Pydio=require("pydio"),_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,_Pydio$requireLib=Pydio.requireLib("boot"),TasksPanel=_Pydio$requireLib.TasksPanel,LeftPanel=function(_ref){var muiTheme=_ref.muiTheme,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,userWidgetProps=_ref.userWidgetProps,workspacesListProps=_ref.workspacesListProps,pydio=_ref.pydio,onClick=_ref.onClick,onMouseOver=_ref.onMouseOver,palette=muiTheme.palette,colorHue=_color2.default(palette.primary1Color).hsl().array()[0],lightBg=new _color2.default({h:colorHue,s:35,l:98}),taskBg=new _color2.default({h:colorHue,s:30,l:96});style=_extends({backgroundColor:lightBg.toString()},style);var uWidgetProps=_extends({},userWidgetProps);uWidgetProps.style=_extends({backgroundColor:_color2.default(palette.primary1Color).darken(.2).toString(),width:"100%"},uWidgetProps.style);var wsListStyle={backgroundColor:lightBg.toString(),color:_color2.default(palette.primary1Color).darken(.1).alpha(.87).toString(),borderRight:"1px solid #e0e0e0"},wsSectionTitleStyle={color:_color2.default(palette.primary1Color).darken(.1).alpha(.5).toString()},wsListProps=workspacesListProps||{};return React.createElement("div",{className:"left-panel vertical_fit vertical_layout",style:style,onClick:onClick,onMouseOver:onMouseOver},React.createElement(_UserWidget2.default,_extends({pydio:pydio,controller:pydio.getController(),toolbars:["aUser","user","zlogin"]},uWidgetProps)),React.createElement(_wslistWorkspacesList2.default,_extends({className:"vertical_fit",style:wsListStyle,sectionTitleStyle:wsSectionTitleStyle,pydio:pydio,showTreeForWorkspace:!!pydio.user&&pydio.user.activeRepository},wsListProps)),React.createElement(TasksPanel,{pydio:pydio,mode:"flex",panelStyle:_extends({},wsListStyle,{backgroundColor:taskBg.toString()})}))};LeftPanel.propTypes={pydio:PropTypes.instanceOf(Pydio).isRequired,userWidgetProps:PropTypes.object,workspacesListProps:PropTypes.object,style:PropTypes.object},exports.default=LeftPanel=muiThemeable()(LeftPanel),exports.default=LeftPanel,module.exports=exports.default},{"../wslist/WorkspacesList":59,"./UserWidget":34,color:"color","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio",react:"react"}],34:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_BookmarksList=require("./BookmarksList"),_BookmarksList2=_interopRequireDefault(_BookmarksList),React=require("react"),_Pydio$requireLib=_pydio2.default.requireLib("boot"),AsyncComponent=_Pydio$requireLib.AsyncComponent,_Pydio$requireLib2=_pydio2.default.requireLib("components"),UserAvatar=_Pydio$requireLib2.UserAvatar,MenuItemsConsumer=_Pydio$requireLib2.MenuItemsConsumer,MenuUtils=_Pydio$requireLib2.MenuUtils,Toolbar=_Pydio$requireLib2.Toolbar,_require=require("material-ui"),Paper=_require.Paper,Popover=_require.Popover,UserWidget=function(_React$Component){_inherits(UserWidget,_React$Component);function UserWidget(props){_classCallCheck(this,UserWidget),_React$Component.call(this,props),this.state={showMenu:!1}}return UserWidget.getPropTypes=function(){return{pydio:_propTypes2.default.instanceOf(_pydio2.default),style:_propTypes2.default.object,avatarStyle:_propTypes2.default.object,actionBarStyle:_propTypes2.default.object,avatarOnly:_propTypes2.default.bool}},UserWidget.prototype.showMenu=function(event){this.setState({showMenu:!0,anchor:event.currentTarget})},UserWidget.prototype.closeMenu=function(event,index,menuItem){this.setState({showMenu:!1})},UserWidget.prototype.applyAction=function(actionName){switch(actionName){case"home":this.props.pydio.triggerRepositoryChange("homepage");break;case"settings":this.props.pydio.triggerRepositoryChange("settings");break;case"about_pydio":this.props.pydio.getController().fireAction("splash")}},UserWidget.prototype.render=function(){var _this=this,avatar=void 0,notificationsButton=void 0,currentIsSettings=void 0,bookmarksButton=void 0,_props=this.props,pydio=_props.pydio,displayLabel=_props.displayLabel,avatarStyle=_props.avatarStyle,popoverDirection=_props.popoverDirection,popoverTargetPosition=_props.popoverTargetPosition,color=_props.color,menuItems=_props.menuItems,_state=this.state,showMenu=_state.showMenu,anchor=_state.anchor;if(pydio.user){var user=this.props.pydio.user;currentIsSettings="settings"===user.activeRepository,avatarStyle=_extends({},avatarStyle,{position:"relative"});var menuProps={display:"right",width:160,desktop:!0};avatar=React.createElement("div",{onClick:function(e){_this.showMenu(e)},style:{cursor:"pointer",maxWidth:155}},React.createElement(UserAvatar,{pydio:pydio,userId:user.id,style:avatarStyle,className:"user-display",labelClassName:"userLabel",displayLabel:displayLabel,displayLabelChevron:!0,labelChevronStyle:{color:color},labelMaxChars:8,labelStyle:{flex:1,marginLeft:8,color:color},avatarSize:38}),React.createElement(Popover,{zDepth:2,open:showMenu,anchorEl:anchor,anchorOrigin:{horizontal:popoverDirection||"right",vertical:popoverTargetPosition||"bottom"},targetOrigin:{horizontal:popoverDirection||"right",vertical:"top"},onRequestClose:function(){_this.closeMenu()},useLayerForClickAway:!1,style:{marginTop:-10,marginLeft:10}},MenuUtils.itemsToMenu(menuItems,this.closeMenu.bind(this),!1,menuProps))),this.props.hideNotifications||(notificationsButton=React.createElement(AsyncComponent,_extends({namespace:"PydioActivityStreams",componentName:"UserPanel",noLoader:!0,iconClassName:"userActionIcon mdi mdi-bell",iconStyle:{color:color}},this.props))),bookmarksButton=React.createElement(_BookmarksList2.default,{pydio:this.props.pydio,iconStyle:{color:color}})}var actionBarStyle=this.props.actionBarStyle||{},actionBar=void 0;return currentIsSettings||(actionBar=React.createElement("div",{className:"action_bar",style:_extends({display:"flex"},actionBarStyle)},React.createElement(Toolbar,_extends({},this.props,{toolbars:["user-widget"],renderingType:"icon",toolbarStyle:{display:"inline"},buttonStyle:{color:color,fontSize:18},tooltipPosition:"bottom-right",className:"user-widget-toolbar"})),notificationsButton,bookmarksButton)),this.props.children?React.createElement(Paper,{zDepth:1,rounded:!1,style:_extends({},this.props.style,{display:"flex"}),className:"user-widget primaryColorDarkerPaper"},React.createElement("div",{style:{flex:1}},avatar,actionBar),this.props.children):React.createElement(Paper,{zDepth:1,rounded:!1,style:this.props.style,className:"user-widget primaryColorDarkerPaper"},avatar,this.props.style&&"flex"===this.props.style.display&&React.createElement("span",{style:{flex:1}}),actionBar)},UserWidget}(React.Component);exports.default=UserWidget=MenuItemsConsumer(UserWidget),exports.default=UserWidget,module.exports=exports.default},{"./BookmarksList":31,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],35:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydioUtilXml=require("pydio/util/xml"),_pydioUtilXml2=_interopRequireDefault(_pydioUtilXml),_materialUi=require("material-ui"),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_DatePanel=require("./DatePanel"),_DatePanel2=_interopRequireDefault(_DatePanel),_FileFormatPanel=require("./FileFormatPanel"),_FileFormatPanel2=_interopRequireDefault(_FileFormatPanel),_FileSizePanel=require("./FileSizePanel"),_FileSizePanel2=_interopRequireDefault(_FileSizePanel),_lodash=require("lodash"),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,_Pydio$requireLib2=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib2.ModernTextField,AdvancedSearch=function(_Component){_inherits(AdvancedSearch,_Component),_createClass(AdvancedSearch,null,[{key:"styles",get:function(){return{text:{width:"calc(100% - 32px)",margin:"0 16px"}}}}]);function AdvancedSearch(props){_classCallCheck(this,AdvancedSearch),_Component.call(this,props);var pydio=props.pydio,registry=pydio.getXmlRegistry(),options={};try{options=JSON.parse(_pydioUtilXml2.default.XPathGetSingleNodeText(registry,'client_configs/template_part[@ajxpClass="SearchEngine" and @theme="material"]/@ajxpOptions'))}catch(e){}this.state={options:options,basenameOrContent:props.values.basenameOrContent||""}}return AdvancedSearch.prototype.textFieldChange=function(fieldName,value){var _setState,_props$onChange;this.setState((_setState={},_setState[fieldName]=value,_setState)),this.props.onChange((_props$onChange={},_props$onChange[fieldName]=value,_props$onChange))},AdvancedSearch.prototype.onChange=function(values){this.props.onChange(values)},AdvancedSearch.prototype.renderField=function(key,val){var _this=this,text=AdvancedSearch.styles.text,fieldname=(this.state.options,"basename"===key||"Content"===key||"basenameOrContent"===key?key:"ajxp_meta_"+key);if("object"==typeof val){var value=this.props.values[fieldname],label=val.label,renderComponent=val.renderComponent;if(renderComponent){var component=renderComponent(_extends({},this.props,{label:label,value:value,fieldname:key,onChange:function(object){_this.onChange(object)}}));return _react2.default.createElement("div",{style:{margin:"0 16px"}},component)}}return _react2.default.createElement(ModernTextField,{key:fieldname,value:this.state[fieldname]||this.props.values[fieldname]||"",style:text,hintText:val,onChange:function(e,v){_this.textFieldChange(fieldname,v)}})},AdvancedSearch.prototype.render=function(){var _this2=this,text=AdvancedSearch.styles.text,_props=this.props,pydio=_props.pydio,getMessage=_props.getMessage,values=_props.values,rootStyle=_props.rootStyle,options=this.state.options,headerStyle={fontSize:13,color:"#616161",fontWeight:500,marginBottom:-10,marginTop:10};return _react2.default.createElement("div",{className:"search-advanced",style:_extends({},rootStyle)},_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle,{marginTop:0})},getMessage(341)),this.renderField("basenameOrContent",getMessage(1)),_react2.default.createElement(_FileFormatPanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}),_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle,{marginTop:0})},getMessage(489)),_react2.default.createElement(AdvancedMetaFields,_extends({},this.props,{options:options}),function(fields){return _react2.default.createElement("div",null,Object.keys(fields).map(function(key){return _this2.renderField(key,fields[key])}))}),_react2.default.createElement(_materialUi.Subheader,{style:_extends({},headerStyle)},getMessage(498)),_react2.default.createElement(_DatePanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}),_react2.default.createElement(_FileSizePanel2.default,{values:values,pydio:pydio,inputStyle:text,onChange:function(values){return _this2.onChange(values)}}))},AdvancedSearch}(_react.Component);AdvancedSearch=PydioContextConsumer(AdvancedSearch);var AdvancedMetaFields=function(_Component2){_inherits(AdvancedMetaFields,_Component2);function AdvancedMetaFields(props){_classCallCheck(this,AdvancedMetaFields),_Component2.call(this,props),this.build=_lodash.debounce(this.build,500),this.state={fields:{}}}return AdvancedMetaFields.prototype.componentWillMount=function(){this.build()},AdvancedMetaFields.prototype.build=function(){var _this3=this,options=this.props.options,_extends2=_extends({},options),metaColumns=_extends2.metaColumns,reactColumnsRenderers=_extends2.reactColumnsRenderers;metaColumns||(metaColumns={}),reactColumnsRenderers||(reactColumnsRenderers={});var generic={},specialRendererKeys=Object.keys(_extends({},reactColumnsRenderers)),standardRendererKeys=Object.keys(_extends({},metaColumns)).filter(function(key){return-1===specialRendererKeys.indexOf(key)}),textFields={};standardRendererKeys.forEach(function(k){textFields[k]=metaColumns[k]});var renderers=Object.keys(_extends({},reactColumnsRenderers)).map(function(key){var _ref,renderer=reactColumnsRenderers[key],namespace=renderer.split(".",1).shift();return window[namespace]?(_ref={},_ref[key]={label:metaColumns[key],renderComponent:FuncUtils.getFunctionByName(renderer,global)},_ref):void ResourcesManager.detectModuleToLoadAndApply(renderer,function(){return _this3.build()},!0)}).reduce(function(obj,current){return obj=_extends({},obj,current)},[]),fields=_extends({},generic,textFields,renderers);this.setState({fields:fields})},AdvancedMetaFields.prototype.render=function(){return this.props.children(this.state.fields)},AdvancedMetaFields}(_react.Component);AdvancedMetaFields.propTypes={children:_propTypes2.default.func.isRequired},exports.default=AdvancedSearch,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DatePanel":36,"./FileFormatPanel":37,"./FileSizePanel":38,lodash:62,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/util/xml":"pydio/util/xml",react:"react"}],36:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernSelectField=_Pydio$requireLib.ModernSelectField,ModernStyles=_Pydio$requireLib.ModernStyles,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchDatePanel=function(_React$Component){_inherits(SearchDatePanel,_React$Component),_createClass(SearchDatePanel,null,[{key:"styles",get:function(){return{datePickerGroup:{display:"flex",justifyContent:"space-between"},datePicker:{flex:1,position:"relative"},dateInput:{width:"auto",flex:1},dateClose:{position:"absolute",lineHeight:"50px",right:5,top:0,cursor:"pointer",color:"rgba(0,0,0,0.5)"}}}}]);function SearchDatePanel(props){_classCallCheck(this,SearchDatePanel),_React$Component.call(this,props),this.state={value:"",startDate:null,endDate:null}}return SearchDatePanel.prototype.componentDidUpdate=function(prevProps,prevState){if(prevState!==this.state){var _state=this.state,value=_state.value,startDate=_state.startDate,endDate=_state.endDate;value||this.props.onChange({ajxp_modiftime:null});var startDay=function(date){return date.setHours(0),date.setMinutes(0),date.setSeconds(1),date},endDay=function(date){return date.setHours(23),date.setMinutes(59),date.setSeconds(59),date};if("custom"===value)startDate||(startDate=new Date(0)),endDate||(endDate=new Date,endDate.setFullYear(endDate.getFullYear()+1)),this.props.onChange({ajxp_modiftime:{from:startDate,to:endDate}});else if("PYDIO_SEARCH_RANGE_TODAY"===value)this.props.onChange({ajxp_modiftime:{from:startDay(new Date),to:endDay(new Date)}});else if("PYDIO_SEARCH_RANGE_YESTERDAY"===value){var y=new Date;y.setDate(y.getDate()-1);var e=new Date;e.setDate(e.getDate()-1),this.props.onChange({ajxp_modiftime:{from:startDay(y),to:endDay(e)}})}else if("PYDIO_SEARCH_RANGE_LAST_WEEK"===value){var s=new Date;s.setDate(s.getDate()-7);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}})}else if("PYDIO_SEARCH_RANGE_LAST_MONTH"===value){var s=new Date;s.setMonth(s.getMonth()-1);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}}),this.props.onChange({ajxp_modiftime:{from:startDate,to:endDate}})}else if("PYDIO_SEARCH_RANGE_LAST_YEAR"===value){var s=new Date;s.setFullYear(s.getFullYear()-1);var e=new Date;this.props.onChange({ajxp_modiftime:{from:s,to:e}})}}},SearchDatePanel.prototype.render=function(){var _this=this,today=new Date,_SearchDatePanel$styles=SearchDatePanel.styles,datePickerGroup=_SearchDatePanel$styles.datePickerGroup,datePicker=_SearchDatePanel$styles.datePicker,dateClose=_SearchDatePanel$styles.dateClose,_props=this.props,inputStyle=_props.inputStyle,getMessage=_props.getMessage,_state2=this.state,value=_state2.value,startDate=_state2.startDate,endDate=_state2.endDate;return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:{margin:"0 16px"}},_react2.default.createElement(DatePickerFeed,{pydio:this.props.pydio},function(items){return _react2.default.createElement(ModernSelectField,{hintText:getMessage(490),value:value,fullWidth:!0,onChange:function(e,index,value){return _this.setState({value:value})}},items.map(function(item){return _react2.default.createElement(_materialUi.MenuItem,{value:item.payload,label:item.text,primaryText:item.text})}))})),"custom"===value&&_react2.default.createElement("div",{style:_extends({},datePickerGroup,inputStyle)},_react2.default.createElement("div",{style:_extends({},datePicker,{marginRight:2})},_react2.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:startDate,onChange:function(e,date){return _this.setState({startDate:date})},hintText:getMessage(491),autoOk:!0,maxDate:endDate||today,defaultDate:startDate})),_react2.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this.setState({startDate:null})}})),_react2.default.createElement("div",{style:_extends({},datePicker,{marginLeft:2})},_react2.default.createElement(_materialUi.DatePicker,_extends({},ModernStyles.textField,{fullWidth:!0,value:endDate,onChange:function(e,date){return _this.setState({endDate:date})},hintText:getMessage(492),autoOk:!0,minDate:startDate,maxDate:today,defaultDate:endDate})),_react2.default.createElement("span",{className:"mdi mdi-close",style:dateClose,onClick:function(){return _this.setState({endDate:null})}}))))},SearchDatePanel}(_react2.default.Component),DatePickerFeed=function(_ref){var getMessage=(_ref.pydio,_ref.getMessage);return(0,_ref.children)([{payload:"",text:""},{payload:"custom",text:getMessage("612")},{payload:"PYDIO_SEARCH_RANGE_TODAY",text:getMessage("493")},{payload:"PYDIO_SEARCH_RANGE_YESTERDAY",text:getMessage("494")},{payload:"PYDIO_SEARCH_RANGE_LAST_WEEK",text:getMessage("495")},{payload:"PYDIO_SEARCH_RANGE_LAST_MONTH",text:getMessage("496")},{payload:"PYDIO_SEARCH_RANGE_LAST_YEAR",text:getMessage("497")}])};SearchDatePanel=PydioContextConsumer(SearchDatePanel),DatePickerFeed=PydioContextConsumer(DatePickerFeed),exports.default=SearchDatePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],37:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernStyles=_Pydio$requireLib.ModernStyles,ModernTextField=_Pydio$requireLib.ModernTextField,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchFileFormatPanel=function(_Component){_inherits(SearchFileFormatPanel,_Component);function SearchFileFormatPanel(props){_classCallCheck(this,SearchFileFormatPanel),_Component.call(this,props),this.state={folder:!(!this.props.values.ajxp_mime||"ajxp_folder"!==this.props.values.ajxp_mime)||void 0,ext:this.props.values.ajxp_mime&&"ajxp_folder"!==this.props.values.ajxp_mime?this.props.values.ajxp_mime:void 0}}return SearchFileFormatPanel.prototype.componentDidUpdate=function(prevProps,prevState){if(prevState!==this.state){var _state=this.state,folder=_state.folder,ext=_state.ext;this.props.onChange({ajxp_mime:folder?"ajxp_folder":ext})}},SearchFileFormatPanel.prototype.render=function(){var _this=this,_props=this.props,inputStyle=_props.inputStyle,getMessage=_props.getMessage;return _react2.default.createElement("div",null,!this.state.folder&&_react2.default.createElement(ModernTextField,{style:inputStyle,className:"mui-text-field",hintText:getMessage(500),value:this.state.ext,onChange:function(e){return _this.setState({ext:e.target.value})}}),_react2.default.createElement("div",{style:_extends({},ModernStyles.div,{margin:"6px 16px",padding:6,paddingRight:6})},_react2.default.createElement(_materialUi.Toggle,{fullWidth:!0,name:"toggleFolder",value:"ajxp_folder",label:getMessage(502),labelStyle:{fontSize:16,color:"rgba(0,0,0,.4)"},toggled:this.state.folder,onToggle:function(e,toggled){return _this.setState({folder:toggled})}})))},SearchFileFormatPanel}(_react.Component);SearchFileFormatPanel=PydioContextConsumer(SearchFileFormatPanel),exports.default=SearchFileFormatPanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],38:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),ModernTextField=_Pydio$requireLib.ModernTextField,ModernSelectField=_Pydio$requireLib.ModernSelectField,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib2.PydioContextConsumer,SearchFileSizePanel=function(_React$Component){_inherits(SearchFileSizePanel,_React$Component);function SearchFileSizePanel(props){_classCallCheck(this,SearchFileSizePanel),_React$Component.call(this,props),this.state={from:!1,to:null,fromUnit:"k",toUnit:"k"}}return SearchFileSizePanel.prototype.multiple=function(v,u){switch(u){case"k":return 1024*v;case"M":return 1024*v*1024;case"G":return 1024*v*1024*1024;case"T":return 1024*v*1024*1024*1024;default:return v}},SearchFileSizePanel.prototype.componentWillUpdate=function(nextProps,nextState){if(nextState!==this.state){var from=nextState.from,to=nextState.to,fromUnit=nextState.fromUnit,toUnit=nextState.toUnit;this.props.onChange({ajxp_bytesize:from||to?{from:this.multiple(from,fromUnit),to:this.multiple(to,toUnit)}:null})}},SearchFileSizePanel.prototype.render=function(){var _this=this,sizeUnit=_pydio2.default.getMessages().byte_unit_symbol||"B",getMessage=this.props.getMessage,blockStyle={display:"flex",margin:"0 16px"};return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:blockStyle},_react2.default.createElement(ModernTextField,{style:{flex:2,marginRight:4},type:"number",hintText:getMessage(613),onChange:function(e,v){_this.setState({from:v||0})}}),_react2.default.createElement(ModernSelectField,{value:this.state.fromUnit,onChange:function(e,i,v){_this.setState({fromUnit:v})},style:{marginLeft:4,flex:1}},_react2.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit}))),_react2.default.createElement("div",{style:blockStyle},_react2.default.createElement(ModernTextField,{style:{flex:2,marginRight:4},type:"number",hintText:getMessage(614),onChange:function(e,v){_this.setState({to:v||109951162})}}),_react2.default.createElement(ModernSelectField,{style:{marginLeft:4,flex:1},value:this.state.toUnit,onChange:function(e,i,v){_this.setState({toUnit:v})}},_react2.default.createElement(_materialUi.MenuItem,{value:"",primaryText:sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"k",primaryText:"K"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"M",primaryText:"M"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"G",primaryText:"G"+sizeUnit}),_react2.default.createElement(_materialUi.MenuItem,{value:"T",primaryText:"T"+sizeUnit}))))},SearchFileSizePanel}(_react2.default.Component);SearchFileSizePanel=PydioContextConsumer(SearchFileSizePanel),exports.default=SearchFileSizePanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],39:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}
var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_SearchScopeSelector=require("./SearchScopeSelector"),_SearchScopeSelector2=_interopRequireDefault(_SearchScopeSelector),_materialUiStyles=require("material-ui/styles"),_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,MainSearch=function(_Component){_inherits(MainSearch,_Component),_createClass(MainSearch,null,[{key:"propTypes",get:function(){return{title:_propTypes2.default.string,mode:_propTypes2.default.string,onOpen:_propTypes2.default.func,onAdvanced:_propTypes2.default.func,onMore:_propTypes2.default.func,onClose:_propTypes2.default.func,hintText:_propTypes2.default.string,loading:_propTypes2.default.bool,scopeSelectorProps:_propTypes2.default.object,showAdvanced:_propTypes2.default.bool}}},{key:"styles",get:function(){return{main:{width:"100%",height:36,transition:"all .25s",display:"flex",backgroundColor:"transparent",border:"1px solid rgba(255,255,255,.1)",borderRadius:2},input:{padding:"0 4px",border:0,color:"rgba(255, 255, 255, 0.64)"},hint:{transition:"all .25s",width:"100%",padding:"0 4px",bottom:0,lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgba(255, 255, 255, 0.64)"},magnifier:{padding:"7px 0 0 8px",fontSize:18,color:"rgba(255, 255, 255, 0.64)"},underline:{display:"none"}}}}]);function MainSearch(props){_classCallCheck(this,MainSearch),_Component.call(this,props),this.state={mode:props.mode,value:props.value||""}}return MainSearch.prototype.componentWillReceiveProps=function(nextProps){this.setState({mode:nextProps.mode}),nextProps.value&&!this.state.value&&this.setState({value:nextProps.value})},MainSearch.prototype.componentDidUpdate=function(){"closed"!==this.state.mode&&this.input&&this.input.focus()},MainSearch.prototype.onChange=function(value){var _this=this;this.setState({value:value},function(){_this.props.onChange({basenameOrContent:value})})},MainSearch.prototype.render=function(){var _this2=this,_props=this.props,mode=(_props.title,_props.mode),onOpen=_props.onOpen,onAdvanced=_props.onAdvanced,onMore=_props.onMore,onClose=_props.onClose,hintText=_props.hintText,loading=_props.loading,scopeSelectorProps=_props.scopeSelectorProps,showAdvanced=_props.showAdvanced,getMessage=_props.getMessage,_MainSearch$styles=MainSearch.styles,main=_MainSearch$styles.main,input=_MainSearch$styles.input,hint=_MainSearch$styles.hint,magnifier=_MainSearch$styles.magnifier,_props2=this.props,mainStyle=_props2.mainStyle,inputStyle=_props2.inputStyle,hintStyle=_props2.hintStyle,magnifierStyle=_props2.magnifierStyle;return _react2.default.createElement("div",{className:"search-input"},_react2.default.createElement("div",{className:"panel-header",style:{display:"flex"}},scopeSelectorProps&&_react2.default.createElement("span",null,_react2.default.createElement(_SearchScopeSelector2.default,_extends({style:{marginTop:-16,marginLeft:-26},labelStyle:{color:"white"}},scopeSelectorProps))),_react2.default.createElement("span",{style:{flex:1}}),showAdvanced&&_react2.default.createElement(_materialUi.FlatButton,{style:{textTransform:"none",color:"white",fontSize:15,marginTop:-5,padding:"0 16px"},onClick:"advanced"===mode?onMore:onAdvanced},"advanced"===mode?"- "+getMessage(606):"+ "+getMessage(605)),"advanced"===mode&&loading&&_react2.default.createElement("div",{style:{marginRight:10}},_react2.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2})),_react2.default.createElement("span",{className:"panel-header-close mdi mdi-close",onClick:this.props.onClose})),"advanced"!==mode&&_react2.default.createElement("div",{style:_extends({},main,mainStyle)},_react2.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-magnify",style:_extends({},magnifier,magnifierStyle)}),_react2.default.createElement(_materialUi.TextField,{ref:function(input){return _this2.input=input},style:{flex:1,height:main.height},inputStyle:_extends({},input,inputStyle),hintStyle:_extends({},hint,hintStyle),fullWidth:!0,underlineShow:!1,onFocus:onOpen,onBlur:"small"===mode?onClose:null,hintText:hintText,value:this.state.value||"",onChange:function(e,v){return _this2.onChange(v)},onKeyPress:function(e){return"Enter"===e.key?_this2.onChange(e.target.value):null}}),loading&&_react2.default.createElement("div",{style:{marginTop:7,marginRight:9}},_react2.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2}))))},MainSearch}(_react.Component);exports.default=MainSearch=PydioContextConsumer(_materialUiStyles.muiThemeable()(MainSearch)),exports.default=MainSearch,module.exports=exports.default},{"./SearchScopeSelector":41,"material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio",react:"react"}],40:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_viewsFilePreview=require("../../views/FilePreview"),_viewsFilePreview2=_interopRequireDefault(_viewsFilePreview),_AdvancedSearch=require("./AdvancedSearch"),_AdvancedSearch2=_interopRequireDefault(_AdvancedSearch),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioModelNode=require("pydio/model/node"),_pydioModelNode2=_interopRequireDefault(_pydioModelNode),_pydioModelEmptyNodeProvider=require("pydio/model/empty-node-provider"),_pydioModelEmptyNodeProvider2=_interopRequireDefault(_pydioModelEmptyNodeProvider),_pydioUtilLang=require("pydio/util/lang"),_pydioUtilLang2=_interopRequireDefault(_pydioUtilLang),_pydioHttpSearchApi=require("pydio/http/search-api"),_pydioHttpSearchApi2=_interopRequireDefault(_pydioHttpSearchApi),_SearchScopeSelector=require("./SearchScopeSelector"),_SearchScopeSelector2=_interopRequireDefault(_SearchScopeSelector),_MainSearch=require("./MainSearch"),_MainSearch2=_interopRequireDefault(_MainSearch),_materialUi=require("material-ui"),_lodash=require("lodash"),_Pydio$requireLib=_pydio2.default.requireLib("components"),EmptyStateView=_Pydio$requireLib.EmptyStateView,_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,SearchForm=function(_Component){_inherits(SearchForm,_Component);function SearchForm(props){var _this=this;_classCallCheck(this,SearchForm),_Component.call(this,props);var clearDataModel=function(){var basicDataModel=new PydioDataModel(!0),rNodeProvider=new _pydioModelEmptyNodeProvider2.default;basicDataModel.setAjxpNodeProvider(rNodeProvider);var rootNode=new _pydioModelNode2.default("/",!1,"","",rNodeProvider);return basicDataModel.setRootNode(rootNode),basicDataModel};this.state={values:props.advancedPanel&&props.values?props.values:{},display:props.advancedPanel?"advanced":"closed",dataModel:clearDataModel(),empty:!0,loading:!1,searchScope:props.uniqueSearchScope||props.searchScope||"folder"},this.setMode=_lodash.debounce(this.setMode,250),this.update=_lodash.debounce(this.update,500),this.submit=_lodash.debounce(this.submit,500),this.props.pydio.observe("repository_list_refreshed",function(){props.advancedPanel||_this.setState({values:{},display:"closed",dataModel:clearDataModel(),empty:!0,loading:!1})}),props.advancedPanel&&props.values&&Object.keys(props.values).length&&this.submit()}return SearchForm.prototype.componentDidUpdate=function(prevProps,prevState){var _this2=this;this.refs.results&&this.refs.results.refs.list&&(this.refs.results.refs.list.updateInfiniteContainerHeight(),FuncUtils.bufferCallback("search_results_resize_list",550,function(){try{_this2.refs.results.refs.list.updateInfiniteContainerHeight()}catch(e){}}))},SearchForm.prototype.setMode=function(mode){if("small"!==mode||"closed"===this.state.display){if("small"===mode&&"closed"===this.state.display){var _state$values=this.state.values,otherValues=(_state$values.basenameOrContent,_objectWithoutProperties(_state$values,["basenameOrContent"]));otherValues&&Object.keys(otherValues).length&&(mode="advanced")}this.setState({display:mode})}},SearchForm.prototype.update=function(newValues){var _props=this.props,onUpdateState=_props.onUpdateState,searchScope=_props.searchScope,values=_extends({},this.state.values,newValues);Object.keys(values).forEach(function(key){return!values[key]&&delete values[key]}),this.setState({values:values},this.submit),onUpdateState&&onUpdateState({searchScope:searchScope,values:values})},SearchForm.prototype.changeSearchScope=function(scope){var _this3=this,onUpdateState=this.props.onUpdateState,_state=this.state,display=_state.display,values=_state.values;"small"===display&&setTimeout(function(){return _this3.setMode("small")},250),this.setState({searchScope:scope},this.submit),onUpdateState&&onUpdateState({searchScope:scope,values:values})},SearchForm.prototype.submit=function(){var _this4=this,_state2=this.state,display=_state2.display,values=_state2.values,searchScope=_state2.searchScope,dataModel=_state2.dataModel,crossWorkspace=this.props.crossWorkspace,limit=crossWorkspace||"all"===searchScope?6:"small"===display?9:100,rootNode=dataModel.getRootNode();rootNode.setChildren([]),rootNode.setLoaded(!1);var keys=Object.keys(values);if(0===keys.length||1===keys.length&&"basenameOrContent"===keys[0]&&!values.basenameOrContent)return void this.setState({loading:!1,empty:!0});this.setState({loading:!0,empty:!1}),rootNode.setLoading(!0),new _pydioHttpSearchApi2.default(this.props.pydio).search(values,crossWorkspace?"all":searchScope,limit).then(function(response){rootNode.setChildren(response.Results),rootNode.setLoading(!1),rootNode.setLoaded(!0),_this4.setState({loading:!1})}).catch(function(){rootNode.setLoading(!1),_this4.setState({loading:!1})})},SearchForm.prototype.render=function(){var _this5=this,_props2=this.props,crossWorkspace=_props2.crossWorkspace,pydio=_props2.pydio,getMessage=_props2.getMessage,advancedPanel=_props2.advancedPanel,onOpenAdvanced=_props2.onOpenAdvanced,onCloseAdvanced=_props2.onCloseAdvanced,id=_props2.id,xtraSmallScreen=_props2.xtraSmallScreen,_state3=this.state,searchScope=_state3.searchScope,display=_state3.display,loading=_state3.loading,dataModel=_state3.dataModel,empty=_state3.empty,values=_state3.values,renderSecondLine=null,renderIcon=null,elementHeight=49;"small"!==display&&"closed"!==display?(elementHeight=PydioComponents.SimpleList.HEIGHT_TWO_LINES+10,renderSecondLine=function(node){var path=node.getPath();if("folder"===searchScope){var crtFolder=pydio.getContextHolder().getContextNode().getPath();0===path.indexOf(crtFolder)&&(path="./"+_pydioUtilLang2.default.trimLeft(path.substr(crtFolder.length),"/"))}return _react2.default.createElement("div",null,path)},renderIcon=function(node){var entryProps=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _react2.default.createElement(_viewsFilePreview2.default,{loadThumbnail:!entryProps.parentIsScrolling,node:node})}):renderIcon=function(node){arguments.length<=1||void 0===arguments[1]||arguments[1];return _react2.default.createElement(_viewsFilePreview2.default,{loadThumbnail:!1,richPreview:!1,node:node,style:{width:30,height:30,borderRadius:"50%",margin:"9px 6px"},mimeFontStyle:{fontSize:16,display:"block",padding:"4px 7px"}})};var nodeClicked=function(node){if(pydio.goTo(node),advancedPanel){var targetRepo=node.getMetadata().get("repository_id");targetRepo&&targetRepo!==pydio.user.activeRepository&&onCloseAdvanced()}else _this5.setMode("closed")},style=_extends({},this.props.style,{backgroundColor:"transparent"}),searchResultsStyle={};"closed"===display||advancedPanel||(searchResultsStyle={backgroundColor:"white",position:"absolute",right:0,display:"block",width:256}),xtraSmallScreen&&(searchResultsStyle.width="100%",searchResultsStyle.flex=2);var results=_react2.default.createElement(_materialUi.Paper,{className:"search-results",zDepth:advancedPanel?0:2,style:searchResultsStyle,rounded:!advancedPanel},empty&&_react2.default.createElement(EmptyStateView,{iconClassName:"",primaryTextId:611,style:{minHeight:180,backgroundColor:"transparent",padding:"0 20px"}}),_react2.default.createElement(PydioComponents.NodeListCustomProvider,{ref:"results",className:"small"!==display?"files-list":null,elementHeight:elementHeight,entryRenderIcon:renderIcon,entryRenderActions:function(){return null},entryRenderSecondLine:renderSecondLine,presetDataModel:dataModel,heightAutoWithMax:advancedPanel?0:500,openCollection:nodeClicked,nodeClicked:nodeClicked,defaultGroupBy:crossWorkspace||"all"===searchScope?"repository_id":null,groupByLabel:crossWorkspace||"all"===searchScope?"repository_display":null,emptyStateProps:{iconClassName:"",primaryTextId:loading?"searchengine.searching":478,style:{minHeight:"small"===display?180:advancedPanel?240:412,backgroundColor:"transparent",padding:"0 20px"},secondaryTextId:"ws"===searchScope?620:"folder"===searchScope?619:null,actionLabelId:"ws"===searchScope?610:"folder"===searchScope?609:null,actionCallback:"all"!==searchScope?function(){_this5.changeSearchScope("ws"===searchScope?"all":"ws")}:null,actionStyle:{marginTop:10}}}),"small"===display&&_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:4,paddingTop:0,backgroundColor:"#eeeeee",width:"100%"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react2.default.createElement(_SearchScopeSelector2.default,{style:{flex:1},labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)},onClick:function(){return _this5.setMode("small")}}),_react2.default.createElement(_materialUi.FlatButton,{style:{marginTop:4,minWidth:0},labelStyle:{padding:"0 8px"},primary:!0,label:getMessage(456),onClick:function(){onOpenAdvanced()}})));if(advancedPanel)return _react2.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react2.default.createElement("div",{style:{display:"flex",alignItems:"center",padding:"0 8px 8px",height:44,width:"100%",backgroundColor:"#eee",borderBottom:"1px solid #e0e0e0"}},!crossWorkspace&&!this.props.uniqueSearchScope&&_react2.default.createElement("div",{style:{flex:1,height:48}},_react2.default.createElement(_SearchScopeSelector2.default,{labelStyle:{paddingLeft:8},value:searchScope,onChange:function(scope){_this5.changeSearchScope(scope)}})),_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-close",style:{minWidth:0,marginTop:4},tooltip:getMessage(86),onClick:function(){onCloseAdvanced()}})),_react2.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:xtraSmallScreen?"column":"row",overflow:"hidden"}},_react2.default.createElement(_AdvancedSearch2.default,_extends({},this.props,{values:values,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},rootStyle:xtraSmallScreen?{flex:1,width:"100%",borderRight:0}:{}})),results));var formStyles=this.props.formStyles;return _react2.default.createElement(_materialUi.Paper,{ref:"root",zDepth:0,className:"top_search_form "+display,style:style,id:id},_react2.default.createElement(_MainSearch2.default,_extends({mode:display,value:values.basenameOrContent,onOpen:function(){return _this5.setMode("small")},onClose:function(){return _this5.setMode("closed")},showAdvanced:!crossWorkspace,onAdvanced:onOpenAdvanced,onChange:function(values){return _this5.update(values)},onSubmit:function(){return _this5.submit()},hintText:getMessage(crossWorkspace||"all"===searchScope?607:87)+"...",loading:loading,scopeSelectorProps:crossWorkspace||this.props.uniqueSearchScope?null:{value:searchScope,onChange:this.changeSearchScope.bind(this)}},formStyles)),results)},SearchForm}(_react.Component);SearchForm=PydioContextConsumer(SearchForm),exports.default=SearchForm,module.exports=exports.default},{"../../views/FilePreview":49,"./AdvancedSearch":35,"./MainSearch":39,"./SearchScopeSelector":41,lodash:62,"material-ui":"material-ui",pydio:"pydio","pydio/http/search-api":"pydio/http/search-api","pydio/model/empty-node-provider":"pydio/model/empty-node-provider","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],41:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_react2=_interopRequireDefault(_react),_materialUi=require("material-ui"),_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,SearchScopeSelector=function(_Component){_inherits(SearchScopeSelector,_Component);function SearchScopeSelector(){_classCallCheck(this,SearchScopeSelector),_Component.apply(this,arguments)}return SearchScopeSelector.prototype.render=function(){var _this=this,getMessage=this.props.getMessage;return _react2.default.createElement(_materialUi.DropDownMenu,{value:this.props.value,onChange:function(e,i,v){_this.props.onChange(v)},onClick:this.props.onClick,autoWidth:!0,style:this.props.style,underlineStyle:{display:"none"},labelStyle:this.props.labelStyle},_react2.default.createElement(_materialUi.MenuItem,{value:"folder",primaryText:getMessage(608)}),_react2.default.createElement(_materialUi.MenuItem,{value:"ws",primaryText:getMessage(609)}),_react2.default.createElement(_materialUi.MenuItem,{value:"all",primaryText:getMessage(610)}))},_createClass(SearchScopeSelector,null,[{key:"propTypes",get:function(){return{value:_propTypes2.default.string,onChange:_propTypes2.default.func.isRequired,onClick:_propTypes2.default.func.isRequired,style:_propTypes2.default.object,labelStyle:_propTypes2.default.object}}}]),SearchScopeSelector}(_react.Component);exports.default=SearchScopeSelector=PydioContextConsumer(SearchScopeSelector),exports.default=SearchScopeSelector,module.exports=exports.default},{"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio",react:"react"}],42:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _componentsSearchForm=require("./components/SearchForm");exports.SearchForm=_interopRequire(_componentsSearchForm)},{"./components/SearchForm":40}],43:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_pydioModelIdmObjectHelper=require("pydio/model/idm-object-helper"),_pydioModelIdmObjectHelper2=_interopRequireDefault(_pydioModelIdmObjectHelper),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_Pydio$requireLib=_pydio2.default.requireLib("components"),AddressBook=_Pydio$requireLib.AddressBook,UserAvatar=_Pydio$requireLib.UserAvatar,CellActionsRenderer=_Pydio$requireLib.CellActionsRenderer,AddressBookPanel=function(_React$Component){_inherits(AddressBookPanel,_React$Component);function AddressBookPanel(props){var _this=this;_classCallCheck(this,AddressBookPanel),_React$Component.call(this,props),this.state={noCell:!1,cellModel:null},this._observer=function(){_this.forceUpdate()}}return AddressBookPanel.prototype.componentDidMount=function(){this.loadCell()},AddressBookPanel.prototype.componentWillUnmount=function(){this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer)},AddressBookPanel.prototype.loadCell=function(){var _this2=this,pydio=this.props.pydio;pydio.user.getActiveRepositoryAsCell().then(function(cell){cell?(cell.observe("update",_this2._observer),_this2.setState({cellModel:cell,noCell:!1,cellId:pydio.user.activeRepository})):_this2.setState({noCell:!0,cellId:pydio.user.activeRepository})})},AddressBookPanel.prototype.componentWillReceiveProps=function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&(this.state.cellModel&&this.state.cellModel.stopObserving("update",this._observer),this.loadCell())},AddressBookPanel.prototype.renderListItem=function(acl){var pydio=this.props.pydio,cellModel=this.state.cellModel,label=_pydioModelIdmObjectHelper2.default.extractLabel(pydio,acl),userAvatar=void 0,userType=void 0,userId=void 0;acl.User&&acl.User.Attributes&&acl.User.Attributes.avatar&&(userAvatar=acl.User.Attributes.avatar),acl.User?(userType="user",userId=acl.User.Login):acl.Group?(userType="group",userId=acl.Group.Uuid):(userId=acl.Role.Uuid,userType="team");var avatar=_react2.default.createElement(UserAvatar,{avatarSize:36,pydio:pydio,userType:userType,userId:userId,userLabel:label,avatar:userAvatar,avatarOnly:!0,useDefaultAvatar:!0}),rightMenu=void 0,menuItems=new CellActionsRenderer(pydio,cellModel,acl).renderItems();return menuItems.length&&(rightMenu=_react2.default.createElement(_materialUi.IconMenu,{iconButtonElement:_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-dots-vertical",iconStyle:{color:"rgba(0,0,0,.33)"}}),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"}},menuItems)),_react2.default.createElement(_materialUi.ListItem,{primaryText:label,leftAvatar:avatar,rightIconButton:rightMenu})},AddressBookPanel.prototype.render=function(){var _this3=this,_props=this.props,pydio=_props.pydio,style=_props.style,zDepth=_props.zDepth,_state=this.state,cellModel=_state.cellModel,noCell=_state.noCell,cellInfo=void 0;!noCell&&cellModel&&function(){var acls=cellModel.getAcls(),items=[];Object.keys(acls).map(function(roleId){items.push(_this3.renderListItem(acls[roleId])),items.push(_react2.default.createElement(_materialUi.Divider,{inset:!0}))}),items.pop(),cellInfo=_react2.default.createElement("div",{style:{borderBottom:"1px solid #e0e0e0"}},_react2.default.createElement(_materialUi.List,null,_react2.default.createElement(_materialUi.Subheader,null,pydio.MessageHash[639]),items))}();var columnStyle=_extends({position:"absolute",width:270,top:100,bottom:0,backgroundColor:"#fafafa",transition:_pydioUtilDom2.default.getBeziersTransition()},style);return _react2.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,style:_extends({},columnStyle,{display:"flex",flexDirection:"column"})},cellInfo,pydio.Controller.getActionByName("open_address_book")&&_react2.default.createElement(AddressBook,{mode:"selector",bookColumn:!0,pydio:pydio,disableSearch:!1,style:{height:null,flex:1},actionsForCell:!(!noCell&&cellModel)||cellModel}))},AddressBookPanel}(_react2.default.Component);exports.default=AddressBookPanel,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio","pydio/model/idm-object-helper":"pydio/model/idm-object-helper","pydio/util/dom":"pydio/util/dom",react:"react"}],44:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var React=require("react"),PydioNode=require("pydio/model/node"),_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,LangUtils=require("pydio/util/lang"),_require2=require("react-textfit"),Textfit=_require2.Textfit,Breadcrumb=function(_React$Component){_inherits(Breadcrumb,_React$Component);function Breadcrumb(){var _this=this;_classCallCheck(this,Breadcrumb),_React$Component.apply(this,arguments),this.state={node:null,minFit:!1},this.goTo=function(target,event){var targetNode=new PydioNode(target);_this.props.pydio.getContextHolder().requireContextChange(targetNode)},this.toggleMinFit=function(font){var minFit=_this.state.minFit,newMinFit=12===font;newMinFit!==minFit&&_this.setState({minFit:newMinFit})}}return Breadcrumb.prototype.componentDidMount=function(){var n=this.props.pydio.getContextHolder().getContextNode();n&&this.setState({node:n}),this._observer=function(event){this.setState({node:event.memo,minFit:!1})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._observer)},Breadcrumb.prototype.componentWillUnmount=function(){this.props.pydio.getContextHolder().stopObserving("context_changed",this._observer)},Breadcrumb.prototype.render=function(){var _this2=this,_props=this.props,pydio=_props.pydio,muiTheme=_props.muiTheme,rootStyle=_props.rootStyle,_state=this.state,node=_state.node,minFit=_state.minFit,styles={main:{fontSize:21,height:36,lineHeight:"44px",padding:"0 20px",color:muiTheme.appBar.textColor,width:"100%"}};if(!pydio.user)return React.createElement("span",{className:"react_breadcrumb"});var repoLabel=" ";pydio.user&&pydio.user.activeRepository&&pydio.user.repositories.has(pydio.user.activeRepository)&&(repoLabel=pydio.user.repositories.get(pydio.user.activeRepository).getLabel());var segments=[],path=node?LangUtils.trimLeft(node.getPath(),"/"):"",label=node?node.getLabel():"",rebuilt="",mainStyle=rootStyle||{};mainStyle=_extends({},styles.main,mainStyle),minFit&&(mainStyle=_extends({},mainStyle,{overflow:"hidden"}));var parts=path.split("/");return parts.forEach(function(seg,i){seg&&(rebuilt+="/"+seg,segments.push(React.createElement("span",{key:"bread_sep_"+i,className:"separator"}," / ")),segments.push(React.createElement("span",{key:"bread_"+i,className:"segment",onClick:this.goTo.bind(this,rebuilt)},i===parts.length-1?label:seg)))}.bind(this)),React.createElement(Textfit,{mode:"single",min:12,max:22,className:"react_breadcrumb",style:mainStyle,onReady:function(f){_this2.toggleMinFit(f)}},this.props.startWithSeparator&&React.createElement("span",{className:"separator"}," / "),React.createElement("span",{className:"segment first",onClick:this.goTo.bind(this,"/")},repoLabel),segments)},Breadcrumb}(React.Component);exports.default=Breadcrumb=muiThemeable()(Breadcrumb),exports.default=Breadcrumb,module.exports=exports.default},{"material-ui/styles":"material-ui/styles","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react","react-textfit":"react-textfit"}],45:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUi=require("material-ui"),_Pydio$requireLib=_pydio2.default.requireLib("components"),Chat=_Pydio$requireLib.Chat,CellChat=function(_React$Component){_inherits(CellChat,_React$Component);function CellChat(props){_classCallCheck(this,CellChat),_React$Component.call(this,props),this.state={cellModel:null,cellId:""}}return CellChat.prototype.loadRoomData=function(){var _this=this,user=this.props.pydio.user;user.getActiveRepositoryAsCell().then(function(c){_this.setState({cellModel:c,cellId:c?user.activeRepository:""})})},CellChat.prototype.componentWillMount=function(){this.loadRoomData()},CellChat.prototype.componentWillReceiveProps=function(nextProps){nextProps.pydio.user.activeRepository!==this.state.cellId&&this.loadRoomData()},CellChat.prototype.render=function(){var _props=this.props,pydio=_props.pydio,style=_props.style,zDepth=_props.zDepth,onRequestClose=_props.onRequestClose,_state=this.state,cellModel=_state.cellModel,cellId=_state.cellId;return _react2.default.createElement(_materialUi.Paper,{id:"info_panel",zDepth:zDepth,rounded:!1,style:_extends({display:"flex",flexDirection:"column"},style)
},_react2.default.createElement(Chat,{pydio:pydio,roomType:"WORKSPACE",roomObjectId:cellId,style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},msgContainerStyle:{maxHeight:null,flex:1,paddingTop:"10px !important",backgroundColor:"#FAFAFA"},fieldHint:pydio.MessageHash[636],pushMessagesToBottom:!0,emptyStateProps:{iconClassName:"mdi mdi-comment-account-outline",primaryTextId:pydio.MessageHash[637],style:{padding:"0 10px",backgroundColor:"transparent"}},computePresenceFromACLs:cellModel?cellModel.getAcls():{},onRequestClose:onRequestClose}))},CellChat}(_react2.default.Component);exports.default=CellChat,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],46:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydioUtilDom=require("pydio/util/dom"),CellsMessageToolbar=(_interopRequireDefault(_pydioUtilDom),function(_React$Component){_inherits(CellsMessageToolbar,_React$Component);function CellsMessageToolbar(props){_classCallCheck(this,CellsMessageToolbar),_React$Component.call(this,props);var pydio=props.pydio,node=pydio.getContextHolder().getContextNode();node&&node.getMetadata().has("virtual_root")?this.state={display:!0}:this.state={display:!1}}return CellsMessageToolbar.prototype.componentDidMount=function(){var _this=this,pydio=this.props.pydio;this._observer=function(){var node=pydio.getContextHolder().getContextNode();node&&node.getMetadata().has("virtual_root")?_this.setState({display:!0}):_this.setState({display:!1})},pydio.observe("context_changed",this._observer)},CellsMessageToolbar.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("context_changed",this._observer)},CellsMessageToolbar.prototype.render=function(){var display=this.state.display,pydio=this.props.pydio;if(!display)return null;var s={padding:16,color:"#9E9E9E",borderBottom:"1px solid #F5F5F5"};return _react2.default.createElement("div",{style:s},pydio.MessageHash[638])},CellsMessageToolbar}(_react2.default.Component));exports.default=CellsMessageToolbar,module.exports=exports.default},{"pydio/util/dom":"pydio/util/dom",react:"react"}],47:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_OpenNodesModel=require("../OpenNodesModel"),_OpenNodesModel2=_interopRequireDefault(_OpenNodesModel),_reactRedux=require("react-redux"),_editor=require("../editor"),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),EditorActions=_Pydio$requireLib.EditorActions,EditionPanel=function(_React$Component){_inherits(EditionPanel,_React$Component);function EditionPanel(props){_classCallCheck(this,EditionPanel),_React$Component.call(this,props)}return EditionPanel.prototype.componentDidMount=function(){var _this=this;this._updateObserver=function(nodes){return _this._handleUpdate(nodes)},this._nodesModelObserver=function(node){return _this._handleNodePushed(node)},this._nodesRemoveObserver=function(index){return _this._handleNodeRemoved(index)},this._titlesObserver=function(){return _this.forceUpdate()},_OpenNodesModel2.default.getInstance().observe("update",this._updateObserver),_OpenNodesModel2.default.getInstance().observe("nodePushed",this._nodesModelObserver),_OpenNodesModel2.default.getInstance().observe("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel2.default.getInstance().observe("titlesUpdated",this._titlesObserver)},EditionPanel.prototype.componentWillUnmount=function(){(0,this.props.tabDeleteAll)(),_OpenNodesModel2.default.getInstance().stopObserving("update",this._updateObserver),_OpenNodesModel2.default.getInstance().stopObserving("nodePushed",this._nodesModelObserver),_OpenNodesModel2.default.getInstance().stopObserving("nodeRemovedAtIndex",this._nodesRemoveObserver),_OpenNodesModel2.default.getInstance().stopObserving("titlesUpdated",this._titlesObserver)},EditionPanel.prototype._handleUpdate=function(nodes){var tabDeleteAll=this.props.tabDeleteAll;0===nodes.length&&tabDeleteAll()},EditionPanel.prototype._handleNodePushed=function(object){var _props=this.props,pydio=_props.pydio,tabCreate=_props.tabCreate,editorModify=_props.editorModify,editorSetActiveTab=_props.editorSetActiveTab,_object$node=object.node,node=void 0===_object$node?{}:_object$node,editorData=object.editorData;pydio.Registry.loadEditorResources(editorData.resourcesManager,function(){var tabId=tabCreate({id:node.getLabel(),title:node.getLabel(),url:node.getPath(),metadata:node.getMetadata(),readonly:"true"===node.getMetadata().get("node_readonly"),node:node,editorData:editorData,icon:PydioWorkspaces.FilePreview}).id;editorSetActiveTab(tabId),editorModify({isMinimised:!1})})},EditionPanel.prototype._handleNodeRemoved=function(index){},EditionPanel.prototype.render=function(){return React.createElement(_editor.Editor,null)},EditionPanel}(React.Component);EditionPanel.PropTypes={pydio:_propTypes2.default.instanceOf(_pydio2.default)},exports.default=_reactRedux.connect(null,EditorActions)(EditionPanel),module.exports=exports.default},{"../OpenNodesModel":8,"../editor":28,"prop-types":"prop-types",pydio:"pydio","react-redux":"react-redux"}],48:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_Breadcrumb=require("./Breadcrumb"),_Breadcrumb2=_interopRequireDefault(_Breadcrumb),_search=require("../search"),_MainFilesList=require("./MainFilesList"),_MainFilesList2=_interopRequireDefault(_MainFilesList),_EditionPanel=require("./EditionPanel"),_EditionPanel2=_interopRequireDefault(_EditionPanel),_detailpanesInfoPanel=require("../detailpanes/InfoPanel"),_detailpanesInfoPanel2=_interopRequireDefault(_detailpanesInfoPanel),_WelcomeTour=require("./WelcomeTour"),_WelcomeTour2=_interopRequireDefault(_WelcomeTour),_CellChat=require("./CellChat"),_CellChat2=_interopRequireDefault(_CellChat),_materialUi=require("material-ui"),_AddressBookPanel=require("./AddressBookPanel"),_AddressBookPanel2=_interopRequireDefault(_AddressBookPanel),_MasterLayout=require("./MasterLayout"),_MasterLayout2=_interopRequireDefault(_MasterLayout),_materialUiStyles=require("material-ui/styles"),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_color=require("color"),_color2=_interopRequireDefault(_color),_Pydio$requireLib=_pydio2.default.requireLib("components"),ButtonMenu=_Pydio$requireLib.ButtonMenu,Toolbar=_Pydio$requireLib.Toolbar,ListPaginator=_Pydio$requireLib.ListPaginator,FSTemplate=function(_React$Component){_inherits(FSTemplate,_React$Component);function FSTemplate(props){_classCallCheck(this,FSTemplate),_React$Component.call(this,props);var rState="info-panel";void 0!==localStorage.getItem("pydio.layout.rightColumnState")&&localStorage.getItem("pydio.layout.rightColumnState")&&(rState=localStorage.getItem("pydio.layout.rightColumnState"));var closedToggle="closed"===localStorage.getItem("pydio.layout.infoPanelToggle"),closedInfo="closed"===localStorage.getItem("pydio.layout.infoPanelOpen"),pydio=this.props.pydio,themeLight=!1;pydio.user&&pydio.user.getPreference("theme")&&"default"!==pydio.user.getPreference("theme")?themeLight="light"===pydio.user.getPreference("theme"):"light"===pydio.getPluginConfigs("gui.ajax").get("GUI_THEME")&&(themeLight=!0);var w=_pydioUtilDom2.default.getViewportWidth();this.state={infoPanelOpen:!closedInfo,infoPanelToggle:!closedToggle,drawerOpen:!1,rightColumnState:rState,searchFormState:{},themeLight:themeLight,smallScreen:w<=758,xtraSmallScreen:w<=420}}return FSTemplate.prototype.componentDidMount=function(){var _this=this,pydio=this.props.pydio;this._themeObserver=function(user){if(user){var uTheme=void 0;uTheme=user.getPreference("theme")&&"default"!==user.getPreference("theme")?user.getPreference("theme"):pydio.getPluginConfigs("gui.ajax").get("GUI_THEME"),_this.setState({themeLight:"light"===uTheme})}},pydio.observe("user_logged",this._themeObserver),this._resizer=function(){var w=_pydioUtilDom2.default.getViewportWidth();_this.setState({smallScreen:w<758,xtraSmallScreen:w<=420})},_pydioUtilDom2.default.observeWindowResize(this._resizer)},FSTemplate.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("user_logged",this._themeObserver),_pydioUtilDom2.default.stopObservingWindowResize(this._resizer)},FSTemplate.prototype.openRightPanel=function(name){var _this2=this,rightColumnState=this.state.rightColumnState;if(name===rightColumnState)return void this.closeRightPanel();this.setState({rightColumnState:name},function(){var infoPanelOpen=_this2.state.infoPanelOpen;"info-panel"!==name&&(infoPanelOpen=!0),"advanced-search"!==name&&(localStorage.setItem("pydio.layout.rightColumnState",name),localStorage.setItem("pydio.layout.infoPanelToggle","open"),localStorage.setItem("pydio.layout.infoPanelOpen",infoPanelOpen?"open":"closed")),_this2.setState({infoPanelToggle:!0,infoPanelOpen:infoPanelOpen},function(){return _this2.resizeAfterTransition()})})},FSTemplate.prototype.closeRightPanel=function(){var _this3=this;if("advanced-search"===this.state.rightColumnState){var rState=localStorage.getItem("pydio.layout.rightColumnState");void 0!==rState&&rState&&"advanced-search"!==rState?this.openRightPanel(rState):this.setState({infoPanelToggle:!1},function(){_this3.resizeAfterTransition()})}else this.setState({infoPanelToggle:!1},function(){_this3.resizeAfterTransition()}),localStorage.setItem("pydio.layout.rightColumnState",""),localStorage.setItem("pydio.layout.infoPanelToggle","closed")},FSTemplate.prototype.resizeAfterTransition=function(){var _this4=this;setTimeout(function(){_this4.refs.list&&_this4.refs.list.resize(),_this4.state.infoPanelToggle||_this4.setState({rightColumnState:null})},300)},FSTemplate.prototype.infoPanelContentChange=function(numberOfCards){var _this5=this;this.setState({infoPanelOpen:numberOfCards>0},function(){return _this5.resizeAfterTransition()})},FSTemplate.prototype.openDrawer=function(event){event.stopPropagation(),this.setState({drawerOpen:!0})},FSTemplate.prototype.render=function(){var _this6=this,muiTheme=this.props.muiTheme,mobile=this.props.pydio.UI.MOBILE_EXTENSIONS,appBarTextColor=_color2.default(muiTheme.appBar.textColor),appBarBackColor=_color2.default(muiTheme.appBar.color),colorHue=_color2.default(muiTheme.palette.primary1Color).hsl().array()[0],superLightBack=new _color2.default({h:colorHue,s:35,l:98}),infoPanelBg=new _color2.default({h:colorHue,s:30,l:96}),_state=this.state,themeLight=_state.themeLight,smallScreen=_state.smallScreen,xtraSmallScreen=_state.xtraSmallScreen;themeLight&&(appBarBackColor=superLightBack,appBarTextColor=_color2.default(muiTheme.appBar.color));var headerHeight=72,buttonsHeight=23,buttonsFont=11,crtWidth=_pydioUtilDom2.default.getViewportWidth(),styles={appBarStyle:{zIndex:1,backgroundColor:appBarBackColor.toString(),height:headerHeight,display:"flex"},buttonsStyle:{width:40,height:40,padding:10,borderRadius:"50%",color:appBarTextColor.fade(.03).toString(),transition:_pydioUtilDom2.default.getBeziersTransition()},buttonsIconStyle:{fontSize:18,color:appBarTextColor.fade(.03).toString()},activeButtonStyle:{backgroundColor:appBarTextColor.fade(.9).toString()},activeButtonIconStyle:{color:appBarTextColor.fade(.03).toString()},raisedButtonStyle:{height:buttonsHeight,minWidth:0},raisedButtonLabelStyle:{height:buttonsHeight,paddingLeft:12,paddingRight:8,lineHeight:buttonsHeight+"px",fontSize:buttonsFont},flatButtonStyle:{height:buttonsHeight,lineHeight:buttonsHeight+"px",minWidth:0},flatButtonLabelStyle:{height:buttonsHeight,fontSize:buttonsFont,paddingLeft:8,paddingRight:8,color:appBarTextColor.fade(.03).toString()},infoPanelStyle:{backgroundColor:infoPanelBg.toString(),top:headerHeight},otherPanelsStyle:{top:headerHeight,borderLeft:0,margin:10,width:290},searchFormPanelStyle:{top:headerHeight,borderLeft:0,margin:10,width:smallScreen?xtraSmallScreen?crtWidth:420:520,right:xtraSmallScreen?-10:null,overflowY:"hidden",display:"flex",flexDirection:"column",backgroundColor:"white"},breadcrumbStyle:{},searchForm:{}};styles.activeButtonStyle=_extends({},styles.buttonsStyle,styles.activeButtonStyle),styles.activeButtonIconStyle=_extends({},styles.buttonsIconStyle,styles.activeButtonIconStyle);var _state2=this.state,infoPanelOpen=_state2.infoPanelOpen,drawerOpen=_state2.drawerOpen,infoPanelToggle=_state2.infoPanelToggle,filesListDisplayMode=_state2.filesListDisplayMode,rightColumnState=this.state.rightColumnState,mainToolbars=["change_main","info_panel","info_panel_share"],mainToolbarsOthers=["change","other"],pydio=this.props.pydio,guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):[],wTourEnabled=pydio.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR"),showChatTab=!pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS"),showAddressBook=!pydio.getPluginConfigs("action.user").get("DASH_DISABLE_ADDRESS_BOOK")&&!smallScreen,showInfoPanel=!xtraSmallScreen;if(showChatTab){var repo=pydio.user.getRepositoriesList().get(pydio.user.activeRepository);repo&&!repo.getOwner()&&(showChatTab=!1)}showChatTab||"chat"!==rightColumnState||(rightColumnState="info-panel"),showInfoPanel||"info-panel"!==rightColumnState||(rightColumnState="");var classes=["vertical_layout","vertical_fit","react-fs-template"],thumbDisplay=filesListDisplayMode&&0===filesListDisplayMode.indexOf("grid-");(infoPanelOpen||thumbDisplay)&&infoPanelToggle&&(classes.push("info-panel-open"),"info-panel"!==rightColumnState&&classes.push("info-panel-open-lg"));var _props=this.props,style=_props.style,props=_objectWithoutProperties(_props,["style"]),tutorialComponent=void 0;wTourEnabled&&!guiPrefs["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]&&(tutorialComponent=_react2.default.createElement(_WelcomeTour2.default,{ref:"welcome",pydio:this.props.pydio}));var uWidgetColor="rgba(255,255,255,.93)",uWidgetBack=null;if(themeLight){var _colorHue=_color2.default(muiTheme.palette.primary1Color).hsl().array()[0];uWidgetColor=_color2.default(muiTheme.palette.primary1Color).darken(.1).alpha(.87).toString(),uWidgetBack=new _color2.default({h:_colorHue,s:35,l:98}).toString()}var newButtonProps={buttonStyle:_extends({},styles.flatButtonStyle,{marginRight:4}),buttonLabelStyle:_extends({},styles.flatButtonLabelStyle),buttonBackgroundColor:"rgba(255,255,255,0.17)",buttonHoverColor:"rgba(255,255,255,0.33)"},leftPanelProps={headerHeight:headerHeight,userWidgetProps:{color:uWidgetColor,mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:headerHeight,display:"flex",alignItems:"center"}}};themeLight&&(leftPanelProps.userWidgetProps.style=_extends({},leftPanelProps.userWidgetProps.style,{boxShadow:"none",backgroundColor:uWidgetBack,borderRight:"1px solid #e0e0e0"}),styles.breadcrumbStyle={color:appBarTextColor.toString()},styles.searchForm={mainStyle:{border:"1px solid "+appBarTextColor.fade(.8).toString()},inputStyle:{color:appBarTextColor.toString()},hintStyle:{color:appBarTextColor.fade(.5).toString()},magnifierStyle:{color:appBarTextColor.fade(.1).toString()}},newButtonProps.buttonLabelStyle.color=muiTheme.palette.accent1Color,newButtonProps.buttonBackgroundColor="rgba(0,0,0,0.05)",newButtonProps.buttonHoverColor="rgba(0,0,0,0.10)");var searchForm=_react2.default.createElement(_search.SearchForm,_extends({},props,this.state.searchFormState,{formStyles:styles.searchForm,style:"advanced-search"===rightColumnState?styles.searchFormPanelStyle:{},id:"advanced-search"===rightColumnState?"info_panel":null,headerHeight:headerHeight,advancedPanel:"advanced-search"===rightColumnState,onOpenAdvanced:function(){_this6.openRightPanel("advanced-search")},onCloseAdvanced:function(){_this6.closeRightPanel()},onUpdateState:function(s){_this6.setState({searchFormState:s})},smallScreen:smallScreen,xtraSmallScreen:xtraSmallScreen}));return _react2.default.createElement(_MasterLayout2.default,{pydio:pydio,style:_extends({},style,{overflow:"hidden"}),classes:classes,tutorialComponent:tutorialComponent,drawerOpen:drawerOpen,leftPanelProps:leftPanelProps,onCloseDrawerRequested:function(){_this6.setState({drawerOpen:!1})}},_react2.default.createElement(_materialUi.Paper,{zDepth:themeLight?0:1,style:styles.appBarStyle,rounded:!1},_react2.default.createElement("div",{id:"workspace_toolbar",style:{flex:1,width:"calc(100% - 430px)",display:"flex"}},_react2.default.createElement("span",{className:"drawer-button",style:{marginLeft:12,marginRight:-6}},_react2.default.createElement(_materialUi.IconButton,{iconStyle:{color:appBarTextColor.fade(.03).toString()},iconClassName:"mdi mdi-menu",onClick:this.openDrawer})),_react2.default.createElement("div",{style:{flex:1,overflow:"hidden"}},_react2.default.createElement(_Breadcrumb2.default,_extends({},props,{startWithSeparator:!1,rootStyle:styles.breadcrumbStyle})),_react2.default.createElement("div",{style:{height:32,paddingLeft:20,alignItems:"center",display:"flex",overflow:"hidden"}},_react2.default.createElement(ButtonMenu,_extends({},props,newButtonProps,{id:"create-button-menu",toolbars:["upload","create"],buttonTitle:this.props.pydio.MessageHash[198],raised:!1,secondary:!0,controller:props.pydio.Controller,openOnEvent:"tutorial-open-create-menu"})),_react2.default.createElement(ListPaginator,{id:"paginator-toolbar",style:{height:23,borderRadius:2,background:newButtonProps.buttonBackgroundColor,marginRight:5},dataModel:props.pydio.getContextHolder(),smallDisplay:!0,toolbarDisplay:!0,toolbarColor:appBarTextColor}),!mobile&&_react2.default.createElement(Toolbar,_extends({},props,{id:"main-toolbar",toolbars:mainToolbars,groupOtherList:mainToolbarsOthers,renderingType:"button",toolbarStyle:{flex:1,overflow:"hidden"},flatButtonStyle:styles.flatButtonStyle,buttonStyle:styles.flatButtonLabelStyle})),mobile&&_react2.default.createElement("span",{style:{flex:1}})))),_react2.default.createElement("div",{style:{display:"flex",alignItems:"center"}},_react2.default.createElement(Toolbar,_extends({},props,{id:"display-toolbar",toolbars:["display_toolbar"],renderingType:"icon-font",mergeItemsAsOneMenu:!0,mergedMenuIcom:"mdi mdi-settings",mergedMenuTitle:this.props.pydio.MessageHash[151],buttonStyle:styles.buttonsIconStyle,flatButtonStyle:styles.buttonsStyle})),_react2.default.createElement("div",{style:{position:"relative",width:"advanced-search"===rightColumnState||smallScreen?40:150,transition:_pydioUtilDom2.default.getBeziersTransition()}},!smallScreen&&"advanced-search"!==rightColumnState&&searchForm,("advanced-search"===rightColumnState||smallScreen)&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-magnify",style:"advanced-search"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"advanced-search"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this6.openRightPanel("advanced-search")},tooltip:pydio.MessageHash["info-panel"===rightColumnState?"86":"87"]})),_react2.default.createElement("div",{style:{borderLeft:"1px solid "+appBarTextColor.fade(.77).toString(),margin:"0 10px",height:headerHeight,display:"none"}}),_react2.default.createElement("div",{style:{display:"flex",paddingRight:10}},showInfoPanel&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-information",style:"info-panel"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"info-panel"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this6.openRightPanel("info-panel")},tooltip:pydio.MessageHash["info-panel"===rightColumnState?"86":"341"]}),showAddressBook&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-account-card-details",style:"address-book"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"address-book"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this6.openRightPanel("address-book")},tooltip:pydio.MessageHash["address-book"===rightColumnState?"86":"592"],tooltipPosition:showChatTab?"bottom-center":"bottom-left"}),showChatTab&&_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-message-text",style:"chat"===rightColumnState?styles.activeButtonStyle:styles.buttonsStyle,iconStyle:"chat"===rightColumnState?styles.activeButtonIconStyle:styles.buttonsIconStyle,onClick:function(){_this6.openRightPanel("chat")},tooltip:pydio.MessageHash["chat"===rightColumnState?"86":"635"],tooltipPosition:"bottom-left"})))),_react2.default.createElement(_MainFilesList2.default,{ref:"list",pydio:pydio,onDisplayModeChange:function(dMode){_this6.setState({filesListDisplayMode:dMode})}}),"info-panel"===rightColumnState&&_react2.default.createElement(_detailpanesInfoPanel2.default,_extends({},props,{dataModel:props.pydio.getContextHolder(),onRequestClose:function(){_this6.closeRightPanel()},onContentChange:this.infoPanelContentChange.bind(this),style:styles.infoPanelStyle})),"chat"===rightColumnState&&_react2.default.createElement(_CellChat2.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:1,onRequestClose:function(){_this6.closeRightPanel()}}),"address-book"===rightColumnState&&_react2.default.createElement(_AddressBookPanel2.default,{pydio:pydio,style:styles.otherPanelsStyle,zDepth:1,onRequestClose:function(){_this6.closeRightPanel()}}),"advanced-search"===rightColumnState&&searchForm,_react2.default.createElement(_EditionPanel2.default,props))},FSTemplate}(_react2.default.Component);exports.default=FSTemplate=_materialUiStyles.muiThemeable()(FSTemplate),FSTemplate.INFO_PANEL_WIDTH=270,exports.default=FSTemplate,module.exports=exports.default},{"../detailpanes/InfoPanel":11,"../search":42,"./AddressBookPanel":43,"./Breadcrumb":44,"./CellChat":45,"./EditionPanel":47,"./MainFilesList":50,"./MasterLayout":51,"./WelcomeTour":54,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],49:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_react=require("react"),_materialUiStyles=require("material-ui/styles"),_materialUi=require("material-ui"),_color=require("color"),_color2=_interopRequireDefault(_color),FilePreview=function(_PureComponent){_inherits(FilePreview,_PureComponent),_createClass(FilePreview,null,[{key:"propTypes",get:function(){return{node:_propTypes2.default.instanceOf(AjxpNode).isRequired,loadThumbnail:_propTypes2.default.bool,richPreview:_propTypes2.default.bool,processing:_propTypes2.default.bool,style:_propTypes2.default.object,mimeFontStyle:_propTypes2.default.object,mimeClassName:_propTypes2.default.string}}},{key:"defaultProps",get:function(){return{richPreview:!1}}}]);function FilePreview(props){_classCallCheck(this,FilePreview),_PureComponent.call(this,props),this.state={loading:!1}}return FilePreview.prototype.getStyles=function(){var _props=this.props,style=_props.style,mimeFontStyle=_props.mimeFontStyle,color=new _color2.default(this.props.muiTheme.palette.primary1Color).saturationl(18).lightness(44).toString(),light=new _color2.default(this.props.muiTheme.palette.primary1Color).saturationl(15).lightness(94).toString();return{rootStyle:_extends({backgroundColor:light,alignItems:"initial"},style),mimeFontStyle:_extends({color:color},mimeFontStyle)}},FilePreview.prototype.insertPreviewNode=function(previewNode){this._previewNode=previewNode;var containerNode=this.refs.container;containerNode.innerHTML="",containerNode.className="richPreviewContainer",containerNode.appendChild(this._previewNode)},FilePreview.prototype.destroyPreviewNode=function(){this._previewNode&&(this._previewNode.destroyElement(),this._previewNode.parentNode&&this._previewNode.parentNode.removeChild(this._previewNode),this._previewNode=null)},FilePreview.prototype.componentDidMount=function(){this.loadCoveringImage()},FilePreview.prototype.componentWillUnmount=function(){this.destroyPreviewNode()},FilePreview.prototype.componentWillReceiveProps=function(nextProps){if(nextProps.node.getPath()!==this.props.node.getPath())return this.destroyPreviewNode(),void this.loadCoveringImage();this._previewNode||nextProps.loadThumbnail!==this.props.loadThumbnail&&nextProps.loadThumbnail&&this.loadCoveringImage(!0)},FilePreview.prototype.loadCoveringImage=function(){var force=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.props.loadThumbnail||force){var pydio=window.pydio,node=this.props.node,editors=window.pydio.Registry.findEditorsForMime(node.isLeaf()?node.getAjxpMime():"mime_folder",!0);if(editors&&editors.length){var editorClassName=(editors[0],editors[0].editorClass);pydio.Registry.loadEditorResources(editors[0].resourcesManager,function(){var component=FuncUtils.getFunctionByName(editorClassName,window);component&&this.loadPreviewFromEditor(component,node)}.bind(this))}}},FilePreview.prototype.loadPreviewFromEditor=function(editorClass,node){this.setState({EditorClass:this.props.richPreview?editorClass.Panel:editorClass.Badge})},FilePreview.prototype.render=function(){var _getStyles=this.getStyles(),rootStyle=_getStyles.rootStyle,mimeFontStyle=_getStyles.mimeFontStyle,_props2=this.props,node=_props2.node,mimeClassName=_props2.mimeClassName,processing=_props2.processing,EditorClass=this.state.EditorClass,element=void 0;if(processing)element=React.createElement(_materialUi.CircularProgress,{size:40,thickness:2});else if(EditorClass)element=React.createElement(EditorClass,_extends({pydio:pydio},this.props,{preview:!0,mimeFontStyle:mimeFontStyle}));else{var icClass=node.getSvgSource()||(node.isLeaf()?"file":"folder");icClass&&!icClass.startsWith("icomoon")&&(icClass="mdi mdi-"+icClass),element=React.createElement("div",{key:"icon",className:mimeClassName||"mimefont "+icClass,style:mimeFontStyle})}return React.createElement("div",{ref:"container",style:rootStyle,className:"mimefont-container"+(EditorClass?" with-editor-badge":""),onClick:this.props.onClick},element)},FilePreview}(_react.PureComponent);exports.default=_materialUiStyles.muiThemeable()(FilePreview),module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",react:"react"}],50:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}
var _react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioUtilPath=require("pydio/util/path"),_pydioUtilPath2=_interopRequireDefault(_pydioUtilPath),_pydioUtilXml=require("pydio/util/xml"),_pydioUtilXml2=_interopRequireDefault(_pydioUtilXml),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_pydioModelAction=require("pydio/model/action"),_pydioModelAction2=_interopRequireDefault(_pydioModelAction),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_FilePreview=require("./FilePreview"),_FilePreview2=_interopRequireDefault(_FilePreview),_materialUi=require("material-ui"),_CellsMessageToolbar=require("./CellsMessageToolbar"),_CellsMessageToolbar2=_interopRequireDefault(_CellsMessageToolbar),_OverlayIcon=require("./OverlayIcon"),_OverlayIcon2=_interopRequireDefault(_OverlayIcon),_Pydio$requireLib=_pydio2.default.requireLib("components"),SimpleList=_Pydio$requireLib.SimpleList,_Pydio$requireLib2=_pydio2.default.requireLib("boot"),moment=_Pydio$requireLib2.moment,SingleJobProgress=_Pydio$requireLib2.SingleJobProgress,ComponentConfigsParser=function(){function ComponentConfigsParser(renderLabel){_classCallCheck(this,ComponentConfigsParser),this.renderLabel=renderLabel}return ComponentConfigsParser.prototype.getDefaultListColumns=function(){return{text:{label:"File Name",message:"1",width:"50%",renderCell:this.renderLabel,sortType:"file-natural",remoteSortAttribute:"ajxp_label"},filesize:{label:"File Size",message:"2",sortType:"number",sortAttribute:"bytesize",remoteSortAttribute:"filesize"},mimestring:{label:"File Type",message:"3",sortType:"string"},ajxp_modiftime:{label:"Mofidied on",message:"4",sortType:"number"}}},ComponentConfigsParser.prototype.loadConfigs=function(componentName){var _this=this,configs=new Map,columnsNodes=_pydioUtilXml2.default.XPathSelectNodes(_pydio2.default.getInstance().getXmlRegistry(),'client_configs/component_config[@component="FilesList"]/columns/column|client_configs/component_config[@component="FilesList"]/columns/additional_column'),columns={},messages=_pydio2.default.getMessages();return columnsNodes.forEach(function(colNode){var name=colNode.getAttribute("attributeName"),sortType=colNode.getAttribute("sortType");sortType={String:"string",StringDirFile:"string",MyDate:"number",CellSorterValue:"number"}[sortType]||"string","bytesize"===name&&(sortType="number"),columns[name]={message:colNode.getAttribute("messageId"),label:colNode.getAttribute("messageString")?colNode.getAttribute("messageString"):messages[colNode.getAttribute("messageId")],sortType:sortType},"ajxp_label"===name&&(columns[name].renderCell=_this.renderLabel),colNode.getAttribute("reactModifier")&&function(){var reactModifier=colNode.getAttribute("reactModifier");_pydioHttpResourcesManager2.default.detectModuleToLoadAndApply(reactModifier,function(){columns[name].renderCell=FuncUtils.getFunctionByName(reactModifier,global),columns[name].renderComponent=columns[name].renderCell,reactModifier.indexOf("renderTagsCloud")>-1&&(columns[name].renderBlock=!0)},!0)}()}),configs.set("columns",columns),configs},ComponentConfigsParser}(),MainFilesList=function(_React$Component){_inherits(MainFilesList,_React$Component),MainFilesList.prototype.tableEntryRenderCell=function(node){var showExtensions=this.state.showExtensions,label=node.getLabel();if(!showExtensions&&node.isLeaf()&&"."!==label[0]){var ext=_pydioUtilPath2.default.getFileExtension(label);ext&&(ext="."+ext,label=label.substring(0,label.length-ext.length))}return _react2.default.createElement("span",null,_react2.default.createElement(_FilePreview2.default,{rounded:!0,loadThumbnail:!1,node:node,style:{backgroundColor:"transparent"}}),_react2.default.createElement("span",{style:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:node.getLabel()},label))},MainFilesList.prototype.computeLabel=function(node){var showExtensions=this.state.showExtensions,label=node.getLabel();if(node.isLeaf()&&"."!==label[0]){var ext=_pydioUtilPath2.default.getFileExtension(label);ext&&(ext="."+ext,label=_react2.default.createElement("span",null,label.substring(0,label.length-ext.length),_react2.default.createElement("span",{className:"label-extension",style:{opacity:.33,display:showExtensions?null:"none"}},ext)))}return label},_createClass(MainFilesList,null,[{key:"propTypes",value:{pydio:_propTypes2.default.instanceOf(_pydio2.default),horizontalRibbon:_propTypes2.default.bool},enumerable:!0}]);function MainFilesList(props,context){var _this2=this;_classCallCheck(this,MainFilesList),_React$Component.call(this,props,context),this.resize=function(){_this2.recomputeThumbnailsDimension()},this.recomputeThumbnailsDimension=function(nearest){var THUMBNAIL_MARGIN=1,containerWidth=void 0;try{containerWidth=_reactDom2.default.findDOMNode(_this2.refs.list.refs.infinite).clientWidth-2}catch(e){containerWidth=200}if(0===_this2.state.displayMode.indexOf("grid")){(!nearest||nearest instanceof Event)&&(nearest=_this2.state.thumbNearest);var blockNumber=Math.floor(containerWidth/nearest),width=Math.floor(containerWidth/blockNumber)-2*THUMBNAIL_MARGIN;_this2.props.horizontalRibbon&&(blockNumber=_this2.state.contextNode.getChildren().size,width="grid-160"===_this2.state.displayMode?160:"grid-320"===_this2.state.displayMode?320:"grid-80"===_this2.state.displayMode?80:200),_this2.setState({elementsPerLine:blockNumber,thumbSize:width,thumbNearest:nearest})}else!function(){var columns=_this2.state.columns,columnKeys=Object.keys(columns),defaultFirstWidthPercent=10,firstColWidth=Math.max(250,containerWidth*defaultFirstWidthPercent/100),otherColWidth=(containerWidth-firstColWidth)/(Object.keys(_this2.state.columns).length-1);columnKeys.map(function(columnKey){columns[columnKey].width=otherColWidth}),_this2.setState({columns:columns})}()},this.entryRenderIcon=function(node){var entryProps=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(entryProps&&entryProps.parent)return _react2.default.createElement(_FilePreview2.default,{loadThumbnail:!1,node:node,mimeClassName:"mimefont mdi mdi-chevron-left",onClick:function(){_this2.entryHandleClicks(node,SimpleList.CLICK_TYPE_DOUBLE)},style:{cursor:"pointer"}});var hasThumbnail=!!node.getMetadata().get("thumbnails"),processing=!!node.getMetadata().get("Processing");return _react2.default.createElement(_FilePreview2.default,{loadThumbnail:!entryProps.parentIsScrolling&&hasThumbnail&&!processing,node:node,processing:processing})},this.entryRenderActions=function(node){var content=null,pydio=_this2.props.pydio,mobile=pydio.UI.MOBILE_EXTENSIONS,dm=pydio.getContextHolder();if(mobile){var _ret3=function(){var ContextMenuModel=require("pydio/model/context-menu");return{v:_react2.default.createElement(_materialUi.IconButton,{iconClassName:"mdi mdi-dots-vertical",style:{zIndex:0,padding:10},tooltip:"Info",onClick:function(event){pydio.observeOnce("actions_refreshed",function(){ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}),event.stopPropagation(),dm.setSelectedNodes([node]),ContextMenuModel.getInstance().openNodeAtPosition(node,event.clientX,event.clientY)}})}}();if("object"==typeof _ret3)return _ret3.v}else if(node.getMetadata().get("overlay_class")){var elements=node.getMetadata().get("overlay_class").split(",").filter(function(c){return!!c}).map(function(c){return _react2.default.createElement(_OverlayIcon2.default,{node:node,key:c,overlay:c,pydio:pydio})});content=_react2.default.createElement("div",{className:"overlay_icon_div"},elements)}return content},this.entryHandleClicks=function(node,clickType,event){var dm=_this2.props.pydio.getContextHolder(),mobile=_this2.props.pydio.UI.MOBILE_EXTENSIONS||_this2.props.horizontalRibbon;if(dm.getContextNode().getParent()!==node||clickType!==SimpleList.CLICK_TYPE_SIMPLE)if(mobile||clickType&&clickType!==SimpleList.CLICK_TYPE_SIMPLE)(mobile||clickType===SimpleList.CLICK_TYPE_DOUBLE)&&(node.isBrowsable()?dm.requireContextChange(node):(dm.setSelectedNodes([node]),_this2.props.pydio.Controller.fireAction("open_with_unique")));else{var crtSelection=dm.getSelectedNodes();if(event&&event.shiftKey&&crtSelection.length){var newSelection=_this2.refs.list.computeSelectionFromCurrentPlusTargetNode(crtSelection,node);dm.setSelectedNodes(newSelection)}else if(event&&(event.ctrlKey||event.metaKey)&&crtSelection.length)if(-1===crtSelection.indexOf(node))dm.setSelectedNodes([].concat(crtSelection,[node]));else{var otherSelection=crtSelection.filter(function(obj){return obj!==node});dm.setSelectedNodes(otherSelection)}else dm.setSelectedNodes([node])}},this.entryRenderSecondLine=function(node){var metaData=node.getMetadata(),pieces=[],standardPieces=[],otherPieces=[];if(metaData.has("pending_operation"))return metaData.has("pending_operation_uuid")?_react2.default.createElement(SingleJobProgress,{jobID:metaData.get("pending_operation_uuid"),style:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},progressStyle:{width:60,paddingRight:10},labelStyle:{flex:1}}):_react2.default.createElement("span",{style:{fontStyle:"italic",color:"rgba(0,0,0,.33)"}},metaData.get("pending_operation"));if(metaData.get("ajxp_modiftime")){var mDate=moment(1e3*parseFloat(metaData.get("ajxp_modiftime"))),dateString=mDate.calendar();dateString.indexOf("/")>-1&&(dateString=mDate.fromNow());var title=_pydioUtilPath2.default.formatModifDate(mDate.toDate());pieces.push(_react2.default.createElement("span",{key:"time_description",title:title,className:"metadata_chunk metadata_chunk_description"},dateString))}return Object.keys(_this2.state.columns).forEach(function(s){var columnDef=_this2.state.columns[s],label=void 0,standard=!1;if("ajxp_label"!==s&&"text"!==s&&"ajxp_modiftime"!==s){if("ajxp_dirname"===s&&metaData.get("filename")){var dirName=_pydioUtilPath2.default.getDirname(metaData.get("filename"));label=dirName||"/",standard=!0}else if("bytesize"===s){if(!metaData.has(s)||"-"===metaData.get(s))return;label=_pydioUtilPath2.default.roundFileSize(parseInt(metaData.get(s))),standard=!0}else if(columnDef.renderComponent){if(columnDef.name=s,null===(label=columnDef.renderComponent(node,columnDef)))return}else{"mimestring"!==s&&"readable_dimension"!==s||(standard=!0);var metaValue=metaData.get(s)||"";if(!metaValue)return;label=metaValue}var sep=void 0;sep=_react2.default.createElement("span",{className:"icon-angle-right"});var cellClass="metadata_chunk metadata_chunk_"+(standard?"standard":"other")+" metadata_chunk_"+s;columnDef.renderComponent&&columnDef.renderBlock&&(cellClass+=" metadata_chunk_block");var cell=_react2.default.createElement("span",{key:s,className:cellClass},sep,_react2.default.createElement("span",{className:"text_label"},label));standard?standardPieces.push(cell):otherPieces.push(cell)}}),pieces.push.apply(pieces,otherPieces.concat(standardPieces)),pieces},this.switchDisplayMode=function(displayMode){_this2.setState({displayMode:displayMode},function(){var near=null;0===displayMode.indexOf("grid-")&&(near=parseInt(displayMode.split("-")[1])),_this2.recomputeThumbnailsDimension(near),_this2.setPrefValue("FilesListDisplayMode",displayMode),_this2.props.onDisplayModeChange&&_this2.props.onDisplayModeChange(displayMode),_this2.props.pydio.notify("actions_refreshed")})},this.buildDisplayModeItems=function(){var displayMode=_this2.state.displayMode;return[{name:_pydio2.default.getMessages()["ajax_gui.list.display-mode.list"],title:227,icon_class:"mdi mdi-view-list",value:"list",hasAccessKey:!0,accessKey:"list_access_key"},{name:_pydio2.default.getMessages()["ajax_gui.list.display-mode.details"],title:461,icon_class:"mdi mdi-view-headline",value:"detail",hasAccessKey:!0,accessKey:"detail_access_key"},{name:_pydio2.default.getMessages()["ajax_gui.list.display-mode.thumbs"],title:229,icon_class:"mdi mdi-view-grid",value:"grid-160",hasAccessKey:!0,accessKey:"thumbs_access_key"},{name:_pydio2.default.getMessages()["ajax_gui.list.display-mode.thumbs-large"],title:229,icon_class:"mdi mdi-view-agenda",value:"grid-320",hasAccessKey:!1},{name:_pydio2.default.getMessages()["ajax_gui.list.display-mode.thumbs-small"],title:229,icon_class:"mdi mdi-view-module",value:"grid-80",hasAccessKey:!1}].map(function(item){var i=_extends({},item),value=item.value;return i.callback=function(){_this2.switchDisplayMode(i.value)},value===displayMode&&(i.icon_class="mdi mdi-check"),i})},this.buildShowExtensionsItems=function(){var showExtensions=_this2.state.showExtensions;return[{name:_pydio2.default.getMessages()["ajax_gui.list.extensions.show"],icon_class:showExtensions?"mdi mdi-toggle-switch":"mdi mdi-toggle-switch-off",callback:function(){_this2.setState({showExtensions:!showExtensions},function(){_this2.props.pydio.notify("actions_refreshed"),_this2.setPrefValue("FilesListShowExtensions",!showExtensions)})}}]},this.getPydioActions=function(){if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return["switch_display_mode","toggle_show_extensions"];var multiAction=new _pydioModelAction2.default({name:"switch_display_mode",icon_class:"mdi mdi-view-list",text_id:150,title_id:151,text:MessageHash[150],title:MessageHash[151],hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!0},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:_this2.buildDisplayModeItems.bind(_this2)}),buttons=new Map;buttons.set("switch_display_mode",multiAction);var extAction=new _pydioModelAction2.default({name:"toggle_show_extensions",text_id:"ajax_gui.list.extensions.action",text:_pydio2.default.getMessages()["ajax_gui.list.extensions.action"],subMenu:!0,subMenuUpdateImage:!0},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:_this2.buildShowExtensionsItems.bind(_this2)});return buttons.set("toggle_show_extensions",extAction),buttons};var configParser=new ComponentConfigsParser(this.tableEntryRenderCell.bind(this)),columns=configParser.loadConfigs("FilesList").get("columns"),dMode=this.getPrefValue("FilesListDisplayMode",this.props.displayMode||"list"),tSize=200;"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80),this.state={contextNode:props.pydio.getContextHolder().getContextNode(),displayMode:dMode,showExtensions:this.getPrefValue("FilesListShowExtensions",!1),thumbNearest:tSize,thumbSize:tSize,elementsPerLine:5,columns:columns||configParser.getDefaultListColumns(),parentIsScrolling:props.parentIsScrolling,repositoryId:props.pydio.repositoryId}}return MainFilesList.prototype.getPrefValue=function(prefName,defaultValue){var pydio=this.props.pydio;if(!pydio.user)return defaultValue;var slug=pydio.user.getActiveRepositoryObject().getSlug(),guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):{};return guiPrefs[prefName]&&void 0!==guiPrefs[prefName][slug]?guiPrefs[prefName][slug]:defaultValue},MainFilesList.prototype.setPrefValue=function(prefName,value){var pydio=this.props.pydio;if(pydio.user){var slug=pydio.user.getActiveRepositoryObject().getSlug(),guiPrefs=pydio.user?pydio.user.getPreference("gui_preferences",!0):{},dPrefs=guiPrefs[prefName]||{};dPrefs[slug]=value,guiPrefs[prefName]=dPrefs,pydio.user.setPreference("gui_preferences",guiPrefs,!0),pydio.user.savePreference("gui_preferences")}},MainFilesList.prototype.componentDidMount=function(){this._contextObserver=function(){this.setState({contextNode:this.props.pydio.getContextHolder().getContextNode()})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._contextObserver),this.props.pydio.getController().updateGuiActions(this.getPydioActions()),this.recomputeThumbnailsDimension(),window.addEventListener?window.addEventListener("resize",this.recomputeThumbnailsDimension):window.attachEvent("onresize",this.recomputeThumbnailsDimension),this.props.onDisplayModeChange&&this.state&&this.state.displayMode&&this.props.onDisplayModeChange(this.state.displayMode)},MainFilesList.prototype.componentWillUnmount=function(){this.props.pydio.getContextHolder().stopObserving("context_changed",this._contextObserver),this.getPydioActions(!0).map(function(key){this.props.pydio.getController().deleteFromGuiActions(key)}.bind(this)),window.addEventListener?window.removeEventListener("resize",this.recomputeThumbnailsDimension):window.detachEvent("onresize",this.recomputeThumbnailsDimension)},MainFilesList.prototype.shouldComponentUpdate=function(nextProps,nextState){return!this.state||this.state.repositoryId!==nextProps.pydio.repositoryId||nextState!==this.state},MainFilesList.prototype.componentWillReceiveProps=function(){var _this3=this;this.state&&this.state.repositoryId!==this.props.pydio.repositoryId&&function(){_this3.props.pydio.getController().updateGuiActions(_this3.getPydioActions());var configParser=new ComponentConfigsParser(_this3.tableEntryRenderCell.bind(_this3)),columns=configParser.loadConfigs("FilesList").get("columns"),dMode=_this3.getPrefValue("FilesListDisplayMode",_this3.state&&_this3.state.displayMode?_this3.state.displayMode:"list");if(_this3.state.displayMode!==dMode&&0===dMode.indexOf("grid-")){var tSize=200;"grid-320"===dMode?tSize=320:"grid-80"===dMode&&(tSize=80),_this3.setState({thumbNearest:tSize,thumbSize:tSize})}_this3.setState({repositoryId:_this3.props.pydio.repositoryId,columns:columns||configParser.getDefaultListColumns(),displayMode:dMode},function(){_this3.props.onDisplayModeChange&&_this3.props.onDisplayModeChange(dMode)})}()},MainFilesList.prototype.render=function(){var _this4=this,tableKeys=void 0,sortKeys=void 0,elementStyle=void 0,className="files-list layout-fill main-files-list",elementHeight=void 0,entryRenderSecondLine=void 0,elementsPerLine=1,near=void 0,dMode=this.state.displayMode;0===dMode.indexOf("grid-")&&(near=parseInt(dMode.split("-")[1]),dMode="grid");var infiniteSliceCount=50;"detail"===dMode?(elementHeight=SimpleList.HEIGHT_ONE_LINE,tableKeys=this.state.columns):"grid"===dMode?(sortKeys=this.state.columns,className+=" material-list-grid grid-size-"+near,elementHeight=Math.ceil(this.state.thumbSize/this.state.elementsPerLine),elementHeight&&!this.props.horizontalRibbon||(elementHeight=1),elementsPerLine=this.state.elementsPerLine,elementStyle={width:this.state.thumbSize,height:this.state.thumbSize},this.props.horizontalRibbon&&(className+=" horizontal-ribbon"),320===near?infiniteSliceCount=25:160===near?infiniteSliceCount=80:80===near&&(infiniteSliceCount=200)):"list"===dMode&&(sortKeys=this.state.columns,elementHeight=SimpleList.HEIGHT_TWO_LINES,entryRenderSecondLine=this.entryRenderSecondLine);var pydio=this.props.pydio,contextNode=this.state.contextNode,messages=pydio.MessageHash,canUpload=pydio.Controller.getActionByName("upload")&&!contextNode.getMetadata().has("node_readonly"),secondary=messages[canUpload?"565":"566"],iconClassName=canUpload?"mdi mdi-cloud-upload":"mdi mdi-folder-outline",emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:messages[562],secondaryTextId:secondary};if(contextNode.isRoot())!function(){var isCell=!(!pydio.user||!pydio.user.activeRepository)&&pydio.user.getRepositoriesList().get(pydio.user.activeRepository).getOwner(),recyclePath=contextNode.getMetadata().get("repo_has_recycle");emptyStateProps={style:{backgroundColor:"transparent"},iconClassName:iconClassName,primaryTextId:isCell?messages[631]:messages[563],secondaryTextId:secondary},recyclePath&&(emptyStateProps=_extends({},emptyStateProps,{checkEmptyState:function(node){return node.isLoaded()&&1===node.getChildren().size&&node.getChildren().get(recyclePath)},actionLabelId:messages[567],actionIconClassName:"mdi mdi-delete",actionCallback:function(e){pydio.goTo(recyclePath)}}))}();else{var recycle=pydio.getContextHolder().getRootNode().getMetadata().get("repo_has_recycle");contextNode.getPath()===recycle&&(emptyStateProps=_extends({},emptyStateProps,{iconClassName:"mdi mdi-delete-empty",primaryTextId:messages[564],secondaryTextId:null}))}return _react2.default.createElement(SimpleList,{ref:"list",tableKeys:tableKeys,sortKeys:sortKeys,node:this.state.contextNode,dataModel:pydio.getContextHolder(),className:className,actionBarGroups:["change_main"],infiniteSliceCount:infiniteSliceCount,skipInternalDataModel:!0,style:this.props.style,displayMode:dMode,usePlaceHolder:!0,elementsPerLine:elementsPerLine,elementHeight:elementHeight,elementStyle:elementStyle,passScrollingStateToChildren:!0,entryRenderIcon:this.entryRenderIcon,entryRenderParentIcon:this.entryRenderIcon,entryRenderFirstLine:function(node){return _this4.computeLabel(node)},entryRenderSecondLine:entryRenderSecondLine,entryRenderActions:this.entryRenderActions,entryHandleClicks:this.entryHandleClicks,horizontalRibbon:this.props.horizontalRibbon,emptyStateProps:emptyStateProps,defaultSortingInfo:{sortType:"file-natural",attribute:"",direction:"asc"},hideToolbar:!0,customToolbar:_react2.default.createElement(_CellsMessageToolbar2.default,{pydio:pydio})})},MainFilesList}(_react2.default.Component);exports.default=MainFilesList,module.exports=exports.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CellsMessageToolbar":46,"./FilePreview":49,"./OverlayIcon":52,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/action":"pydio/model/action","pydio/model/context-menu":"pydio/model/context-menu","pydio/util/path":"pydio/util/path","pydio/util/xml":"pydio/util/xml",react:"react","react-dom":"react-dom"}],51:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_leftnavLeftPanel=require("../leftnav/LeftPanel"),_leftnavLeftPanel2=_interopRequireDefault(_leftnavLeftPanel),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),withContextMenu=_Pydio$requireLib.withContextMenu,dropProvider=_Pydio$requireLib.dropProvider,_Pydio$requireLib2=_pydio2.default.requireLib("components"),ContextMenu=_Pydio$requireLib2.ContextMenu,MasterLayout=function(_React$Component){_inherits(MasterLayout,_React$Component);function MasterLayout(){_classCallCheck(this,MasterLayout),_React$Component.apply(this,arguments)}return MasterLayout.prototype.closeDrawer=function(e){if(this.props.drawerOpen){var widgets=document.getElementsByClassName("left-panel");widgets&&widgets.length>0&&widgets[0].contains(_reactDom2.default.findDOMNode(e.target))||this.props.onCloseDrawerRequested()}},MasterLayout.prototype.render=function(){var _props=this.props,pydio=_props.pydio,tutorialComponent=_props.tutorialComponent,onContextMenu=_props.onContextMenu,classes=_props.classes,style=_props.style,leftPanelProps=_props.leftPanelProps,children=_props.children,drawerOpen=_props.drawerOpen,connectDropTarget=this.props.connectDropTarget||function(c){return c},allClasses=[].concat(classes);return drawerOpen&&allClasses.push("drawer-open"),connectDropTarget(_react2.default.createElement("div",{style:_extends({},style,{overflow:"hidden"}),className:allClasses.join(" "),onClick:this.closeDrawer.bind(this),onContextMenu:onContextMenu},tutorialComponent,_react2.default.createElement(_leftnavLeftPanel2.default,_extends({className:"left-panel",pydio:pydio},leftPanelProps)),_react2.default.createElement("div",{className:"desktop-container vertical_layout vertical_fit"},children),_react2.default.createElement("span",{className:"context-menu"},_react2.default.createElement(ContextMenu,{pydio:this.props.pydio}))))},MasterLayout}(_react2.default.Component);exports.default=MasterLayout=dropProvider(MasterLayout),exports.default=MasterLayout=withContextMenu(MasterLayout),exports.default=MasterLayout,module.exports=exports.default},{"../leftnav/LeftPanel":33,pydio:"pydio",react:"react","react-dom":"react-dom"}],52:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_materialUiStyles=require("material-ui/styles"),_color=require("color"),_color2=_interopRequireDefault(_color),_materialUi=require("material-ui"),OverlayIcon=function(_React$Component){_inherits(OverlayIcon,_React$Component);function OverlayIcon(){_classCallCheck(this,OverlayIcon),_React$Component.apply(this,arguments)}return OverlayIcon.prototype.findAction=function(){var _props=this.props,overlay=_props.overlay,pydio=_props.pydio,node=_props.node,tooltip=void 0,action=void 0,m=function(id){return pydio.MessageHash[id]||id},isLeaf=node.isLeaf();switch(overlay){case"mdi mdi-star":tooltip=m(isLeaf?"overlay.bookmark.file":"overlay.bookmark.folder");break;case"mdi mdi-share-variant":action=pydio.Controller.getActionByName("share-edit-shared"),tooltip=m(isLeaf?"overlay.shared.file":"overlay.shared.folder");break;case"mdi mdi-lock-outline":tooltip=m(isLeaf?"overlay.lock.file":"overlay.lock.folder");break;case"mdi mdi-bell":tooltip=m(isLeaf?"overlay.watch.file":"overlay.watch.folder")}return{tooltip:tooltip,action:action}},OverlayIcon.prototype.render=function(){var _props2=this.props,muiTheme=_props2.muiTheme,overlay=_props2.overlay,selected=_props2.selected,light=new _color2.default(muiTheme.palette.primary1Color).saturationl(15).lightness(73).toString(),onClick=void 0,_findAction=this.findAction(),tooltip=_findAction.tooltip,action=_findAction.action;return action&&(onClick=function(){action.apply()}),_react2.default.createElement(_materialUi.IconButton,{tooltip:tooltip,tooltipPosition:"bottom-left",iconClassName:overlay+" overlay-icon-span",style:{width:30,height:30,padding:6,margin:"6px 2px",zIndex:0,cursor:onClick?"pointer":"default"},iconStyle:{color:selected?"white":light,fontSize:15,transition:"none"},onClick:onClick})},OverlayIcon}(_react2.default.Component);exports.default=OverlayIcon=_materialUiStyles.muiThemeable()(OverlayIcon),exports.default=OverlayIcon,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles",react:"react"}],53:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_reactJoyride=require("react-joyride"),_reactJoyride2=_interopRequireDefault(_reactJoyride),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,TourGuide=function(_Component){_inherits(TourGuide,_Component);function TourGuide(){_classCallCheck(this,TourGuide),_Component.apply(this,arguments)}return TourGuide.prototype.render=function(){var _this=this,message=function(id){return _this.props.getMessage("ajax_gui.tour.locale."+id)},locales=["back","close","last","next","skip"],locale={};return locales.forEach(function(k){locale[k]=message(k)}),React.createElement(_reactJoyride2.default,_extends({},this.props,{locale:locale,allowClicksThruHole:!0}))},TourGuide}(_react.Component);exports.default=TourGuide=PydioContextConsumer(TourGuide),exports.default=TourGuide,module.exports=exports.default},{pydio:"pydio",react:"react","react-joyride":71}],54:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_materialUi=require("material-ui"),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_TourGuide=require("./TourGuide"),_TourGuide2=_interopRequireDefault(_TourGuide),_Pydio$requireLib=_pydio2.default.requireLib("boot"),PydioContextConsumer=_Pydio$requireLib.PydioContextConsumer,DOMUtils=require("pydio/util/dom"),Scheme=function(_Component){_inherits(Scheme,_Component);function Scheme(){_classCallCheck(this,Scheme),_Component.apply(this,arguments)}return Scheme.prototype.render=function(){var style={position:"relative",fontSize:24,width:this.props.dimension||100,height:this.props.dimension||100,backgroundColor:"#ECEFF1",color:"#607d8b",borderRadius:"50%",margin:"0 auto"};return React.createElement("div",{style:_extends({},style,this.props.style)},this.props.children)},Scheme}(_react.Component),IconScheme=function(_Component2){_inherits(IconScheme,_Component2);function IconScheme(props){_classCallCheck(this,IconScheme),_Component2.call(this,props),this.state={icon:props.icon||props.icons[0],index:0}}return IconScheme.prototype.componentDidMount=function(){this.componentWillReceiveProps(this.props)},
IconScheme.prototype.componentWillReceiveProps=function(nextProps){var _this=this,icon=nextProps.icon,icons=nextProps.icons;this._interval&&clearInterval(this._interval);var state=void 0;icon?state={icon:icon}:icons&&(state={icon:icons[0],index:0},this._interval=setInterval(function(){_this.nextIcon()},1700)),this.setState(state)},IconScheme.prototype.nextIcon=function(){var icons=this.props.icons,next=this.state.index+1;next>icons.length-1&&(next=0),this.setState({index:next,icon:icons[next]})},IconScheme.prototype.componentWillUnmount=function(){this._interval&&clearInterval(this._interval)},IconScheme.prototype.render=function(){var icon=this.state.icon;return React.createElement(Scheme,{dimension:80},React.createElement("span",{className:"mdi mdi-"+icon,style:{position:"absolute",top:14,left:14,fontSize:50}}))},IconScheme}(_react.Component),CreateMenuCard=function(_Component3){_inherits(CreateMenuCard,_Component3);function CreateMenuCard(){_classCallCheck(this,CreateMenuCard),_Component3.apply(this,arguments)}return CreateMenuCard.prototype.componentDidMount=function(){var _this2=this;setTimeout(function(){_this2.props.pydio.notify("tutorial-open-create-menu")},950)},CreateMenuCard.prototype.render=function(){return React.createElement("div",null,React.createElement("p",null,this.props.message("create-menu")),React.createElement(IconScheme,{icons:["file-plus","folder-plus"]}))},CreateMenuCard}(_react.Component),InfoPanelCard=function(_Component4){_inherits(InfoPanelCard,_Component4);function InfoPanelCard(){_classCallCheck(this,InfoPanelCard),_Component4.apply(this,arguments)}return InfoPanelCard.prototype.componentDidMount=function(){var _this3=this;this._int=setInterval(function(){_this3.setState({closed:!(_this3.state&&_this3.state.closed)})},1500)},InfoPanelCard.prototype.componentWillUnmount=function(){this._int&&clearInterval(this._int)},InfoPanelCard.prototype.render=function(){var leftStyle={width:24,transition:DOMUtils.getBeziersTransition(),transform:"scaleX(1)",transformOrigin:"right"};return this.state&&this.state.closed&&(leftStyle=_extends({},leftStyle,{width:0,transform:"scaleX(0)"})),React.createElement("div",null,React.createElement("p",null,this.props.message("infopanel.1")),React.createElement(Scheme,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC",display:"flex"}},React.createElement("div",{style:{backgroundColor:"white",flex:3}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",this.props.message("infopanel.folder")," 1 "),React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white"}},React.createElement("span",{className:"mdi mdi-folder"}),"  ",this.props.message("infopanel.folder")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 3"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",this.props.message("infopanel.file")," 4")),React.createElement("div",{style:leftStyle},React.createElement("div",{style:{backgroundColor:"#edf4f7",padding:4,height:"100%",fontSize:17}},React.createElement("span",{className:"mdi mdi-information-variant"}))))),React.createElement("p",null,this.props.message("infopanel.2")," (",React.createElement("span",{className:"mdi mdi-information",style:{fontSize:18,color:"#5c7784"}}),")."))},InfoPanelCard}(_react.Component),UserWidgetCard=function(_Component5){_inherits(UserWidgetCard,_Component5);function UserWidgetCard(){_classCallCheck(this,UserWidgetCard),_Component5.apply(this,arguments)}return UserWidgetCard.prototype.render=function(){var iconStyle={display:"inline-block",textAlign:"center",fontSize:17,lineHeight:"20px",backgroundColor:"#ECEFF1",color:"#607D8B",borderRadius:"50%",padding:"5px 6px",width:30,height:30,marginRight:5};return React.createElement("div",null,React.createElement("p",null,React.createElement("span",{className:"mdi mdi-book-open-variant",style:iconStyle})," ",this.props.message("uwidget.addressbook")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-bell-outline",style:iconStyle})," ",this.props.message("uwidget.alerts")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-dots-vertical",style:iconStyle})," ",this.props.message("uwidget.menu")),React.createElement(_materialUi.Divider,null),React.createElement("p",null,React.createElement("span",{className:"mdi mdi-home-variant",style:iconStyle})," ",this.props.message("uwidget.home")))},UserWidgetCard}(_react.Component),WelcomeTour=function(_Component6){_inherits(WelcomeTour,_Component6);function WelcomeTour(props,context){_classCallCheck(this,WelcomeTour),_Component6.call(this,props,context),this.state={started:!(props.pydio.user&&!props.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])}}return WelcomeTour.prototype.discard=function(){var finished=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],user=this.props.pydio.user,guiPrefs=user.getPreference("gui_preferences",!0);guiPrefs["UserAccount.WelcomeModal.Shown"]=!0,finished&&(guiPrefs["WelcomeComponent.Pydio8.TourGuide.FSTemplate"]=!0),user.setPreference("gui_preferences",guiPrefs,!0),user.savePreference("gui_preferences")},WelcomeTour.prototype.componentDidMount=function(){var _this4=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(skip){skip?_this4.discard(!0):(_this4.discard(),_this4.setState({started:!0,skip:skip}))}})},WelcomeTour.prototype.render=function(){var _this5=this;if(!this.state.started||this.state.skip)return null;var _props=this.props,getMessage=_props.getMessage,pydio=_props.pydio,message=function(id){return getMessage("ajax_gui.tour."+id)},tourguideSteps=[],Controller=pydio.Controller,user=pydio.user,mkdir=Controller.getActionByName("mkdir")||{},upload=Controller.getActionByName("upload")||{};!user||!user.activeRepository||mkdir.deny&&upload.deny||tourguideSteps.push({title:message("create-menu.title"),text:React.createElement(CreateMenuCard,{message:message,pydio:this.props.pydio}),selector:"#create-button-menu",position:"left",style:{width:220}}),document.getElementById("display-toolbar")&&tourguideSteps.push({title:message("display-bar.title"),text:React.createElement("div",null,React.createElement("p",null,message("display-bar")),React.createElement(IconScheme,{icons:["view-list","view-grid","view-carousel","sort-ascending","sort-descending"]})),selector:"#display-toolbar",position:"left"}),document.getElementById("info_panel")&&tourguideSteps.push({title:message("infopanel.title"),text:React.createElement(InfoPanelCard,{message:message}),selector:"#info_panel",position:"left"}),tourguideSteps.push({title:message("uwidget.title"),text:React.createElement(UserWidgetCard,{message:message}),selector:".user-widget",position:"right",style:{width:320}});var callback=function(data){("step:after"===data.type&&data.index===tourguideSteps.length-1||"skip"===data.action)&&_this5.discard(!0)};return React.createElement(_TourGuide2.default,{ref:"joyride",steps:tourguideSteps,run:!0,autoStart:!0,debug:!1,callback:callback,type:"continuous",showSkipButton:!0})},WelcomeTour}(_react.Component);exports.default=WelcomeTour=PydioContextConsumer(WelcomeTour),exports.default=WelcomeTour,module.exports=exports.default},{"./TourGuide":53,"material-ui":"material-ui",pydio:"pydio","pydio/util/dom":"pydio/util/dom",react:"react"}],55:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_Pydio$requireLib=_pydio2.default.requireLib("components"),GenericCard=_Pydio$requireLib.GenericCard,GenericLine=_Pydio$requireLib.GenericLine,QuotaUsageLine=_Pydio$requireLib.QuotaUsageLine,WorkspaceCard=function(_React$Component){_inherits(WorkspaceCard,_React$Component);function WorkspaceCard(props){var _this=this;_classCallCheck(this,WorkspaceCard),_React$Component.call(this,props),this.state={};var rootNode=this.props.rootNode;rootNode.getMetadata().has("virtual_root")?rootNode.isLoaded()?(this.state.rootNodes=[],rootNode.getChildren().forEach(function(n){return _this.state.rootNodes.push(n)})):(rootNode.observeOnce("loaded",function(){var rootNodes=[];rootNode.getChildren().forEach(function(n){return rootNodes.push(n)}),_this.setState({rootNodes:rootNodes})}),rootNode.load()):this.state.rootNodes=[rootNode],_pydioHttpResourcesManager2.default.loadClassesAndApply(["PydioActivityStreams"],function(){_this.setState({ASLib:!0})}),_pydioHttpResourcesManager2.default.loadClassesAndApply(["PydioCoreActions"],function(){_this.setState({CALib:!0})})}return WorkspaceCard.prototype.render=function(){var _props=this.props,pydio=_props.pydio,workspace=_props.workspace,onDismiss=_props.onDismiss,rootNodes=this.state.rootNodes,_state=this.state,ASLib=_state.ASLib,CALib=_state.CALib,lines=[],bookmarkAction=void 0;if(workspace.getDescription()&&lines.push(_react2.default.createElement(GenericLine,{iconClassName:"mdi mdi-information",legend:pydio.MessageHash["share_center.145"],data:workspace.getDescription()})),rootNodes&&rootNodes.length&&rootNodes.forEach(function(node){node.getMetadata().get("ws_quota")&&lines.push(_react2.default.createElement(QuotaUsageLine,{node:node}))}),pydio.getPluginConfigs("core.activitystreams").get("ACTIVITY_SHOW_ACTIVITIES")&&ASLib&&rootNodes){var selector=_react2.default.createElement(PydioActivityStreams.WatchSelector,{pydio:pydio,nodes:rootNodes});lines.push(_react2.default.createElement(GenericLine,{iconClassName:"mdi mdi-bell-outline",legend:pydio.MessageHash["meta.watch.selector.legend"],iconStyle:{marginTop:32},data:selector}))}return CALib&&rootNodes&&(bookmarkAction=_react2.default.createElement(PydioCoreActions.BookmarkButton,{pydio:pydio,nodes:rootNodes,styles:{iconStyle:{color:"white"}}})),_react2.default.createElement(GenericCard,{pydio:pydio,title:workspace.getLabel(),onDismissAction:onDismiss,style:{width:350},otherActions:[bookmarkAction]},lines)},WorkspaceCard}(_react2.default.Component);exports.default=WorkspaceCard,module.exports=exports.default},{pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],56:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_materialUiStyles=require("material-ui/styles"),_color=require("color"),_color2=_interopRequireDefault(_color),_materialUi=require("material-ui"),_reactDnd=require("react-dnd"),_pydioModelNode=require("pydio/model/node"),_pydioModelNode2=_interopRequireDefault(_pydioModelNode),_pydioUtilDom=require("pydio/util/dom"),_pydioUtilDom2=_interopRequireDefault(_pydioUtilDom),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_pydioModelMetaNodeProvider=require("pydio/model/meta-node-provider"),_pydioModelMetaNodeProvider2=_interopRequireDefault(_pydioModelMetaNodeProvider),_WorkspaceCard=require("./WorkspaceCard"),_WorkspaceCard2=_interopRequireDefault(_WorkspaceCard),_Pydio$requireLib=_pydio2.default.requireLib("components"),FoldersTree=_Pydio$requireLib.FoldersTree,DND=_Pydio$requireLib.DND,ChatIcon=_Pydio$requireLib.ChatIcon,Types=DND.Types,collectDrop=DND.collectDrop,nodeDropTarget=DND.nodeDropTarget,Badge=function(_ref){var children=_ref.children,muiTheme=_ref.muiTheme,style={display:"inline-block",backgroundColor:muiTheme.palette.accent1Color,color:"white",fontSize:10,borderRadius:6,padding:"0 5px",marginLeft:5,height:16,lineHeight:"17px",fontWeight:500};return _react2.default.createElement("span",{style:style},children)};Badge=_materialUiStyles.muiThemeable()(Badge);var Confirm=function(_React$Component){_inherits(Confirm,_React$Component);function Confirm(){_classCallCheck(this,Confirm),_React$Component.apply(this,arguments)}return Confirm.prototype.render=function(){var _this=this,messages=this.props.pydio.MessageHash,messageTitle=messages[545],messageBody=messages[546],actions=[{text:messages[548],ref:"decline",onClick:this.props.onDecline},{text:messages[547],ref:"accept",onClick:this.props.onAccept}];return"reject_accepted"===this.props.mode&&(messageBody=messages[549],actions=[{text:messages[54],ref:"decline",onClick:this.props.onDecline},{text:messages[551],ref:"accept",onClick:this.props.onAccept}]),Object.keys(this.props.replacements).forEach(function(key){messageTitle=messageTitle.replace(new RegExp(key),_this.props.replacements[key]),messageBody=messageBody.replace(new RegExp(key),_this.props.replacements[key])}),_react2.default.createElement("div",{className:"react-mui-context",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"transparent"}},_react2.default.createElement(_materialUi.Dialog,{title:messageTitle,actions:actions,modal:!1,dismissOnClickAway:!0,onDismiss:this.props.onDismiss.bind(this),open:!0},messageBody))},_createClass(Confirm,null,[{key:"propTypes",value:{pydio:_propTypes2.default.instanceOf(_pydio2.default),onDecline:_propTypes2.default.func,onAccept:_propTypes2.default.func,mode:_propTypes2.default.oneOf(["new_share","reject_accepted"])},enumerable:!0}]),Confirm}(_react2.default.Component),WorkspaceEntry=function(_React$Component2){_inherits(WorkspaceEntry,_React$Component2);function WorkspaceEntry(){var _this2=this;_classCallCheck(this,WorkspaceEntry),_React$Component2.apply(this,arguments),this.state={openAlert:!1,openFoldersTree:!1,currentContextNode:this.props.pydio.getContextHolder().getContextNode()},this.getLetterBadge=function(){return{__html:_this2.props.workspace.getHtmlBadge(!0)}},this.handleAccept=function(){_this2.props.workspace.setAccessStatus("accepted"),_this2.handleCloseAlert(),_this2.onClick()},this.handleDecline=function(){_this2.props.workspace.setAccessStatus("declined"),_this2.props.pydio.fire("repository_list_refreshed",{list:_this2.props.pydio.user.getRepositoriesList(),active:_this2.props.pydio.user.getActiveRepository()}),_this2.handleCloseAlert()},this.handleOpenAlert=function(mode,event){void 0===mode&&(mode="new_share"),event.stopPropagation(),_this2.wrapper=document.body.appendChild(document.createElement("div")),_this2.wrapper.style.zIndex=11;var replacements={"%%OWNER%%":_this2.props.workspace.getOwner()};ReactDOM.render(_react2.default.createElement(Confirm,_extends({},_this2.props,{mode:mode,replacements:replacements,onAccept:"new_share"===mode?_this2.handleAccept.bind(_this2):_this2.handleDecline.bind(_this2),onDecline:"new_share"===mode?_this2.handleDecline.bind(_this2):_this2.handleCloseAlert.bind(_this2),onDismiss:_this2.handleCloseAlert})),_this2.wrapper)},this.handleCloseAlert=function(){ReactDOM.unmountComponentAtNode(_this2.wrapper),_this2.wrapper.remove()},this.onClick=function(){_this2.props.workspace.getId()===_this2.props.pydio.user.activeRepository&&_this2.props.showFoldersTree?_this2.props.pydio.goTo("/"):(_this2.props.pydio.observeOnce("repository_list_refreshed",function(){_this2.setState({loading:!1})}),_this2.setState({loading:!0}),_this2.props.pydio.triggerRepositoryChange(_this2.props.workspace.getId()))},this.toggleFoldersPanelOpen=function(ev){ev.stopPropagation(),_this2.setState({openFoldersTree:!_this2.state.openFoldersTree})},this.getRootItemStyle=function(node){var isContext=_this2.props.pydio.getContextHolder().getContextNode()===node,accent2=_this2.props.muiTheme.palette.accent2Color;return isContext?{borderLeft:"4px solid "+accent2,paddingLeft:12}:{}},this.getItemStyle=function(node){var isContext=_this2.props.pydio.getContextHolder().getContextNode()===node,accent2=_this2.props.muiTheme.palette.accent2Color;return isContext?{color:"rgba(0,0,0,.77)",fontWeight:500,backgroundColor:_color2.default(accent2).fade(.9).toString()}:-1!==_this2.props.pydio.getContextHolder().getSelectedNodes().indexOf(node)?{color:accent2,fontWeight:500}:{}},this.workspacePopoverNode=function(workspace){var menuNode=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];return menuNode?Promise.resolve(menuNode):_pydioModelMetaNodeProvider2.default.loadRoots([workspace.getSlug()]).then(function(results){if(results&&results[workspace.getSlug()])return results[workspace.getSlug()];var fakeNode=new _pydioModelNode2.default("/",!1,workspace.getLabel());return fakeNode.setRoot(!0),fakeNode.getMetadata().set("repository_id",workspace.getId()),fakeNode.getMetadata().set("workspaceEntry",workspace),fakeNode})},this.workspacePopover=function(event){var menuNode=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],_props=_this2.props,pydio=_props.pydio,workspace=_props.workspace;event.stopPropagation();var target=event.target,offsetTop=target.getBoundingClientRect().top,viewportH=_pydioUtilDom2.default.getViewportHeight(),viewportW=_pydioUtilDom2.default.getViewportWidth(),popoverTop=viewportH-offsetTop<250;_this2.workspacePopoverNode(workspace,menuNode).then(function(n){if(workspace.getOwner())_pydioHttpResourcesManager2.default.loadClassesAndApply(["ShareDialog"],function(){var popoverContent=_react2.default.createElement(ShareDialog.CellCard,{pydio:pydio,cellId:workspace.getId(),onDismiss:function(){_this2.setState({popoverOpen:!1})},onHeightChange:function(){_this2.setState({popoverHeight:500})},editorOneColumn:viewportW<700,rootNode:n});_this2.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null})});else{var popoverContent=_react2.default.createElement(_WorkspaceCard2.default,{pydio:pydio,workspace:workspace,rootNode:n,onDismiss:function(){_this2.setState({popoverOpen:!1})}});_this2.setState({popoverAnchor:target,popoverOpen:!0,popoverContent:popoverContent,popoverTop:popoverTop,popoverHeight:null})}})}}return WorkspaceEntry.prototype.componentDidMount=function(){this.props.showFoldersTree&&(this._monitorFolder=function(){this.setState({currentContextNode:this.props.pydio.getContextHolder().getContextNode()})}.bind(this),this.props.pydio.getContextHolder().observe("context_changed",this._monitorFolder))},WorkspaceEntry.prototype.componentWillUnmount=function(){this._monitorFolder&&this.props.pydio.getContextHolder().stopObserving("context_changed",this._monitorFolder)},WorkspaceEntry.prototype.render=function(){var _this3=this,_props2=this.props,workspace=_props2.workspace,pydio=_props2.pydio,onHoverLink=_props2.onHoverLink,onOutLink=_props2.onOutLink,showFoldersTree=_props2.showFoldersTree,current=pydio.user.getActiveRepository()===workspace.getId(),currentClass="workspace-entry",onHover=void 0,onOut=void 0,onClick=void 0,additionalAction=void 0,treeToggle=void 0,style={};current&&(currentClass+=" workspace-current",style=this.getRootItemStyle(pydio.getContextHolder().getContextNode())),style=_extends({paddingLeft:16},style),currentClass+=" workspace-access-"+workspace.getAccessType(),onHoverLink&&(onHover=function(event){onHoverLink(event,workspace)}.bind(this)),onOutLink&&(onOut=function(event){onOutLink(event,workspace)}.bind(this)),onClick=this.onClick;var chatIcon=void 0,accent2=this.props.muiTheme.palette.accent2Color,icon="mdi mdi-folder",iconStyle={fontSize:20,marginRight:10,opacity:.3};"workspace-personal"===workspace.getRepositoryType()?icon="mdi mdi-folder-account":"cell"===workspace.getRepositoryType()&&(icon="icomoon-cells",iconStyle=_extends({},iconStyle,{fontSize:22}));var menuNode=void 0,popoverNode=void 0;if(current){if(menuNode=pydio.getContextHolder().getRootNode(),showFoldersTree){menuNode.isLoading()&&menuNode.observeOnce("loaded",function(){_this3.forceUpdate()});var children=menuNode.getChildren(),hasFolders=!1;if(children.forEach(function(c){c.isLeaf()||(hasFolders=!0)}),hasFolders){var toggleIcon=this.state.openFoldersTree?"mdi mdi-chevron-down":"mdi mdi-chevron-right";treeToggle=_react2.default.createElement("span",{style:{opacity:.3},className:"workspace-additional-action "+toggleIcon,onClick:this.toggleFoldersPanelOpen})}}iconStyle.opacity=1,iconStyle.color=accent2,popoverNode=menuNode}else menuNode=new _pydioModelNode2.default("/",!1,workspace.getLabel()),menuNode.setRoot(!0),menuNode.getMetadata().set("repository_id",workspace.getId()),menuNode.getMetadata().set("workspaceEntry",workspace);var _state=this.state,popoverOpen=_state.popoverOpen,popoverAnchor=_state.popoverAnchor,popoverTop=_state.popoverTop,popoverHeight=_state.popoverHeight;if(_state.loading)additionalAction=_react2.default.createElement(_materialUi.CircularProgress,{size:20,thickness:2,style:{marginTop:2,marginRight:6,opacity:.5}});else{var addStyle=popoverOpen?{opacity:1}:{};popoverOpen&&(style=_extends({},style,{backgroundColor:"rgba(133, 133, 133, 0.1)"})),additionalAction=_react2.default.createElement("span",{className:"workspace-additional-action with-hover mdi mdi-dots-vertical",onClick:function(e){return _this3.workspacePopover(e,popoverNode)},style:addStyle})}workspace.getOwner()&&(pydio.getPluginConfigs("action.advanced_settings").get("GLOBAL_DISABLE_CHATS")||(chatIcon=_react2.default.createElement(ChatIcon,{pydio:pydio,roomType:"WORKSPACE",objectId:workspace.getId()})));var title=workspace.getLabel();workspace.getDescription()&&(title+=" - "+workspace.getDescription());var entryIcon=_react2.default.createElement("span",{className:icon,style:iconStyle}),wsBlock=_react2.default.createElement(ContextMenuWrapper,{node:menuNode,className:currentClass,onClick:onClick,onMouseOver:onHover,onMouseOut:onOut,style:style},entryIcon,_react2.default.createElement("span",{className:"workspace-label",title:title},workspace.getLabel()),chatIcon,treeToggle,_react2.default.createElement("span",{style:{flex:1}}),additionalAction,_react2.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,autoCloseWhenOffScreen:!1,canAutoPosition:!0,onRequestClose:function(){_this3.setState({popoverOpen:!1})},anchorOrigin:{horizontal:"right",vertical:popoverTop?"bottom":"center"},targetOrigin:{horizontal:"left",vertical:popoverTop?"bottom":"center"},zDepth:3,style:{overflow:"hidden",borderRadius:10,height:popoverHeight}},_react2.default.createElement(_materialUi.Menu,{style:{maxWidth:350},listStyle:{paddingBottom:0,paddingTop:0}},this.state.popoverContent)));return showFoldersTree?_react2.default.createElement("div",null,wsBlock,_react2.default.createElement(FoldersTree,{pydio:pydio,dataModel:pydio.getContextHolder(),className:this.state.openFoldersTree?"open":"closed",draggable:!0,getItemStyle:this.getItemStyle})):wsBlock},_createClass(WorkspaceEntry,null,[{key:"propTypes",value:{pydio:_propTypes2.default.instanceOf(_pydio2.default).isRequired,workspace:_propTypes2.default.instanceOf(Repository).isRequired,showFoldersTree:_propTypes2.default.bool,onHoverLink:_propTypes2.default.func,onOutLink:_propTypes2.default.func},enumerable:!0}]),WorkspaceEntry}(_react2.default.Component),ContextMenuWrapper=function(props){var canDrop=props.canDrop,isOver=props.isOver,connectDropTarget=props.connectDropTarget,className=props.className||"";return canDrop&&isOver&&(className+=" droppable-active"),_react2.default.createElement("div",_extends({},props,{className:className,ref:function(instance){var node=ReactDOM.findDOMNode(instance);"function"==typeof connectDropTarget&&connectDropTarget(node)}}))};ContextMenuWrapper=_reactDnd.DropTarget(Types.NODE_PROVIDER,nodeDropTarget,collectDrop)(ContextMenuWrapper),exports.default=WorkspaceEntry=_materialUiStyles.muiThemeable()(WorkspaceEntry),exports.default=WorkspaceEntry,module.exports=exports.default},{"./WorkspaceCard":55,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/meta-node-provider":"pydio/model/meta-node-provider","pydio/model/node":"pydio/model/node","pydio/util/dom":"pydio/util/dom",react:"react","react-dnd":"react-dnd"}],57:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var React=require("react"),_require=require("material-ui"),ListItem=_require.ListItem,Avatar=_require.Avatar,FontIcon=_require.FontIcon,_require2=require("material-ui/styles"),muiThemeable=_require2.muiThemeable,PropTypes=(require("color"),require("prop-types")),Pydio=require("pydio"),Repository=require("pydio/model/repository"),WorkspaceEntryMaterial=function(_React$Component){_inherits(WorkspaceEntryMaterial,_React$Component);function WorkspaceEntryMaterial(){_classCallCheck(this,WorkspaceEntryMaterial),_React$Component.apply(this,arguments)}return WorkspaceEntryMaterial.prototype.onClick=function(){if(this.props.onWorkspaceTouchTap)return void this.props.onWorkspaceTouchTap(this.props.workspace.getId());this.props.workspace.getId()===this.props.pydio.user.activeRepository&&this.props.showFoldersTree?this.props.pydio.goTo("/"):this.props.pydio.triggerRepositoryChange(this.props.workspace.getId())},WorkspaceEntryMaterial.prototype.render=function(){var _props=this.props,workspace=_props.workspace,muiTheme=_props.muiTheme,leftAvatar=void 0,leftIcon=void 0,color=muiTheme.palette.primary1Color,backgroundColor="#ECEFF1";if(workspace.getOwner()||"inbox"===workspace.getAccessType()){color=MaterialUI.Style.colors.teal500;var icon="inbox"===workspace.getAccessType()?"file-multiple":"folder-outline";"remote"===workspace.getRepositoryType()&&(icon="cloud-outline"),leftAvatar=React.createElement(Avatar,{backgroundColor:backgroundColor,color:color,icon:React.createElement(FontIcon,{className:"mdi mdi-"+icon})})}else leftAvatar=React.createElement(Avatar,{style:{fontSize:18},backgroundColor:backgroundColor,color:color},workspace.getLettersBadge());return React.createElement(ListItem,{leftAvatar:leftAvatar,leftIcon:leftIcon,primaryText:workspace.getLabel(),secondaryText:workspace.getDescription(),onClick:this.onClick.bind(this)})},WorkspaceEntryMaterial}(React.Component);WorkspaceEntryMaterial.propTypes={pydio:PropTypes.instanceOf(Pydio).isRequired,workspace:PropTypes.instanceOf(Repository).isRequired,muiTheme:PropTypes.object},exports.default=WorkspaceEntryMaterial=muiThemeable()(WorkspaceEntryMaterial),exports.default=WorkspaceEntryMaterial,module.exports=exports.default},{color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}],58:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _WorkspacesListMaterial=require("./WorkspacesListMaterial"),_WorkspacesListMaterial2=_interopRequireDefault(_WorkspacesListMaterial),React=require("react"),createReactClass=require("create-react-class"),_require$requireLib=require("pydio").requireLib("boot"),ActionDialogMixin=_require$requireLib.ActionDialogMixin,CancelButtonProviderMixin=_require$requireLib.CancelButtonProviderMixin,WorkspacePickerDialog=createReactClass({displayName:"WorkspacePickerDialog",mixins:[ActionDialogMixin,CancelButtonProviderMixin],getDefaultProps:function(){return{dialogTitleId:"user_home.90",dialogSize:"sm",dialogPadding:!1,dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){this.dismiss()},workspaceTouchTap:function(wsId){this.dismiss(),UploaderModel.Store.getInstance().handleDropEventResults(this.props.items,this.props.files,new AjxpNode("/"),null,null,wsId),this.props.switchAtUpload&&pydio.triggerRepositoryChange(wsId)},render:function(){var _props=this.props,pydio=_props.pydio,files=_props.files,legend=files&&files[0]?React.createElement("div",{style:{fontSize:13,padding:16,backgroundColor:"#FFEBEE"}},pydio.MessageHash["user_home.89"],": ",files[0].name):void 0;return React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},legend,React.createElement(_WorkspacesListMaterial2.default,{pydio:pydio,workspaces:pydio.user?pydio.user.getRepositoriesList():[],showTreeForWorkspace:!1,onWorkspaceTouchTap:this.workspaceTouchTap,filterByType:"entries",sectionTitleStyle:{display:"none"},style:{flex:1,overflowY:"auto",maxHeight:400}}))}});exports.default=WorkspacePickerDialog,module.exports=exports.default},{"./WorkspacesListMaterial":60,"create-react-class":"create-react-class",pydio:"pydio",react:"react"}],59:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),_WorkspaceEntry=require("./WorkspaceEntry"),_WorkspaceEntry2=_interopRequireDefault(_WorkspaceEntry),_pydioModelRepository=require("pydio/model/repository"),_pydioModelRepository2=_interopRequireDefault(_pydioModelRepository),_pydioHttpResourcesManager=require("pydio/http/resources-manager"),_pydioHttpResourcesManager2=_interopRequireDefault(_pydioHttpResourcesManager),_materialUi=require("material-ui"),_color=require("color"),_color2=_interopRequireDefault(_color),_Pydio$requireLib=_pydio2.default.requireLib("hoc"),withVerticalScroll=_Pydio$requireLib.withVerticalScroll,ModernTextField=_Pydio$requireLib.ModernTextField,_require=require("material-ui/styles"),muiThemeable=_require.muiThemeable,Entries=function(_React$Component){_inherits(Entries,_React$Component);function Entries(props){_classCallCheck(this,Entries),_React$Component.call(this,props),this.state={toggleFilter:!1,filterValue:""}}return Entries.prototype.computePagination=function(entries){if(!entries||!entries.length)return{use:!1};var pageSize=15;if(entries.length<=pageSize)return{use:!1};var page=this.state.page,activeWorkspace=this.props.activeWorkspace;if(!page&&(page=1,activeWorkspace)){var wsIndex=entries.map(function(ws){return ws.getId()}).indexOf(activeWorkspace);wsIndex>-1&&(page=Math.floor(wsIndex/pageSize)+1)}for(var max=Math.ceil(entries.length/pageSize),sliceStart=(page-1)*pageSize,sliceEnd=Math.min(page*pageSize,entries.length),pages=[],i=1;i<=max;i++)pages.push(i);return{use:!0,sliceStart:sliceStart,sliceEnd:sliceEnd,total:entries.length,pages:pages,page:page,pageSize:pageSize}},Entries.prototype.renderPagination=function(pagination){var _this=this,titleStyle=this.props.titleStyle,page=pagination.page,pages=pagination.pages,sliceStart=pagination.sliceStart,sliceEnd=pagination.sliceEnd,total=pagination.total,chevStyles={style:{width:36,height:36,padding:6},iconStyle:{color:titleStyle.color}};return _react2.default.createElement("div",{style:{display:"flex",backgroundColor:"rgba(0, 0, 0, 0.03)",color:titleStyle.color,alignItems:"center",justifyContent:"center",fontWeight:400}},_react2.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-left",disabled:1===page,onClick:function(){return _this.setState({page:page-1})}},chevStyles)),_react2.default.createElement("div",null,sliceStart+1,"-",sliceEnd," of ",total),_react2.default.createElement(_materialUi.IconButton,_extends({iconClassName:"mdi mdi-chevron-right",disabled:page===pages.length,onClick:function(){return _this.setState({page:page+1})}},chevStyles)))},Entries.prototype.render=function(){var _this2=this,_props=this.props,title=_props.title,entries=_props.entries,filterHint=_props.filterHint,titleStyle=_props.titleStyle,pydio=_props.pydio,createAction=_props.createAction,activeWorkspace=_props.activeWorkspace,palette=_props.palette,buttonStyles=_props.buttonStyles,emptyState=_props.emptyState,_state=(_props.nonActiveRoots,this.state),toggleFilter=_state.toggleFilter,filterValue=_state.filterValue,filterFunc=function(t,f,ws){return!t||!f||ws.getLabel().toLowerCase().indexOf(f.toLowerCase())>=0},wss=entries.filter(function(ws){return filterFunc(toggleFilter,filterValue,ws)}),pagination=this.computePagination(wss);pagination.use&&(wss=wss.slice(pagination.sliceStart,pagination.sliceEnd));var uniqueResult=void 0;return toggleFilter&&filterValue&&1===wss.length&&wss[0].getId()!==activeWorkspace&&(uniqueResult=wss[0]),_react2.default.createElement("div",null,!toggleFilter&&_react2.default.createElement("div",{key:"shared-title",className:"section-title",style:titleStyle},_react2.default.createElement("span",{style:{cursor:"pointer"},title:filterHint,onClick:function(){_this2.setState({toggleFilter:!0})}},title,_react2.default.createElement("span",{style:{fontSize:12,opacity:"0.4",marginLeft:3},className:"mdi mdi-filter"})),createAction),toggleFilter&&_react2.default.createElement("div",{key:"shared-title",className:"section-title",style:_extends({},titleStyle,{paddingLeft:12,paddingRight:8,textTransform:"none",transition:"none"})},_react2.default.createElement(ModernTextField,{focusOnMount:!0,fullWidth:!0,style:{marginTop:-16,marginBottom:-16,top:-1},hintText:filterHint,hintStyle:{fontWeight:400},inputStyle:{fontWeight:400,color:palette.primary1Color},value:filterValue,onChange:function(e,v){_this2.setState({filterValue:v})},onBlur:function(){setTimeout(function(){filterValue||_this2.setState({toggleFilter:!1})},150)},onKeyPress:function(ev){"Enter"===ev.key&&uniqueResult&&(pydio.triggerRepositoryChange(uniqueResult.getId()),_this2.setState({filterValue:"",toggleFilter:!1}))}}),uniqueResult&&_react2.default.createElement("div",{style:_extends({},buttonStyles.button,{right:28,lineHeight:"24px",fontSize:20,opacity:.5})},_react2.default.createElement("span",{className:"mdi mdi-keyboard-return"})),_react2.default.createElement(_materialUi.IconButton,{key:"close-filter",iconClassName:"mdi mdi-close",style:buttonStyles.button,iconStyle:buttonStyles.icon,onClick:function(){_this2.setState({toggleFilter:!1,filterValue:""})}})),_react2.default.createElement("div",{className:"workspaces"},wss.map(function(ws){return _react2.default.createElement(_WorkspaceEntry2.default,{pydio:pydio,key:ws.getId(),workspace:ws,showFoldersTree:activeWorkspace&&activeWorkspace===ws.getId()})}),!entries.length&&emptyState,pagination.use&&this.renderPagination(pagination)))},Entries}(_react2.default.Component),WorkspacesList=function(_React$Component2){_inherits(WorkspacesList,_React$Component2);function WorkspacesList(props,context){var _this3=this;_classCallCheck(this,WorkspacesList),_React$Component2.call(this,props,context),this.state=this.stateFromPydio(props.pydio),this._reloadObserver=function(){_this3.setState(_this3.stateFromPydio(_this3.props.pydio))}}return WorkspacesList.prototype.shouldComponentUpdate=function(nextProps,nextState){return nextState.random!==this.state.random||nextState.popoverOpen!==this.state.popoverOpen},WorkspacesList.prototype.stateFromPydio=function(pydio){var workspaces=pydio.user?pydio.user.getRepositoriesList():[],wsList=[];return workspaces.forEach(function(o){return wsList.push(o)}),{random:Math.random(),workspaces:workspaces,activeWorkspace:!!pydio.user&&pydio.user.activeRepository,activeRepoIsHome:pydio.user&&"homepage"===pydio.user.activeRepository}},WorkspacesList.prototype.componentDidMount=function(){this.props.pydio.observe("repository_list_refreshed",this._reloadObserver)},WorkspacesList.prototype.componentWillUnmount=function(){this.props.pydio.stopObserving("repository_list_refreshed",this._reloadObserver)},WorkspacesList.prototype.createRepositoryEnabled=function(){return this.props.pydio.getPluginConfigs("auth").get("USER_CREATE_CELLS")},WorkspacesList.prototype.render=function(){var _this5=this,createAction=void 0,_state2=this.state,workspaces=_state2.workspaces,activeWorkspace=_state2.activeWorkspace,popoverOpen=_state2.popoverOpen,popoverAnchor=_state2.popoverAnchor,popoverContent=_state2.popoverContent,_props2=this.props,pydio=_props2.pydio,className=_props2.className,muiTheme=_props2.muiTheme,sectionTitleStyle=_props2.sectionTitleStyle,wsList=[];workspaces.forEach(function(o){return wsList.push(o)}),wsList=wsList.filter(function(ws){return!_pydioModelRepository2.default.isInternal(ws.getId())}),wsList.sort(function(oA,oB){if("workspace-personal"===oA.getRepositoryType())return-1;if("workspace-personal"===oB.getRepositoryType())return 1;var res=oA.getLabel().localeCompare(oB.getLabel(),void 0,{numeric:!0});return 0===res?oA.getSlug().localeCompare(oB.getSlug()):res});var entries=wsList.filter(function(ws){return!ws.getOwner()}),sharedEntries=wsList.filter(function(ws){return ws.getOwner()}),messages=pydio.MessageHash,createClick=function(event){var _this4=this,target=event.target;_pydioHttpResourcesManager2.default.loadClassesAndApply(["ShareDialog"],function(){_this4.setState({popoverOpen:!0,popoverAnchor:target,popoverContent:_react2.default.createElement(ShareDialog.CreateCellDialog,{pydio:pydio,onDismiss:function(){_this4.setState({popoverOpen:!1})}})})})}.bind(this),buttonStyles={button:{width:36,height:36,padding:6,position:"absolute",right:4,top:8},icon:{fontSize:22,color:muiTheme.palette.primary1Color}};this.createRepositoryEnabled()&&sharedEntries.length&&(createAction=_react2.default.createElement(_materialUi.IconButton,{key:"create-cell",style:buttonStyles.button,iconStyle:buttonStyles.icon,iconClassName:"mdi mdi-plus",tooltip:messages[417],tooltipPosition:"top-left",onClick:createClick}));var classNames=["user-workspaces-list"];return className&&classNames.push(className),_react2.default.createElement("div",{className:classNames.join(" ")},_react2.default.createElement(_materialUi.Popover,{open:popoverOpen,anchorEl:popoverAnchor,useLayerForClickAway:!0,onRequestClose:function(){_this5.setState({popoverOpen:!1})},anchorOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},targetOrigin:sharedEntries.length?{horizontal:"left",vertical:"top"}:{horizontal:"left",vertical:"bottom"},zDepth:3,style:{borderRadius:6,overflow:"hidden",marginLeft:sharedEntries.length?-10:0,marginTop:sharedEntries.length?-10:0}},popoverContent),entries.length>0&&_react2.default.createElement(Entries,{title:messages[468],entries:entries,filterHint:messages["ws.quick-filter"],titleStyle:_extends({},sectionTitleStyle,{marginTop:5,position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,activeWorkspace:activeWorkspace,palette:muiTheme.palette,buttonStyles:buttonStyles}),_react2.default.createElement(Entries,{title:messages[469],entries:sharedEntries,filterHint:messages["cells.quick-filter"],titleStyle:_extends({},sectionTitleStyle,{position:"relative",overflow:"visible",transition:"none"}),pydio:pydio,createAction:createAction,activeWorkspace:activeWorkspace,palette:muiTheme.palette,buttonStyles:buttonStyles,emptyState:_react2.default.createElement("div",{style:{textAlign:"center",color:_color2.default(muiTheme.palette.primary1Color).fade(.6).toString()}},_react2.default.createElement("div",{className:"icomoon-cells",style:{fontSize:80}}),this.createRepositoryEnabled()&&_react2.default.createElement(_materialUi.FlatButton,{style:{color:muiTheme.palette.accent2Color,marginTop:5},primary:!0,label:messages[418],onClick:createClick}),_react2.default.createElement("div",{style:{fontSize:13,padding:"5px 20px"}},messages[633]))}))},WorkspacesList}(_react2.default.Component);WorkspacesList.PropTypes={pydio:_propTypes2.default.instanceOf(_pydio2.default),workspaces:_propTypes2.default.instanceOf(Map),onHoverLink:_propTypes2.default.func,onOutLink:_propTypes2.default.func,className:_propTypes2.default.string,style:_propTypes2.default.object,sectionTitleStyle:_propTypes2.default.object,filterByType:_propTypes2.default.oneOf(["shared","entries","create"])},exports.default=WorkspacesList=withVerticalScroll(WorkspacesList),exports.default=WorkspacesList=muiThemeable()(WorkspacesList),exports.default=WorkspacesList,module.exports=exports.default},{"./WorkspaceEntry":56,color:"color","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/repository":"pydio/model/repository",react:"react"}],60:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _WorkspaceEntryMaterial=require("./WorkspaceEntryMaterial"),_WorkspaceEntryMaterial2=_interopRequireDefault(_WorkspaceEntryMaterial),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_pydio=require("pydio"),_pydio2=_interopRequireDefault(_pydio),React=require("react"),Repository=require("pydio/model/repository"),_require=require("material-ui"),List=_require.List,Subheader=_require.Subheader,Divider=_require.Divider,WorkspacesListMaterial=function(_React$Component){_inherits(WorkspacesListMaterial,_React$Component);function WorkspacesListMaterial(){_classCallCheck(this,WorkspacesListMaterial),_React$Component.apply(this,arguments)}return WorkspacesListMaterial.prototype.render=function(){var _props=this.props,workspaces=_props.workspaces,showTreeForWorkspace=_props.showTreeForWorkspace,filterByType=_props.filterByType,inboxEntry=void 0,entries=[],sharedEntries=[],remoteShares=[];workspaces.forEach(function(object,key){if(!Repository.isInternal(object.getId())&&!object.hasContentFilter()&&"declined"!==object.getAccessStatus()){var entry=React.createElement(_WorkspaceEntryMaterial2.default,_extends({},this.props,{key:key,workspace:object,showFoldersTree:showTreeForWorkspace&&showTreeForWorkspace===key}));"inbox"==object.getAccessType()?inboxEntry=entry:object.getOwner()?"remote"===object.getRepositoryType()?remoteShares.push(entry):sharedEntries.push(entry):entries.push(entry)}}.bind(this));var messages=pydio.MessageHash,allEntries=void 0;return sharedEntries.length&&sharedEntries.unshift(React.createElement(Subheader,null,messages[626])),inboxEntry&&(sharedEntries.length&&sharedEntries.unshift(React.createElement(Divider,null)),sharedEntries.unshift(inboxEntry),sharedEntries.unshift(React.createElement(Subheader,null,messages[630]))),remoteShares.length&&(remoteShares.unshift(React.createElement(Subheader,null,messages[627])),remoteShares.unshift(React.createElement(Divider,null)),sharedEntries=sharedEntries.concat(remoteShares)),"entries"===filterByType&&entries.unshift(React.createElement(Subheader,null,messages[468])),allEntries=filterByType?"shared"===filterByType?sharedEntries:entries:entries.concat(sharedEntries),React.createElement(List,{style:this.props.style},allEntries)},WorkspacesListMaterial}(React.Component);WorkspacesListMaterial.propTypes={pydio:_propTypes2.default.instanceOf(_pydio2.default),workspaces:_propTypes2.default.instanceOf(Map),filterByType:_propTypes2.default.oneOf(["shared","entries","create"]),sectionTitleStyle:_propTypes2.default.object,showTreeForWorkspace:_propTypes2.default.string,onHoverLink:_propTypes2.default.func,onOutLink:_propTypes2.default.func,className:_propTypes2.default.string,style:_propTypes2.default.object},exports.default=WorkspacesListMaterial,module.exports=exports.default},{"./WorkspaceEntryMaterial":57,"material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/model/repository":"pydio/model/repository",react:"react"}],61:[function(require,module,exports){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],62:[function(require,module,exports){(function(global){(function(){var undefined,VERSION="4.17.21",LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrimStart=/^\s+/,reWhitespace=/\s/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="[']",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}
var deburrLetter=basePropertyOf(deburredLetters),escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return null==object?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function strictLastIndexOf(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){index+=dir;for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number===number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=number>=lower?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}):isMap(value)&&value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))});var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined:keysFunc(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value);if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFill(array,value,start,end){var length=array.length;for(start=toInteger(start),start<0&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:toInteger(end),end<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}function baseInvoke(object,path,args){path=castPath(path,object),object=parent(object,path);var func=null==object?object:object[toKey(last(path))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;newValue===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(length)return n+=n<0?length:0,isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){iteratees=iteratees.length?arrayMap(iteratees,function(iteratee){return isArray(iteratee)?function(value){return baseGet(value,1===iteratee.length?iteratee[0]:iteratee)}:iteratee}):[identity];var index=-1;return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseSortBy(baseMap(collection,function(value,key,collection){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}}),function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;isIndex(index)?splice.call(array,index,1):baseUnset(array,index)}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do{n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string)}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;path=castPath(path,object);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined,newValue===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var low=0,high=null==array?0:array.length;if(0===high)return 0;value=iteratee(value);for(var valIsNaN=value!==value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):""
;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return path=castPath(path,object),null==(object=parent(object,path))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;return result*("desc"==orders[index]?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){func=funcs[index];var funcName=getFuncName(func),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;"string"==typeof value||"string"==typeof other?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),step=step===undefined?start<end?1:-1:toFinite(step),baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,(bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG))&WRAP_CURRY_BOUND_FLAG||(bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),(precision=null==precision?0:nativeMin(toInteger(precision),292))&&nativeIsFinite(number)){var pair=(toString(number)+"e").split("e");return pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)),bitmask&&bitmask!=WRAP_BIND_FLAG)result=bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=WRAP_PARTIAL_FLAG&&bitmask!=(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);for(var index=-1,length=path.length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)))}}function memoizeCapped(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG),isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}var setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=memoizeCapped(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),
details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}function chunk(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}function concat(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});function drop(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,n<0?0:n,length)):[]}function dropRight(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,0,n<0?0:n)):[]}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]}function fill(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}function flattenDeep(array){return(null==array?0:array.length)?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){return(null==array?0:array.length)?(depth=depth===undefined?1:toInteger(depth),baseFlatten(array,depth)):[]}function fromPairs(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)}function initial(array){return(null==array?0:array.length)?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return comparator="function"==typeof comparator?comparator:undefined,comparator&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function join(array,separator){return null==array?"":nativeJoin.call(array,separator)}function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)),value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}var pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});function remove(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function reverse(array){return null==array?array:nativeReverse.call(array)}function slice(array,start,end){var length=null==array?0:array.length;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,end=length):(start=null==start?0:toInteger(start),end=end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)}function sortedLastIndexOf(array,value){if(null==array?0:array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){return array&&array.length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,0,n<0?0:n)):[]}function takeRight(array,n,guard){var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,n<0?0:n,length)):[]}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined,unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){return interceptor(value),value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?(value=value.slice(start,+start+(length?1:0)),value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}}function wrapperToIterator(){return this}function wrapperPlant(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function filter(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))}var find=createFind(findIndex),findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),orders=guard?undefined:orders,isArray(orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))}function sample(collection){return(isArray(collection)?arraySample:baseSample)(collection)}function sampleSize(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)}function shuffle(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)}function size(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}var sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()};function after(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}}function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curry.placeholder,result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curryRight.placeholder,result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function cancel(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}return debounced.cancel=cancel,debounced.flush=flush,debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=start===undefined?start:toInteger(start),baseRest(func,start)}function spread(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return null==source||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)}function isEmpty(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer="function"==typeof customizer?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value)}function isNull(value){return null===value}function isNil(value){return null==value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){if(!value)return 0===value?value:0;if((value=toNumber(value))===INFINITY||value===-INFINITY){return(value<0?-1:1)*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):0===value?value:0}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))return void copyObject(source,keys(source),object);for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return null==properties?result:baseAssign(result,properties)}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1,length=sources.length,guard=length>2?sources[2]:undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))&&(object[key]=source[key])}return object}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return null==object?[]:baseFunctions(object,keys(object))}function functionsIn(object){return null==object?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return null!=object&&hasPath(object,path,baseHas)}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),
result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result}function mapValues(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return null==object?{}:basePick(object,paths)});function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return null==object?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee=getIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function unset(object,path){return null==object||baseUnset(object,path)}function update(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return null==object?[]:baseValues(object,keys(object))}function valuesIn(object){return null==object?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=toNumber(upper),upper=upper===upper?upper:0),lower!==undefined&&(lower=toNumber(lower),lower=lower===lower?lower:0),baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),number=toNumber(number),baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string),target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;return(position-=target.length)>=0&&string.slice(position,end)==target}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=toString(string),string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0)?(string=toString(string),string&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit)):[]}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+(hasOwnProperty.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=hasOwnProperty.call(options,"variable")&&options.variable;if(variable){if(reForbiddenIdentifierChars.test(variable))throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}else source="with (obj) {\n"+source+"\n}\n";source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return baseTrim(string);if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")}function trimEnd(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.slice(0,trimmedEndIndex(string)+1);if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,0,charsEndIndex(strSymbols,stringToArray(chars))+1).join("")}function trimStart(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,charsStartIndex(strSymbols,stringToArray(chars))).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission}function unescape(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),pattern=guard?undefined:pattern,pattern===undefined?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function cond(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return null==value||value!==value?defaultValue:value}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=copyArray(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noConflict(){return root._===this&&(root._=oldDash),this}function noop(){}function nthArg(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return null==object?undefined:baseGet(object,path)}}var range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(n,iteratee){if((n=toInteger(n))<1||n>MAX_SAFE_INTEGER)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH;for(var result=baseTimes(length,iteratee);++index<n;)iteratee(index);return result}function toPath(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}return lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=groupBy,lodash.initial=initial,lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=omit,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=without,lodash.words=words,lodash.wrap=wrap,lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=divide,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=isSafeInteger,lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=multiply,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.subtract=subtract,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(end=toInteger(end),result=end<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"";hasOwnProperty.call(realNames,key)||(realNames[key]=[]),realNames[key].push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=wrapperAt,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=wrapperToIterator),lodash},_=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(require,module,exports){"use strict";module.exports={set:setNestedProperty,get:getNestedProperty,has:hasNestedProperty,hasOwn:function(object,property,options){return this.has(object,property,options||{own:!0})},isIn:isInNestedProperty};function getNestedProperty(object,property){if(object&&"object"==typeof object){if("string"==typeof property&&""!==property){return property.split(".").reduce(function(obj,prop){return obj&&obj[prop]},object)}return"number"==typeof property?object[property]:object}return object}function hasNestedProperty(object,property,options){if(options=options||{},object&&"object"==typeof object){if("string"==typeof property&&""!==property){return property.split(".").reduce(function(obj,prop,idx,array){return idx==array.length-1?options.own?!(!obj||!obj.hasOwnProperty(prop)):!!(null!==obj&&"object"==typeof obj&&prop in obj):obj&&obj[prop]},object)}return"number"==typeof property&&property in object}return!1}function setNestedProperty(object,property,value){if(object&&"object"==typeof object){if("string"==typeof property&&""!==property){var split=property.split(".");return split.reduce(function(obj,prop,idx){return obj[prop]=obj[prop]||{},split.length==idx+1&&(obj[prop]=value),obj[prop]},object)}return"number"==typeof property?(object[property]=value,object[property]):object}return object}function isInNestedProperty(object,property,objectInPath,options){if(options=options||{},object&&"object"==typeof object){if("string"==typeof property&&""!==property){var pathExists,split=property.split("."),isIn=!1;return pathExists=!!split.reduce(function(obj,prop){
return isIn=isIn||obj===objectInPath||!!obj&&obj[prop]===objectInPath,obj&&obj[prop]},object),options.validPath?isIn&&pathExists:isIn}return!1}return!1}},{}],64:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-loadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},loadTime=getNanoSeconds()):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:66}],65:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime,moduleLoadTime,nodeLoadTime,upTime;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==process&&null!==process&&process.hrtime?(module.exports=function(){return(getNanoSeconds()-nodeLoadTime)/1e6},hrtime=process.hrtime,getNanoSeconds=function(){var hr;return hr=hrtime(),1e9*hr[0]+hr[1]},moduleLoadTime=getNanoSeconds(),upTime=1e9*process.uptime(),nodeLoadTime=moduleLoadTime-upTime):Date.now?(module.exports=function(){return Date.now()-loadTime},loadTime=Date.now()):(module.exports=function(){return(new Date).getTime()-loadTime},loadTime=(new Date).getTime())}).call(this)}).call(this,require("_process"))},{_process:66}],66:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)};function Item(fun,array){this.fun=fun,this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop(){}process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],67:[function(require,module,exports){(function(global){for(var now=require("performance-now"),root="undefined"==typeof window?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(0===queue.length){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now,setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++)if(!cp[i].cancelled)try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(next))}return queue.push({handle:++id,callback:callback,cancelled:!1}),id},caf=function(handle){for(var i=0;i<queue.length;i++)queue[i].handle===handle&&(queue[i].cancelled=!0)}}module.exports=function(fn){return raf.call(root,fn)},module.exports.cancel=function(){caf.apply(root,arguments)},module.exports.polyfill=function(object){object||(object=root),object.requestAnimationFrame=raf,object.cancelAnimationFrame=caf}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":65}],68:[function(require,module,exports){var global=require("global"),request=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||fallback,prev=+new Date;function fallback(fn){var curr=+new Date,ms=Math.max(0,16-(curr-prev)),req=setTimeout(fn,ms);return prev=curr,req}var cancel=global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(request=request.bind(global),cancel=cancel.bind(global)),exports=module.exports=request,exports.cancel=cancel},{global:61}],69:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var isTouch=!1;"undefined"!=typeof window&&(isTouch="ontouchstart"in window||navigator.msMaxTouchPoints);var JoyrideBeacon=function(_React$Component){_inherits(JoyrideBeacon,_React$Component);function JoyrideBeacon(){return _classCallCheck(this,JoyrideBeacon),_possibleConstructorReturn(this,(JoyrideBeacon.__proto__||Object.getPrototypeOf(JoyrideBeacon)).apply(this,arguments))}return _createClass(JoyrideBeacon,[{key:"render",value:function(){var _props=this.props,eventType=_props.eventType,onTrigger=_props.onTrigger,step=_props.step,xPos=_props.xPos,yPos=_props.yPos,styles={beacon:{left:xPos,position:!0===step.isFixed?"fixed":"absolute",top:yPos},inner:{},outer:{}},stepStyles=step.style||{},rgb=void 0;return stepStyles.beacon&&("string"==typeof stepStyles.beacon?(rgb=(0,_utils.hexToRGB)(stepStyles.beacon),styles.inner.backgroundColor=stepStyles.beacon,styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.2)",borderColor:stepStyles.beacon}):(stepStyles.beacon.inner&&(styles.inner.backgroundColor=stepStyles.beacon.inner),stepStyles.beacon.outer&&(rgb=(0,_utils.hexToRGB)(stepStyles.beacon.outer),styles.outer={backgroundColor:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 0.4)",borderColor:stepStyles.beacon.outer}))),_react2.default.createElement("button",{className:"joyride-beacon",style:styles.beacon,onClick:"click"===eventType||isTouch?onTrigger:null,onMouseEnter:"hover"!==eventType||isTouch?null:onTrigger},_react2.default.createElement("span",{className:"joyride-beacon__inner",style:styles.inner}),_react2.default.createElement("span",{className:"joyride-beacon__outer",style:styles.outer}))}}]),JoyrideBeacon}(_react2.default.Component);JoyrideBeacon.propTypes={eventType:_propTypes2.default.string.isRequired,onTrigger:_propTypes2.default.func.isRequired,step:_propTypes2.default.object.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideBeacon.defaultProps={xPos:-1e3,yPos:-1e3},exports.default=JoyrideBeacon},{"./utils":72,"prop-types":"prop-types",react:"react"}],70:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var JoyrideTooltip=function(_React$Component){_inherits(JoyrideTooltip,_React$Component);function JoyrideTooltip(props){_classCallCheck(this,JoyrideTooltip);var _this=_possibleConstructorReturn(this,(JoyrideTooltip.__proto__||Object.getPrototypeOf(JoyrideTooltip)).call(this,props));return _this.handleMouseMove=function(e){var event=e||window.e,hole=_this.state.styles.hole,offsetY="fixed"===hole.position?event.clientY:event.pageY,offsetX="fixed"===hole.position?event.clientX:event.pageX,inHoleHeight=offsetY>=hole.top&&offsetY<=hole.top+hole.height,inHoleWidth=offsetX>=hole.left&&offsetX<=hole.left+hole.width,inHole=inHoleWidth&&inHoleHeight;inHole&&!_this.state.mouseOverHole&&_this.setState({mouseOverHole:!0}),!inHole&&_this.state.mouseOverHole&&_this.setState({mouseOverHole:!1})},_this.state={},_this}return _createClass(JoyrideTooltip,[{key:"componentWillMount",value:function(){var opts=this.setOpts(),styles=this.setStyles(this.props.step.style,opts,this.props);this.setState({styles:styles,opts:opts})}},{key:"componentDidMount",value:function(){var _props=this.props,allowClicksThruHole=_props.allowClicksThruHole,onRender=_props.onRender,showOverlay=_props.showOverlay;this.forceUpdate(),onRender(),showOverlay&&allowClicksThruHole&&document.addEventListener("mousemove",this.handleMouseMove,!1)}},{key:"componentWillReceiveProps",value:function(nextProps){var nextAllowClicksThruHole=nextProps.allowClicksThruHole,nextAnimate=nextProps.animate,nextStandalone=nextProps.standalone,nextStep=nextProps.step,nextHolePadding=nextProps.holePadding,nextPosition=nextProps.position,nextXPos=nextProps.xPos,nextYPos=nextProps.yPos,nextShowOverlay=nextProps.showOverlay,_props2=this.props,allowClicksThruHole=_props2.allowClicksThruHole,animate=_props2.animate,standalone=_props2.standalone,step=_props2.step,holePadding=_props2.holePadding,position=_props2.position,xPos=_props2.xPos,yPos=_props2.yPos,showOverlay=_props2.showOverlay;if(nextAnimate!==animate||nextStandalone!==standalone||nextStep!==step||nextHolePadding!==holePadding||nextPosition!==position||nextXPos!==xPos||nextYPos!==yPos){var opts=this.setOpts(nextProps),styles=this.setStyles(nextProps.step.style,opts,nextProps);this.setState({styles:styles,opts:opts})}nextShowOverlay!==showOverlay&&(nextShowOverlay&&nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1)),nextAllowClicksThruHole!==allowClicksThruHole&&(nextAllowClicksThruHole?document.addEventListener("mousemove",this.handleMouseMove,!1):document.removeEventListener("mousemove",this.handleMouseMove,!1))}},{key:"componentDidUpdate",value:function(prevProps){var _props3=this.props,onRender=_props3.onRender,selector=_props3.selector;prevProps.selector!==selector&&(this.forceUpdate(),onRender())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!1)}},{key:"getArrowPosition",value:function(position){var arrowPosition=position;return window.innerWidth<480?position<8?arrowPosition=8:position>92&&(arrowPosition=92):window.innerWidth<1024?position<6?arrowPosition=6:position>94&&(arrowPosition=94):position<5?arrowPosition=5:position>95&&(arrowPosition=95),arrowPosition}},{key:"generateArrow",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.location=opts.location||"top",opts.color=opts.color||"#f04",opts.color=opts.color.replace("#","%23"),opts.width=opts.width||36,opts.height=opts.width/2,opts.scale=opts.width/16,opts.rotate="0";var height=opts.height,rotate=opts.rotate,width=opts.width;return"bottom"===opts.location?rotate="180 8 4":"left"===opts.location?(height=opts.width,width=opts.height,rotate="270 8 8"):"right"===opts.location&&(height=opts.width,width=opts.height,rotate="90 4 4"),"data:image/svg+xml,%3Csvg%20width%3D%22"+width+"%22%20height%3D%22"+height+"%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpolygon%20points%3D%220%2C%200%208%2C%208%2016%2C0%22%20fill%3D%22"+opts.color+"%22%20transform%3D%22scale%28"+opts.scale+"%29%20rotate%28"+rotate+"%29%22%3E%3C%2Fpolygon%3E%3C%2Fsvg%3E"}},{key:"setStyles",value:function(stepStyles,opts,props){var holePadding=props.holePadding,step=props.step,xPos=props.xPos,yPos=props.yPos,isFixed=!0===step.isFixed,styles={arrow:{left:opts.arrowPosition},buttons:{},header:{},main:{},footer:{},hole:{},tooltip:{position:isFixed?"fixed":"absolute",top:Math.round(yPos),left:Math.round(xPos)}};return styles.hole={top:Math.round(opts.rect.top-(isFixed?0:document.body.getBoundingClientRect().top)-holePadding),left:Math.round(opts.rect.left-holePadding),width:Math.round(opts.rect.width+2*holePadding),height:Math.round(opts.rect.height+2*holePadding)},isFixed&&(styles.hole.position="fixed"),styles.buttons={back:{},close:{},primary:{},skip:{}},stepStyles&&(stepStyles.backgroundColor&&(styles.arrow.backgroundImage='url("'+this.generateArrow({location:opts.positonBaseClass,color:stepStyles.backgroundColor})+'")',styles.tooltip.backgroundColor=stepStyles.backgroundColor),stepStyles.borderRadius&&(styles.tooltip.borderRadius=stepStyles.borderRadius),stepStyles.color&&(styles.buttons.primary.color=stepStyles.color,styles.buttons.close.color=stepStyles.color,styles.buttons.skip.color=stepStyles.color,styles.header.color=stepStyles.color,styles.tooltip.color=stepStyles.color,stepStyles.mainColor&&stepStyles.mainColor===stepStyles.color&&(styles.buttons.primary.color=stepStyles.backgroundColor)),stepStyles.mainColor&&(styles.buttons.primary.backgroundColor=stepStyles.mainColor,styles.buttons.back.color=stepStyles.mainColor,styles.header.borderColor=stepStyles.mainColor),stepStyles.textAlign&&(styles.tooltip.textAlign=stepStyles.textAlign),stepStyles.width&&(styles.tooltip.width=stepStyles.width),stepStyles.header&&(styles.header=_extends({},styles.header,stepStyles.header)),stepStyles.main&&(styles.main=_extends({},styles.main,stepStyles.main)),stepStyles.footer&&(styles.footer=_extends({},styles.footer,stepStyles.footer)),stepStyles.back&&(styles.buttons.back=_extends({},styles.buttons.back,stepStyles.back)),stepStyles.arrow&&(styles.arrow=_extends({},styles.arrow,stepStyles.arrow)),stepStyles.button&&(styles.buttons.primary=_extends({},styles.buttons.primary,stepStyles.button)),stepStyles.close&&(styles.buttons.close=_extends({},styles.buttons.close,stepStyles.close)),stepStyles.skip&&(styles.buttons.skip=_extends({},styles.buttons.skip,stepStyles.skip)),stepStyles.hole&&(styles.hole=_extends({},stepStyles.hole,styles.hole))),styles}},{key:"setOpts",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,animate=props.animate,offsetParentSelector=props.offsetParentSelector,position=props.position,standalone=props.standalone,target=props.target,xPos=props.xPos,offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector)),tooltip=document.querySelector(".joyride-tooltip"),opts={classes:["joyride-tooltip"],rect:(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),positionClass:position};return opts.positonBaseClass=opts.positionClass.match(/-/)?opts.positionClass.split("-")[0]:opts.positionClass,(/^bottom$/.test(opts.positionClass)||/^top$/.test(opts.positionClass))&&xPos>-1&&(opts.tooltip={width:450},tooltip&&(opts.tooltip=(0,_utils.getOffsetBoundingClientRect)(tooltip,offsetParent)),opts.targetMiddle=opts.rect.left+opts.rect.width/2,opts.arrowPosition=((opts.targetMiddle-xPos)/opts.tooltip.width*100).toFixed(2),opts.arrowPosition=this.getArrowPosition(opts.arrowPosition)+"%"),standalone&&opts.classes.push("joyride-tooltip--standalone"),opts.positonBaseClass!==opts.positionClass&&opts.classes.push(opts.positonBaseClass),opts.classes.push(opts.positionClass),animate&&opts.classes.push("joyride-tooltip--animate"),opts}},{key:"render",value:function(){var _props4=this.props,buttons=_props4.buttons,disableOverlay=_props4.disableOverlay,onClick=_props4.onClick,selector=_props4.selector,showOverlay=_props4.showOverlay,step=_props4.step,target=_props4.target,type=_props4.type;if(target){var _state=this.state,opts=_state.opts,styles=_state.styles,output={};if(step.title&&(output.header=_react2.default.createElement("div",{className:"joyride-tooltip__header",style:styles.header},step.title)),buttons.skip&&(output.skip=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--skip",style:styles.buttons.skip,"data-type":"skip",onClick:onClick},buttons.skip)),step.text&&"string"!=typeof step.text?output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main},step.text):output.main=_react2.default.createElement("div",{className:"joyride-tooltip__main",style:styles.main,dangerouslySetInnerHTML:{__html:step.text||""}}),buttons.secondary&&(output.secondary=_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--secondary",style:styles.buttons.back,"data-type":"back",onClick:onClick},buttons.secondary)),"hover"===step.event&&(styles.buttons.close.opacity=0),output.tooltipComponent=_react2.default.createElement("div",{className:opts.classes.join(" "),style:styles.tooltip,"data-target":selector},_react2.default.createElement("div",{className:"joyride-tooltip__triangle joyride-tooltip__triangle-"+opts.positionClass,style:styles.arrow}),_react2.default.createElement("button",{className:"joyride-tooltip__close"+(output.header?" joyride-tooltip__close--header":""),style:styles.buttons.close,"data-type":"close",onClick:onClick}),output.header,output.main,_react2.default.createElement("div",{className:"joyride-tooltip__footer",style:styles.footer},output.skip,output.secondary,_react2.default.createElement("button",{className:"joyride-tooltip__button joyride-tooltip__button--primary",style:styles.buttons.primary,"data-type":["single","casual"].includes(type)?"close":"next",onClick:onClick},buttons.primary))),showOverlay&&(output.hole=_react2.default.createElement("div",{className:"joyride-hole "+_utils.browser,style:styles.hole,onClick:function(){}})),!showOverlay)return output.tooltipComponent;var overlayStyles={cursor:disableOverlay?"default":"pointer",height:document.body.clientHeight,pointerEvents:this.state.mouseOverHole?"none":"auto"};return _react2.default.createElement("div",{className:"joyride-overlay",style:overlayStyles,"data-type":"close",onClick:disableOverlay?void 0:onClick},output.hole,output.tooltipComponent)}}}]),JoyrideTooltip}(_react2.default.Component);JoyrideTooltip.propTypes={allowClicksThruHole:_propTypes2.default.bool.isRequired,animate:_propTypes2.default.bool.isRequired,buttons:_propTypes2.default.object.isRequired,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,offsetParentSelector:_propTypes2.default.string,onClick:_propTypes2.default.func.isRequired,onRender:_propTypes2.default.func.isRequired,position:_propTypes2.default.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","right","left"]).isRequired,selector:_propTypes2.default.string.isRequired,showOverlay:_propTypes2.default.bool.isRequired,standalone:_propTypes2.default.bool,step:_propTypes2.default.object.isRequired,target:_propTypes2.default.object.isRequired,type:_propTypes2.default.string.isRequired,xPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired,yPos:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]).isRequired},JoyrideTooltip.defaultProps={buttons:{primary:"Close"},step:{},xPos:-1e3,yPos:-1e3},exports.default=JoyrideTooltip},{"./utils":72,"prop-types":"prop-types",react:"react"}],71:[function(require,module,exports){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_scroll=require("scroll"),_scroll2=_interopRequireDefault(_scroll),_nestedProperty=require("nested-property"),_nestedProperty2=_interopRequireDefault(_nestedProperty),_utils=require("./utils"),_Beacon=require("./Beacon"),_Beacon2=_interopRequireDefault(_Beacon),_Tooltip=require("./Tooltip"),_Tooltip2=_interopRequireDefault(_Tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var defaultState={action:"",index:0,isRunning:!1,isTourSkipped:!1,shouldRedraw:!0,shouldRenderTooltip:!1,shouldRun:!1,standaloneData:!1,xPos:-1e3,yPos:-1e3},callbackTypes={STEP_BEFORE:"step:before",BEACON_BEFORE:"beacon:before",BEACON_TRIGGER:"beacon:trigger",TOOLTIP_BEFORE:"tooltip:before",STEP_AFTER:"step:after",STANDALONE_BEFORE:"standalone:before",STANDALONE_AFTER:"standalone:after",OVERLAY:"overlay:click",HOLE:"hole:click",FINISHED:"finished",TARGET_NOT_FOUND:"error:target_not_found"},DEFAULTS={position:"top",minWidth:290},hasTouch=!1,Joyride=function(_React$Component){_inherits(Joyride,_React$Component);function Joyride(props){_classCallCheck(this,Joyride);var _this=_possibleConstructorReturn(this,(Joyride.__proto__||Object.getPrototypeOf(Joyride)).call(this,props));return _this.handleKeyboardNavigation=function(e){var _this$state=_this.state,index=_this$state.index,shouldRenderTooltip=_this$state.shouldRenderTooltip,steps=_this.props.steps,intKey=window.Event?e.which:e.keyCode,hasSteps=void 0;shouldRenderTooltip&&([32,38,40].includes(intKey)&&e.preventDefault(),27===intKey?_this.toggleTooltip({show:!1,index:index+1,action:"esc"}):[13,32].includes(intKey)&&(hasSteps=Boolean(steps[index+1]),_this.toggleTooltip({show:hasSteps,index:index+1,action:"next"})))},_this.handleClickStandaloneTrigger=function(e){e.preventDefault();var _this$state2=_this.state,isRunning=_this$state2.isRunning,standaloneData=_this$state2.standaloneData,tooltipData=e.currentTarget.dataset.tooltip;["mouseenter","mouseleave"].includes(e.type)&&hasTouch||tooltipData&&(tooltipData=JSON.parse(tooltipData),standaloneData&&standaloneData.selector===tooltipData.selector?document.querySelector(".joyride-tooltip__close").click():_this.setState({isRunning:!1,shouldRenderTooltip:!1,shouldRun:isRunning,standaloneData:tooltipData,xPos:-1e3,yPos:-1e3}))},_this.handleClickBeacon=function(e){e.preventDefault();var index=_this.state.index,steps=_this.props.steps;_this.triggerCallback({action:e.type,index:index,type:callbackTypes.BEACON_TRIGGER,step:steps[index]}),_this.toggleTooltip({show:!0,index:index,action:"beacon:"+e.type})},_this.handleClickTooltip=function(e){var _this$state3=_this.state,index=_this$state3.index,shouldRun=_this$state3.shouldRun,_this$props=_this.props,steps=_this$props.steps,type=_this$props.type,el=e.currentTarget.className.includes("joyride-")&&["A","BUTTON"].includes(e.currentTarget.tagName)?e.currentTarget:e.target,dataType=el.dataset.type;if("string"==typeof el.className&&el.className.startsWith("joyride-")){e.preventDefault(),e.stopPropagation();var tooltip=document.querySelector(".joyride-tooltip"),newIndex=index+("back"===dataType?-1:1);if("skip"===dataType&&(_this.setState({isTourSkipped:!0}),newIndex=steps.length+1),tooltip.classList.contains("joyride-tooltip--standalone"))_this.setState({isRunning:shouldRun,shouldRedraw:!0,shouldRun:!1,standaloneData:!1});else if(dataType){var shouldDisplay=["continuous","guided"].includes(type)&&!["close","skip"].includes(dataType)&&Boolean(steps[newIndex]);_this.toggleTooltip({show:shouldDisplay,index:newIndex,action:dataType})}"joyride-overlay"===e.target.className&&_this.triggerCallback({action:"click",type:callbackTypes.OVERLAY,step:steps[index]}),e.target.classList.contains("joyride-hole")&&_this.triggerCallback({action:"click",type:callbackTypes.HOLE,step:steps[index]})}},_this.handleRenderTooltip=function(){_this.calcPlacement()},_this.state=_extends({},defaultState),_this.listeners={tooltips:{}},_this}return _createClass(Joyride,[{key:"componentDidMount",value:function(){var _this2=this,_props=this.props,autoStart=_props.autoStart,keyboardNavigation=_props.keyboardNavigation,resizeDebounce=_props.resizeDebounce,resizeDebounceDelay=_props.resizeDebounceDelay,run=_props.run,steps=_props.steps,type=_props.type;(0,_utils.logger)({type:"joyride:initialized",msg:[this.props],debug:this.props.debug});var stepsAreValid=this.checkStepsValidity(steps);if(steps&&stepsAreValid&&run&&this.start(autoStart),resizeDebounce){var timeoutId=void 0;this.listeners.resize=function(){clearTimeout(timeoutId),timeoutId=setTimeout(function(){timeoutId=null,_this2.calcPlacement()},resizeDebounceDelay)}}else this.listeners.resize=function(){_this2.calcPlacement()};window.addEventListener("resize",this.listeners.resize),keyboardNavigation&&"continuous"===type&&(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)),window.addEventListener("touchstart",function setHasTouch(){hasTouch=!0,window.removeEventListener("touchstart",setHasTouch)},!1)}},{key:"componentWillReceiveProps",value:function(nextProps){(0,_utils.logger)({type:"joyride:willReceiveProps",msg:[nextProps],debug:nextProps.debug});var _state=this.state,isRunning=_state.isRunning,shouldRun=_state.shouldRun,standaloneData=_state.standaloneData,_props2=this.props,keyboardNavigation=_props2.keyboardNavigation,run=_props2.run,steps=_props2.steps,stepIndex=_props2.stepIndex,stepsChanged=nextProps.steps!==steps,stepIndexChanged=nextProps.stepIndex!==stepIndex&&nextProps.stepIndex!==this.state.index,runChanged=nextProps.run!==run,shouldStart=!1,didStop=!1;if(stepsChanged&&this.checkStepsValidity(nextProps.steps)&&(nextProps.steps&&nextProps.steps.length?!steps.length&&nextProps.run&&(shouldStart=!0):this.reset()),runChanged&&(run&&!nextProps.run?(this.stop(),didStop=!0):!run&&nextProps.run?shouldStart=!0:isRunning||!shouldRun||standaloneData||(shouldStart=!0)),stepIndexChanged){var hasStep=nextProps.steps[nextProps.stepIndex],shouldDisplay=hasStep&&nextProps.autoStart;runChanged&&shouldStart?this.start(nextProps.autoStart,nextProps.steps,nextProps.stepIndex):nextProps.run&&!isRunning?this.start(nextProps.autoStart,nextProps.steps,nextProps.stepIndex):didStop||this.toggleTooltip({show:shouldDisplay,index:nextProps.stepIndex,steps:nextProps.steps,action:"jump"})
}else shouldStart&&this.start(nextProps.autoStart,nextProps.steps);!this.listeners.keyboard&&(!keyboardNavigation&&nextProps.keyboardNavigation||keyboardNavigation)&&"continuous"===nextProps.type?(this.listeners.keyboard=this.handleKeyboardNavigation,document.body.addEventListener("keydown",this.listeners.keyboard)):!this.listeners.keyboard||!keyboardNavigation||nextProps.keyboardNavigation&&"continuous"===nextProps.type||(document.body.removeEventListener("keydown",this.listeners.keyboard),delete this.listeners.keyboard)}},{key:"componentWillUpdate",value:function(nextProps,nextState){var _state2=this.state,index=_state2.index,isRunning=_state2.isRunning,shouldRenderTooltip=_state2.shouldRenderTooltip,standaloneData=_state2.standaloneData,steps=this.props.steps,nextSteps=nextProps.steps,step=steps[index],nextStep=nextSteps[nextState.index],hasRenderedTarget=Boolean(this.getStepTargetElement(nextStep));!standaloneData&&nextState.standaloneData?this.triggerCallback({type:callbackTypes.STANDALONE_BEFORE,step:nextState.standaloneData}):standaloneData&&!nextState.standaloneData&&this.triggerCallback({type:callbackTypes.STANDALONE_AFTER,step:standaloneData}),"start"!==nextState.action||nextState.isRunning||nextStep&&!hasRenderedTarget&&(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})),!isRunning&&nextState.isRunning&&0===nextState.index&&(this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep}),nextState.shouldRenderTooltip||this.triggerCallback({action:"start",index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),isRunning&&nextState.index!==index&&(this.triggerCallback({action:nextState.action,index:index,type:callbackTypes.STEP_AFTER,step:step}),nextStep&&!hasRenderedTarget?(console.warn("Target not mounted",nextStep,nextState.action),this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.TARGET_NOT_FOUND,step:nextStep})):nextStep&&nextState.index&&this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.STEP_BEFORE,step:nextStep})),!nextState.isRunning||shouldRenderTooltip===nextState.shouldRenderTooltip&&nextState.index===index||(nextState.shouldRenderTooltip?this.triggerCallback({action:nextState.action||(0===nextState.index?"autostart":""),index:nextState.index,type:callbackTypes.TOOLTIP_BEFORE,step:nextStep}):this.triggerCallback({action:nextState.action,index:nextState.index,type:callbackTypes.BEACON_BEFORE,step:nextStep})),nextState.isRunning||!nextSteps.length||index===nextState.index||nextStep||this.triggerCallback({action:nextState.action,type:callbackTypes.FINISHED,steps:nextSteps,isTourSkipped:nextState.isTourSkipped})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _state3=this.state,index=_state3.index,shouldRedraw=_state3.shouldRedraw,isRunning=_state3.isRunning,shouldRun=_state3.shouldRun,standaloneData=_state3.standaloneData,_props3=this.props,scrollToFirstStep=_props3.scrollToFirstStep,scrollToSteps=_props3.scrollToSteps,steps=_props3.steps,step=steps[index],scrollTop=this.getScrollTop(),shouldScroll=(scrollToFirstStep||index>0||prevState.index>index)&&step&&!step.isFixed;shouldRedraw&&step&&this.calcPlacement(),isRunning&&scrollToSteps&&shouldScroll&&scrollTop>=0&&_scroll2.default.top((0,_utils.getRootEl)(),this.getScrollTop()),steps.length&&!isRunning&&shouldRun&&!standaloneData&&this.start()}},{key:"componentWillUnmount",value:function(){var _this3=this;window.removeEventListener("resize",this.listeners.resize),this.listeners.keyboard&&document.body.removeEventListener("keydown",this.listeners.keyboard),Object.keys(this.listeners.tooltips).length&&Object.keys(this.listeners.tooltips).map(function(key){return{el:document.querySelector(key),event:_this3.listeners.tooltips[key].event,cb:_this3.listeners.tooltips[key].cb,key:key}}).filter(function(_ref){return!!_ref.el}).forEach(function(_ref2){var el=_ref2.el,event=_ref2.event,cb=_ref2.cb,key=_ref2.key;el.removeEventListener(event,cb),delete _this3.listeners.tooltips[key]})}},{key:"start",value:function(autorun){var steps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.steps,startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.index,hasMountedTarget=Boolean(this.getStepTargetElement(steps[startIndex])),shouldRenderTooltip=!0===autorun&&hasMountedTarget;(0,_utils.logger)({type:"joyride:start",msg:["autorun:",!0===autorun],debug:this.props.debug}),this.setState({action:"start",index:startIndex,isRunning:Boolean(steps.length)&&hasMountedTarget,shouldRenderTooltip:shouldRenderTooltip,shouldRun:!steps.length})}},{key:"stop",value:function(){(0,_utils.logger)({type:"joyride:stop",debug:this.props.debug}),this.setState({isRunning:!1,shouldRenderTooltip:!1})}},{key:"next",value:function(){var _state4=this.state,index=_state4.index,shouldRenderTooltip=_state4.shouldRenderTooltip,steps=this.props.steps,nextIndex=index+1,shouldDisplay=Boolean(steps[nextIndex])&&shouldRenderTooltip;(0,_utils.logger)({type:"joyride:next",msg:["new index:",nextIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:nextIndex,action:"next"})}},{key:"back",value:function(){var _state5=this.state,index=_state5.index,shouldRenderTooltip=_state5.shouldRenderTooltip,steps=this.props.steps,previousIndex=index-1,shouldDisplay=Boolean(steps[previousIndex])&&shouldRenderTooltip;(0,_utils.logger)({type:"joyride:back",msg:["new index:",previousIndex],debug:this.props.debug}),this.toggleTooltip({show:shouldDisplay,index:previousIndex,action:"next"})}},{key:"reset",value:function(restart){var _state6=this.state,index=_state6.index,isRunning=_state6.isRunning,shouldRestart=!0===restart,newState=_extends({},defaultState,{isRunning:shouldRestart,shouldRenderTooltip:this.props.autoStart});(0,_utils.logger)({type:"joyride:reset",msg:["restart:",shouldRestart],debug:this.props.debug}),shouldRestart&&isRunning===shouldRestart&&0===index&&this.forceUpdate(),this.setState(newState)}},{key:"getProgress",value:function(){var index=this.state.index,steps=this.props.steps;return(0,_utils.logger)({type:"joyride:getProgress",msg:["steps:",steps],debug:this.props.debug}),{index:index,percentageComplete:parseFloat((index/steps.length*100).toFixed(2).replace(".00","")),step:steps[index]}}},{key:"addTooltip",value:function(data){if(!this.checkStepValidity(data))return void(0,_utils.logger)({type:"joyride:addTooltip:FAIL",msg:["data:",data],debug:this.props.debug});(0,_utils.logger)({type:"joyride:addTooltip",msg:["data:",data],debug:this.props.debug});var key=data.trigger||(0,_utils.sanitizeSelector)(data.selector),el=document.querySelector(key);if(el){el.setAttribute("data-tooltip",JSON.stringify(data));"hover"===(data.event||"click")&&(this.listeners.tooltips[key+"mouseenter"]={event:"mouseenter",cb:this.handleClickStandaloneTrigger},this.listeners.tooltips[key+"mouseleave"]={event:"mouseleave",cb:this.handleClickStandaloneTrigger},el.addEventListener("mouseenter",this.listeners.tooltips[key+"mouseenter"].cb),el.addEventListener("mouseleave",this.listeners.tooltips[key+"mouseleave"].cb)),this.listeners.tooltips[key+"click"]={event:"click",cb:this.handleClickStandaloneTrigger},el.addEventListener("click",this.listeners.tooltips[key+"click"].cb)}}},{key:"parseSteps",value:function(steps){return console.warn("joyride.parseSteps() is deprecated.  It is no longer necessary to parse steps before providing them to Joyride"),steps}},{key:"checkStepValidity",value:function(step){var _this4=this;if(!step||"object"!==(void 0===step?"undefined":_typeof(step))||Array.isArray(step))return(0,_utils.logger)({type:"joyride:checkStepValidity",msg:"Did not provide a step object.",warn:!0,debug:this.props.debug}),!1;var requiredFields=["selector"],hasRequiredField=function(requiredField){var hasField=Boolean(step[requiredField]);return hasField||(0,_utils.logger)({type:"joyride:checkStepValidity",msg:["Provided a step without the required "+requiredField+" property.","Step:",step],warn:!0,debug:_this4.props.debug}),hasField};return requiredFields.every(hasRequiredField)}},{key:"checkStepsValidity",value:function(steps){return Array.isArray(steps)||"object"!==(void 0===steps?"undefined":_typeof(steps))?steps.length>0&&steps.every(this.checkStepValidity):this.checkStepValidity(steps)}},{key:"getStepTargetElement",value:function(step){if(!this.checkStepValidity(step))return null;var el=document.querySelector((0,_utils.sanitizeSelector)(step.selector));return el||((0,_utils.logger)({type:"joyride:getStepTargetElement",msg:"Target not rendered. For best results only add steps after they are mounted.",warn:!0,debug:this.props.debug}),null)}},{key:"getElementDimensions",value:function(){var _state7=this.state,shouldRenderTooltip=_state7.shouldRenderTooltip,standaloneData=_state7.standaloneData,displayTooltip=!!standaloneData||shouldRenderTooltip,el=document.querySelector(displayTooltip?".joyride-tooltip":".joyride-beacon"),height=0,width=0;if(el){var styles=window.getComputedStyle(el);height=el.clientHeight+parseInt(styles.marginTop||0,10)+parseInt(styles.marginBottom||0,10),width=el.clientWidth+parseInt(styles.marginLeft||0,10)+parseInt(styles.marginRight||0,10)}return{height:height,width:width}}},{key:"getScrollTop",value:function(){var _state8=this.state,index=_state8.index,yPos=_state8.yPos,_props4=this.props,offsetParentSelector=_props4.offsetParentSelector,scrollOffset=_props4.scrollOffset,steps=_props4.steps,step=steps[index],target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector));if(!target)return 0;var rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),targetTop=rect.top+(window.pageYOffset||document.documentElement.scrollTop),position=this.calcPosition(step),scrollTo=0;return/^top/.test(position)?scrollTo=Math.floor(yPos-scrollOffset):/^bottom|^left|^right/.test(position)&&(scrollTo=Math.floor(targetTop-scrollOffset)),scrollTo}},{key:"triggerCallback",value:function(options){var callback=this.props.callback;"function"==typeof callback&&((0,_utils.logger)({type:"joyride:triggerCallback",msg:[options],debug:this.props.debug}),callback(options))}},{key:"toggleTooltip",value:function(_ref3){var show=_ref3.show,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.state.index:_ref3$index,action=_ref3.action,_ref3$steps=_ref3.steps,steps=void 0===_ref3$steps?this.props.steps:_ref3$steps,nextStep=steps[index],hasMountedTarget=Boolean(this.getStepTargetElement(nextStep));this.setState({action:action,index:index,isRunning:!(!nextStep||!hasMountedTarget)&&this.state.isRunning,shouldRedraw:!show||!hasMountedTarget,shouldRenderTooltip:show&&hasMountedTarget,xPos:-1e3,yPos:-1e3})}},{key:"calcPlacement",value:function(){var _state9=this.state,index=_state9.index,isRunning=_state9.isRunning,standaloneData=_state9.standaloneData,shouldRenderTooltip=_state9.shouldRenderTooltip,_props5=this.props,offsetParentSelector=_props5.offsetParentSelector,steps=_props5.steps,tooltipOffset=_props5.tooltipOffset,step=standaloneData||steps[index]||{},displayTooltip=!!standaloneData||shouldRenderTooltip,target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector));if((0,_utils.logger)({type:"joyride:calcPlacement"+this.getRenderStage(),msg:["step:",step],debug:this.props.debug}),target){var placement={x:-1e3,y:-1e3};if(step&&(standaloneData||isRunning&&steps[index])){var offsetX=_nestedProperty2.default.get(step,"style.beacon.offsetX")||0,offsetY=_nestedProperty2.default.get(step,"style.beacon.offsetY")||0,position=this.calcPosition(step),scrollingElement=(0,_utils.getRootEl)().getBoundingClientRect(),scrollTop=!0===step.isFixed?0:scrollingElement.top,component=this.getElementDimensions(),rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent);/^left/.test(position)?placement.x=rect.left-(displayTooltip?component.width+tooltipOffset:component.width/2+offsetX):/^right/.test(position)?placement.x=rect.left+rect.width-(displayTooltip?-tooltipOffset:component.width/2-offsetX):placement.x=rect.left+(rect.width/2-component.width/2),/^top/.test(position)?placement.y=rect.top-scrollTop-(displayTooltip?component.height+tooltipOffset:component.height/2+offsetY):/^bottom/.test(position)?placement.y=rect.top-scrollTop+(rect.height-(displayTooltip?-tooltipOffset:component.height/2-offsetY)):placement.y=rect.top-scrollTop,/^bottom|^top/.test(position)&&(/left/.test(position)?placement.x=rect.left-(displayTooltip?tooltipOffset:component.width/2):/right/.test(position)&&(placement.x=rect.left+(rect.width-(displayTooltip?component.width-tooltipOffset:component.width/2)))),this.setState({shouldRedraw:!1,xPos:this.preventWindowOverflow(Math.ceil(placement.x),"x",component.width,component.height),yPos:this.preventWindowOverflow(Math.ceil(placement.y),"y",component.width,component.height)})}}}},{key:"calcPosition",value:function(step){var _props6=this.props,offsetParentSelector=_props6.offsetParentSelector,tooltipOffset=_props6.tooltipOffset,scrollingElement=(0,_utils.getRootEl)(),scrollingElementRect=scrollingElement.getBoundingClientRect(),target=this.getStepTargetElement(step),offsetParent=document.querySelector((0,_utils.sanitizeSelector)(offsetParentSelector)),rect=(0,_utils.getOffsetBoundingClientRect)(target,offsetParent),_getElementDimensions=this.getElementDimensions(),height=_getElementDimensions.height,_getElementDimensions2=_getElementDimensions.width,width=void 0===_getElementDimensions2?DEFAULTS.minWidth:_getElementDimensions2,position=step.position||DEFAULTS.position;return/^left/.test(position)&&rect.left-(width+tooltipOffset)<0?position="top":/^right/.test(position)&&rect.left+rect.width+(width+tooltipOffset)>scrollingElementRect.width&&(position="bottom"),/^top/.test(position)&&(rect.top+scrollingElement.scrollTop-(height+tooltipOffset)<0||step.isFixed&&rect.top-height<0)?position="bottom":/^bottom/.test(position)&&(rect.top+scrollingElement.scrollTop+(height+tooltipOffset)>(0,_utils.getDocHeight)()||step.isFixed&&rect.top+rect.height+height>scrollingElementRect.height)&&(position="top"),position}},{key:"getRenderStage",value:function(){var _state10=this.state,shouldRedraw=_state10.shouldRedraw,xPos=_state10.xPos;return shouldRedraw?":redraw":xPos<0?":pre-render":""}},{key:"preventWindowOverflow",value:function(value,axis,elWidth,elHeight){var winWidth=window.innerWidth,docHeight=(0,_utils.getDocHeight)(),newValue=value;return"x"===axis?value+elWidth>=winWidth?newValue=winWidth-elWidth-15:value<15&&(newValue=15):"y"===axis&&(value+elHeight>=docHeight?newValue=docHeight-elHeight-15:value<15&&(newValue=15)),newValue}},{key:"createComponent",value:function(){var _state11=this.state,index=_state11.index,shouldRedraw=_state11.shouldRedraw,shouldRenderTooltip=_state11.shouldRenderTooltip,standaloneData=_state11.standaloneData,xPos=_state11.xPos,yPos=_state11.yPos,_props7=this.props,disableOverlay=_props7.disableOverlay,holePadding=_props7.holePadding,locale=_props7.locale,offsetParentSelector=_props7.offsetParentSelector,showBackButton=_props7.showBackButton,showOverlay=_props7.showOverlay,showSkipButton=_props7.showSkipButton,showStepsProgress=_props7.showStepsProgress,steps=_props7.steps,type=_props7.type,currentStep=standaloneData||steps[index],step=_extends({},currentStep),target=this.getStepTargetElement(step),component=void 0,allowClicksThruHole=step&&step.allowClicksThruHole||this.props.allowClicksThruHole,shouldShowOverlay=!standaloneData&&showOverlay,buttons={primary:locale.close};if((0,_utils.logger)({type:"joyride:createComponent"+this.getRenderStage(),msg:["component:",shouldRenderTooltip||standaloneData?"Tooltip":"Beacon","animate:",xPos>-1&&!shouldRedraw,"step:",step],debug:this.props.debug,warn:!target}),!target)return!1;if(shouldRenderTooltip||standaloneData){var position=this.calcPosition(step);if(!standaloneData){if(["continuous","guided"].includes(type)){if(buttons.primary=locale.last,steps[index+1])if(showStepsProgress){var next=locale.next;"string"==typeof locale.next&&(next=_react2.default.createElement("span",null,locale.next)),buttons.primary=_react2.default.createElement("span",null,next," ",_react2.default.createElement("span",null,index+1+"/"+steps.length))}else buttons.primary=locale.next;showBackButton&&index>0&&(buttons.secondary=locale.back)}showSkipButton&&(buttons.skip=locale.skip)}component=_react2.default.createElement(_Tooltip2.default,{allowClicksThruHole:allowClicksThruHole,animate:xPos>-1&&!shouldRedraw,buttons:buttons,disableOverlay:disableOverlay,holePadding:holePadding,offsetParentSelector:offsetParentSelector,position:position,selector:(0,_utils.sanitizeSelector)(step.selector),showOverlay:shouldShowOverlay,step:step,standalone:Boolean(standaloneData),target:target,type:type,xPos:xPos,yPos:yPos,onClick:this.handleClickTooltip,onRender:this.handleRenderTooltip})}else component=_react2.default.createElement(_Beacon2.default,{step:step,xPos:xPos,yPos:yPos,onTrigger:this.handleClickBeacon,eventType:step.type||"click"});return component}},{key:"render",value:function(){var _state12=this.state,index=_state12.index,isRunning=_state12.isRunning,standaloneData=_state12.standaloneData,steps=this.props.steps,hasStep=Boolean(steps[index]),component=void 0,standaloneComponent=void 0;return isRunning&&hasStep?(0,_utils.logger)({type:"joyride:render"+this.getRenderStage(),msg:["step:",steps[index]],debug:this.props.debug}):!isRunning&&standaloneData&&(0,_utils.logger)({type:"joyride:render",msg:["tooltip:",standaloneData],debug:this.props.debug}),standaloneData?standaloneComponent=this.createComponent():isRunning&&hasStep&&(component=this.createComponent()),_react2.default.createElement("div",{className:"joyride"},component,standaloneComponent)}}]),Joyride}(_react2.default.Component);Joyride.propTypes={allowClicksThruHole:_propTypes2.default.bool,autoStart:_propTypes2.default.bool,callback:_propTypes2.default.func,debug:_propTypes2.default.bool,disableOverlay:_propTypes2.default.bool,holePadding:_propTypes2.default.number,keyboardNavigation:_propTypes2.default.bool,locale:_propTypes2.default.object,offsetParentSelector:_propTypes2.default.string,resizeDebounce:_propTypes2.default.bool,resizeDebounceDelay:_propTypes2.default.number,run:_propTypes2.default.bool,scrollOffset:_propTypes2.default.number,scrollToFirstStep:_propTypes2.default.bool,scrollToSteps:_propTypes2.default.bool,showBackButton:_propTypes2.default.bool,showOverlay:_propTypes2.default.bool,showSkipButton:_propTypes2.default.bool,showStepsProgress:_propTypes2.default.bool,stepIndex:_propTypes2.default.number,steps:_propTypes2.default.array,tooltipOffset:_propTypes2.default.number,type:_propTypes2.default.string},Joyride.defaultProps={allowClicksThruHole:!1,autoStart:!1,debug:!1,disableOverlay:!1,holePadding:5,keyboardNavigation:!0,locale:{back:"Back",close:"Close",last:"Last",next:"Next",skip:"Skip"},offsetParentSelector:"body",resizeDebounce:!1,resizeDebounceDelay:200,run:!1,scrollOffset:20,scrollToFirstStep:!1,scrollToSteps:!0,showBackButton:!0,showOverlay:!0,showSkipButton:!1,showStepsProgress:!1,stepIndex:0,steps:[],tooltipOffset:15,type:"single"},exports.default=Joyride},{"./Beacon":69,"./Tooltip":70,"./utils":72,"nested-property":63,"prop-types":"prop-types",react:"react",scroll:85}],72:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.hexToRGB=hexToRGB,exports.getDocHeight=getDocHeight,exports.getRootEl=getRootEl,exports.logger=logger,exports.sanitizeSelector=sanitizeSelector,exports.getOffsetBoundingClientRect=getOffsetBoundingClientRect;function hexToRGB(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,newHex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b}),result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(newHex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null}function getBrowser(){if("undefined"==typeof window)return"node";var isOpera=Boolean(window.opera)||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox="undefined"!=typeof InstallTrigger,isChrome=!!window.chrome&&!!window.chrome.webstore,isSafari=(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!isChrome)&&!isOpera&&void 0!==window.webkitAudioContext,isIE=Boolean(document.documentMode);return isOpera?"opera":isFirefox?"firefox":isChrome?"chrome":isSafari?"safari":isIE?"ie":""}var browser=exports.browser=getBrowser();function getDocHeight(){var _document=document,body=_document.body,html=_document.documentElement;return Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)}function getRootEl(){var _document2=document,scrollingElement=_document2.scrollingElement;return scrollingElement||(["ie","firefox"].indexOf(browser)>-1?document.documentElement:document.body)}function logger(_ref){var _ref$type=_ref.type,type=void 0===_ref$type?"joyride":_ref$type,msg=_ref.msg,_ref$warn=_ref.warn,warn=void 0!==_ref$warn&&_ref$warn,_ref$debug=_ref.debug,debug=void 0!==_ref$debug&&_ref$debug,loggingFunction=warn?console.warn||console.error:console.log;debug&&(console.log("%c"+type,"color: #760bc5; font-weight: bold; font-size: 12px;"),msg&&(Array.isArray(msg)?loggingFunction.apply(console,msg):loggingFunction.apply(console,[msg])))}function sanitizeSelector(selector){return selector.dataset&&selector.dataset.reactid?(console.warn("Deprecation warning: React 15.0 removed reactid. Update your code."),'[data-reactid="'+selector.dataset.reactid+'"]'):selector.dataset&&(console.error("Unsupported error: React 15.0+ doesnt write reactid to the DOM anymore, please use a plain class in your step.",selector),selector.className)?"."+selector.className.replace(" ","."):selector}function getOffsetBoundingClientRect(element,offsetParent){var elementRect=element.getBoundingClientRect();if(!offsetParent)return elementRect;var offsetParentRect=offsetParent.getBoundingClientRect(),offsetTop=offsetParentRect.top>0?elementRect.top-offsetParentRect.top:elementRect.top,offsetLeft=offsetParentRect.left>0?elementRect.left-offsetParentRect.left:elementRect.left;return{top:offsetTop,left:offsetLeft,right:offsetParentRect.right>0?offsetParentRect.right-elementRect.right:elementRect.right,bottom:offsetParentRect.bottom>0?offsetParentRect.bottom-elementRect.bottom:elementRect.bottom,x:offsetLeft,y:offsetTop,width:elementRect.width,height:elementRect.height}}},{}],73:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60,Motion=function(_React$Component){_inherits(Motion,_React$Component),_createClass(Motion,null,[{key:"propTypes",value:{defaultStyle:_propTypes2.default.objectOf(_propTypes2.default.number),style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired,children:_propTypes2.default.func.isRequired,onRest:_propTypes2.default.func},enumerable:!0}]);function Motion(props){var _this=this;_classCallCheck(this,Motion),_React$Component.call(this,props),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(destStyle){var dirty=!1,_state=_this.state,currentStyle=_state.currentStyle,currentVelocity=_state.currentVelocity,lastIdealStyle=_state.lastIdealStyle,lastIdealVelocity=_state.lastIdealVelocity;for(var key in destStyle)if(Object.prototype.hasOwnProperty.call(destStyle,key)){var styleValue=destStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,currentStyle=_extends({},currentStyle),currentVelocity=_extends({},currentVelocity),lastIdealStyle=_extends({},lastIdealStyle),lastIdealVelocity=_extends({},lastIdealVelocity)),currentStyle[key]=styleValue,currentVelocity[key]=0,lastIdealStyle[key]=styleValue,lastIdealVelocity[key]=0)}dirty&&_this.setState({currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:lastIdealStyle,lastIdealVelocity:lastIdealVelocity})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timestamp){var propsStyle=_this.props.style;if(_shouldStopAnimation2.default(_this.state.currentStyle,propsStyle,_this.state.currentVelocity))return _this.wasAnimating&&_this.props.onRest&&_this.props.onRest(),_this.animationID=null,_this.wasAnimating=!1,void(_this.accumulatedTime=0);_this.wasAnimating=!0;var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyle={},newLastIdealVelocity={},newCurrentStyle={},newCurrentVelocity={};for(var key in propsStyle)if(Object.prototype.hasOwnProperty.call(propsStyle,key)){var styleValue=propsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyle[key],newLastIdealVelocityValue=_this.state.lastIdealVelocity[key],i=0;i<framesToCatchUp;i++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyle:newCurrentStyle,currentVelocity:newCurrentVelocity,lastIdealStyle:newLastIdealStyle,lastIdealVelocity:newLastIdealVelocity}),_this.unreadPropStyle=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return Motion.prototype.defaultState=function(){var _props=this.props,defaultStyle=_props.defaultStyle,style=_props.style,currentStyle=defaultStyle||_stripStyle2.default(style),currentVelocity=_mapToZero2.default(currentStyle);return{currentStyle:currentStyle,currentVelocity:currentVelocity,lastIdealStyle:currentStyle,lastIdealVelocity:currentVelocity}},Motion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},Motion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=props.style,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},Motion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},Motion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyle);return renderedChildren&&_react2.default.Children.only(renderedChildren)},Motion}(_react2.default.Component);exports.default=Motion,module.exports=exports.default},{"./mapToZero":76,"./shouldStopAnimation":81,"./stepper":83,"./stripStyle":84,"performance-now":64,"prop-types":"prop-types",raf:67,react:"react"}],74:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}
var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60;function shouldStopAnimationAll(currentStyles,styles,currentVelocities){for(var i=0;i<currentStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],styles[i],currentVelocities[i]))return!1;return!0}var StaggeredMotion=function(_React$Component){_inherits(StaggeredMotion,_React$Component),_createClass(StaggeredMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.objectOf(_propTypes2.default.number)),styles:_propTypes2.default.func.isRequired,children:_propTypes2.default.func.isRequired},enumerable:!0}]);function StaggeredMotion(props){var _this=this;_classCallCheck(this,StaggeredMotion),_React$Component.call(this,props),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _state=_this.state,currentStyles=_state.currentStyles,currentVelocities=_state.currentVelocities,lastIdealStyles=_state.lastIdealStyles,lastIdealVelocities=_state.lastIdealVelocities,someDirty=!1,i=0;i<unreadPropStyles.length;i++){var unreadPropStyle=unreadPropStyles[i],dirty=!1;for(var key in unreadPropStyle)if(Object.prototype.hasOwnProperty.call(unreadPropStyle,key)){var styleValue=unreadPropStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,someDirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i])),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0)}}someDirty&&_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.animationID=_raf2.default(function(timestamp){var destStyles=_this.props.styles(_this.state.lastIdealStyles);if(shouldStopAnimationAll(_this.state.currentStyles,destStyles,_this.state.currentVelocities))return _this.animationID=null,void(_this.accumulatedTime=0);var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),newLastIdealStyles=[],newLastIdealVelocities=[],newCurrentStyles=[],newCurrentVelocities=[],i=0;i<destStyles.length;i++){var destStyle=destStyles[i],newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(var key in destStyle)if(Object.prototype.hasOwnProperty.call(destStyle,key)){var styleValue=destStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=_this.state.lastIdealStyles[i][key],newLastIdealVelocityValue=_this.state.lastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity,newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()})},this.state=this.defaultState()}return StaggeredMotion.prototype.defaultState=function(){var _props=this.props,defaultStyles=_props.defaultStyles,styles=_props.styles,currentStyles=defaultStyles||styles().map(_stripStyle2.default),currentVelocities=currentStyles.map(function(currentStyle){return _mapToZero2.default(currentStyle)});return{currentStyles:currentStyles,currentVelocities:currentVelocities,lastIdealStyles:currentStyles,lastIdealVelocities:currentVelocities}},StaggeredMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},StaggeredMotion.prototype.componentWillReceiveProps=function(props){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=props.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},StaggeredMotion.prototype.componentWillUnmount=function(){null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},StaggeredMotion.prototype.render=function(){var renderedChildren=this.props.children(this.state.currentStyles);return renderedChildren&&_react2.default.Children.only(renderedChildren)},StaggeredMotion}(_react2.default.Component);exports.default=StaggeredMotion,module.exports=exports.default},{"./mapToZero":76,"./shouldStopAnimation":81,"./stepper":83,"./stripStyle":84,"performance-now":64,"prop-types":"prop-types",raf:67,react:"react"}],75:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _mapToZero=require("./mapToZero"),_mapToZero2=_interopRequireDefault(_mapToZero),_stripStyle=require("./stripStyle"),_stripStyle2=_interopRequireDefault(_stripStyle),_stepper3=require("./stepper"),_stepper4=_interopRequireDefault(_stepper3),_mergeDiff=require("./mergeDiff"),_mergeDiff2=_interopRequireDefault(_mergeDiff),_performanceNow=require("performance-now"),_performanceNow2=_interopRequireDefault(_performanceNow),_raf=require("raf"),_raf2=_interopRequireDefault(_raf),_shouldStopAnimation=require("./shouldStopAnimation"),_shouldStopAnimation2=_interopRequireDefault(_shouldStopAnimation),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),msPerFrame=1e3/60;function rehydrateStyles(mergedPropsStyles,unreadPropStyles,plainStyles){var cUnreadPropStyles=unreadPropStyles;return null==cUnreadPropStyles?mergedPropsStyles.map(function(mergedPropsStyle,i){return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}}):mergedPropsStyles.map(function(mergedPropsStyle,i){for(var j=0;j<cUnreadPropStyles.length;j++)if(cUnreadPropStyles[j].key===mergedPropsStyle.key)return{key:cUnreadPropStyles[j].key,data:cUnreadPropStyles[j].data,style:plainStyles[i]};return{key:mergedPropsStyle.key,data:mergedPropsStyle.data,style:plainStyles[i]}})}function shouldStopAnimationAll(currentStyles,destStyles,currentVelocities,mergedPropsStyles){if(mergedPropsStyles.length!==destStyles.length)return!1;for(var i=0;i<mergedPropsStyles.length;i++)if(mergedPropsStyles[i].key!==destStyles[i].key)return!1;for(var i=0;i<mergedPropsStyles.length;i++)if(!_shouldStopAnimation2.default(currentStyles[i],destStyles[i].style,currentVelocities[i]))return!1;return!0}function mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,oldCurrentStyles,oldCurrentVelocities,oldLastIdealStyles,oldLastIdealVelocities){for(var newMergedPropsStyles=_mergeDiff2.default(oldMergedPropsStyles,destStyles,function(oldIndex,oldMergedPropsStyle){var leavingStyle=willLeave(oldMergedPropsStyle);return null==leavingStyle?(didLeave({key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data}),null):_shouldStopAnimation2.default(oldCurrentStyles[oldIndex],leavingStyle,oldCurrentVelocities[oldIndex])?(didLeave({key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data}),null):{key:oldMergedPropsStyle.key,data:oldMergedPropsStyle.data,style:leavingStyle}}),newCurrentStyles=[],newCurrentVelocities=[],newLastIdealStyles=[],newLastIdealVelocities=[],i=0;i<newMergedPropsStyles.length;i++){for(var newMergedPropsStyleCell=newMergedPropsStyles[i],foundOldIndex=null,j=0;j<oldMergedPropsStyles.length;j++)if(oldMergedPropsStyles[j].key===newMergedPropsStyleCell.key){foundOldIndex=j;break}if(null==foundOldIndex){var plainStyle=willEnter(newMergedPropsStyleCell);newCurrentStyles[i]=plainStyle,newLastIdealStyles[i]=plainStyle;var velocity=_mapToZero2.default(newMergedPropsStyleCell.style);newCurrentVelocities[i]=velocity,newLastIdealVelocities[i]=velocity}else newCurrentStyles[i]=oldCurrentStyles[foundOldIndex],newLastIdealStyles[i]=oldLastIdealStyles[foundOldIndex],newCurrentVelocities[i]=oldCurrentVelocities[foundOldIndex],newLastIdealVelocities[i]=oldLastIdealVelocities[foundOldIndex]}return[newMergedPropsStyles,newCurrentStyles,newCurrentVelocities,newLastIdealStyles,newLastIdealVelocities]}var TransitionMotion=function(_React$Component){_inherits(TransitionMotion,_React$Component),_createClass(TransitionMotion,null,[{key:"propTypes",value:{defaultStyles:_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.number).isRequired})),styles:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,data:_propTypes2.default.any,style:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.object])).isRequired}))]).isRequired,children:_propTypes2.default.func.isRequired,willEnter:_propTypes2.default.func,willLeave:_propTypes2.default.func,didLeave:_propTypes2.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(styleThatEntered){return _stripStyle2.default(styleThatEntered.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]);function TransitionMotion(props){var _this=this;_classCallCheck(this,TransitionMotion),_React$Component.call(this,props),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(unreadPropStyles){for(var _mergeAndSync=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,unreadPropStyles,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),mergedPropsStyles=_mergeAndSync[0],currentStyles=_mergeAndSync[1],currentVelocities=_mergeAndSync[2],lastIdealStyles=_mergeAndSync[3],lastIdealVelocities=_mergeAndSync[4],i=0;i<unreadPropStyles.length;i++){var unreadPropStyle=unreadPropStyles[i].style,dirty=!1;for(var key in unreadPropStyle)if(Object.prototype.hasOwnProperty.call(unreadPropStyle,key)){var styleValue=unreadPropStyle[key];"number"==typeof styleValue&&(dirty||(dirty=!0,currentStyles[i]=_extends({},currentStyles[i]),currentVelocities[i]=_extends({},currentVelocities[i]),lastIdealStyles[i]=_extends({},lastIdealStyles[i]),lastIdealVelocities[i]=_extends({},lastIdealVelocities[i]),mergedPropsStyles[i]={key:mergedPropsStyles[i].key,data:mergedPropsStyles[i].data,style:_extends({},mergedPropsStyles[i].style)}),currentStyles[i][key]=styleValue,currentVelocities[i][key]=0,lastIdealStyles[i][key]=styleValue,lastIdealVelocities[i][key]=0,mergedPropsStyles[i].style[key]=styleValue)}}_this.setState({currentStyles:currentStyles,currentVelocities:currentVelocities,mergedPropsStyles:mergedPropsStyles,lastIdealStyles:lastIdealStyles,lastIdealVelocities:lastIdealVelocities})},this.startAnimationIfNecessary=function(){_this.unmounting||(_this.animationID=_raf2.default(function(timestamp){if(!_this.unmounting){var propStyles=_this.props.styles,destStyles="function"==typeof propStyles?propStyles(rehydrateStyles(_this.state.mergedPropsStyles,_this.unreadPropStyles,_this.state.lastIdealStyles)):propStyles;if(shouldStopAnimationAll(_this.state.currentStyles,destStyles,_this.state.currentVelocities,_this.state.mergedPropsStyles))return _this.animationID=null,void(_this.accumulatedTime=0);var currentTime=timestamp||_performanceNow2.default(),timeDelta=currentTime-_this.prevTime;if(_this.prevTime=currentTime,_this.accumulatedTime=_this.accumulatedTime+timeDelta,_this.accumulatedTime>10*msPerFrame&&(_this.accumulatedTime=0),0===_this.accumulatedTime)return _this.animationID=null,void _this.startAnimationIfNecessary();for(var currentFrameCompletion=(_this.accumulatedTime-Math.floor(_this.accumulatedTime/msPerFrame)*msPerFrame)/msPerFrame,framesToCatchUp=Math.floor(_this.accumulatedTime/msPerFrame),_mergeAndSync2=mergeAndSync(_this.props.willEnter,_this.props.willLeave,_this.props.didLeave,_this.state.mergedPropsStyles,destStyles,_this.state.currentStyles,_this.state.currentVelocities,_this.state.lastIdealStyles,_this.state.lastIdealVelocities),newMergedPropsStyles=_mergeAndSync2[0],newCurrentStyles=_mergeAndSync2[1],newCurrentVelocities=_mergeAndSync2[2],newLastIdealStyles=_mergeAndSync2[3],newLastIdealVelocities=_mergeAndSync2[4],i=0;i<newMergedPropsStyles.length;i++){var newMergedPropsStyle=newMergedPropsStyles[i].style,newCurrentStyle={},newCurrentVelocity={},newLastIdealStyle={},newLastIdealVelocity={};for(var key in newMergedPropsStyle)if(Object.prototype.hasOwnProperty.call(newMergedPropsStyle,key)){var styleValue=newMergedPropsStyle[key];if("number"==typeof styleValue)newCurrentStyle[key]=styleValue,newCurrentVelocity[key]=0,newLastIdealStyle[key]=styleValue,newLastIdealVelocity[key]=0;else{for(var newLastIdealStyleValue=newLastIdealStyles[i][key],newLastIdealVelocityValue=newLastIdealVelocities[i][key],j=0;j<framesToCatchUp;j++){var _stepper=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision);newLastIdealStyleValue=_stepper[0],newLastIdealVelocityValue=_stepper[1]}var _stepper2=_stepper4.default(msPerFrame/1e3,newLastIdealStyleValue,newLastIdealVelocityValue,styleValue.val,styleValue.stiffness,styleValue.damping,styleValue.precision),nextIdealX=_stepper2[0],nextIdealV=_stepper2[1];newCurrentStyle[key]=newLastIdealStyleValue+(nextIdealX-newLastIdealStyleValue)*currentFrameCompletion,newCurrentVelocity[key]=newLastIdealVelocityValue+(nextIdealV-newLastIdealVelocityValue)*currentFrameCompletion,newLastIdealStyle[key]=newLastIdealStyleValue,newLastIdealVelocity[key]=newLastIdealVelocityValue}}newLastIdealStyles[i]=newLastIdealStyle,newLastIdealVelocities[i]=newLastIdealVelocity,newCurrentStyles[i]=newCurrentStyle,newCurrentVelocities[i]=newCurrentVelocity}_this.animationID=null,_this.accumulatedTime-=framesToCatchUp*msPerFrame,_this.setState({currentStyles:newCurrentStyles,currentVelocities:newCurrentVelocities,lastIdealStyles:newLastIdealStyles,lastIdealVelocities:newLastIdealVelocities,mergedPropsStyles:newMergedPropsStyles}),_this.unreadPropStyles=null,_this.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return TransitionMotion.prototype.defaultState=function(){var _props=this.props,defaultStyles=_props.defaultStyles,styles=_props.styles,willEnter=_props.willEnter,willLeave=_props.willLeave,didLeave=_props.didLeave,destStyles="function"==typeof styles?styles(defaultStyles):styles,oldMergedPropsStyles=void 0;oldMergedPropsStyles=null==defaultStyles?destStyles:defaultStyles.map(function(defaultStyleCell){for(var i=0;i<destStyles.length;i++)if(destStyles[i].key===defaultStyleCell.key)return destStyles[i];return defaultStyleCell});var oldCurrentStyles=null==defaultStyles?destStyles.map(function(s){return _stripStyle2.default(s.style)}):defaultStyles.map(function(s){return _stripStyle2.default(s.style)}),oldCurrentVelocities=null==defaultStyles?destStyles.map(function(s){return _mapToZero2.default(s.style)}):defaultStyles.map(function(s){return _mapToZero2.default(s.style)}),_mergeAndSync3=mergeAndSync(willEnter,willLeave,didLeave,oldMergedPropsStyles,destStyles,oldCurrentStyles,oldCurrentVelocities,oldCurrentStyles,oldCurrentVelocities),mergedPropsStyles=_mergeAndSync3[0];return{currentStyles:_mergeAndSync3[1],currentVelocities:_mergeAndSync3[2],lastIdealStyles:_mergeAndSync3[3],lastIdealVelocities:_mergeAndSync3[4],mergedPropsStyles:mergedPropsStyles}},TransitionMotion.prototype.componentDidMount=function(){this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary()},TransitionMotion.prototype.componentWillReceiveProps=function(props){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var styles=props.styles;this.unreadPropStyles="function"==typeof styles?styles(rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):styles,null==this.animationID&&(this.prevTime=_performanceNow2.default(),this.startAnimationIfNecessary())},TransitionMotion.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(_raf2.default.cancel(this.animationID),this.animationID=null)},TransitionMotion.prototype.render=function(){var hydratedStyles=rehydrateStyles(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),renderedChildren=this.props.children(hydratedStyles);return renderedChildren&&_react2.default.Children.only(renderedChildren)},TransitionMotion}(_react2.default.Component);exports.default=TransitionMotion,module.exports=exports.default},{"./mapToZero":76,"./mergeDiff":77,"./shouldStopAnimation":81,"./stepper":83,"./stripStyle":84,"performance-now":64,"prop-types":"prop-types",raf:67,react:"react"}],76:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=mapToZero;function mapToZero(obj){var ret={};for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(ret[key]=0);return ret}module.exports=exports.default},{}],77:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=mergeDiff;function mergeDiff(prev,next,onRemove){for(var prevKeyIndex={},i=0;i<prev.length;i++)prevKeyIndex[prev[i].key]=i;for(var nextKeyIndex={},i=0;i<next.length;i++)nextKeyIndex[next[i].key]=i;for(var ret=[],i=0;i<next.length;i++)ret[i]=next[i];for(var i=0;i<prev.length;i++)if(!Object.prototype.hasOwnProperty.call(nextKeyIndex,prev[i].key)){var fill=onRemove(i,prev[i]);null!=fill&&ret.push(fill)}return ret.sort(function(a,b){var nextOrderA=nextKeyIndex[a.key],nextOrderB=nextKeyIndex[b.key],prevOrderA=prevKeyIndex[a.key],prevOrderB=prevKeyIndex[b.key];if(null!=nextOrderA&&null!=nextOrderB)return nextKeyIndex[a.key]-nextKeyIndex[b.key];if(null!=prevOrderA&&null!=prevOrderB)return prevKeyIndex[a.key]-prevKeyIndex[b.key];if(null!=nextOrderA){for(var i=0;i<next.length;i++){var pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderA<nextKeyIndex[pivot]&&prevOrderB>prevKeyIndex[pivot])return-1;if(nextOrderA>nextKeyIndex[pivot]&&prevOrderB<prevKeyIndex[pivot])return 1}}return 1}for(var i=0;i<next.length;i++){var pivot=next[i].key;if(Object.prototype.hasOwnProperty.call(prevKeyIndex,pivot)){if(nextOrderB<nextKeyIndex[pivot]&&prevOrderA>prevKeyIndex[pivot])return 1;if(nextOrderB>nextKeyIndex[pivot]&&prevOrderA<prevKeyIndex[pivot])return-1}}return-1})}module.exports=exports.default},{}],78:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},module.exports=exports.default},{}],79:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequire(obj){return obj&&obj.__esModule?obj.default:obj}var _Motion=require("./Motion");exports.Motion=_interopRequire(_Motion);var _StaggeredMotion=require("./StaggeredMotion");exports.StaggeredMotion=_interopRequire(_StaggeredMotion);var _TransitionMotion=require("./TransitionMotion");exports.TransitionMotion=_interopRequire(_TransitionMotion);var _spring=require("./spring");exports.spring=_interopRequire(_spring);var _presets=require("./presets");exports.presets=_interopRequire(_presets);var _stripStyle=require("./stripStyle");exports.stripStyle=_interopRequire(_stripStyle);var _reorderKeys=require("./reorderKeys");exports.reorderKeys=_interopRequire(_reorderKeys)},{"./Motion":73,"./StaggeredMotion":74,"./TransitionMotion":75,"./presets":78,"./reorderKeys":80,"./spring":82,"./stripStyle":84}],80:[function(require,module,exports){(function(process){"use strict";exports.__esModule=!0,exports.default=reorderKeys;var hasWarned=!1;function reorderKeys(){"development"===process.env.NODE_ENV&&(hasWarned||(hasWarned=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))}module.exports=exports.default}).call(this,require("_process"))},{_process:66}],81:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=shouldStopAnimation;function shouldStopAnimation(currentStyle,style,currentVelocity){for(var key in style)if(Object.prototype.hasOwnProperty.call(style,key)){if(0!==currentVelocity[key])return!1;var styleValue="number"==typeof style[key]?style[key]:style[key].val;if(currentStyle[key]!==styleValue)return!1}return!0}module.exports=exports.default},{}],82:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=spring;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _presets=require("./presets"),_presets2=_interopRequireDefault(_presets),defaultConfig=_extends({},_presets2.default.noWobble,{precision:.01});function spring(val,config){return _extends({},defaultConfig,config,{val:val})}module.exports=exports.default},{"./presets":78}],83:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=stepper;var reusedTuple=[0,0];function stepper(secondPerFrame,x,v,destX,k,b,precision){var Fspring=-k*(x-destX),Fdamper=-b*v,a=Fspring+Fdamper,newV=v+a*secondPerFrame,newX=x+newV*secondPerFrame;return Math.abs(newV)<precision&&Math.abs(newX-destX)<precision?(reusedTuple[0]=destX,reusedTuple[1]=0,reusedTuple):(reusedTuple[0]=newX,reusedTuple[1]=newV,reusedTuple)}module.exports=exports.default},{}],84:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=stripStyle;function stripStyle(style){var ret={};for(var key in style)Object.prototype.hasOwnProperty.call(style,key)&&(ret[key]="number"==typeof style[key]?style[key]:style[key].val);return ret}module.exports=exports.default},{}],85:[function(require,module,exports){var raf=require("rafl"),E_NOSCROLL=new Error("Element already at target scroll position"),E_CANCELLED=new Error("Scroll cancelled"),min=Math.min;module.exports={left:make("scrollLeft"),top:make("scrollTop")};function make(prop){return function(el,to,opts,cb){opts=opts||{},"function"==typeof opts&&(cb=opts,opts={}),"function"!=typeof cb&&(cb=noop);var start=+new Date,from=el[prop],ease=opts.ease||inOutSine,duration=isNaN(opts.duration)?350:+opts.duration,cancelled=!1;return from===to?cb(E_NOSCROLL,el[prop]):raf(animate),cancel;function cancel(){cancelled=!0}function animate(timestamp){if(cancelled)return cb(E_CANCELLED,el[prop]);var now=+new Date,time=min(1,(now-start)/duration),eased=ease(time);el[prop]=eased*(to-from)+from,raf(time<1?animate:function(){cb(null,el[prop])})}}}function inOutSine(n){return.5*(1-Math.cos(Math.PI*n))}function noop(){}},{rafl:68}]},{},[30])(30)});