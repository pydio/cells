!function r(a,o,i){function l(n,e){if(!o[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}t=o[n]={exports:{}};a[n][0].call(t.exports,function(e){var t=a[n][1][e];return l(t||e)},t,t.exports,r,a,o,i)}return o[n].exports}for(var u="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var w=e("react"),k=i(w),l=i(e("prop-types")),C=e("material-ui"),u=i(e("../editor/DataSourceEditor")),s=i(e("../editor/VersionPolicyEditor")),c=i(e("pydio/model/data-model")),d=i(e("pydio/model/node")),x=i(e("pydio/util/lang")),f=i(e("pydio")),p=i(e("pydio/http/api")),h=i(e("pydio/http/resources-manager")),y=i(e("../model/DataSource")),m=i(e("../model/Ws")),g=e("cells-sdk"),v=e("uuid"),O=i(e("../editor/VersionPolicyPeriods")),P=i(e("./EncryptionKeys")),b=e("material-ui/styles"),A=i(e("../editor/CreateDSDialog")),j=f.default.requireLib("components").MaterialTable,f=f.default.requireLib("boot"),S=f.JobsStore,_=f.moment,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(T,k["default"].Component),r(T,[{key:"componentDidMount",value:function(){var t=this,e=new g.ConfigServiceApi(p.default.getRestClient()),n=this.props.pydio;this.statusPoller=setInterval(function(){n.WebSocketClient.getStatus()&&(y.default.loadStatuses().then(function(e){t.setState({startedServices:e.Services||[]})}),e.listPeersAddresses().then(function(e){t.setState({peerAddresses:e.PeerAddresses||[]})}))},2500),setTimeout(function(){t.syncPoller=setInterval(function(){n.WebSocketClient.getStatus()&&t.syncStatuses()},2500)},1250),this.load()}},{key:"componentWillUnmount",value:function(){clearInterval(this.statusPoller),clearInterval(this.syncPoller)}},{key:"load",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];this.setState({dsLoaded:!1,versionsLoaded:!1,newDsName:e}),y.default.loadDatasources().then(function(e){t.setState({dataSources:e.DataSources||[],dsLoaded:!0},function(){t.syncStatuses()})}),y.default.loadVersioningPolicies().then(function(e){t.setState({versioningPolicies:e.Policies||[],versionsLoaded:!0})}),y.default.loadStatuses().then(function(e){t.setState({startedServices:e.Services})}),this.refs&&this.refs.encKeys&&this.refs.encKeys.load()}},{key:"syncStatuses",value:function(){var n=this,e=this.state.dataSources,e=void 0===e?[]:e;e.length&&S.getInstance().getAdminJobs(null,null,e.map(function(e){return"resync-ds-"+e.Name}),1).then(function(e){var t={};(e.Jobs||[]).forEach(function(e){e.Tasks&&e.Tasks.length&&(t[e.ID.replace("resync-ds-","")]=e)}),n.setState({resyncJobs:t})})}},{key:"closeEditor",value:function(){this.props.closeRightPane()}},{key:"openDataSource",value:function(e){var t,n,r,a;e.length&&(t=e[0],n=(a=this.props).openRightPane,r=a.accessByName,e=a.pydio,a=a.storageTypes,n({COMPONENT:u.default,PROPS:{ref:"editor",pydio:e,dataSource:t,storageTypes:a,readonly:!r("CreateDatasource"),closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}}))}},{key:"makeStatusLabel",value:function(e,t){switch(e){case"error":return k.default.createElement("span",{style:{color:"#e53935"}},k.default.createElement("span",{className:"mdi mdi-alert"})," ",t);case"running":return k.default.createElement("span",{style:{color:"#ef6c00"}},k.default.createElement("span",{className:"mdi mdi-timer-sand"})," ",t);default:return k.default.createElement("span",{style:{color:"#1b5e20"}},k.default.createElement("span",{className:"mdi mdi-check"})," ",t)}}},{key:"computeStatus",value:function(t){var e=this,n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(n&&t.Disabled)return-1;var r=this.state,a=r.startedServices,o=void 0===a?[]:a,i=r.peerAddresses,a=void 0===i?[]:i,i=r.m,r=r.newDsName;if(!o.length)return i("status.na");var l=void 0,u=void 0,s=void 0;if(o.map(function(e){e.Name==="pydio.grpc.data.sync."+t.Name&&"STARTED"===e.Status?u=!0:e.Name==="pydio.grpc.data.index."+t.Name&&"STARTED"===e.Status?l=!0:e.Name==="pydio.grpc.data.objects."+t.ObjectsServiceName&&"STARTED"===e.Status&&(s=!0)}),l&&u&&s)return r&&t.Name===r&&setTimeout(function(){e.setState({newDsName:null})},100),n?0:this.makeStatusLabel("ok",i("status.ok"));if(r&&t.Name===r)return n?1:this.makeStatusLabel("running",i("status.starting"));if(l||u||s){var c=[];return l||c.push(i("status.index")),u||c.push(i("status.sync")),s||c.push(i("status.object")),n?3:this.makeStatusLabel("error",c.join(" - "))}c=i("status.ko");return a&&-1===a.indexOf(t.PeerAddress)&&(c=i("status.ko-peers").replace("%s",t.PeerAddress)),n?2:this.makeStatusLabel("error",c)}},{key:"computeJobStatus",value:function(e){var t=e.Tasks[0];switch(t.Status){case"Finished":return this.makeStatusLabel("ok",_(new Date(1e3*parseInt(t.EndTime))).fromNow());case"Running":return this.makeStatusLabel("running",t.StatusMessage||"Running...");case"Error":return this.makeStatusLabel("error",t.StatusMessage);case"Queued":return this.makeStatusLabel("running",t.StatusMessage)}return this.makeStatusLabel("ok",t.StatusMessage)}},{key:"openVersionPolicy",value:function(){var e,t,n,r,a,o=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];void 0!==o&&!o.length||(t=!1,(e=void 0)===o?(t=!0,(e=new g.TreeVersioningPolicy).Uuid=(0,v.v4)(),e.VersionsDataSourceName="versions",e.NodeDeletedStrategy="KeepAll",(r=new g.TreeVersioningKeepPeriod).IntervalStart="0",r.MaxNumber=-1,e.KeepPeriods=[r]):(e=o[0],i&&(t=!0,(e=g.TreeVersioningPolicy.constructFromObject(JSON.parse(JSON.stringify(e)))).Uuid=(0,v.v4)(),e.Name+=" (Copy)")),n=(a=this.props).openRightPane,r=a.pydio,o=a.versioningReadonly,i=a.accessByName,a=this.state.dataSources,n({COMPONENT:s.default,PROPS:{ref:"editor",versionPolicy:e,create:t,pydio:r,internalSources:a.filter(function(e){return e.StorageConfiguration.cellsInternal}).map(function(e){return e.Name}),readonly:o||!i("CreateVersioning"),closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}}))}},{key:"deleteVersionPolicy",value:function(t){var n=this,e=this.props.pydio;e.UI.openConfirmDialog({message:e.MessageHash["ajxp_admin.versions.editor.delete.confirm"],destructive:[t.Name],validCallback:function(){h.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(p.default.getRestClient()).deleteVersioningPolicy(t.Uuid).then(function(e){n.load()})})}})}},{key:"createDataSource",value:function(e){var t=this.props,n=t.pydio,r=t.storageTypes,t=this.state.dataSources;this.props.openRightPane({COMPONENT:u.default,PROPS:{ref:"editor",create:!0,createStructure:e,existingNames:t.map(function(e){return e.Name}),pydio:n,storageTypes:r,closeEditor:this.closeEditor.bind(this),reloadList:this.load.bind(this)}})}},{key:"resyncDataSource",value:function(e,t,n){e.UI.openConfirmDialog({message:t("editor.legend.resync"),skipNext:"datasource.resync.confirm",validCallback:function(){new y.default(n).resyncSource()}})}},{key:"deleteDataSource",value:function(e,t,n){var r=this;e.UI.openConfirmDialog({message:t("editor.delete.warning"),validCallback:function(){new y.default(n).deleteSource().then(function(){r.load()})},destructive:[n.Name]})}},{key:"createWorkspaceFromDatasource",value:function(t,e,n){var r=new m.default,a=r.getModel(),o=n.Name;a.Label=o,a.Description="Root of "+o,a.Slug=o,a.Attributes.DEFAULT_RIGHTS="";n={Uuid:"DATASOURCE:"+o,Path:o};a.RootNodes[n.Uuid]=n,t.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitle:e("board.wsfromds.title"),legendId:e("board.wsfromds.legend").replace("%s",o),fieldLabelId:e("board.wsfromds.field"),defaultValue:e("board.wsfromds.defaultPrefix").replace("%s",o),submitValue:function(e){a.Label=e,r.save().then(function(){t.goTo("/data/workspaces")})}})}},{key:"render",value:function(){var t=this,e=this.state,n=e.dataSources,r=e.resyncJobs,a=e.versioningPolicies,o=e.m,i=e.createDialog;n.sort(x.default.arraySorter("Name"));var l=n.filter(function(e){return!e.StorageConfiguration.cellsInternal}),u=n.filter(function(e){return e.StorageConfiguration.cellsInternal});a.sort(x.default.arraySorter("Name"));var s=AdminComponents.AdminStyles(this.props.muiTheme.palette),c=s.body,d=c.tableMaster,f=c.block.props,p=c.block.container,h=this.props,y=h.currentNode,m=h.pydio,g=h.versioningReadonly,v=h.accessByName,b=[{name:"Name",label:o("name"),style:{fontSize:15,width:"15%"},headerStyle:{width:"15%"},sorter:{type:"string",default:!0}},{name:"StorageType",label:o("storage"),style:{width:"15%"},headerStyle:{width:"15%"},renderCell:function(e){var t="storage.fs";switch(e.StorageType){case"S3":t="storage.s3";break;case"AZURE":t="storage.azure";break;case"GCS":t="storage.gcs"}return o(t)},sorter:{type:"string"}},{name:"Status",label:o("status"),hideSmall:!0,renderCell:function(e){return e.Disabled?k.default.createElement("span",{style:{color:"#757575"}},k.default.createElement("span",{className:"mdi mdi-checkbox-blank-circle-outline"})," ",o("status.disabled")):t.computeStatus(e)},sorter:{type:"number",value:function(e){return t.computeStatus(e,!0)}}},{name:"SyncStatus",label:o("syncStatus"),hideSmall:!0,renderCell:function(e){return r&&r[e.Name]?t.computeJobStatus(r[e.Name]):"n/a"},sorter:{type:"number",value:function(e){return r&&r[e.Name]?r[e.Name].Tasks[0].EndTime:0}}},{name:"VersioningPolicyName",label:o("versioning"),style:{width:"15%"},headerStyle:{width:"15%"},hideSmall:!0,renderCell:function(t){var e=a.find(function(e){return e.Uuid===t.VersioningPolicyName});return e?e.Name:t.VersioningPolicyName||"-"},sorter:{type:"string"}},{name:"EncryptionMode",label:o("encryption"),hideSmall:!0,style:{width:"8%",textAlign:"center"},headerStyle:{width:"8%"},renderCell:function(e){return"MASTER"===e.EncryptionMode?k.default.createElement("span",{className:"mdi mdi-check"}):"-"},sorter:{type:"number",value:function(e){return"MASTER"===e.EncryptionMode?1:0}}}],S=(b=!l.filter(function(e){return!e.FlatStorage}).length?b.filter(function(e){return"SyncStatus"!==e.name}):b).filter(function(e){return"VersioningPolicyName"!==e.name&&"SyncStatus"!==e.name}),_=y.getLabel(),e=y.getMetadata().get("icon_class"),n=[];v("CreateDatasource")&&n.push(k.default.createElement(C.FlatButton,E({primary:!0,label:m.MessageHash["ajxp_admin.ws.4"],onClick:function(){return t.setState({createDialog:!0})}},s.props.header.flatButton)));g||v("CreateVersioning"),n.push(k.default.createElement(C.FlatButton,E({primary:!0,label:m.MessageHash["ajxp_admin.ws.4b"],onClick:function(){t.openVersionPolicy()}},s.props.header.flatButton)));c=[{name:"Name",label:o("versioning.name"),style:{width:180,fontSize:15},headerStyle:{width:180},sorter:{type:"string",default:!0}},{name:"Description",label:o("versioning.description"),sorter:{type:"string"}},{name:"KeepPeriods",hideSmall:!0,label:o("versioning.periods"),renderCell:function(e){return k.default.createElement(O.default,{rendering:"short",policy:e,pydio:m})}},{name:"VersionsDataSourceName",style:{width:180},headerStyle:{width:180},label:o("versioning.storage"),sorter:{type:"string"},hideSmall:!0}],h=[];v("CreateDatasource")&&h.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit datasource",onClick:function(e){t.openDataSource([e])}}),h.push({iconClassName:"mdi mdi-folder-plus",tooltip:"Create workspace here",onClick:function(e){return t.createWorkspaceFromDatasource(m,o,e)}}),v("CreateDatasource")&&h.push({iconClassName:"mdi mdi-delete",tooltip:o("editor.legend.delete.button"),onClick:function(e){return t.deleteDataSource(m,o,e)}});y=[].concat(h);0<l.filter(function(e){return!e.FlatStorage}).length&&h.push({iconClassName:"mdi mdi-sync",tooltip:o("editor.legend.resync.button"),onClick:function(e){return t.resyncDataSource(m,o,e)},disable:function(e){return e.FlatStorage}});g=[];return g.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit policy",onClick:function(e){t.openVersionPolicy([e])}}),g.push({iconClassName:"mdi mdi-content-copy",tooltip:"Duplicate policy",onClick:function(e){return t.openVersionPolicy([e],!0)}}),g.push({iconClassName:"mdi mdi-delete",tooltip:"Delete policy",destructive:!0,onClick:function(e){return t.deleteVersionPolicy(e)}}),k.default.createElement("div",{className:"main-layout-nav-to-stack workspaces-board"},k.default.createElement("div",{className:"vertical-layout",style:{width:"100%"}},k.default.createElement(AdminComponents.Header,{title:_,icon:e,actions:n,reloadAction:this.load.bind(this),loading:!(this.state.dsLoaded&&this.state.versionsLoaded)}),k.default.createElement(A.default,{open:i,onRequestClose:function(){t.setState({createDialog:!1})},onSubmit:function(e){t.createDataSource(e)}}),k.default.createElement("div",{className:"layout-fill"},k.default.createElement(AdminComponents.SubHeader,{title:o("board.ds.title"),legend:o("board.ds.legend")}),k.default.createElement(C.Paper,E({},f,{style:E({},p)}),k.default.createElement(j,{data:l,columns:b,actions:h,onSelectRows:this.openDataSource.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:o("emptyState"),masterStyles:d,storageKey:"console.datasources.list"})),0<u.length&&k.default.createElement(w.Fragment,null,k.default.createElement("div",{style:{padding:"0px 20px"}},"Internal DataSources are used to store binaries like files versions"),k.default.createElement(C.Paper,E({},f,{style:E({},p)}),k.default.createElement(j,{data:u,columns:S,actions:y,onSelectRows:this.openDataSource.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:o("emptyState"),masterStyles:d,storageKey:"console.internalsources.list"}))),k.default.createElement(AdminComponents.SubHeader,{title:o("board.versioning.title"),legend:o("board.versioning.legend")}),k.default.createElement(C.Paper,E({},f,{style:E({},p)}),k.default.createElement(j,{data:a,columns:c,actions:g,onSelectRows:this.openVersionPolicy.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:d,storageKey:"console.versioning.policies.list"})),k.default.createElement(AdminComponents.SubHeader,{title:o("board.enc.title"),legend:o("board.enc.legend")}),k.default.createElement(P.default,{pydio:m,ref:"encKeys",accessByName:v,adminStyles:s}))))}}]),T);function T(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T),o(Object.getPrototypeOf(T.prototype),"constructor",this).call(this,t),this.state={dataSources:[],resyncJobs:{},versioningPolicies:[],dsLoaded:!1,versionsLoaded:!1,showExportKey:!1,exportedKey:null,showImportKey:!1,importResult:null,keyOperationError:null,startedServices:[],peerAddresses:[],m:function(e){return t.pydio.MessageHash["ajxp_admin.ds."+e]||e}}}r.propTypes={dataModel:l.default.instanceOf(c.default).isRequired,rootNode:l.default.instanceOf(d.default).isRequired,currentNode:l.default.instanceOf(d.default).isRequired,openEditor:l.default.func.isRequired,openRightPane:l.default.func.isRequired,closeRightPane:l.default.func.isRequired,filter:l.default.string,versioningReadonly:l.default.bool},n.default=r=(0,b.muiThemeable)()(r),n.default=r,t.exports=n.default},{"../editor/CreateDSDialog":7,"../editor/DataSourceEditor":9,"../editor/VersionPolicyEditor":13,"../editor/VersionPolicyPeriods":14,"../model/DataSource":18,"../model/Ws":21,"./EncryptionKeys":2,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react",uuid:25}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var g=i(e("react")),l=i(e("pydio/http/api")),u=i(e("pydio")),v=e("material-ui"),s=e("cells-sdk"),b=(i(e("../model/Ws")),u.default.requireLib("components").MaterialTable),S=u.default.requireLib("hoc").ModernTextField,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,g["default"].Component),r(c,[{key:"load",value:function(){var t=this;new s.ConfigServiceApi(l.default.getRestClient()).listEncryptionKeys(new s.EncryptionAdminListKeysRequest).then(function(e){t.setState({keys:e.Keys||[]})})}},{key:"componentDidMount",value:function(){this.load()}},{key:"exportKey",value:function(){var t=this,n=this.props.pydio,r=this.state.m,e=new s.ConfigServiceApi(l.default.getRestClient()),a=new s.EncryptionAdminExportKeyRequest;a.KeyID=this.state.showExportKey,a.StrPassword=this.refs["key-password-field"].getValue(),this.refs["key-password-confirm"].getValue()===a.StrPassword?e.exportEncryptionKey(a).then(function(e){t.setState({exportedKey:e.Key,showExportKey:null},function(){t.timeout=setTimeout(function(){t.setState({exportedKey:"",showDialog:!1})},1e4)}),t.setState({showExportKey:null})}).catch(function(e){n.UI.displayMessage("ERROR",r("key.export.fail")+" : "+e.message),t.setState({showExportKey:null})}):n.UI.displayMessage("ERROR","Warning, passwords differ!")}},{key:"createKey",value:function(){var t=this,e=new s.ConfigServiceApi(l.default.getRestClient()),n=new s.EncryptionAdminCreateKeyRequest;n.KeyID=this.refs.createKeyId.getValue(),n.Label=this.refs.createKeyLabel.getValue(),e.createEncryptionKey(n).then(function(e){t.load(),t.setState({showDialog:!1})}).catch(function(){t.setState({showDialog:!1})})}},{key:"deleteKey",value:function(n){var r=this,e=this.props.pydio,t=this.state.m;e.UI.openConfirmDialog({message:t("key.delete.warning"),destructive:[n],validCallback:function(){var e=new s.ConfigServiceApi(l.default.getRestClient()),t=new s.EncryptionAdminDeleteKeyRequest;t.KeyID=n,e.deleteEncryptionKey(t).then(function(e){r.load()})}})}},{key:"importKey",value:function(){var e,t=this,n=this.props.pydio,r=this.state.m,a=new s.ConfigServiceApi(l.default.getRestClient()),o=!0;(e=this.state.showImportKey).ID||((e=new s.EncryptionKey).ID=this.refs["key-import-id"].getValue(),e.Label=this.refs["key-import-label"].getValue(),o=!1),e.Content=this.refs["key-imported-field"].getValue();var i=new s.EncryptionAdminImportKeyRequest;i.StrPassword=this.refs["key-password-field"].getValue(),i.Key=e,i.Override=o,a.importEncryptionKey(i).then(function(e){e.Success?n.UI.displayMessage("SUCCESS",r("key.import.success")):n.UI.displayMessage("ERROR",r("key.import.fail")),t.load(),t.setState({showImportKey:!1,showDialog:!1})}).catch(function(){t.setState({showImportKey:!1,showDialog:!1})})}},{key:"render",value:function(){var t=this,e=this.state,n=e.keys,r=e.showDialog,a=e.showImportKey,o=e.showExportKey,i=e.exportedKey,l=e.showCreateKey,u=e.m,s=this.props,c=s.pydio,d=s.accessByName,f=s.adminStyles,p=[{name:"Label",label:u("key.label"),style:{width:"30%",fontSize:15},headerStyle:{width:"30%"},sorter:{type:"string",default:!0}},{name:"ID",label:u("key.id"),hideSmall:!0,sorter:{type:"string"}},{name:"Owner",label:u("key.owner"),hideSmall:!0,sorter:{type:"string"}},{name:"CreationDate",label:u("key.created"),hideSmall:!0,useMoment:!0,sorter:{type:"number"}}],h=[];d("CreateEncryption")&&h.push({iconClassName:"mdi mdi-import",tooltip:u("key.import"),onClick:function(e){t.setState({showDialog:!0,showImportKey:e})}},{iconClassName:"mdi mdi-export",tooltip:u("key.export"),onClick:function(e){t.setState({showDialog:!0,showExportKey:e.ID})}},{iconClassName:"mdi mdi-delete",tooltip:u("key.delete"),onClick:function(e){t.deleteKey(e.ID)}});var y=void 0,e=void 0,s=[];o||i?(e=u("key.export"),s=i?(y=g.default.createElement(S,{value:i.Content,fullWidth:!0,floatingLabelText:u("key.export.result.copy"),multiLine:!0,ref:"key-imported-field"}),[g.default.createElement(v.FlatButton,{label:"Close",onClick:function(){clearTimeout(t.timeout),t.setState({showExportKey:null,exportedKey:"",showDialog:!1})}})]):(y=g.default.createElement("div",null,g.default.createElement(S,{floatingLabelText:u("key.export.password"),ref:"key-password-field",type:"password",fullWidth:!0}),g.default.createElement(S,{floatingLabelText:u("key.export.confirm"),ref:"key-password-confirm",type:"password",fullWidth:!0})),[g.default.createElement(v.FlatButton,{label:c.MessageHash[54],onClick:function(){t.setState({showExportKey:null,showDialog:!1})}}),g.default.createElement(v.FlatButton,{label:u("key.export"),primary:!0,onClick:function(){t.exportKey()}})])):a?(e=u("key.import"),y=g.default.createElement("div",null,!a.ID&&g.default.createElement("div",null,g.default.createElement(S,{floatingLabelText:u("key.import.id"),ref:"key-import-id",fullWidth:!0}),g.default.createElement(S,{floatingLabelText:u("key.import.label"),ref:"key-import-label",fullWidth:!0})),g.default.createElement(S,{floatingLabelText:u("key.import.password"),ref:"key-password-field",type:"password",fullWidth:!0}),g.default.createElement(S,{fullWidth:!0,floatingLabelText:u("key.import.content"),multiLine:!0,ref:"key-imported-field"})),s=[g.default.createElement(v.FlatButton,{label:c.MessageHash[54],onClick:function(){t.setState({showImportKey:null,showDialog:!1})}}),g.default.createElement(v.FlatButton,{label:u("key.import"),primary:!0,onClick:function(){t.importKey()}})]):l&&(e="Create a Key",y=g.default.createElement("div",null,g.default.createElement(S,{floatingLabelText:u("key.import.id"),ref:"createKeyId",fullWidth:!0}),g.default.createElement(S,{floatingLabelText:u("key.import.label"),ref:"createKeyLabel",fullWidth:!0})),s=[g.default.createElement(v.FlatButton,{label:c.MessageHash[54],onClick:function(){t.setState({showCreateKey:null,showDialog:!1})}}),g.default.createElement(v.FlatButton,{label:u("key.create"),primary:!0,onClick:function(){t.createKey()}})]);a=AdminComponents.AdminStyles().body,l=a.tableMaster,c=a.block.props,a=a.block.container;return g.default.createElement("div",null,g.default.createElement(v.Dialog,{title:e,open:r,onRequestClose:function(){t.setState({showDialog:!1,showExportKey:null,showImportKey:null,showCreateKey:!1})},modal:!0,actions:s,contentStyle:{maxWidth:340}},y),g.default.createElement(v.Paper,m({},c,{style:a}),g.default.createElement(b,{data:n,columns:p,actions:h,onSelectRows:function(){},showCheckboxes:!1,emptyStateString:u("key.emptyState"),masterStyles:l,storageKey:"console.encryption-keys.list"})),d("CreateEncryption")&&g.default.createElement("div",{style:{textAlign:"right",paddingRight:24,paddingBottom:24}},g.default.createElement(v.FlatButton,m({primary:!0,label:u("key.import"),onClick:function(){t.setState({showImportKey:{},showDialog:!0})}},f.props.header.flatButton)),g.default.createElement("span",{style:{marginLeft:8}},g.default.createElement(v.FlatButton,m({primary:!0,label:u("key.create"),onClick:function(){t.setState({showCreateKey:!0,showDialog:!0})}},f.props.header.flatButton)))))}}]),c);function c(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,t),this.state={keys:[],showDialog:!1,showExportKey:null,exportedKey:null,showCreateKey:null,showImportKey:null,m:function(e){return t.pydio.MessageHash["ajxp_admin.ds.encryption."+e]||e}}}n.default=r,t.exports=n.default},{"../model/Ws":21,"cells-sdk":"cells-sdk","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var g=i(e("react")),v=i(e("../model/Metadata")),b=e("material-ui"),l=i(e("pydio")),S=i(e("../editor/MetaNamespace")),u=e("cells-sdk"),e=e("material-ui/styles").muiThemeable,_=l.default.requireLib("components").MaterialTable,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,g["default"].Component),r(s,[{key:"componentWillMount",value:function(){this.load()}},{key:"load",value:function(){var t=this;this.setState({loading:!0}),v.default.loadNamespaces().then(function(e){t.setState({loading:!1,namespaces:e.Namespaces||[]})})}},{key:"emptyNs",value:function(){var e=new u.IdmUserMetaNamespace;return e.Policies=[u.ServiceResourcePolicy.constructFromObject({Action:"READ",Subject:"*",Effect:"allow"}),u.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Subject:"*",Effect:"allow"})],e.JsonDefinition=JSON.stringify({type:"string"}),e.Indexable=!0,e}},{key:"create",value:function(){this.setState({create:!0,dialogOpen:!0,selectedNamespace:this.emptyNs()})}},{key:"deleteNs",value:function(e){var t=this,n=this.props.pydio,r=this.state.m;n.UI.openConfirmDialog({message:r("delete.confirm"),destructive:[e.Namespace],validCallback:function(){v.default.deleteNS(e).then(function(){t.load()})}})}},{key:"open",value:function(e){e.length&&this.setState({create:!1,dialogOpen:!0,selectedNamespace:e[0]})}},{key:"close",value:function(){this.setState({dialogOpen:!1,selectedNamespace:null})}},{key:"render",value:function(){var t=this,e=this.props,n=e.muiTheme,r=e.currentNode,a=e.pydio,o=e.accessByName,i=e.policiesBuilder,l=AdminComponents.AdminStyles(n.palette),u=this.state,s=u.namespaces,c=u.loading,d=u.dialogOpen,f=u.selectedNamespace,p=u.create,h=u.m,f=f||this.emptyNs();s.sort(function(e,t){e=e.Order||0,t=t.Order||0;return e===t?0:t<e?1:-1});var y=[{name:"Order",label:h("order"),style:{width:30},headerStyle:{width:30},hideSmall:!0,renderCell:function(e){return e.Order||"0"},sorter:{type:"number"}},{name:"Namespace",label:h("namespace"),style:{fontSize:15},sorter:{type:"string"}},{name:"Label",label:h("label"),style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}},{name:"Indexable",label:h("indexable"),style:{width:"10%"},headerStyle:{width:"10%"},hideSmall:!0,renderCell:function(e){return e.Indexable?"Yes":"No"},sorter:{type:"number",value:function(e){return e.Indexable?1:0}}},{name:"JsonDefinition",label:h("definition"),hideSmall:!0,renderCell:function(e){e=e.JsonDefinition;if(!e)return"";e=JSON.parse(e);return v.default.MetaTypes[e.type]||e.type},sorter:{type:"string"}}],e=r.getLabel(),n=r.getMetadata().get("icon_class"),u=[],r=[];return o("Create")&&(u.push(g.default.createElement(b.FlatButton,m({primary:!0,label:h("namespace.add"),onClick:function(){t.create()}},l.props.header.flatButton))),r.push({iconClassName:"mdi mdi-pencil",onClick:function(e){t.open([e])}},{iconClassName:"mdi mdi-delete",onClick:function(e){t.deleteNs(e)}})),g.default.createElement("div",{className:"main-layout-nav-to-stack workspaces-board"},g.default.createElement(S.default,{pydio:a,open:d,create:p,namespace:f,onRequestClose:function(){return t.close()},reloadList:function(){return t.load()},namespaces:s,readonly:!o("Create"),policiesBuilder:i}),g.default.createElement("div",{className:"vertical-layout",style:{width:"100%"}},g.default.createElement(AdminComponents.Header,{title:e,icon:n,actions:u,reloadAction:this.load.bind(this),loading:c}),g.default.createElement("div",{className:"layout-fill"},g.default.createElement(AdminComponents.SubHeader,{title:h("namespaces"),legend:h("namespaces.legend")}),g.default.createElement(b.Paper,l.body.block.props,g.default.createElement(_,{data:s,columns:y,actions:r,onSelectRows:this.open.bind(this),deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:h("empty"),masterStyles:l.body.tableMaster,storageKey:"console.metadata.list"})))))}}]),s);function s(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,t),this.state={loading:!1,namespaces:[],m:function(e){return t.pydio.MessageHash["ajxp_admin.metadata."+e]}}}n.default=r=e()(r),n.default=r,t.exports=n.default},{"../editor/MetaNamespace":12,"../model/Metadata":19,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var y=i(e("react")),l=i(e("pydio")),u=i(e("../model/VirtualNode")),s=i(e("../model/DataSource")),m=i(e("../virtual/NodeCard")),g=e("material-ui"),e=e("material-ui/styles"),v=l.default.requireLib("hoc").ModernTextField,b=l.default.requireLib("components").MaterialTable,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,y["default"].Component),r(c,[{key:"reload",value:function(){var t=this;this.setState({nodesLoaded:!1}),u.default.loadNodes(function(e){t.setState({nodes:e,nodesLoaded:!0})})}},{key:"createNode",value:function(){this.handleRequestClose();var e=new u.default;e.setName(this.state.newName);var t=this.state.nodes;this.setState({nodes:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t),[e])})}},{key:"handleTouchTap",value:function(e){var t=this;e.preventDefault(),this.setState({newName:"",open:!0,anchorEl:e.currentTarget},function(){setTimeout(function(){t.refs.newNode&&t.refs.newNode.focus()},300)})}},{key:"handleRequestClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){function t(e){return a.MessageHash["ajxp_admin.virtual."+e]||e}var n=this,e=this.props,r=e.readonly,a=e.pydio,o=e.muiTheme,i=e.accessByName,l=this.state,u=l.nodes,s=l.dataSources,c=l.nodesLoaded,d=l.dataSourcesLoaded,f=l.selectedNode,p=AdminComponents.AdminStyles(o.palette),e=u.map(function(e){return e.getName()===f?{node:e,expandedRow:y.default.createElement(m.default,{pydio:a,dataSources:s,node:e,reloadList:n.reload.bind(n),readonly:r||!i("Create"),adminStyles:p,onSave:n.reload.bind(n)})}:{node:e}}),l=[];!r&&i("Create")&&l.push(y.default.createElement(g.FlatButton,h({primary:!0,label:t("create"),onClick:this.handleTouchTap.bind(this)},p.props.header.flatButton)));o=[{name:"id",label:t("col.id"),style:{width:"25%",fontSize:15},headerStyle:{width:"25%"},renderCell:function(e){return e.node.getName()},sorter:{type:"string"}},{name:"code",label:t("col.code"),renderCell:function(e){return y.default.createElement("pre",null,e.node.getValue().split("\n").pop())}}],u=[];return r?u.push({iconClassName:"mdi mdi-eye",tooltip:t("code.display"),onClick:function(e){return n.setState({selectedNode:f===e.node.getName()?null:e.node.getName()})}}):(u.push({iconClassName:"mdi mdi-pencil",tooltip:t("code.edit"),onClick:function(e){return n.setState({selectedNode:f===e.node.getName()?null:e.node.getName()})}}),u.push({iconClassName:"mdi mdi-delete",tooltip:t("delete"),onClick:function(e){a.UI.openConfirmDialog({message:t("delete.confirm"),destructive:[e.node.getName()],validCallback:function(){e.node.remove(function(){n.reload()})}})},disable:function(e){return"cells"===e.node.getName()||"my-files"===e.node.getName()}})),y.default.createElement("div",{className:"vertical-layout workspaces-list layout-fill",style:{height:"100%"}},y.default.createElement(AdminComponents.Header,{title:t("title"),icon:"mdi mdi-help-network",actions:l,reloadAction:this.reload.bind(this),loading:!(c&&d)}),y.default.createElement(g.Popover,{open:this.state.open,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:this.handleRequestClose.bind(this)},y.default.createElement("div",{style:{margin:"0 10px"}},y.default.createElement(v,{ref:"newNode",floatingLabelText:t("label"),value:this.state.newName,onChange:function(e,t){n.setState({newName:t})},hintText:t("label.new")})),y.default.createElement(g.Divider,null),y.default.createElement("div",{style:{textAlign:"right",padding:"4px 10px"}},y.default.createElement(g.FlatButton,{label:a.MessageHash[54],onClick:this.handleRequestClose.bind(this)}),y.default.createElement(g.RaisedButton,{primary:!0,label:t("create.button"),onClick:this.createNode.bind(this)}))),y.default.createElement("div",{className:"layout-fill",style:{overflowY:"auto"}},y.default.createElement("div",{style:{padding:20,paddingBottom:0}},t("legend.1")),c&&d&&y.default.createElement(g.Paper,h({},p.body.block.props,{style:p.body.block.container}),y.default.createElement(b,{columns:o,data:e,actions:u,deselectOnClickAway:!0,showCheckboxes:!1,masterStyles:p.body.tableMaster,storageKey:"console.templatepaths.list"})),(!c||!d)&&y.default.createElement("div",{style:{margin:16,textAlign:"center",padding:20}},a.MessageHash["ajxp_admin.loading"]),!r&&i("Create")&&y.default.createElement("div",{style:{padding:"0 24px",opacity:".5"}},t("legend.2"))))}}]),c);function c(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,e),this.state={nodesLoaded:!1,nodes:[],dataSourcesLoaded:!1,dataSources:[]},u.default.loadNodes(function(e){t.setState({nodes:e,nodesLoaded:!0})}),s.default.loadDatasources().then(function(e){t.setState({dataSources:e.DataSources,dataSourcesLoaded:!0})})}n.default=r=(0,e.muiThemeable)()(r),n.default=r,t.exports=n.default},{"../model/DataSource":18,"../model/VirtualNode":20,"../virtual/NodeCard":22,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e("react")),a=r(e("create-react-class")),o=r(e("pydio/model/data-model")),i=r(e("pydio/model/node")),s=r(e("pydio/util/lang")),l=r(e("../model/Ws")),u=r(e("prop-types")),f=r(e("pydio")).default.requireLib("components").MaterialTable;n.default=(0,a.default)({displayName:"WorkspaceList",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:u.default.instanceOf(o.default).isRequired,rootNode:u.default.instanceOf(i.default).isRequired,currentNode:u.default.instanceOf(i.default).isRequired,openSelection:u.default.func,advanced:u.default.boolean},getInitialState:function(){return{workspaces:[],loading:!1}},startLoad:function(){this.props.onLoadState&&this.props.onLoadState(!0),this.setState({loading:!0})},endLoad:function(){this.props.onLoadState&&this.props.onLoadState(!1),this.setState({loading:!1})},reload:function(){var t=this;this.startLoad(),l.default.listWorkspaces().then(function(e){t.endLoad(),t.setState({workspaces:e.Workspaces||[]})}).catch(function(e){t.endLoad()})},componentDidMount:function(){this.reload()},openTableRows:function(e){e.length&&this.props.openSelection(e[0].workspace)},deleteAction:function(e){var t=this,n=this.props.pydio;n.UI.openConfirmDialog({message:n.MessageHash["settings.35"],destructive:[e.Label],validCallback:function(){new l.default(e).remove().then(function(){t.reload()})}})},computeTableData:function(){var l=[],u=this.props.filterString;return this.state.workspaces.map(function(t){var e="";t.RootNodes&&(e=Object.keys(t.RootNodes).map(function(e){return s.default.trimRight(t.RootNodes[e].Path,"/")}).join(", "));var n=!1;if(t.Attributes)try{var r=JSON.parse(t.Attributes);!0!==r.ALLOW_SYNC&&"true"!==r.ALLOW_SYNC||(n=!0)}catch(e){}if(u){var a=u.toLowerCase(),o=t.Label&&0<=t.Label.toLowerCase().indexOf(a),i=t.Description&&0<=t.Description.toLowerCase().indexOf(a),a=e&&0<=e.toLowerCase().indexOf(a);if(!(o||i||a))return}l.push({workspace:t,label:t.Label,description:t.Description,slug:t.Slug,summary:e,syncable:n})}),l.sort(s.default.arraySorter("label",!1,!0)),l},render:function(){function e(e){return r.MessageHash["ajxp_admin."+e]}var t=this,n=this.props,r=n.pydio,a=n.advanced,o=n.editable,i=n.tableStyles,l=n.openSelection,u=function(e){return r.MessageHash["settings."+e]},s=[{name:"label",label:u("8"),style:{width:"20%",fontSize:15},headerStyle:{width:"20%"},sorter:{type:"string",default:"true"}},{name:"description",label:u("103"),hideSmall:!0,style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}},{name:"summary",label:e("ws.board.summary"),hideSmall:!0,style:{width:"25%"},headerStyle:{width:"25%"},sorter:{type:"string"}}];a&&s.push({name:"syncable",label:e("ws.board.syncable"),style:{width:"10%",textAlign:"center"},headerStyle:{width:"10%",textAlign:"center"},sorter:{type:"number",sortValue:function(e){return e.syncable?1:0}},renderCell:function(e){return d.default.createElement("span",{className:"mdi mdi-check",style:{fontSize:18,opacity:e.syncable?1:0}})}}),s.push({name:"slug",label:e("ws.5"),style:{width:"20%"},headerStyle:{width:"20%"},sorter:{type:"string"}});n=this.state.loading,u=this.computeTableData(),a=[];o&&a.push({iconClassName:"mdi mdi-pencil",tooltip:"Edit Workspace",onClick:function(e){l(e.workspace)},disable:function(e){return!e.workspace.PoliciesContextEditable}});var c=r.user.getRepositoriesList();return a.push({iconClassName:"mdi mdi-open-in-new",tooltip:"Open this workspace...",onClick:function(e){r.triggerRepositoryChange(e.workspace.UUID)},disable:function(e){return!c.has(e.workspace.UUID)}}),o&&a.push({iconClassName:"mdi mdi-delete",onClick:function(e){t.deleteAction(e.workspace)},disable:function(e){return!e.workspace.PoliciesContextEditable}}),d.default.createElement(f,{data:u,columns:s,actions:a,onSelectRows:o?this.openTableRows.bind(this):null,deselectOnClickAway:!0,showCheckboxes:!1,emptyStateString:e(n?"loading":"ws.board.empty"),masterStyles:i,paginate:[10,25,50,100],defaultPageSize:25,storageKey:"console.workspaces.list"})}}),t.exports=n.default},{"../model/Ws":21,"create-react-class":"create-react-class","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/lang":"pydio/util/lang",react:"react"}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function r(e){return e&&e.__esModule?e:{default:e}}var d=r(e("react")),a=r(e("create-react-class")),o=r(e("prop-types")),i=r(e("pydio")),f=e("material-ui"),l=r(e("pydio/util/xml")),u=r(e("../editor/WsEditor")),p=r(e("./WorkspaceList")),s=r(e("pydio/model/data-model")),h=r(e("pydio/model/node")),e=e("material-ui/styles"),y=i.default.requireLib("hoc").ModernTextField,o=(0,a.default)({displayName:"WsDashboard",mixins:[AdminComponents.MessagesConsumerMixin],propTypes:{dataModel:o.default.instanceOf(s.default).isRequired,rootNode:o.default.instanceOf(h.default).isRequired,currentNode:o.default.instanceOf(h.default).isRequired,openEditor:o.default.func.isRequired,openRightPane:o.default.func.isRequired,closeRightPane:o.default.func.isRequired,accessByName:o.default.func.isRequired,advanced:o.default.boolean},getInitialState:function(){return{selectedNode:null,searchString:""}},dirtyEditor:function(){var e=this.props.pydio;return!(!this.refs.editor||!this.refs.editor.isDirty()||confirm(e.MessageHash["role_editor.19"]))},openWorkspace:function(e){var t=this;if(!this.dirtyEditor()){var n=u.default,r=l.default.XPathSelectSingleNode(this.props.pydio.getXmlRegistry(),'//client_configs/component_config[@component="AdminWorkspaces.Dashboard"]/editor');r&&(n=r.getAttribute("namespace")+"."+r.getAttribute("component"));var a=this.props,o=a.pydio,r=a.advanced,r=(a.accessByName,{COMPONENT:n,PROPS:{ref:"editor",pydio:o,workspace:e,closeEditor:this.closeWorkspace,advanced:r,reloadList:function(){t.refs.workspacesList.reload()}}});return this.props.openRightPane(r),!0}},closeWorkspace:function(){this.dirtyEditor()||this.props.closeRightPane()},showWorkspaceCreator:function(e){var t=this,n=this.props,r=n.pydio,n=n.advanced,n={COMPONENT:u.default,PROPS:{ref:"editor",type:e,pydio:r,advanced:n,closeEditor:this.closeWorkspace,reloadList:function(){t.refs.workspacesList.reload()}}};this.props.openRightPane(n)},reloadWorkspaceList:function(){this.refs.workspacesList.reload()},render:function(){var n=this,e=this.props,t=e.pydio,r=e.advanced,a=e.currentNode,o=e.accessByName,i=e.muiTheme,l=this.state,u=l.searchString,s=l.loading,e=AdminComponents.AdminStyles(i.palette),l=[];o("Create")&&l.push(d.default.createElement(f.FlatButton,c({primary:!0,label:this.context.getMessage("ws.3"),onClick:this.showWorkspaceCreator},e.props.header.flatButton)));i=d.default.createElement("div",{style:{display:"flex"}},d.default.createElement("div",{style:{flex:1}}),d.default.createElement("div",{style:{width:190}},d.default.createElement(y,{fullWidth:!0,hintText:this.context.getMessage("ws.filter.workspaces"),value:u,onChange:function(e,t){return n.setState({searchString:t})}})));return d.default.createElement("div",{className:"main-layout-nav-to-stack vertical-layout workspaces-board"},d.default.createElement(AdminComponents.Header,{title:a.getLabel(),icon:"mdi mdi-folder-open",actions:l,centerContent:i,reloadAction:this.reloadWorkspaceList,loading:s}),d.default.createElement("div",{className:"layout-fill"},d.default.createElement(AdminComponents.SubHeader,{legend:this.context.getMessage("ws.dashboard","ajxp_admin")}),d.default.createElement(f.Paper,c({},e.body.block.props,{style:e.body.block.container}),d.default.createElement(p.default,{ref:"workspacesList",pydio:t,openSelection:this.openWorkspace,advanced:r,editable:o("Create"),onLoadState:function(e){n.setState({loading:e})},tableStyles:e.body.tableMaster,filterString:u}))))}});n.default=(0,e.muiThemeable)()(o),t.exports=n.default},{"../editor/WsEditor":16,"./WorkspaceList":5,"create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/model/node":"pydio/model/node","pydio/util/xml":"pydio/util/xml",react:"react"}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("react")),u=(i(e("pydio")),e("material-ui")),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,l["default"].Component),r(s,[{key:"componentWillReceiveProps",value:function(e,t){e.open&&!this.props.open&&this.setState({value:"flat"})}},{key:"submit",value:function(){var e=this.props,t=e.onSubmit,e=e.onRequestClose;t(this.state.value),e()}},{key:"render",value:function(){function e(e,t,n){return n=l.default.createElement("div",null,l.default.createElement("div",null,t),l.default.createElement("div",{style:{opacity:.67,margin:"5px 0 10px"}},n)),l.default.createElement(u.RadioButton,{value:e,label:n})}var n=this,t=this.props,r=t.open,a=t.onRequestClose,o=this.state.value,t=[l.default.createElement(u.FlatButton,{label:"Cancel",onClick:function(){a()},primary:!0}),l.default.createElement(u.FlatButton,{label:"Setup DataSource",primary:!0,onClick:function(){return n.submit()}})];return l.default.createElement(u.Dialog,{open:r,title:"Create Data Source",onRequestClose:a,actions:t},l.default.createElement("div",{style:{marginBottom:20}},"DataSources are mount points allowing you to attach actual storage to the application. First select the way data is organized inside storage."),l.default.createElement(u.RadioButtonGroup,{valueSelected:o,onChange:function(e,t){return n.setState({value:t})}},e("flat","Flat Storage","Best for performances, files are stored as blob binaries inside the storage. Files and folders structure is kept in Cells internal DB only."),e("structured","Import existing data","Files and folders are stored as-is : a real-time synchronisation maintains storage structure and Cells indexes."),e("internal","Cells internals","Used to store Cells internal binaries (e.g. files versions). Limited features, data is not indexed in search engines.")))}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e),this.state={value:"flat"}}n.default=r,t.exports=n.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var c=i(e("pydio")),d=i(e("react")),l=i(e("pydio/util/lang")),u=i(e("../model/DataSource")),f=e("material-ui"),p=e("lodash"),h=c.default.requireLib("hoc").ModernTextField,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,d["default"].Component),r(y,[{key:"componentWillReceiveProps",value:function(e){e=e.dataSource.ApiKey+"-"+e.dataSource.ApiSecret;e!==this.state.monitorApi&&(this.loadDebounced(),this.setState({monitorApi:e}))}},{key:"load",value:function(){var t=this,e=this.props.dataSource;e.ApiKey&&e.ApiSecret?(this.setState({loading:!0}),u.default.loadBuckets(e).then(function(e){e=e.Children||[];t.setState({buckets:e.map(function(e){return e.Path}),loading:!1})}).catch(function(e){t.setState({buckets:[],loading:!1})})):this.setState({buckets:[]})}},{key:"loadSelection",value:function(){var t=this,e=this.props.dataSource;e.ApiKey&&e.ApiSecret?e.ObjectsBucket?this.setState({selection:[e.ObjectsBucket]}):(this.setState({selection:[]}),e.StorageConfiguration.bucketsRegexp&&u.default.loadBuckets(e,e.StorageConfiguration.bucketsRegexp).then(function(e){e=e.Children||[];t.setState({selection:e.map(function(e){return e.Path})})})):this.setState({selection:[]})}},{key:"modeFromValue",value:function(){var e="picker";return e=this.props.dataSource.StorageConfiguration.bucketsRegexp?"regexp":e}},{key:"toggleMode",value:function(){var e=this.state.mode,t=this.props.dataSource;"picker"===e?(t.ObjectsBucket&&(t.StorageConfiguration.bucketsRegexp=t.ObjectsBucket,t.ObjectsBucket="",this.reloadSelection()),this.setState({mode:"regexp"})):(t.StorageConfiguration.bucketsRegexp="",this.reloadSelection(),this.setState({mode:"picker"}))}},{key:"togglePicker",value:function(e){var t=this.props.dataSource,n=this.state.selection,r=[],a=n.indexOf(e);1===(r=-1===a?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[e]):l.default.arrayWithout(n,a)).length?(t.ObjectsBucket=r[0],t.StorageConfiguration.bucketsRegexp=""):(t.ObjectsBucket="",t.StorageConfiguration.bucketsRegexp=r.map(function(e){return"^"+e+"$"}).join("|")),this.setState({selection:r})}},{key:"updateRegexp",value:function(e){this.props.dataSource.StorageConfiguration.bucketsRegexp=e,this.reloadSelection()}},{key:"render",value:function(){function e(e){return c.default.getInstance().MessageHash["ajxp_admin.ds.editor.storage."+e]||e}var r=this,a=this.props.dataSource,t=this.state,n=t.buckets,o=t.selection,i=t.mode,l=t.loading,u={style:{width:30,height:30,padding:5},iconStyle:{width:20,height:20,color:"rgba(0,0,0,.5)",fontSize:18}},t=!a.ApiKey||!a.ApiSecret;return d.default.createElement("div",null,d.default.createElement("div",{style:{display:"flex",alignItems:"flex-end",marginTop:20}},d.default.createElement("div",{style:{flex:1}},e("buckets.legend")),d.default.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},"regexp"===i&&d.default.createElement("div",{style:{width:200,height:36}},d.default.createElement(h,{hintText:e("buckets.regexp.hint"),fullWidth:!0,value:a.StorageConfiguration.bucketsRegexp||"",onChange:function(e,t){r.updateRegexp(t)}})),d.default.createElement(f.IconButton,s({iconClassName:"mdi mdi-filter",tooltip:"picker"===i?e("buckets.regexp"):"",tooltipPosition:"top-left",onClick:function(){r.toggleMode()},disabled:t},u))),d.default.createElement(f.IconButton,s({iconClassName:"mdi mdi-reload",tooltip:e("buckets.reload"),tooltipPosition:"top-left",onClick:function(){r.load()},disabled:t},u))),d.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginTop:8,backgroundColor:"#f5f5f5",borderRadius:5,padding:2,maxHeight:275,overflowY:"auto"}},n.map(function(e){var t=-1!==o.indexOf(e),n={};return"picker"===i?n.onClick=function(){r.togglePicker(e)}:a.StorageConfiguration.bucketsRegexp||(n.onClick=function(){r.toggleMode(),r.togglePicker(e)}),d.default.createElement("div",{style:{margin:5}},d.default.createElement(f.Chip,s({},n,{backgroundColor:t?"#03a9f4":null}),e))}),0===n.length&&d.default.createElement("div",{style:{padding:5,textAlign:"center",fontSize:16,color:"rgba(0,0,0,.37)"}},e(t?"buckets.cont.nokeys":l?"buckets.cont.loading":"buckets.cont.empty"))))}}]),y);function y(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),o(Object.getPrototypeOf(y.prototype),"constructor",this).call(this,e),this.state={buckets:[],selection:[],mode:this.modeFromValue(),monitorApi:e.dataSource.ApiKey+"-"+e.dataSource.ApiSecret},e.dataSource.ObjectsBucket&&(this.state.selection=[e.dataSource.ObjectsBucket]),this.load(),this.loadSelection(),this.reloadSelection=(0,p.debounce)(function(){t.loadSelection()},500),this.loadDebounced=(0,p.debounce)(function(){t.load()},500)}n.default=r,t.exports=n.default},{"../model/DataSource":18,lodash:23,"material-ui":"material-ui",pydio:"pydio","pydio/util/lang":"pydio/util/lang",react:"react"}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function o(e){return e&&e.__esModule?e:{default:e}}var l=o(e("prop-types")),u=o(e("pydio")),s=o(e("pydio/http/api")),x=e("react"),O=o(x),c=o(e("../model/DataSource")),P=e("material-ui"),d=e("material-ui/styles"),A=o(e("./DataSourceLocalSelector")),j=o(e("./DsStorageSelector")),T=o(e("./DataSourceBucketSelector")),f=e("cells-sdk"),e=AdminComponents,N=e.PaperEditorLayout,M=e.AdminStyles,u=u.default.requireLib("hoc"),R=u.ModernTextField,D=u.ModernSelectField,L=u.ModernStyles,I=["main","storage","data","advanced"],r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,O["default"].Component),r(p,[{key:"componentWillReceiveProps",value:function(e){var t;e.dataSource&&this.state.model.Name!==e.dataSource.Name&&(this.state.dirty?alert(this.props.pydio.MessageHash["role_editor.19"]):(t=new c.default(e.dataSource),this.setState({observable:t,model:t.getModel()}))),e.create&&this.state.create!==e.create&&this.setState({create:e.create})}},{key:"componentDidMount",value:function(){var e=this;this.state.observable.observe("update",function(){e.setState({dirty:!0}),e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.state.observable.stopObserving("update")}},{key:"resetForm",value:function(){var e=this,t=this.state.observable.revert();this.setState({valid:!0,dirty:!1,model:t},function(){e.forceUpdate()})}},{key:"deleteSource",value:function(){var e=this,t=this.state,n=t.m,r=t.observable;this.props.pydio.UI.openConfirmDialog({message:n("delete.warning"),validCallback:function(){r.deleteSource().then(function(){e.props.closeEditor(),e.props.reloadList()})},destructive:[r.getModel().Name]})}},{key:"saveSource",value:function(){var t=this,e=this.state,n=e.observable,r=e.create;this.state.observable.saveSource().then(function(){var e=null;r&&(e=n.getModel().Name),t.setState({valid:!0,dirty:!1,create:!1}),r&&t.props.closeEditor(),t.props.reloadList(e)})}},{key:"launchResync",value:function(){this.state.observable.resyncSource()}},{key:"toggleEncryption",value:function(e){var t=this.state.model;"VALUE_CREATE"===e?this.setState({showDialog:"enableEncryptionWithCreate",dialogTargetValue:e,newKeyName:t.Name||""}):"VALUE_CLEAR"===e?this.setState({showDialog:"disableEncryption",dialogTargetValue:e}):"MASTER"!==t.EncryptionMode?this.setState({showDialog:"enableEncryption",dialogTargetValue:e}):t.EncryptionKey=e}},{key:"confirmEncryption",value:function(e){var t=this,n=this.state,r=n.model,a=n.newKeyName;if("VALUE_CREATE"===e){var o=new f.ConfigServiceApi(s.default.getRestClient()),n=new f.EncryptionAdminCreateKeyRequest;return n.KeyID=a,n.Label=a,void o.createEncryptionKey(n).then(function(e){r.EncryptionMode="MASTER",r.EncryptionKey=a,t.setState({showDialog:!1,dialogTargetValue:null,encryptionKeys:[{ID:a,Label:a}]})}).catch(function(){})}"VALUE_CLEAR"===e?(r.EncryptionMode="CLEAR",r.EncryptionKey=""):(r.EncryptionMode="MASTER",r.EncryptionKey=e),this.setState({showDialog:!1,dialogTargetValue:null})}},{key:"toggleS3Custom",value:function(e){var t=this.state.model;"aws"===e&&(t.StorageConfiguration.customEndpoint="",t.StorageConfiguration.customRegion=""),this.setState({s3Custom:e})}},{key:"stepperBack",value:function(){var e=this.state.currentPane,e=void 0===e?"main":e,e=I.indexOf(e);0<e&&this.setState({currentPane:I[e-1]})}},{key:"stepperNext",value:function(){var e=this.state.currentPane,e=void 0===e?"main":e,e=I.indexOf(e);e<I.length-1&&this.setState({currentPane:I[e+1]})}},{key:"render",value:function(){var r=this,e=this.props,t=e.storageTypes,n=e.pydio,a=e.readonly,o=this.state,i=o.currentPane,l=void 0===i?"main":i,u=o.model,s=o.create,c=o.observable,d=o.encryptionKeys,f=o.versioningPolicies,p=o.showDialog,h=o.dialogTargetValue,y=o.newKeyName,m=o.s3Custom,g=o.m,v=[];a||s||(v.push(O.default.createElement(P.Toggle,{style:{borderRight:"1px solid #e0e0e0",paddingRight:14,zoom:.8},labelStyle:{fontSize:17},toggled:!u.Disabled,onToggle:function(e,t){u.Disabled=!t},labelPosition:"right",label:g("options.enabled")})),v.push(N.actionButton(this.context.getMessage("plugins.6"),"mdi mdi-undo",function(){r.resetForm()},!this.state.dirty)),v.push(N.actionButton(this.context.getMessage("plugins.6"),"mdi mdi-content-save",function(){r.saveSource()},!this.state.dirty)));O.default.createElement("div",{style:{padding:"6px 0",color:"#9E9E9E",fontSize:13}},O.default.createElement("div",{style:{fontSize:120,textAlign:"center"}},O.default.createElement("i",{className:"mdi mdi-database"})),O.default.createElement("div",{style:{padding:16}},this.context.getMessage("ws.75"),"",this.context.getMessage("ws.76")),s&&"LOCAL"===u.StorageType&&O.default.createElement("div",null,O.default.createElement(P.Divider,null),O.default.createElement("div",{style:{padding:16}},g("legend.local"),O.default.createElement("ul",null,O.default.createElement("li",{style:{listStyle:"disc",marginLeft:20}},g("legend.local.li.1")),O.default.createElement("li",{style:{listStyle:"disc",marginLeft:20}},g("legend.local.li.2")),O.default.createElement("li",{style:{listStyle:"disc",marginLeft:20}},g("legend.local.li.3"))))),s&&"S3"===u.StorageType&&O.default.createElement("div",null,O.default.createElement(P.Divider,null),O.default.createElement("div",{style:{padding:16}},g("legend.s3.1"),O.default.createElement("br",null),g("legend.s3.2"))),!s&&O.default.createElement("div",null,O.default.createElement(P.Divider,null),O.default.createElement("div",{style:{padding:16}},g("legend.resync"),O.default.createElement("div",{style:{textAlign:"center",marginTop:10}},O.default.createElement(P.RaisedButton,{label:g("legend.resync.button"),onClick:this.launchResync.bind(this)})))),!s&&!a&&O.default.createElement("div",null,O.default.createElement(P.Divider,null),O.default.createElement("div",{style:{padding:16}},g("legend.delete.1"),O.default.createElement("br",null),g("legend.delete.2"),O.default.createElement("div",{style:{textAlign:"center",marginTop:10}},O.default.createElement(P.RaisedButton,{secondary:!0,label:g("legend.delete.button"),onClick:this.deleteSource.bind(this),style:{marginTop:16}})))));var b=u.Name?g("title").replace("%s",u.Name):g("new"),S=u.StorageConfiguration,_=M(this.props.muiTheme.palette),E={title:C({},_.body.block.headerFull,{margin:"0 -20px"}),legend:{},subLegend:{padding:"10px 6px 0 4px",fontSize:12,lineHeight:"16px",color:"rgba(0,0,0,0.6)",textAlign:"justify"},section:C({padding:"0 20px 20px",margin:10,backgroundColor:"white"},_.body.block.container),storageSection:{padding:20,marginTop:-1}},w={LOCAL:{primaryText:this.context.getMessage("ds.storage.fs","ajxp_admin"),image:"fs.png"},S3:{primaryText:this.context.getMessage("ds.storage.s3","ajxp_admin"),image:"s3-compat.png"},AZURE:{primaryText:this.context.getMessage("ds.storage.azure","ajxp_admin"),image:"azure.png"},GCS:{primaryText:this.context.getMessage("ds.storage.gcs","ajxp_admin"),image:"gcs.png"}},k={};t.forEach(function(e){k[e]=w[e]}),u.StorageType&&!k[u.StorageType]&&(k[u.StorageType]=w[u.StorageType]);e=function(e,t){return t===l?e:C({},e,{display:"none"})},i=void 0,o=void 0;s&&(a={display:"flex",alignItems:"center",padding:"0 20px 0 8px",position:"absolute",height:64,zIndex:10,top:64,left:0,right:0,backgroundColor:"rgb(246 246 248)",boxShadow:"rgba(0, 0, 0, .1) 0px 1px 2px"},_=0===I.indexOf(l),t=I.indexOf(l)===I.length-1,("main"!==l||u.Name&&!c.getNameError(g))&&("storage"!==l||c.isValid())||(t=!0),i=O.default.createElement("div",{style:a},O.default.createElement("div",{style:{flex:1}},O.default.createElement(P.Stepper,{activeStep:I.indexOf(l)},O.default.createElement(P.Step,null,O.default.createElement(P.StepLabel,null,"Identifier")),O.default.createElement(P.Step,null,O.default.createElement(P.StepLabel,null,"Storage Type")),O.default.createElement(P.Step,null,O.default.createElement(P.StepLabel,null,"Data Lifecycle")),O.default.createElement(P.Step,null,O.default.createElement(P.StepLabel,null,"Advanced"))))),o=O.default.createElement("div",{style:C({},a,{top:null,bottom:0,backgroundColor:"white",boxShadow:"rgba(0, 0, 0, .1) 0px -1px 2px"})},O.default.createElement("span",{style:{flex:1}}),O.default.createElement(P.FlatButton,{primary:!0,label:"Back",onClick:function(){return r.stepperBack()},disabled:_}),O.default.createElement(P.FlatButton,{primary:!0,label:"Next",onClick:function(){return r.stepperNext()},disabled:t}),O.default.createElement("div",{style:{width:1,height:40,backgroundColor:"#efefef",margin:"0 5px"}}),O.default.createElement(P.FlatButton,{primary:!0,label:"Create",onClick:function(){return r.saveSource()},disabled:!c.isValid()})));p=O.default.createElement(P.Dialog,{open:p,title:g("enc.warning"),onRequestClose:function(){r.setState({showDialog:!1,dialogTargetValue:null})},actions:[O.default.createElement(P.FlatButton,{label:n.MessageHash[54],onClick:function(){r.setState({showDialog:!1,dialogTargetValue:null})}}),O.default.createElement(P.FlatButton,{label:g("enc.validate"),disabled:"enableEncryptionWithCreate"===p&&!y,onClick:function(){r.confirmEncryption(h)}})]},("enableEncryption"===p||"enableEncryptionWithCreate"===p)&&O.default.createElement("div",{style:{lineHeight:"1.6em"}},g("enc.dialog.enable.1"),"",g("enc.dialog.enable.2")," ",O.default.createElement("b",{style:{fontWeight:500}},g("enc.dialog.enable.2bold")),O.default.createElement("br",null),g("enc.dialog.enable.3"),"enableEncryptionWithCreate"===p&&O.default.createElement("div",null,O.default.createElement(R,{hintText:g("enc.dialog.enable.create"),fullWidth:!0,variant:"v2",value:y,onChange:function(e,t){r.setState({newKeyName:t})}}))),"disableEncryption"===p&&O.default.createElement("div",{style:{lineHeight:"1.6em"}},g("enc.dialog.disable"))),c=O.default.createElement(P.Paper,{zDepth:0,style:e(E.section,"main")},O.default.createElement("div",{style:C({},E.title,{marginBottom:16})},g("options")),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("options.id")+" *",disabled:!s,value:u.Name,onChange:function(e,t){u.Name=t},errorText:c.getNameError(g)})),m=O.default.createElement(P.Paper,{zDepth:0,style:e(C({},E.section,{padding:0,marginBottom:s?200:null}),s?"storage":"main")},O.default.createElement(j.default,{disabled:!s,value:u.StorageType,onChange:function(e,t,n){u.StorageType=n},values:k}),"LOCAL"===u.StorageType&&O.default.createElement("div",{style:E.storageSection},O.default.createElement("div",{style:E.legend},g("storage.legend.fs")),O.default.createElement(A.default,{model:u,pydio:this.props.pydio,styles:E}),!u.FlatStorage&&O.default.createElement("div",null,O.default.createElement(P.Checkbox,C({labelPosition:"right",label:g("storage.fs.macos"),checked:"true"===S.normalize,onCheck:function(e,t){S.normalize=t?"true":"false"}},L.toggleFieldV2)))),"S3"===u.StorageType&&O.default.createElement("div",{style:E.storageSection},O.default.createElement("div",{style:E.legend},g("storage.legend.s3")),O.default.createElement(D,{fullWidth:!0,variant:"v2",hintText:"Endpoint type",value:m,onChange:function(e,t,n){r.toggleS3Custom(n)}},O.default.createElement(P.MenuItem,{value:"aws",primaryText:g("storage.s3.endpoint.amazon")}),O.default.createElement(P.MenuItem,{value:"custom",primaryText:g("storage.s3.endpoint.custom")})),"custom"===m&&O.default.createElement("div",null,O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.endpoint")+" - "+g("storage.s3.endpoint.hint"),value:u.StorageConfiguration.customEndpoint,onChange:function(e,t){u.StorageConfiguration.customEndpoint=t}}),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.region"),value:u.StorageConfiguration.customRegion,onChange:function(e,t){u.StorageConfiguration.customRegion=t}})),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.api")+" *",value:u.ApiKey,onChange:function(e,t){u.ApiKey=t}}),O.default.createElement("form",{autoComplete:"off"},O.default.createElement("input",{type:"hidden",value:"something"}),O.default.createElement(R,{autoComplete:"off",fullWidth:!0,variant:"v2",type:"password",hintText:g("storage.s3.secret")+" *",value:u.ApiSecret,onChange:function(e,t){u.ApiSecret=t}})),O.default.createElement(T.default,{dataSource:u,hintText:g("storage.s3.bucket")}),O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:40})},g("storage.s3.legend.tags")),O.default.createElement("div",{style:{display:"flex"}},O.default.createElement("div",{style:{flex:1,marginRight:5}},O.default.createElement(R,{fullWidth:!0,variant:"v2",disabled:!!u.ObjectsBucket,hintText:g("storage.s3.bucketsTags"),value:u.StorageConfiguration.bucketsTags||"",onChange:function(e,t){u.StorageConfiguration.bucketsTags=t}})),O.default.createElement("div",{style:{flex:1,marginLeft:5}},O.default.createElement(R,{disabled:!0,fullWidth:!0,variant:"v2",hintText:g("storage.s3.objectsTags")+" (not implemented yet)",value:u.StorageConfiguration.objectsTags||"",onChange:function(e,t){u.StorageConfiguration.objectsTags=t}})))),"AZURE"===u.StorageType&&O.default.createElement("div",{style:E.storageSection},O.default.createElement("div",{style:E.legend},g("storage.legend.azure")),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.azure.bucket")+" *",value:u.ObjectsBucket,onChange:function(e,t){u.ObjectsBucket=t}}),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.azure.api")+" *",value:u.ApiKey,onChange:function(e,t){u.ApiKey=t}}),O.default.createElement(R,{fullWidth:!0,variant:"v2",type:"password",hintText:g("storage.azure.secret")+" *",value:u.ApiSecret,onChange:function(e,t){u.ApiSecret=t}})),"GCS"===u.StorageType&&O.default.createElement("div",{style:E.storageSection},O.default.createElement("div",{style:E.legend},g("storage.legend.gcs")),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.gcs.bucket")+" *",value:u.ObjectsBucket,onChange:function(e,t){u.ObjectsBucket=t}}),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.gcs.credentials")+" *",value:u.StorageConfiguration.jsonCredentials,onChange:function(e,t){u.StorageConfiguration.jsonCredentials=t},multiLine:!0}),O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:g("storage.s3.path"),value:u.ObjectsBaseFolder,onChange:function(e,t){u.ObjectsBaseFolder=t}}))),d=O.default.createElement(P.Paper,{zDepth:0,style:e(E.section,"data")},O.default.createElement("div",{style:E.title},g("datamanagement")),!u.StorageConfiguration.cellsInternal&&O.default.createElement(x.Fragment,null,O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.versioning")),O.default.createElement(D,{fullWidth:!0,variant:"v2",hintText:g("versioning"),value:u.VersioningPolicyName,onChange:function(e,t,n){u.VersioningPolicyName=n}},O.default.createElement(P.MenuItem,{value:void 0,primaryText:g("versioning.disabled")}),f.map(function(e){return O.default.createElement(P.MenuItem,{value:e.Uuid,primaryText:e.Name+" (stored in "+e.VersionsDataSourceName+")"})}))),O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.encryption")),O.default.createElement(D,{fullWidth:!0,variant:"v2",hintText:g("enc.key"),value:"MASTER"===u.EncryptionMode?u.EncryptionKey:"VALUE_CLEAR",onChange:function(e,t,n){r.toggleEncryption(n)}},O.default.createElement(P.MenuItem,{value:"VALUE_CLEAR",primaryText:g("enc.key.clear")}),d.map(function(e){return O.default.createElement(P.MenuItem,{value:e.ID,primaryText:e.Label})}),"MASTER"!==u.EncryptionMode&&0===d.length&&O.default.createElement(P.MenuItem,{value:"VALUE_CREATE",primaryText:g("enc.key.create")}))),g=O.default.createElement(P.Paper,{zDepth:0,style:e(E.section,"advanced")},O.default.createElement("div",{style:E.title},"Advanced storage options"),!u.StorageConfiguration.cellsInternal&&O.default.createElement("div",null,O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.flatStorage")),O.default.createElement(P.Checkbox,C({label:g("storage.flatStorage"),labelPosition:"right",disabled:!s,checked:!u.FlatStorage,onCheck:function(e,t){u.FlatStorage=!t}},L.toggleFieldV2)),s&&u.FlatStorage&&O.default.createElement(R,{fullWidth:!0,variant:"v2",hintText:"If this storage was previously used as a Cells datasource, initialize from existing snapshot file...",value:u.StorageConfiguration.initFromSnapshot||"",onChange:function(e,t){t?u.StorageConfiguration.initFromSnapshot=t:delete u.StorageConfiguration.initFromSnapshot}})),!u.FlatStorage&&O.default.createElement("div",null,O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.skipResync")),O.default.createElement(P.Checkbox,C({label:g("storage.skipResync"),labelPosition:"right",checked:u.SkipSyncOnRestart,onCheck:function(e,t){u.SkipSyncOnRestart=t}},L.toggleFieldV2))),"LOCAL"!==u.StorageType&&O.default.createElement("div",null,O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.readOnly")),O.default.createElement(P.Checkbox,C({label:g("storage.readOnly"),labelPosition:"right",checked:"true"===u.StorageConfiguration.readOnly,onCheck:function(e,t){u.StorageConfiguration.readOnly=t?"true":""}},L.toggleFieldV2))),(!u.StorageConfiguration.readOnly||"true"!==u.StorageConfiguration.readOnly)&&O.default.createElement("div",null,O.default.createElement("div",{style:C({},E.subLegend,{paddingTop:20})},g("storage.legend.checksumMapper")),O.default.createElement(P.Checkbox,C({label:g("storage.nativeEtags"),labelPosition:"right",checked:u.StorageConfiguration.nativeEtags,onCheck:function(e,t){u.StorageConfiguration.nativeEtags=t?"true":""}},L.toggleFieldV2)),!u.StorageConfiguration.nativeEtags&&O.default.createElement("div",null,O.default.createElement(P.Checkbox,C({label:g("storage.checksumMapper"),labelPosition:"right",checked:"dao"===u.StorageConfiguration.checksumMapper,onCheck:function(e,t){u.StorageConfiguration.checksumMapper=t?"dao":""}},L.toggleFieldV2)))));return O.default.createElement(N,{title:b,titleLeftIcon:"mdi mdi-database",titleActionBar:v,closeAction:this.props.closeEditor,leftNavItems:s?null:[{label:"Main Options",value:"main",icon:"mdi mdi-database-plus"},{label:"Data Lifecycle",value:"data",icon:"mdi mdi-recycle"},{label:"Advanced",value:"advanced",icon:"mdi mdi-settings"}],leftNavSelected:l,leftNavChange:function(e){r.setState({currentPane:e})},className:"workspace-editor",contentFill:!1,rightPanelStyle:s?{paddingTop:64}:null},i,p,m,c,d,g,o)}}]),p);function p(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),i(Object.getPrototypeOf(p.prototype),"constructor",this).call(this,e);var n=e.pydio,r=e.create,a=e.dataSource,o=e.existingNames,e=e.createStructure,e=new c.default(a,o,e);this.state={dirty:!1,create:r,observable:e,model:e.getModel(),loaded:!1,valid:e.isValid(),encryptionKeys:[],versioningPolicies:[],s3Custom:e.getModel().StorageConfiguration.customEndpoint?"custom":"aws",m:function(e){return n.MessageHash["ajxp_admin.ds.editor."+e]||e}},c.default.loadEncryptionKeys().then(function(e){t.setState({encryptionKeys:e.Keys||[]})}),c.default.loadVersioningPolicies().then(function(e){t.setState({versioningPolicies:e.Policies||[]})})}r.contextTypes={messages:l.default.object,getMessage:l.default.func},n.default=r=(0,d.muiThemeable)()(r),n.default=r,t.exports=n.default},{"../model/DataSource":18,"./DataSourceBucketSelector":8,"./DataSourceLocalSelector":10,"./DsStorageSelector":11,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api",react:"react"}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=i(e("react")),f=i(e("pydio")),p=i(e("pydio/http/api")),h=e("cells-sdk"),y=e("material-ui"),m=i(e("lodash.debounce")),g=i(e("pydio/util/lang")),v=i(e("pydio/util/path")),f=f.default.requireLib("hoc"),b=f.ModernTextField,S=f.ModernSelectField,_=(f.ModernStyles,f.ModernAutoComplete),E=(u(w,d["default"].Component),r(w,[{key:"handleUpdateInput",value:function(e){this.debounced(),this.setState({searchText:e})}},{key:"handleNewRequest",value:function(e){var t,n=void 0,r=this.state.nodes,a=!1;void 0===e.key?(n="/"+g.default.trim(e,"/"),t=!1,r.map(function(e){e.Path!==n&&0!==e.Path.indexOf(n+"/")||(t=!0)}),t&&(a=!0)):(n=e.key,a=!0),this.setState({value:n,exist:a}),this.props.onChange(n,a),this.loadValues(n)}},{key:"componentWillMount",value:function(){this.lastSearch=null;var e="";this.props.value&&(e=this.props.value),this.loadValues(e)}},{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value,exist:!0})}},{key:"loadValues",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=this.props.peerAddress,r=this.state.searchText,a=e;if(!e&&r&&(o=r.lastIndexOf("/"),a=r.substr(0,o)),null!==this.lastSearch&&this.lastSearch===a)return Promise.resolve();this.lastSearch=a;var r=new h.ConfigServiceApi(p.default.getRestClient()),o=new h.RestListPeerFoldersRequest;return o.PeerAddress="ANY"===n?"":n,o.Path=a,this.setState({loading:!0}),r.listPeerFolders(n,o).then(function(e){e=(e=e.Children||[]).map(function(e){return"/"!==e.Path[0]&&(e.Path="/"+e.Path),e});t.setState({nodes:e,loading:!1})}).catch(function(){t.setState({loading:!1})})}},{key:"createFolder",value:function(e){var t=this,n=this.props,r=n.peerAddress,a=n.pydio,o=this.state.value,n=new h.ConfigServiceApi(p.default.getRestClient()),i=new h.RestCreatePeerFolderRequest;i.PeerAddress="ANY"===r?"":r,i.Path=o+"/"+e,n.createPeerFolder(r,i).then(function(e){t.lastSearch=null,t.loadValues(o).then(function(){t.handleNewRequest({key:i.Path}),t.setState({searchText:i.Path})})}).catch(function(e){a.UI.displayMessage("ERROR",e.message)})}},{key:"renderNode",value:function(e){var t=v.default.getBasename(e.Path),n=v.default.getDirname(e.Path),r=d.default.createElement("span",null,e.Path);return g.default.computeStringSlug(t)!==t?r=d.default.createElement("span",null,d.default.createElement("span",null,n),"/",d.default.createElement("span",{style:{color:"#c62828"}},t)):e.MetaStore&&e.MetaStore.symlink&&(r=d.default.createElement("span",null,d.default.createElement("span",null,n),"/",d.default.createElement("span",{style:{color:"#1976d2"}},t))),{key:e.Path,text:e.Path,invalid:!1,value:d.default.createElement(y.MenuItem,null,d.default.createElement(y.FontIcon,{className:"mdi mdi-folder",color:"#616161",style:{float:"left",marginRight:8}})," ",r)}}},{key:"showCreateDialog",value:function(){function e(e){return n.MessageHash["ajxp_admin.ds.editor.selector."+e]||e}var t=this,n=this.props.pydio,r=this.state.value;n.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitle:e("mkdir"),legendId:e("mkdir.legend").replace("%s",r),fieldLabelId:e("mkdir.field"),submitValue:function(e){e&&t.createFolder(e)}})}},{key:"render",value:function(){var t=this,e=this.state,n=e.nodes,r=e.loading,a=e.exist,o=e.value,i=e.searchText,l=this.props,e=l.fieldLabel,l=l.pydio,u=[];n&&n.forEach(function(e){u.push(t.renderNode(e))});n=i||o;return d.default.createElement("div",{style:{position:"relative",marginTop:-5}},d.default.createElement("div",{style:{position:"absolute",right:6,top:29,width:30,zIndex:1}},d.default.createElement(y.RefreshIndicator,{size:25,left:0,top:0,status:r?"loading":"hide"})),o&&a&&!r&&(!i||i===o)&&d.default.createElement("div",{style:{position:"absolute",right:0,zIndex:1,top:18}},d.default.createElement(y.IconButton,{iconClassName:"mdi mdi-folder-plus",iconStyle:{color:"#9e9e9e"},onClick:function(){return t.showCreateDialog()},tooltip:l.MessageHash["ajxp_admin.ds.editor.selector.mkdir"],tooltipPosition:"top-center"})),d.default.createElement(_,{fullWidth:!0,searchText:n,onUpdateInput:this.handleUpdateInput.bind(this),onNewRequest:this.handleNewRequest.bind(this),dataSource:u,hintText:e,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())},openOnFocus:!0,menuProps:{maxHeight:200}}))}}]),w);function w(e){l(this,w),o(Object.getPrototypeOf(w.prototype),"constructor",this).call(this,e),this.debounced=(0,m.default)(this.loadValues.bind(this),300),this.state={searchText:e.value,value:e.value}}u(k,d["default"].Component),r(k,[{key:"compareAddresses",value:function(e,t){var n=e.split("|"),r=t.split("|");return r.filter(function(e){return-1<n.indexOf(e)}).length||n.filter(function(e){return-1<r.indexOf(e)}).length}},{key:"componentDidMount",value:function(){var t=this,n=this.props.model;new h.ConfigServiceApi(p.default.getRestClient()).listPeersAddresses().then(function(e){e=e.PeerAddresses||[];1!==e||n.PeerAddress||(n.PeerAddress=e[0]),t.setState({peerAddresses:e}),n.PeerAddress&&-1===e.indexOf(n.PeerAddress)&&((e=e.filter(function(e){return t.compareAddresses(e,n.PeerAddress)})).length?n.PeerAddress=e[0]:t.setState({invalidAddress:n.PeerAddress}))})}},{key:"baseIsInvalid",value:function(e){var t=this.state.m,n=!1,r=v.default.getBasename(e);return g.default.trim(e,"/").split("/").length<2?n=t("selector.error.depth"):g.default.computeStringSlug(r)!==r&&(n=t("selector.error.dnsname")),n}},{key:"onPathChange",value:function(e,t){var n=this.props.model,r=this.baseIsInvalid(e);n.invalid=r,n.StorageConfiguration.folder=e,t?void 0!==n.StorageConfiguration.create&&delete n.StorageConfiguration.create:n.StorageConfiguration.create="true",this.setState({invalid:r})}},{key:"onPeerChange",value:function(e){var t=this.props.model,n=this.state.invalidAddress;e!==n&&(t.PeerAddress=e,n&&this.setState({invalidAddress:null}))}},{key:"render",value:function(){var r=this,e=this.props,t=e.model,n=e.pydio,a=e.styles,o=this.state,i=o.peerAddresses,l=o.invalidAddress,e=o.invalid,u=o.m,i=[].concat(c(i)),i=["ANY"].concat(c(i));return l&&"ANY"!==l&&(i=[l].concat(c(i))),d.default.createElement("div",null,d.default.createElement("div",{style:{paddingBottom:8}},d.default.createElement("div",{style:a.subLegend},u("storage.legend.fs.peer")),d.default.createElement(S,{value:t.PeerAddress||"",variant:"v2",hintText:u("selector.peer")+" *",onChange:function(e,t,n){return r.onPeerChange(n)},fullWidth:!0},i.map(function(e){var t=u("selector.peer.any");return"ANY"!==e&&(t=u("selector.peer.word")+" : "+e.replace("|"," | ")+(e===l?" ("+u("selector.peer.invalid")+")":"")),d.default.createElement(y.MenuItem,{value:e,primaryText:t})}))),d.default.createElement("div",null,d.default.createElement("div",{style:s({},a.subLegend,{paddingBottom:6})},u("storage.legend.fs.path")),t.PeerAddress&&d.default.createElement(E,{pydio:n,value:t.StorageConfiguration.folder,peerAddress:t.PeerAddress,onChange:this.onPathChange.bind(this),fieldLabel:u("selector.completer")+(t.StorageConfiguration.create?" ("+u("selector.completer.create")+")":"")+" *",hintText:u("selector.completer.hint")}),!t.PeerAddress&&d.default.createElement(b,{style:{marginTop:-3},fullWidth:!0,variant:"v2",disabled:!0,value:t.StorageConfiguration.folder,floatingLabelText:u("selector.folder")+" *",hintText:u("selector.folder.hint")})),e&&d.default.createElement("div",{style:{color:"#c62828"}},e))}}]),r=k;function k(t){l(this,k),o(Object.getPrototypeOf(k.prototype),"constructor",this).call(this,t),this.state={peerAddresses:[],invalid:!1,m:function(e){return t.pydio.MessageHash["ajxp_admin.ds.editor."+e]||e}}}n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","lodash.debounce":"lodash.debounce","material-ui":"material-ui",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang","pydio/util/path":"pydio/util/path",react:"react"}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=i(e("react")),c=i(e("pydio/util/dom")),d=(u(f,s["default"].Component),r(f,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.selected,r=e.value,a=e.primaryText,o=e.image,e={cont:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",padding:"10px 10px 0 10px",backgroundColor:"transparent",borderBottom:"2px solid transparent",transition:c.default.getBeziersTransition()},image:{width:30,height:30,opacity:.3,transition:c.default.getBeziersTransition()},label:{margin:5,marginTop:8,fontSize:11,fontWeight:500,color:"rgba(0,0,0,.3)",textAlign:"center",transition:c.default.getBeziersTransition()}};return n&&(e.cont.borderBottom="2px solid #0e4d6d",e.image.opacity=1,e.label.color="#0e4d6d"),s.default.createElement("div",{zDepth:0,style:e.cont,onClick:function(e){t(r)},rounded:!1},o&&s.default.createElement("img",{style:e.image,src:"/plug/access.settings/res/images/"+o}),s.default.createElement("div",{style:e.label},a))}}]),f);function f(){l(this,f),o(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}u(p,s["default"].Component),r(p,[{key:"onChange",value:function(e){var t=this.props,n=t.values;(0,t.onChange)(null,Object.keys(n).indexOf(e),e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.values,r=e.value,a=e.disabled;return s.default.createElement("div",{style:{display:"flex",padding:"0 1px",backgroundColor:"rgb(251, 251, 252)"}},Object.keys(n).map(function(e){return s.default.createElement(d,{value:e,selected:e===r,onSelect:a?function(){}:t.onChange.bind(t),primaryText:n[e].primaryText,image:n[e].image})}))}}]),r=p;function p(e){l(this,p),o(Object.getPrototypeOf(p.prototype),"constructor",this).call(this,e)}n.default=r,t.exports=n.default},{"pydio/util/dom":"pydio/util/dom",react:"react"}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=e("react"),m=l(y),c=l(e("prop-types")),g=l(e("pydio")),v=e("material-ui"),b=e("cells-sdk"),d=l(e("pydio/util/lang")),S=l(e("../model/Metadata")),_=l(e("pydio/http/api")),f=l(e("pydio/util/func")),p=l(e("pydio/http/resources-manager")),e=g.default.requireLib("hoc"),E=e.ModernSelectField,w=e.ModernTextField,k=e.ModernStyles;var C=(s(x,m["default"].Component),a(x,[{key:"addSelectionValue",value:function(){var e=this.state,t=e.selectorNewKey,n=e.selectorNewValue,r=e.selectorNewColor,a=this.props,e=a.data,a=a.setAdditionalDataKey,e=e.items,e=void 0===e?[]:e;e.push({key:t,value:n,color:r}),a("items",e),this.setState({selectorNewKey:"",selectorNewValue:"",selectorNewColor:""})}},{key:"removeSelectionValue",value:function(t){var e=this.props,n=e.data,e=e.setAdditionalDataKey,n=n.items;e("items",(void 0===n?[]:n).filter(function(e){return e.key!==t}))}},{key:"renderColor",value:function(){var r=this,e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return t?m.default.createElement("span",{className:"mdi mdi-label"+(e?"":"-outline"),style:{color:e||"#ccc",marginRight:5}}):m.default.createElement("span",{style:{width:60,marginRight:6}},m.default.createElement(E,{disabled:t,fullWidth:!0,value:e,onChange:function(e,t,n){r.setState({selectorNewColor:n})}},m.default.createElement(v.MenuItem,{value:"",primaryText:m.default.createElement("span",{className:"mdi mdi-label-outline",style:{color:"#ccc"}})}),["#9c27b0","#607d8b","#66c","#69c","#6c6","#696","#c96","#ff9800","#c66","#fff","#ccc","#999","#000"].map(function(e){return m.default.createElement(v.MenuItem,{value:e,primaryText:m.default.createElement("span",{className:"mdi mdi-label",style:{color:e}})})})))}},{key:"render",value:function(){var r=this,e=this.props,t=e.data,n=e.m,a=e.setAdditionalDataKey,o=this.state,i=o.selectorNewKey,l=o.selectorNewValue,e=o.selectorNewColor,o=t.items,o=void 0===o?[]:o;return m.default.createElement(y.Fragment,null,m.default.createElement("div",{style:{padding:10,paddingRight:0,backgroundColor:"#f5f5f5",borderRadius:3}},m.default.createElement("div",{style:{fontSize:13}},n("editor.selection")),m.default.createElement("div",null,o.map(function(e){var t=e.key,n=e.value,e=e.color;return m.default.createElement("div",{key:t,style:{display:"flex",alignItems:"center"}},r.renderColor(e,!0),m.default.createElement("span",{style:{marginRight:6,width:80}},m.default.createElement(w,{value:t,disabled:!0,fullWidth:!0})),m.default.createElement("span",{style:{flex:1}},m.default.createElement(w,{value:n,disabled:!0,fullWidth:!0})),m.default.createElement("span",null,m.default.createElement(v.IconButton,{iconClassName:"mdi mdi-delete",iconStyle:{color:"rgba(0,0,0,.3)"},onClick:function(){r.removeSelectionValue(t)}})))})),m.default.createElement("div",{style:{display:"flex"},key:"new-selection-key"},this.renderColor(e),m.default.createElement("span",{style:{width:80,marginRight:6}},m.default.createElement(w,{value:i,onChange:function(e,t){r.setState({selectorNewKey:t})},hintText:n("editor.selection.key"),fullWidth:!0})),m.default.createElement("span",{style:{flex:1}},m.default.createElement(w,{value:l,onChange:function(e,t){r.setState({selectorNewValue:t})},hintText:n("editor.selection.value"),fullWidth:!0})),m.default.createElement("span",null,m.default.createElement(v.IconButton,{iconClassName:"mdi mdi-plus",onClick:function(){r.addSelectionValue()},disabled:!i||!l})))),m.default.createElement("div",null,m.default.createElement(v.Toggle,h({label:n("editor.selection.steps"),labelPosition:"left",toggled:t.steps,onToggle:function(e,t){return a("steps",t)}},k.toggleFieldV2))))}}]),x);function x(e){u(this,x),i(Object.getPrototypeOf(x.prototype),"constructor",this).call(this,e),this.state={}}var O=(s(P,m["default"].Component),a(P,[{key:"togglePolicies",value:function(t,e){var n=this.props,r=n.policies,r=void 0===r?[]:r,n=n.onChangePolicies,r=r.filter(function(e){return e.Action!==t});r.push(b.ServiceResourcePolicy.constructFromObject({Action:t,Effect:"allow",Subject:e?"profile:admin":"*"})),"READ"===t&&e&&(r=r.filter(function(e){return"WRITE"!==e.Action})).push(b.ServiceResourcePolicy.constructFromObject({Action:"WRITE",Effect:"allow",Subject:"profile:admin"})),n(r)}},{key:"render",value:function(){var n=this,e=this.props,t=e.readonly,r=e.policies,a=e.pydio,e=function(e){return a.MessageHash["ajxp_admin.metadata."+e]||e},o=void 0,i=void 0;return r&&r.map(function(e){"profile:admin"===e.Subject&&"READ"===e.Action&&(o=!0),"profile:admin"===e.Subject&&"WRITE"===e.Action&&(i=!0)}),m.default.createElement(y.Fragment,null,m.default.createElement("div",null,m.default.createElement(v.Toggle,h({label:e("toggle.read"),disabled:t,labelPosition:"left",toggled:o,onToggle:function(e,t){n.togglePolicies("READ",t)}},k.toggleFieldV2))),m.default.createElement("div",null,m.default.createElement(v.Toggle,h({label:e("toggle.write"),labelPosition:"left",disabled:o||t,toggled:i,onToggle:function(e,t){n.togglePolicies("WRITE",t)}},k.toggleFieldV2))))}}]),P);function P(e){u(this,P),i(Object.getPrototypeOf(P.prototype),"constructor",this).call(this,e)}s(A,m["default"].Component),a(A,[{key:"cloneNs",value:function(e){return b.IdmUserMetaNamespace.constructFromObject(JSON.parse(JSON.stringify(e)))}},{key:"componentWillReceiveProps",value:function(e){var t,n;e.open!==this.props.open&&(t=e.create,n=e.namespaces,e=this.cloneNs(e.namespace),t&&n.length&&(e.Order=n.map(function(e){return e.Order||0}).reduce(function(e,t){return Math.max(e,t)},0)+1),this.setState({namespace:e}))}},{key:"updateType",value:function(e){var t=this.state.namespace,e={type:e};"date"===e&&(e.data={format:"date",display:"normal"}),t.JsonDefinition=JSON.stringify(e),this.setState({namespace:t})}},{key:"updateLabel",value:function(e){var t=this.props.create,n=this.state.namespace;!t||n.Namespace&&n.Namespace!=="usermeta-"+d.default.computeStringSlug(n.Label)||this.updateName(e),n.Label=e,this.setState({namespace:n})}},{key:"updateName",value:function(e){var t=this.state.namespace,e=d.default.computeStringSlug(e);0!==e.indexOf("usermeta-")&&(e="usermeta-"+e),t.Namespace=e,this.setState({namespace:t})}},{key:"save",value:function(){var e=this,t=this.state.namespace;S.default.putNS(t).then(function(){e.props.onRequestClose(),e.props.reloadList()})}},{key:"getHideValue",value:function(){var e=this.state.namespace;try{return JSON.parse(e.JsonDefinition).hide}catch(e){return!1}}},{key:"setHideValue",value:function(e){var t=this.state.namespace,n=JSON.parse(t.JsonDefinition);t.JsonDefinition=JSON.stringify(h({},n,{hide:e})),this.setState({namespace:t})}},{key:"getAdditionalData",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this.state.namespace;try{var n=JSON.parse(t.JsonDefinition).data||e;return e.items&&n.split?{items:n.split(",").map(function(e){e=e.split("|"),e=r(e,2);return{key:e[0],value:e[1]}})}:n}catch(e){}return e}},{key:"setAdditionalDataKey",value:function(e,t){var n,r=this.state.namespace,a=JSON.parse(r.JsonDefinition),e=(n=t,(t=e)in(e={})?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e);a.data=h({},a.data,e),r.JsonDefinition=JSON.stringify(a),this.setState({namespace:r})}},{key:"togglePolicies",value:function(t,e){var n=this,r=this.state.namespace,a=(r.Policies||[]).filter(function(e){return e.Action!==t});a.push(b.ServiceResourcePolicy.constructFromObject({Action:t,Effect:"allow",Subject:e?"profile:admin":"*"})),r.Policies=a,this.setState({namespace:r},function(){"READ"===t&&e&&n.togglePolicies("WRITE",!0)})}},{key:"render",value:function(){var r=this,e=this.props,t=e.create,n=e.namespaces,a=e.pydio,o=e.readonly,i=this.state,l=i.namespace,u=i.m,s=i.PoliciesBuilder,c=void 0,c=l.Label||u("editor.title.create"),d="string";l.JsonDefinition&&(d=JSON.parse(l.JsonDefinition).type);var f=!1,e=void 0,i=void 0;l.Namespace||(f=!0,e=u("editor.ns.error")),l.Label||(f=!0,i=u("editor.label.error")),t&&n.filter(function(e){return e.Namespace===l.Namespace}).length&&(f=!0,e=u("editor.ns.exists")),"choice"===d&&((p=this.getAdditionalData({items:[]}).items)&&p.length||(f=!0));l.Policies&&l.Policies.map(function(e){"profile:admin"===e.Subject&&e.Action,"profile:admin"===e.Subject&&e.Action});var p=[m.default.createElement(v.FlatButton,{primary:!0,label:a.MessageHash[54],onClick:this.props.onRequestClose}),m.default.createElement(v.FlatButton,{primary:!0,disabled:f||o,label:"Save",onClick:function(){r.save()}})];"tags"!==d||o||p.unshift(m.default.createElement(v.FlatButton,{primary:!1,label:u("editor.tags.reset"),onClick:function(){new b.UserMetaServiceApi(_.default.getRestClient()).deleteUserMetaTags(l.Namespace,"*").then(function(){a.UI.displayMessage("SUCCESS",u("editor.tags.cleared").replace("%s",l.Namespace))}).catch(function(e){a.UI.displayMessage("ERROR",e.message)})}}));f={section:{marginTop:10,fontWeight:500,fontSize:12}};return m.default.createElement(v.Dialog,{title:c,actions:p,modal:!1,contentStyle:{width:520},open:this.props.open,onRequestClose:this.props.onRequestClose,autoScrollBodyContent:!0,bodyStyle:{padding:20}},m.default.createElement(w,{floatingLabelText:u("label"),value:l.Label,onChange:function(e,t){r.updateLabel(t)},fullWidth:!0,errorText:i,disabled:o,variant:"v2"}),m.default.createElement(w,{floatingLabelText:u("namespace"),disabled:!t,value:l.Namespace,onChange:function(e,t){r.updateName(t)},fullWidth:!0,errorText:e,variant:"v2"}),m.default.createElement("div",{style:f.section},u("type")),m.default.createElement(E,{hintText:u("type"),value:d,onChange:function(e,t,n){return r.updateType(n)},disabled:o,fullWidth:!0,variant:"v2"},Object.keys(S.default.MetaTypes).map(function(e){return m.default.createElement(v.MenuItem,{value:e,primaryText:u("type."+e)||S.default.MetaTypes[e]})})),"choice"===d&&m.default.createElement(C,{data:this.getAdditionalData({items:[],steps:!1}),setAdditionalDataKey:this.setAdditionalDataKey.bind(this),m:u}),"date"===d&&m.default.createElement(y.Fragment,null,m.default.createElement(E,{hintText:u("type.date.format"),value:this.getAdditionalData({format:"date",display:"normal"}).format,onChange:function(e,t,n){return r.setAdditionalDataKey("format",n)},disabled:o,fullWidth:!0,variant:"v2"},m.default.createElement(v.MenuItem,{value:"date",primaryText:u("type.date.format.date")}),m.default.createElement(v.MenuItem,{value:"date-time",primaryText:u("type.date.format.date-time")}),m.default.createElement(v.MenuItem,{value:"time",primaryText:u("type.date.format.time")})),m.default.createElement(E,{hintText:u("type.date.display"),value:this.getAdditionalData({format:"date",display:"normal"}).display,onChange:function(e,t,n){return r.setAdditionalDataKey("display",n)},disabled:o,fullWidth:!0,variant:"v2"},m.default.createElement(v.MenuItem,{value:"normal",primaryText:u("type.date.display.normal")}),m.default.createElement(v.MenuItem,{value:"relative",primaryText:u("type.date.display.relative")}))),"integer"===d&&m.default.createElement(y.Fragment,null,m.default.createElement(E,{hintText:u("type.integer.format"),value:this.getAdditionalData({format:"general"}).format||"general",onChange:function(e,t,n){return r.setAdditionalDataKey("format",n)},disabled:o,fullWidth:!0,variant:"v2"},m.default.createElement(v.MenuItem,{value:"general",primaryText:u("type.integer.format.general")}),m.default.createElement(v.MenuItem,{value:"bytesize",primaryText:u("type.integer.format.bytesize")}),m.default.createElement(v.MenuItem,{value:"percentage",primaryText:u("type.integer.format.percentage")}),m.default.createElement(v.MenuItem,{value:"progress",primaryText:u("type.integer.format.progress")}))),m.default.createElement("div",{style:f.section},g.default.getInstance().MessageHash[310]),m.default.createElement(v.Toggle,h({label:u("toggle.list-visibility"),disabled:o,labelPosition:"left",toggled:!this.getHideValue(),onToggle:function(e,t){r.setHideValue(!t)}},k.toggleFieldV2)),m.default.createElement(v.Toggle,h({label:u("toggle.index"),disabled:o,labelPosition:"left",toggled:l.Indexable,onToggle:function(e,t){l.Indexable=t,r.setState({namespace:l})}},k.toggleFieldV2)),s&&m.default.createElement(s,{policies:l.Policies,readonly:o,onChangePolicies:function(e){return r.setState({namespace:h({},l,{Policies:e})})},pydio:a}),m.default.createElement("div",{style:f.section},u("order")),m.default.createElement(w,{floatingLabelText:u("order"),value:l.Order||"0",onChange:function(e,t){l.Order=parseInt(t),r.setState({namespace:l})},fullWidth:!0,type:"number",readOnly:o,variant:"v2"}))}}]),a=A;function A(t){var n=this;u(this,A),i(Object.getPrototypeOf(A.prototype),"constructor",this).call(this,t),this.state={namespace:this.cloneNs(t.namespace),m:function(e){return t.pydio.MessageHash["ajxp_admin.metadata."+e]||e},selectorNewKey:"",selectorNewValue:"",PoliciesBuilder:O};var e=this.props.policiesBuilder;e&&!function(n,r){if(!(n=void 0===n?"":n))return Promise.resolve(r);var e=n.split("."),a=e.shift(),o=e.join(".");return p.default.loadClass(a).then(function(e){var t=f.default.getFunctionByName(o,e);if(t)return t;if("object"==typeof e&&e[a]){e=f.default.getFunctionByName(o,e[a]);if(e)return e}if(r)return console.error("Cannot find editor component, using default instead",n,r),r;throw new Error("cannot find editor component")}).catch(function(e){if(r)return console.error("Cannot find editor component, using default instead",n,r),r;throw e})}(e,O).then(function(e){return n.setState({PoliciesBuilder:e})})}a.PropTypes={namespace:c.default.instanceOf(b.IdmUserMetaNamespace).isRequired,namespaces:c.default.arrayOf(b.IdmUserMetaNamespace),create:c.default.bool,reloadList:c.default.func,onRequestClose:c.default.func},n.default=a,t.exports=n.default},{"../model/Metadata":19,"cells-sdk":"cells-sdk","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/func":"pydio/util/func","pydio/util/lang":"pydio/util/lang",react:"react"}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function l(e){return e&&e.__esModule?e:{default:e}}var p=l(e("react")),u=l(e("pydio/http/resources-manager")),h=e("material-ui"),s=e("material-ui/styles"),c=e("cells-sdk"),d=l(e("pydio/http/api")),f=l(e("pydio/util/xml")),y=l(e("pydio")),m=l(e("./VersionPolicyPeriods")),g=y.default.requireLib("form"),y=AdminComponents,v=y.PaperEditorLayout,b=y.AdminStyles,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(S,p["default"].Component),a(S,[{key:"componentWillReceiveProps",value:function(e){this.state.policy!==e.versionPolicy&&this.setState({policy:e.versionPolicy})}},{key:"componentDidMount",value:function(){var t=this;d.default.getRestClient().callApi("/config/discovery/forms/{ServiceName}","GET",{ServiceName:"pydio.grpc.versions"},{},{},{},null,[],["application/json"],["application/json"],"String").then(function(e){e=e.data,e=f.default.parseXml(e);t.setState({parameters:g.Manager.parseParameters(e,"//param"),loaded:!0})})}},{key:"resetForm",value:function(){this.setState({valid:!0,dirty:!1,saveValue:null})}},{key:"deleteSource",value:function(){var t=this,e=this.state,n=e.m,r=e.policy;this.props.pydio.UI.openConfirmDialog({message:n("delete.confirm"),destructive:[r.Label],validCallback:function(){u.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(d.default.getRestClient()).deleteVersioningPolicy(r.Uuid).then(function(e){t.props.closeEditor()})})}})}},{key:"saveSource",value:function(){var t,n=this;this.state.saveValue&&(t=n.state.saveValue,u.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(d.default.getRestClient()).putVersioningPolicy(t.Uuid,t).then(function(){n.props.reloadList(),n.setState({dirty:!1,policy:t,saveValue:null})})}))}},{key:"onFormChange",value:function(e){var t=this.state.m,n=S.valuesToTreeVersioningPolicy(e),r=n.KeepPeriods||[],e=r.findIndex(function(e){return 0===e.MaxNumber});if(-1<e&&e<r.length-1){pydio.UI.displayMessage("ERROR",t("error.lastdelete"));for(var a=r.length-1-e;0<a;)r.pop(),a--}n.KeepPeriods=r,this.setState({saveValue:n,dirty:!0})}},{key:"updateValidStatus",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,n=t.create,r=t.readonly,a=t.pydio,o=t.muiTheme,i=t.internalSources,l=this.state,u=l.loaded,s=l.policy,c=l.saveValue,d=l.m,t=this.state.parameters,l=o.palette,o=b(l),l=void 0;t&&u&&(i&&(t=t.map(function(e){return"VersionsDataSourceName"===e.name&&(e.choices+=","+i.map(function(e){return e+"|DataSource "+e}).join(",")),e})),f=S.TreeVersioningPolicyToValues(s),c&&(f=S.TreeVersioningPolicyToValues(c)),l=p.default.createElement(g.FormPanel,{parameters:t,values:f,className:"full-width",onChange:this.onFormChange.bind(this),onValidStatusChange:this.updateValidStatus.bind(this),disabled:r,depth:-2,variant:"v2"}));var f=[];r||(n||(f.push(v.actionButton(d("delete"),"mdi mdi-delete",function(){e.deleteSource()})),f.push(v.actionButton(a.MessageHash["ajxp_admin.plugins.6"],"mdi mdi-undo",function(){e.resetForm()},!this.state.dirty))),f.push(v.actionButton(a.MessageHash[53],"mdi mdi-content-save",function(){e.saveSource()},!this.state.valid||!this.state.dirty)));n=(n=(c||s).Name)||"";return p.default.createElement(v,{title:u&&t?d("title").replace("%s",n):a.MessageHash["ajxp_admin.loading"],titleLeftIcon:"mdi mdi-clock-start",titleActionBar:f,closeAction:this.props.closeEditor,className:"workspace-editor",contentFill:!0},p.default.createElement(h.Paper,{zDepth:0,style:{backgroundColor:o.body.block.header.backgroundColor,padding:"0px 20px",height:64,display:"flex",alignItems:"center"}},p.default.createElement("div",{style:{overflowX:"auto",width:"100%"}},p.default.createElement(m.default,{pydio:a,policy:c||s}))),l,o.formSimpleCss())}}],[{key:"valuesToTreeVersioningPolicy",value:function(e){for(var t=[],n="IntervalStart",r="MaxNumber",a=n,o=r,i=0;void 0!==e[a]&&void 0!==e[o];){var l=new c.TreeVersioningKeepPeriod;l.IntervalStart=e[a],l.MaxNumber=e[o],t.push(l),delete e[o],delete e[a],a=n+"_"+ ++i,o=r+"_"+i}return e.KeepPeriods=t,c.TreeVersioningPolicy.constructFromObject(e)}},{key:"TreeVersioningPolicyToValues",value:function(e){var t,n=r({},e);return n.KeepPeriods&&(t=0,n.KeepPeriods.map(function(e){0<t?(n["IntervalStart_"+t]=e.IntervalStart||0,n["MaxNumber_"+t]=e.MaxNumber||0):(n.IntervalStart=e.IntervalStart||0,n.MaxNumber=e.MaxNumber||0),t++})),n.NodeDeletedStrategy||(n.NodeDeletedStrategy="KeepAll"),n}}]),S);function S(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),i(Object.getPrototypeOf(S.prototype),"constructor",this).call(this,t),this.state={dirty:!1,policy:t.versionPolicy,loaded:!0,valid:!0,parameters:null,m:function(e){return t.pydio.MessageHash["ajxp_admin.versions.editor."+e]||e}}}n.default=a=(0,s.muiThemeable)()(a),n.default=a,t.exports=n.default},{"./VersionPolicyPeriods":14,"cells-sdk":"cells-sdk","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/util/xml":"pydio/util/xml",react:"react"}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};var i,l=e("react"),s=(i=l)&&i.__esModule?i:{default:i},c=e("material-ui"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,s["default"].Component),r(u,[{key:"render",value:function(){function o(e){return r.MessageHash["ajxp_admin.versions.period."+e]||e}var e=this.props,t=e.policy,n=e.rendering,r=e.pydio,e=t.KeepPeriods,e=void 0===e?[]:e,t=t.NodeDeletedStrategy;if("short"===n){var a,i=void 0;return 1===e.length?i=-1===(a=e[0]).MaxNumber?o("keep-all.always"):o("keep-n").replace("%s",a.MaxNumber):(i=o("retentions-n").replace("%s",e.length),0===(a=e[e.length-1]).MaxNumber||void 0===a.MaxNumber?i+=" | "+o("remove-all-after").replace("%s",a.IntervalStart):i+=" | "+o("keep-n-after").replace("%1",a.MaxNumber).replace("%2",a.IntervalStart)),s.default.createElement("span",null,i)}var i=e.map(function(e){var t=e.MaxNumber,n=void 0,r=s.default.createElement(c.FontIcon,{className:"mdi mdi-ray-start-arrow"}),a={};return void 0===e.IntervalStart||"0"===e.IntervalStart?r=s.default.createElement(c.FontIcon,{className:"mdi mdi-clock-start"}):n=s.default.createElement("span",{style:{fontWeight:500,fontSize:16}},e.IntervalStart,""),-1===e.MaxNumber?t=o("keep-all"):e.MaxNumber?t=o("max-n").replace("%s",t):(t=o("remove-all"),r=s.default.createElement(c.FontIcon,{className:"mdi mdi-clock-end",style:{color:"#c62828"}}),a={color:"#c62828"}),s.default.createElement(c.Step,null,s.default.createElement(c.StepLabel,{icon:r,style:a},n,t))}),l=void 0,u={color:"#c62828",fontWeight:500,fontSize:16};switch(t){case"KeepLast":l="Backup last";break;case"KeepAll":u.color=null,l="Backup all";break;case"KeepNone":l="Clean all";break;default:u.color=null,l="Backup all"}return i.push(s.default.createElement(c.Step,null,s.default.createElement(c.StepLabel,{style:u,icon:s.default.createElement(c.FontIcon,{className:"mdi mdi-delete",style:u})},l))),s.default.createElement(c.Stepper,{activeStep:e.length-1,linear:!1},i)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o(Object.getPrototypeOf(u.prototype),"constructor",this).apply(this,arguments)}n.default=r,t.exports=n.default},{"material-ui":"material-ui",react:"react"}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var h=i(e("react")),l=i(e("pydio")),y=e("material-ui"),u=i(e("lodash.debounce")),m=i(e("pydio/util/path")),s=e("cells-sdk"),l=l.default.requireLib("hoc"),g=l.ModernAutoComplete,v=l.ModernStyles,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b,h["default"].Component),r(b,[{key:"componentDidMount",value:function(){var r=this,a=this.props.validateOnLoad,e=this.state.value;this.loadValues(e,function(){var e=r.state,t=e.nodes,n=e.value;t.filter(function(e){return e.Path===n&&(!e.Type||"COLLECTION"==e.Type&&!e.MetaStore&&!e.MetaStore.resolution)}).map(function(e){r.loadValues(n+"/")});a&&r.handleNewRequest(n)})}},{key:"handleUpdateInput",value:function(e){this.debounced(),this.setState({value:e})}},{key:"handleNewRequest",value:function(t){var e=this.state.nodes,n=this.props,r=n.onChange,a=void 0===r?function(){}:r,o=n.onDelete,i=void 0===o?function(){}:o,r=n.onError,o=void 0===r?function(){}:r,n=void 0,r=void 0;if("string"==typeof t){if(""===t)return void i();n=t,r=(r=e.filter(function(e){return e.Path===t})[0])||e.filter(function(e){return 0===e.Path.indexOf(t)})[0]}else"object"==typeof t&&(n=t.key,r=t.node);if(!r)return o();this.setState({value:n}),a(n,r)}},{key:"loadValues",value:function(e){var t,n=this,r=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],a=e.lastIndexOf("/"),o=e.substr(0,a);null!==this.lastSearch&&this.lastSearch===o||(this.lastSearch=o,this.setState({loading:!0}),t=new s.AdminTreeServiceApi(PydioApi.getRestClient()),e=new s.TreeListNodesRequest,(a=new s.TreeNode).Path=o+"/",e.Node=a,t.listAdminTree(e).then(function(e){n.setState({nodes:e.Children||[],loading:!1},function(){return r()})}).catch(function(){n.setState({loading:!1},function(){return r()})}))}},{key:"render",value:function(){function t(e){return u.MessageHash["ajxp_admin."+e]||e}var n,r=this,e=this.state,a=e.value,o=e.nodes,i=e.loading,l=this.props,u=l.pydio,s=l.onDelete,c=l.skipTemplates,d=l.label,e=l.zDepth,l=void 0===e?0:e,e=[];return o&&(n={},o.forEach(function(e){e.MetaStore&&e.MetaStore.resolution&&"cells"===e.Uuid||m.default.getBasename(e.Path).startsWith(".")||(e=b.renderNode(e,t),n[e.categ]||(n[e.categ]=[]),n[e.categ].push(e))}),1<Object.keys(n).length?(e.push({key:"h1",text:"",value:h.default.createElement(y.MenuItem,{primaryText:t("ws.complete.datasources"),style:{fontSize:13,fontWeight:500},disabled:!0})}),(o=n[Object.keys(n)[0]]).sort(LangUtils.arraySorter("text")),e.push.apply(e,p(o)),c||(e.push({key:"h2",text:"",value:h.default.createElement(y.MenuItem,{primaryText:t("ws.complete.templates"),style:{fontSize:13,fontWeight:500},disabled:!0})}),(o=n[Object.keys(n)[1]]).sort(LangUtils.arraySorter("text")),e.push.apply(e,p(o)))):1===Object.keys(n).length&&e.push.apply(e,p(n[Object.keys(n)[0]]))),h.default.createElement(y.Paper,{zDepth:l,style:f({display:"flex",alignItems:"center",margin:"2px 0"},this.props.style)},h.default.createElement("div",{style:{position:"relative",flex:1,height:60}},h.default.createElement("div",{style:{position:"absolute",right:0,top:30,width:30}},h.default.createElement(y.RefreshIndicator,{size:30,left:0,top:0,status:i?"loading":"hide"})),h.default.createElement(g,{fullWidth:!0,searchText:a,onUpdateInput:function(e){return r.handleUpdateInput(e)},onNewRequest:function(e){return r.handleNewRequest(e)},onClose:function(){return r.handleNewRequest(a)},dataSource:e,filter:function(e,t){return 0===t.toLowerCase().indexOf(e.toLowerCase())},floatingLabelText:d||t("ws.complete.label"),openOnFocus:!0,menuProps:{maxHeight:200},hasRightBlock:!0})),h.default.createElement("div",{style:v.fillBlockV2Right},h.default.createElement(y.IconButton,{style:{marginTop:2},iconStyle:{color:s?"#9e9e9e":"#eee"},iconClassName:"mdi mdi-delete",onClick:s,disabled:!s})))}}],[{key:"renderNode",value:function(e,t){var n,r=h.default.createElement("span",null,e.Path),a="mdi mdi-folder",o="folder";return e.MetaStore&&e.MetaStore.resolution?(a="mdi mdi-file-tree",o="templatePath",n=e.MetaStore.resolution.split("\n").pop(),r=h.default.createElement("span",null,e.Path," ",h.default.createElement("i",{style:{color:"#9e9e9e"}},"- ",t("ws.complete.resolves")," ",n))):"LEAF"===e.Type&&(a="mdi mdi-file"),{key:e.Path,text:e.Path,node:e,categ:o,value:h.default.createElement(y.MenuItem,null,h.default.createElement(y.FontIcon,{className:a,color:"#607d8b",style:{float:"left",marginRight:8}})," ",r)}}}]),b);function b(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),o(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,e);e=e.value,e=void 0===e?"":e;this.debounced=(0,u.default)(function(){var e=t.state.value;t.loadValues(e)},300),this.state={nodes:[],value:e}}n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","lodash.debounce":"lodash.debounce","material-ui":"material-ui",pydio:"pydio","pydio/util/path":"pydio/util/path",react:"react"}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("pydio")),m=e("react"),g=i(m),v=e("material-ui"),u=e("material-ui/styles"),b=i(e("../model/Ws")),S=i(e("./WsAutoComplete")),e=l.default.requireLib("hoc"),_=e.ModernTextField,E=e.ModernSelectField,w=e.ModernStyles,k=l.default.requireLib("form").InputIntegerBytes,l=AdminComponents,C=l.PaperEditorLayout,x=l.AdminStyles,r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,m.Component),r(s,[{key:"enableSync",value:function(e){e?this.setState({showDialog:"enableSync",dialogTargetValue:e}):this.setState({showDialog:"disableSync",dialogTargetValue:e})}},{key:"confirmSync",value:function(e){this.state.workspace.Attributes.ALLOW_SYNC=e,this.setState({showDialog:!1,dialogTargetValue:null})}},{key:"revert",value:function(){var e=this,t=this.state.container;t.revert(),this.setState({workspace:t.getModel()},function(){e.forceUpdate()})}},{key:"save",value:function(){var e=this,t=this.state.container,n=this.props,r=n.reloadList,a=n.closeEditor;this.setState({saving:!0});var o=t.create;t.save().then(function(){r(),e.setState({workspace:t.getModel(),saving:!1},function(){e.forceUpdate()}),o&&a()}).catch(function(){e.setState({saving:!1})})}},{key:"remove",value:function(){var e=this.state.container,t=this.props,n=t.closeEditor,r=t.reloadList,t=t.pydio;t.UI.openConfirmDialog({message:t.MessageHash["settings.35"],destructive:[e.getModel().Label],validCallback:function(){e.remove().then(function(){r(),n()})}})}},{key:"render",value:function(){function t(e){return o.MessageHash["ajxp_admin."+e]||e}function e(e){return o.MessageHash["settings."+e]||e}var r=this,n=this.props,a=n.closeEditor,o=n.pydio,i=n.advanced,l=this.state,u=l.workspace,s=l.container,c=l.newFolderKey,d=l.saving,f=l.showDialog,p=l.dialogTargetValue,n=!u.PoliciesContextEditable,l=[];s.create||n||l.push(C.actionButton(t("plugins.6"),"mdi mdi-undo",function(){r.revert()},!s.isDirty())),n||l.push(C.actionButton(o.MessageHash[53],"mdi mdi-content-save",function(){r.save()},d||!(s.isDirty()&&s.isValid())));var n=x(this.props.muiTheme.palette),d={title:y({},n.body.block.headerFull,{margin:"0 -20px"}),legend:{padding:"16px 4px 8px"},section:y({padding:"0 20px 20px",margin:10,backgroundColor:"white"},n.body.block.container),toggleDiv:{},divider:{margin:"24px -20px 0px",height:1,border:"none",backgroundColor:"rgb(236 239 241)"}},h=u.RootNodes,n=Object.keys(h).map(function(n){var e=t("ws.editor.path.folder");return b.default.rootIsTemplatePath(h[n])&&(e=t("ws.editor.path.template")),g.default.createElement(S.default,{key:h[n].Uuid,pydio:o,label:e,value:h[n].Path,onDelete:function(){delete h[n],r.forceUpdate()},onChange:function(e,t){delete h[n],""!==e&&(h[t.Uuid]=t)},skipTemplates:s.hasFolderRoots()})});return s.hasTemplatePath()||n.push(g.default.createElement(S.default,{key:c,pydio:o,value:"",onChange:function(e,t){t&&(h[t.Uuid]=t,r.setState({newFolderKey:Math.random()}))},skipTemplates:s.hasFolderRoots()})),g.default.createElement(C,{title:u.Label||e("90"),titleLeftIcon:"mdi mdi-folder-open",titleActionBar:l,closeAction:a,className:"workspace-editor",contentFill:!1},g.default.createElement(v.Dialog,{open:f,title:t("ws.editor.sync.warning"),onRequestClose:function(){r.confirmSync(!p)},actions:[g.default.createElement(v.FlatButton,{label:o.MessageHash[54],onClick:function(){r.confirmSync(!p)}}),g.default.createElement(v.FlatButton,{label:t("ws.editor.sync.warning.validate"),onClick:function(){r.confirmSync(p)}})]},"enableSync"===f&&g.default.createElement("div",null,t("ws.editor.sync.warning.enable")),"disableSync"===f&&g.default.createElement("div",null,t("ws.editor.sync.warning.disable"))),g.default.createElement(v.Paper,{zDepth:0,style:d.section},g.default.createElement("div",{style:d.title},t("ws.30")),g.default.createElement("div",{style:d.legend},t("ws.editor.options.legend")),g.default.createElement(_,{fullWidth:!0,errorText:u.Label?"":t("ws.editor.label.legend"),floatingLabelText:e("8"),value:u.Label,onChange:function(e,t){u.Label=t},variant:"v2"}),g.default.createElement(_,{fullWidth:!0,floatingLabelText:t("ws.editor.description"),value:u.Description,onChange:function(e,t){u.Description=t},variant:"v2"}),g.default.createElement(_,{fullWidth:!0,errorText:u.Label&&!u.Slug?t("ws.editor.slug.legend"):"",floatingLabelText:t("ws.5"),value:u.Slug,onChange:function(e,t){u.Slug=t},variant:"v2"})),g.default.createElement(v.Paper,{zDepth:0,style:d.section},g.default.createElement("div",{style:d.title},t("ws.editor.data.title")),g.default.createElement("div",{style:d.legend},t("ws.editor.data.legend")," ",t("ws.editor.default_rights")),n,g.default.createElement(E,{fullWidth:!0,value:u.Attributes.DEFAULT_RIGHTS||"",onChange:function(e,t,n){u.Attributes.DEFAULT_RIGHTS=n},hintText:"Default Rights",variant:"v2"},g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.default_rights.none"),value:""}),g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.default_rights.read"),value:"r"}),g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.default_rights.readwrite"),value:"rw"}),g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.default_rights.write"),value:"w"}))),g.default.createElement(v.Paper,{zDepth:0,style:d.section},g.default.createElement("div",{style:d.title},t("ws.editor.other")),g.default.createElement("div",{style:y({},d.legend)},t("ws.editor.other.skiprecycle.legend")),g.default.createElement("div",{style:d.toggleDiv},g.default.createElement(v.Checkbox,y({label:t("ws.editor.other.skiprecycle"),labelPosition:"right",checked:u.Attributes.SKIP_RECYCLE,onCheck:function(e,t){u.Attributes.SKIP_RECYCLE=t}},w.toggleFieldV2))),i&&g.default.createElement(m.Fragment,null,g.default.createElement("hr",{style:d.divider}),g.default.createElement("div",{style:y({},d.legend)},t("ws.editor.other.sync.legend")),g.default.createElement("div",{style:d.toggleDiv},g.default.createElement(v.Checkbox,y({label:t("ws.editor.other.sync"),labelPosition:"right",checked:u.Attributes.ALLOW_SYNC,onCheck:function(e,t){(s.hasTemplatePath()||!t)&&t?u.Attributes.ALLOW_SYNC=t:r.enableSync(t)}},w.toggleFieldV2))),g.default.createElement("hr",{style:d.divider}),g.default.createElement("div",{style:y({},d.legend)},t("ws.editor.other.quota")),g.default.createElement(k,{variant:"v2",attributes:{label:"Quota"},value:u.Attributes.QUOTA||0,onChange:function(e){0<e?u.Attributes.QUOTA=e+"":(u.Attributes.QUOTA="0",delete u.Attributes.QUOTA)}}),g.default.createElement("hr",{style:d.divider}),g.default.createElement("div",{style:y({},d.legend)},t("ws.editor.other.layout")),g.default.createElement(E,{fullWidth:!0,floatingLabelText:t("ws.editor.other.layout"),variant:"v2",value:u.Attributes.META_LAYOUT||"",onChange:function(e,t,n){u.Attributes.META_LAYOUT=n}},g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.other.layout.default"),value:""}),g.default.createElement(v.MenuItem,{primaryText:t("ws.editor.other.layout.easy"),value:"meta.layout_sendfile"})))))}}]),s);function s(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e);e=new b.default(e.workspace);e.observe("update",function(){t.forceUpdate()}),this.state={workspace:e.getModel(),container:e,newFolderKey:Math.random(),showDialog:!1}}n.default=r=(0,u.muiThemeable)()(r),n.default=r,t.exports=n.default},{"../model/Ws":21,"./WsAutoComplete":15,"material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=r(e("./board/WsDashboard")),o=r(e("./board/VirtualNodes")),i=r(e("./board/DataSourcesBoard")),l=r(e("./board/MetadataBoard")),u=r(e("./editor/DataSourceEditor")),s=r(e("./model/Ws")),c=r(e("./model/DataSource")),d=r(e("./editor/WsAutoComplete")),f=r(e("./virtual/NodeCard")),e=r(e("./model/VirtualNode"));window.AdminWorkspaces={VirtualNodes:o.default,WsDashboard:a.default,DataSourcesBoard:i.default,MetadataBoard:l.default,DataSourceEditor:u.default,WsAutoComplete:d.default,TemplatePathEditor:f.default,TemplatePath:e.default,Workspace:s.default,DataSource:c.default}},{"./board/DataSourcesBoard":1,"./board/MetadataBoard":3,"./board/VirtualNodes":4,"./board/WsDashboard":6,"./editor/DataSourceEditor":9,"./editor/WsAutoComplete":15,"./model/DataSource":18,"./model/VirtualNode":20,"./model/Ws":21,"./virtual/NodeCard":22}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};var i,l=e("pydio/util/lang"),u=(i=l)&&i.__esModule?i:{default:i},s=e("cells-sdk"),c=e("pydio/lang/observable"),d=e("pydio/http/api"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,c),r(f,[{key:"buildProxy",value:function(e){var a=this;return new Proxy(e,{set:function(e,t,n){var r=n;if("StorageType"===t)e.StorageConfiguration={},"LOCAL"===r?e.StorageConfiguration={folder:"",normalize:"false"}:"S3"===r?e.StorageConfiguration={customEndpoint:""}:"GCS"===r&&(e.StorageConfiguration={jsonCredentials:""}),a.internalInvalid=!1,e.ApiKey=e.ApiSecret="";else if("Name"===t)r=u.default.computeStringSlug(r).replace("-","").substr(0,33),a.existingNames&&-1<a.existingNames.indexOf(r)?a.nameInvalid=!0:a.nameInvalid=!1;else if("folder"===t)"/"!==r[0]&&(r="/"+r);else{if("invalid"===t)return a.internalInvalid=n,a.notify("update"),!0;"PeerAddress"===t&&"ANY"===n&&(r="")}return e[t]=r,a.notify("update"),!0},get:function(e,t){e=e[t];return e instanceof Array?e:e instanceof Object?a.buildProxy(e):"StorageType"===t?e||"LOCAL":"PeerAddress"===t?e||"ANY":e}})}}]),r(f,[{key:"getModel",value:function(){return this.observableModel}},{key:"isValid",value:function(){return!this.internalInvalid&&!this.nameInvalid&&("S3"===this.model.StorageType||"AZURE"===this.model.StorageType?this.model.ApiKey&&this.model.ApiSecret&&this.model.Name&&(this.model.ObjectsBucket||this.model.StorageConfiguration.bucketsRegexp):"GCS"===this.model.StorageType?this.model.Name&&this.model.ObjectsBucket&&this.model.StorageConfiguration&&this.model.StorageConfiguration.jsonCredentials:this.model.Name&&this.model.StorageConfiguration&&this.model.StorageConfiguration.folder)}},{key:"getNameError",value:function(e){return this.nameInvalid?e("name.inuse"):null}},{key:"deleteSource",value:function(){return new s.ConfigServiceApi(d.getRestClient()).deleteDataSource(this.model.Name)}},{key:"resyncSource",value:function(){var e=new s.JobsServiceApi(d.getRestClient()),t=new s.RestUserJobRequest;return t.JobName="datasource-resync",t.JsonParameters=JSON.stringify({dsName:this.model.Name}),e.userCreateJob("datasource-resync",t)}},{key:"revert",value:function(){return this.model=this.snapshot,this.observableModel=this.buildProxy(this.model),this.snapshot=JSON.parse(JSON.stringify(this.model)),this.observableModel}},{key:"saveSource",value:function(){var t=this;return new s.ConfigServiceApi(d.getRestClient()).putDataSource(this.model.Name,this.model).then(function(e){t.snapshot=JSON.parse(JSON.stringify(t.model)),t.notify("update")})}},{key:"stripPrefix",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return t;var r={};return Object.keys(t).map(function(e){r[e.replace(n,"")]=t[e]}),r}},{key:"getDataWithPrefix",value:function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(""===n)return this.model;var r={};return Object.keys(this.model).forEach(function(e){r[n+e]=t.model[e],"EncryptionMode"!==e||t.model[e]||(r[n+e]="CLEAR")}),r}}],[{key:"loadDatasources",value:function(){return new s.ConfigServiceApi(d.getRestClient()).listDataSources()}},{key:"loadVersioningPolicies",value:function(){return new s.ConfigServiceApi(d.getRestClient()).listVersioningPolicies()}},{key:"loadStatuses",value:function(){return new s.ConfigServiceApi(d.getRestClient()).listServices("STARTED")}},{key:"loadEncryptionKeys",value:function(){return new s.ConfigServiceApi(d.getRestClient()).listEncryptionKeys(new s.EncryptionAdminListKeysRequest)}},{key:"loadBuckets",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=new s.ConfigServiceApi(d.getRestClient()),r=new s.RestListStorageBucketsRequest;return r.DataSource=e,t&&(r.BucketsRegexp=t),n.listStorageBuckets(r)}}]),f);function f(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"flat":arguments[2];if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o(Object.getPrototypeOf(f.prototype),"constructor",this).call(this),this.internalInvalid=!1,this.nameInvalid=!1,this.existingNames=t,e)(this.model=e).StorageConfiguration||(e.StorageConfiguration={}),this.snapshot=JSON.parse(JSON.stringify(e));else switch(this.model=new s.ObjectDataSource,this.model.EncryptionMode=s.ObjectEncryptionMode.constructFromObject("CLEAR"),this.model.StorageType=s.ObjectStorageType.constructFromObject("LOCAL"),n){case"flat":this.model.StorageConfiguration={folder:"",normalize:"false"},this.model.FlatStorage=!0;break;case"structured":this.model.StorageConfiguration={folder:"",normalize:"false"},this.model.FlatStorage=!1;break;case"internal":this.model.StorageConfiguration={folder:"",normalize:"false",cellsInternal:"true"},this.model.FlatStorage=!0}this.observableModel=this.buildProxy(this.model)}n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("pydio/http/api")),l=(o(e("pydio/http/resources-manager")),e("cells-sdk")),r=(r(u,null,[{key:"loadNamespaces",value:function(){return new l.UserMetaServiceApi(i.default.getRestClient()).listUserMetaNamespace()}},{key:"putNS",value:function(e){var t=new l.UserMetaServiceApi(i.default.getRestClient()),n=new l.IdmUpdateUserMetaNamespaceRequest;return n.Operation=l.UpdateUserMetaNamespaceRequestUserMetaNsOp.constructFromObject("PUT"),n.Namespaces=[e],u.clearLocalCache(),t.updateUserMetaNamespace(n)}},{key:"deleteNS",value:function(e){var t=new l.UserMetaServiceApi(i.default.getRestClient()),n=new l.IdmUpdateUserMetaNamespaceRequest;return n.Operation=l.UpdateUserMetaNamespaceRequestUserMetaNsOp.constructFromObject("DELETE"),n.Namespaces=[e],u.clearLocalCache(),t.updateUserMetaNamespace(n)}},{key:"clearLocalCache",value:function(){try{window.ReactMeta&&ReactMeta.Renderer.getClient().clearConfigs()}catch(e){}}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}r.MetaTypes={string:"Text",textarea:"Long Text",integer:"Number",boolean:"Boolean",date:"Date",choice:"Selection",tags:"Extensible Tags",stars_rate:"Stars Rating",css_label:"Color Labels",json:"JSON"},n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager"}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var l=i(e("pydio")),u=i(e("pydio/util/lang")),s=i(e("pydio/lang/observable")),c=i(e("pydio/http/api")),d=i(e("pydio/http/resources-manager")),f=e("cells-sdk"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,s["default"]),r(p,null,[{key:"loadNodes",value:function(n){var e=new f.ConfigServiceApi(c.default.getRestClient());l.default.startLoading(),e.listVirtualNodes().then(function(e){l.default.endLoading();var t=[];e.Children&&e.Children.map(function(e){t.push(new p(e))}),n(t)}).catch(function(){l.default.endLoading()})}}]),r(p,[{key:"getName",value:function(){return this.data.MetaStore.name}},{key:"setName",value:function(e){this.data.MetaStore.name=e;e=u.default.computeStringSlug(e);this.data.Uuid=e,this.data.Path=e,this.notify("update")}},{key:"getValue",value:function(){return this.data.MetaStore.resolution}},{key:"setValue",value:function(e){this.data.MetaStore.resolution=e,this.notify("update")}},{key:"getOnDelete",value:function(){return this.data.MetaStore.onDelete}},{key:"setOnDelete",value:function(e){this.data.MetaStore.onDelete=e,this.notify("update")}},{key:"save",value:function(t){var n=this;d.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(c.default.getRestClient()).putVirtualNode(n.data.Uuid,n.data).then(function(){t()})})}},{key:"remove",value:function(t){var n=this;d.default.loadClass("EnterpriseSDK").then(function(e){new e.EnterpriseConfigServiceApi(c.default.getRestClient()).deleteVirtualNode(n.data.Uuid).then(function(){t()})})}}]),p);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),o(Object.getPrototypeOf(p.prototype),"constructor",this).call(this),e?this.data=e:(this.data=new f.TreeNode,this.data.Type=f.TreeNodeType.constructFromObject("COLLECTION"),this.data.MetaStore={name:"",resolution:"",onDelete:"rename-uuid",contentType:"text/javascript"})}n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}i(e("pydio"));var l=i(e("pydio/http/api")),u=i(e("pydio/util/lang")),s=i(e("pydio/lang/observable")),c=e("cells-sdk"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,s["default"]),r(d,[{key:"buildProxy",value:function(e){var r=this;return new Proxy(e,{set:function(e,t,n){return"Slug"===t?n=u.default.computeStringSlug(n):"Label"===t&&r.create&&(e.Slug=u.default.computeStringSlug(n)),e[t]=n,r.dirty=!0,r.notify("update"),!0},get:function(e,t){e=e[t];return!((e="Attributes"===t?r.internalAttributes:e)instanceof Array)&&e instanceof Object?r.buildProxy(e):e}})}}]),r(d,[{key:"initModel",value:function(e){var t;this.create=!1,this.dirty=!1,this.model=e,this.snapshot=JSON.parse(JSON.stringify(e)),e.Attributes?"object"==typeof(t=JSON.parse(e.Attributes))&&Object.keys(t).length&&(this.internalAttributes=t):this.internalAttributes={},e.RootNodes||(e.RootNodes={})}},{key:"getModel",value:function(){return this.observableModel}},{key:"hasTemplatePath",value:function(){var t=this;return 0<Object.keys(this.model.RootNodes).filter(function(e){return d.rootIsTemplatePath(t.model.RootNodes[e])}).length}},{key:"hasFolderRoots",value:function(){var t=this;return 0<Object.keys(this.model.RootNodes).filter(function(e){return!d.rootIsTemplatePath(t.model.RootNodes[e])}).length}},{key:"save",value:function(){var t=this;return this.model.Attributes=JSON.stringify(this.internalAttributes),new c.WorkspaceServiceApi(l.default.getRestClient()).putWorkspace(this.model.Slug,this.model).then(function(e){t.initModel(e),t.observableModel=t.buildProxy(t.model)})}},{key:"remove",value:function(){return new c.WorkspaceServiceApi(l.default.getRestClient()).deleteWorkspace(this.model.Slug)}},{key:"revert",value:function(){var e=c.IdmWorkspace.constructFromObject(this.snapshot||{});this.initModel(e),this.observableModel=this.buildProxy(this.model)}},{key:"isValid",value:function(){return this.model.Slug&&this.model.Label&&0<Object.keys(this.model.RootNodes).length}},{key:"isDirty",value:function(){return this.dirty}}],[{key:"rootIsTemplatePath",value:function(e){return!(!e.MetaStore||!e.MetaStore.resolution)}},{key:"listWorkspaces",value:function(){var e=new c.WorkspaceServiceApi(l.default.getRestClient()),t=new c.RestSearchWorkspaceRequest,n=new c.IdmWorkspaceSingleQuery;return n.scope=c.IdmWorkspaceScope.constructFromObject("ADMIN"),t.Queries=[n],e.searchWorkspaces(t)}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),o(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.internalAttributes={},this.dirty=!1,e?this.initModel(e):(this.create=!0,this.model=new c.IdmWorkspace,this.model.Scope=c.IdmWorkspaceScope.constructFromObject("ADMIN"),this.model.RootNodes={},this.internalAttributes={DEFAULT_RIGHTS:""},this.model.PoliciesContextEditable=!0,this.model.Attributes=JSON.stringify(this.internalAttributes)),this.observableModel=this.buildProxy(this.model)}n.default=r,t.exports=n.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/lang/observable":"pydio/lang/observable","pydio/util/lang":"pydio/util/lang"}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n,r=!1;null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=o,n=i,r=!0,l=void 0}};var i,l=e("react"),d=(i=l)&&i.__esModule?i:{default:i},f=e("material-ui"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,d["default"].Component),r(u,[{key:"onChange",value:function(e,t){this.setState({value:t,dirty:!0})}},{key:"save",value:function(){var e=this,t=this.props,n=t.node,r=t.onSave,a=void 0===r?function(){}:r,t=this.state,r=t.value,t=t.cleanOnDelete;n.setValue(r),t?n.setOnDelete("rename-uuid"):n.setOnDelete(""),n.save(function(){e.setState({dirty:!1},a)})}},{key:"remove",value:function(){var e=this;this.props.node.remove(function(){e.props.reloadList()})}},{key:"render",value:function(){var n=this,e=this.props,t=e.pydio,r=e.dataSources,a=e.readonly,o=e.oneLiner,i=e.onClose,l=void 0===i?function(){}:i,u=this.state,s=u.value,e=u.dirty,i=u.cleanOnDelete,u=function(e){return t.MessageHash["ajxp_admin.virtual."+e]||e},c={};r&&r.map(function(e){c[e.Name]=e.Name});r={Path:"",DataSources:c,User:{Name:"",Uuid:"",GroupPath:"",GroupFlat:"",Profile:"",DisplayName:"",Email:"",AuthSource:"",Roles:[]}},s=d.default.createElement(AdminComponents.CodeMirrorField,{mode:"javascript",globalScope:r,value:s,onChange:this.onChange.bind(this),readOnly:a});return o?d.default.createElement("div",{style:{display:"flex"}},d.default.createElement("div",{style:{flex:1,lineHeight:"40px"}},s),d.default.createElement("div",{style:{display:"flex"}},d.default.createElement(f.IconButton,{iconClassName:"mdi mdi-content-save",onClick:this.save.bind(this),disabled:!e,tooltip:"Save"}),d.default.createElement(f.IconButton,{iconClassName:"mdi mdi-close",onClick:function(){return l()},tooltip:"Close"}))):d.default.createElement("div",{style:{backgroundColor:"#f5f5f5",paddingBottom:12}},d.default.createElement("div",{style:{padding:a?"16px 24px 8px":"10px 24px 0",fontWeight:500,display:"flex",alignItems:"center"}},d.default.createElement("div",{style:{flex:1}},u("card.title")),!a&&d.default.createElement(f.FlatButton,{onClick:this.save.bind(this),primary:!0,disabled:!e,label:u("save")})),d.default.createElement("div",{style:{margin:"6px 24px 0 24px",border:"1px solid #e0e0e0"}},s),d.default.createElement("div",{style:{margin:"12px 24px"}},d.default.createElement(f.Checkbox,{disabled:a,checked:i,onCheck:function(e,t){n.setState({cleanOnDelete:t,dirty:!0})},label:u("card.cleanOnDelete")})))}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,e);var t=e.node.getValue(),n=!1;t||(t='// Compute the Path variable that this node must resolve to. \n// Use Ctrl+Space to see the objects available for completion.\nPath = "";',n=!0),this.state={value:t,cleanOnDelete:"rename-uuid"===e.node.getOnDelete(),dirty:n}}n.default=r,t.exports=n.default},{"material-ui":"material-ui",react:"react"}],23:[function(e,T,N){!function(j){!function(){var Vo,Ko="Expected a function",zo="__lodash_hash_undefined__",qo="__lodash_placeholder__",Ho=128,Jo=9007199254740991,$o=NaN,Yo=4294967295,Go=[["ary",Ho],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Zo="[object Arguments]",Qo="[object Array]",Xo="[object Boolean]",ei="[object Date]",ti="[object Error]",ni="[object Function]",ri="[object GeneratorFunction]",ai="[object Map]",oi="[object Number]",ii="[object Object]",li="[object Promise]",ui="[object RegExp]",si="[object Set]",ci="[object String]",di="[object Symbol]",fi="[object WeakMap]",pi="[object ArrayBuffer]",hi="[object DataView]",yi="[object Float32Array]",mi="[object Float64Array]",gi="[object Int8Array]",vi="[object Int16Array]",bi="[object Int32Array]",Si="[object Uint8Array]",_i="[object Uint8ClampedArray]",Ei="[object Uint16Array]",wi="[object Uint32Array]",ki=/\b__p \+= '';/g,Ci=/\b(__p \+=) '' \+/g,xi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oi=/&(?:amp|lt|gt|quot|#39);/g,Pi=/[&<>"']/g,Ai=RegExp(Oi.source),ji=RegExp(Pi.source),Ti=/<%-([\s\S]+?)%>/g,Ni=/<%([\s\S]+?)%>/g,Mi=/<%=([\s\S]+?)%>/g,Ri=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/,Li=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,Wi=RegExp(Ii.source),Fi=/^\s+/,n=/\s/,Bi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ui=/\{\n\/\* \[wrapped with (.+)\] \*/,Vi=/,? & /,Ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zi=/[()=,{}\[\]\/\s]/,qi=/\\(\\)?/g,Hi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ji=/\w*$/,$i=/^[-+]0x[0-9a-f]+$/i,Yi=/^0b[01]+$/i,Gi=/^\[object .+?Constructor\]$/,Zi=/^0o[0-7]+$/i,Qi=/^(?:0|[1-9]\d*)$/,Xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,el=/($^)/,tl=/['\n\r\u2028\u2029\\]/g,e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",r="\\u2700-\\u27bf",a="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",u="[']",s="["+e+"]",c="["+l+"]",d="["+t+"]",f="\\d+",p="["+r+"]",h="["+a+"]",y="[^"+e+l+f+r+a+o+"]",m="\\ud83c[\\udffb-\\udfff]",g="[^"+e+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+o+"]",_="\\u200d",E="(?:"+h+"|"+y+")",l="(?:"+S+"|"+y+")",r="(?:['](?:d|ll|m|re|s|t|ve))?",a="(?:['](?:D|LL|M|RE|S|T|VE))?",o="(?:"+d+"|"+m+")"+"?",y="["+i+"]?",o=y+o+("(?:"+_+"(?:"+[g,v,b].join("|")+")"+y+o+")*"),p="(?:"+[p,v,b].join("|")+")"+o,s="(?:"+[g+d+"?",d,v,b,s].join("|")+")",nl=RegExp(u,"g"),rl=RegExp(d,"g"),w=RegExp(m+"(?="+m+")|"+s+o,"g"),al=RegExp([S+"?"+h+"+"+r+"(?="+[c,S,"$"].join("|")+")",l+"+"+a+"(?="+[c,S+E,"$"].join("|")+")",S+"?"+E+"+"+r,S+"+"+a,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",f,p].join("|"),"g"),k=RegExp("["+_+e+t+i+"]"),ol=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,il=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ll=-1,ul={};ul[yi]=ul[mi]=ul[gi]=ul[vi]=ul[bi]=ul[Si]=ul[_i]=ul[Ei]=ul[wi]=!0,ul[Zo]=ul[Qo]=ul[pi]=ul[Xo]=ul[hi]=ul[ei]=ul[ti]=ul[ni]=ul[ai]=ul[oi]=ul[ii]=ul[ui]=ul[si]=ul[ci]=ul[fi]=!1;var sl={};sl[Zo]=sl[Qo]=sl[pi]=sl[hi]=sl[Xo]=sl[ei]=sl[yi]=sl[mi]=sl[gi]=sl[vi]=sl[bi]=sl[ai]=sl[oi]=sl[ii]=sl[ui]=sl[si]=sl[ci]=sl[di]=sl[Si]=sl[_i]=sl[Ei]=sl[wi]=!0,sl[ti]=sl[ni]=sl[fi]=!1;var C={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cl=parseFloat,dl=parseInt,t="object"==typeof j&&j&&j.Object===Object&&j,i="object"==typeof self&&self&&self.Object===Object&&self,fl=t||i||Function("return this")(),i="object"==typeof N&&N&&!N.nodeType&&N,x=i&&"object"==typeof T&&T&&!T.nodeType&&T,pl=x&&x.exports===i,O=pl&&t.process,t=function(){try{var e=x&&x.require&&x.require("util").types;return e?e:O&&O.binding&&O.binding("util")}catch(e){}}(),hl=t&&t.isArrayBuffer,yl=t&&t.isDate,ml=t&&t.isMap,gl=t&&t.isRegExp,vl=t&&t.isSet,bl=t&&t.isTypedArray;function Sl(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function _l(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(r,i,n(i),e)}return r}function El(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function wl(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function kl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Cl(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}function xl(e,t){return!!(null==e?0:e.length)&&-1<Dl(e,t,0)}function Ol(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Pl(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Al(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function jl(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}function Tl(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Nl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var P=Fl("length");function Ml(e,r,t){var a;return t(e,function(e,t,n){if(r(e,t,n))return a=t,!1}),a}function Rl(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function Dl(e,t,n){return t==t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Rl(e,Il,n)}function Ll(e,t,n,r){for(var a=n-1,o=e.length;++a<o;)if(r(e[a],t))return a;return-1}function Il(e){return e!=e}function Wl(e,t){var n=null==e?0:e.length;return n?Ul(e,t)/n:$o}function Fl(t){return function(e){return null==e?Vo:e[t]}}function A(t){return function(e){return null==t?Vo:t[e]}}function Bl(e,r,a,o,t){return t(e,function(e,t,n){a=o?(o=!1,e):r(a,e,t,n)}),a}function Ul(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==Vo&&(n=n===Vo?o:n+o)}return n}function Vl(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kl(e){return e&&e.slice(0,ou(e)+1).replace(Fi,"")}function zl(t){return function(e){return t(e)}}function ql(t,e){return Pl(e,function(e){return t[e]})}function Hl(e,t){return e.has(t)}function Jl(e,t){for(var n=-1,r=e.length;++n<r&&-1<Dl(t,e[n],0););return n}function $l(e,t){for(var n=e.length;n--&&-1<Dl(t,e[n],0););return n}var Yl=A({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Gl=A({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zl(e){return"\\"+C[e]}function Ql(e){return k.test(e)}function Xl(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function eu(t,n){return function(e){return t(n(e))}}function tu(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n];i!==t&&i!==qo||(e[n]=qo,o[a++]=n)}return o}function nu(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function ru(e){return(Ql(e)?function(e){var t=w.lastIndex=0;for(;w.test(e);)++t;return t}:P)(e)}function au(e){return Ql(e)?e.match(w)||[]:e.split("")}function ou(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}var iu=A({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var lu=function e(t){var w=(t=null==t?fl:lu.defaults(fl.Object(),t,lu.pick(fl,il))).Array,n=t.Date,d=t.Error,f=t.Function,a=t.Math,y=t.Object,p=t.RegExp,c=t.String,v=t.TypeError,o=w.prototype,r=f.prototype,h=y.prototype,i=t["__core-js_shared__"],l=r.toString,b=h.hasOwnProperty,u=0,s=(Mo=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+Mo:"",m=h.toString,g=l.call(y),S=fl._,_=p("^"+l.call(b).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=pl?t.Buffer:Vo,k=t.Symbol,C=t.Uint8Array,x=E?E.allocUnsafe:Vo,O=eu(y.getPrototypeOf,y),P=y.create,A=h.propertyIsEnumerable,j=o.splice,T=k?k.isConcatSpreadable:Vo,N=k?k.iterator:Vo,M=k?k.toStringTag:Vo,R=function(){try{var e=Vn(y,"defineProperty");return e({},"",{}),e}catch(e){}}(),D=t.clearTimeout!==fl.clearTimeout&&t.clearTimeout,L=n&&n.now!==fl.Date.now&&n.now,I=t.setTimeout!==fl.setTimeout&&t.setTimeout,W=a.ceil,F=a.floor,B=y.getOwnPropertySymbols,U=E?E.isBuffer:Vo,V=t.isFinite,K=o.join,z=eu(y.keys,y),q=a.max,H=a.min,J=n.now,$=t.parseInt,Y=a.random,G=o.reverse,Z=Vn(t,"DataView"),Q=Vn(t,"Map"),X=Vn(t,"Promise"),ee=Vn(t,"Set"),te=Vn(t,"WeakMap"),ne=Vn(y,"create"),re=te&&new te,ae={},oe=mr(Z),ie=mr(Q),le=mr(X),ue=mr(ee),se=mr(te),ce=k?k.prototype:Vo,de=ce?ce.valueOf:Vo,fe=ce?ce.toString:Vo;function pe(e){if(Ma(e)&&!Ea(e)&&!(e instanceof ve)){if(e instanceof ge)return e;if(b.call(e,"__wrapped__"))return gr(e)}return new ge(e)}var he=function(e){if(!Na(e))return{};if(P)return P(e);ye.prototype=e;e=new ye;return ye.prototype=Vo,e};function ye(){}function me(){}function ge(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Vo}function ve(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Yo,this.__views__=[]}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new _e;++t<n;)this.add(e[t])}function we(e){e=this.__data__=new Se(e);this.size=e.size}function ke(e,t){var n,r=Ea(e),a=!r&&_a(e),o=!r&&!a&&xa(e),i=!r&&!a&&!o&&Ua(e),l=r||a||o||i,u=l?Vl(e.length,c):[],s=u.length;for(n in e)!t&&!b.call(e,n)||l&&("length"==n||o&&("offset"==n||"parent"==n)||i&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Yn(n,s))||u.push(n);return u}function Ce(e){var t=e.length;return t?e[Et(0,t-1)]:Vo}function xe(e,t){return dr(rn(e),De(t,0,e.length))}function Oe(e){return dr(rn(e))}function Pe(e,t,n){(n===Vo||va(e[t],n))&&(n!==Vo||t in e)||Me(e,t,n)}function Ae(e,t,n){var r=e[t];b.call(e,t)&&va(r,n)&&(n!==Vo||t in e)||Me(e,t,n)}function je(e,t){for(var n=e.length;n--;)if(va(e[n][0],t))return n;return-1}function Te(e,r,a,o){return Be(e,function(e,t,n){r(o,e,a(e),n)}),o}function Ne(e,t){return e&&an(t,so(t),e)}function Me(e,t,n){"__proto__"==t&&R?R(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Re(e,t){for(var n=-1,r=t.length,a=w(r),o=null==e;++n<r;)a[n]=o?Vo:ao(e,t[n]);return a}function De(e,t,n){return e==e&&(n!==Vo&&(e=e<=n?e:n),t!==Vo&&(e=t<=e?e:t)),e}function Le(n,r,a,e,t,o){var i,l=1&r,u=2&r,s=4&r;if((i=a?t?a(n,e,t,o):a(n):i)!==Vo)return i;if(!Na(n))return n;var c,d,f=Ea(n);if(f){if(i=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&b.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!l)return rn(n,i)}else{var p=qn(n),e=p==ni||p==ri;if(xa(n))return Zt(n,l);if(p==ii||p==Zo||e&&!t){if(i=u||e?{}:Jn(n),!l)return u?(e=c=n,d=(d=i)&&an(e,co(e),d),an(c,zn(c),d)):(d=Ne(i,c=n),an(c,Kn(c),d))}else{if(!sl[p])return t?n:{};i=function(e,t,n){var r=e.constructor;switch(t){case pi:return Qt(e);case Xo:case ei:return new r(+e);case hi:return function(e,t){t=t?Qt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case yi:case mi:case gi:case vi:case bi:case Si:case _i:case Ei:case wi:return Xt(e,n);case ai:return new r;case oi:case ci:return new r(e);case ui:return function(e){var t=new e.constructor(e.source,Ji.exec(e));return t.lastIndex=e.lastIndex,t}(e);case si:return new r;case di:return function(e){return de?y(de.call(e)):{}}(e)}}(n,p,l)}}l=(o=o||new we).get(n);if(l)return l;o.set(n,i),Wa(n)?n.forEach(function(e){i.add(Le(e,r,a,e,n,o))}):Ra(n)&&n.forEach(function(e,t){i.set(t,Le(e,r,a,t,n,o))});var h=f?Vo:(s?u?Dn:Rn:u?co:so)(n);return El(h||n,function(e,t){h&&(e=n[t=e]),Ae(i,t,Le(e,r,a,t,n,o))}),i}function Ie(e,t,n){var r=n.length;if(null==e)return!r;for(e=y(e);r--;){var a=n[r],o=t[a],i=e[a];if(i===Vo&&!(a in e)||!o(i))return!1}return!0}function We(e,t,n){if("function"!=typeof e)throw new v(Ko);return lr(function(){e.apply(Vo,n)},t)}function Fe(e,t,n,r){var a=-1,o=xl,i=!0,l=e.length,u=[],s=t.length;if(!l)return u;n&&(t=Pl(t,zl(n))),r?(o=Ol,i=!1):200<=t.length&&(o=Hl,i=!1,t=new Ee(t));e:for(;++a<l;){var c=e[a],d=null==n?c:n(c),c=r||0!==c?c:0;if(i&&d==d){for(var f=s;f--;)if(t[f]===d)continue e;u.push(c)}else o(t,d,r)||u.push(c)}return u}pe.templateSettings={escape:Ti,evaluate:Ni,interpolate:Mi,variable:"",imports:{_:pe}},(pe.prototype=me.prototype).constructor=pe,(ge.prototype=he(me.prototype)).constructor=ge,(ve.prototype=he(me.prototype)).constructor=ve,be.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},be.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},be.prototype.get=function(e){var t=this.__data__;if(ne){var n=t[e];return n===zo?Vo:n}return b.call(t,e)?t[e]:Vo},be.prototype.has=function(e){var t=this.__data__;return ne?t[e]!==Vo:b.call(t,e)},be.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&t===Vo?zo:t,this},Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__;return!((e=je(t,e))<0)&&(e==t.length-1?t.pop():j.call(t,e,1),--this.size,!0)},Se.prototype.get=function(e){var t=this.__data__;return(e=je(t,e))<0?Vo:t[e][1]},Se.prototype.has=function(e){return-1<je(this.__data__,e)},Se.prototype.set=function(e,t){var n=this.__data__,r=je(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},_e.prototype.clear=function(){this.size=0,this.__data__={hash:new be,map:new(Q||Se),string:new be}},_e.prototype.delete=function(e){return e=Bn(this,e).delete(e),this.size-=e?1:0,e},_e.prototype.get=function(e){return Bn(this,e).get(e)},_e.prototype.has=function(e){return Bn(this,e).has(e)},_e.prototype.set=function(e,t){var n=Bn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,zo),this},Ee.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new Se,this.size=0},we.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var r=n.__data__;if(!Q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};var Be=un($e),Ue=un(Ye,!0);function Ve(e,r){var a=!0;return Be(e,function(e,t,n){return a=!!r(e,t,n)}),a}function Ke(e,t,n){for(var r=-1,a=e.length;++r<a;){var o,i,l=e[r],u=t(l);null!=u&&(o===Vo?u==u&&!Ba(u):n(u,o))&&(o=u,i=l)}return i}function ze(e,r){var a=[];return Be(e,function(e,t,n){r(e,t,n)&&a.push(e)}),a}function qe(e,t,n,r,a){var o=-1,i=e.length;for(n=n||$n,a=a||[];++o<i;){var l=e[o];0<t&&n(l)?1<t?qe(l,t-1,n,r,a):Al(a,l):r||(a[a.length]=l)}return a}var He=sn(),Je=sn(!0);function $e(e,t){return e&&He(e,t,so)}function Ye(e,t){return e&&Je(e,t,so)}function Ge(t,e){return Cl(e,function(e){return Aa(t[e])})}function Ze(e,t){for(var n=0,r=(t=Jt(t,e)).length;null!=e&&n<r;)e=e[yr(t[n++])];return n&&n==r?e:Vo}function Qe(e,t,n){t=t(e);return Ea(e)?t:Al(t,n(e))}function Xe(e){return null==e?e===Vo?"[object Undefined]":"[object Null]":M&&M in y(e)?function(e){var t=b.call(e,M),n=e[M];try{e[M]=Vo;var r=!0}catch(e){}var a=m.call(e);r&&(t?e[M]=n:delete e[M]);return a}(e):(e=e,m.call(e))}function et(e,t){return t<e}function tt(e,t){return null!=e&&b.call(e,t)}function nt(e,t){return null!=e&&t in y(e)}function rt(e,t,n){for(var r=n?Ol:xl,a=e[0].length,o=e.length,i=o,l=w(o),u=1/0,s=[];i--;){var c=e[i];i&&t&&(c=Pl(c,zl(t))),u=H(c.length,u),l[i]=!n&&(t||120<=a&&120<=c.length)?new Ee(i&&c):Vo}var c=e[0],d=-1,f=l[0];e:for(;++d<a&&s.length<u;){var p=c[d],h=t?t(p):p,p=n||0!==p?p:0;if(!(f?Hl(f,h):r(s,h,n))){for(i=o;--i;){var y=l[i];if(!(y?Hl(y,h):r(e[i],h,n)))continue e}f&&f.push(h),s.push(p)}}return s}function at(e,t,n){t=null==(e=ar(e,t=Jt(t,e)))?e:e[yr(Pr(t))];return null==t?Vo:Sl(t,e,n)}function ot(e){return Ma(e)&&Xe(e)==Zo}function it(e,t,n,r,a){return e===t||(null==e||null==t||!Ma(e)&&!Ma(t)?e!=e&&t!=t:function(e,t,n,r,a,o){var i=Ea(e),l=Ea(t),u=i?Qo:qn(e),s=l?Qo:qn(t),c=(u=u==Zo?ii:u)==ii,l=(s=s==Zo?ii:s)==ii,s=u==s;if(s&&xa(e)){if(!xa(t))return!1;c=!(i=!0)}if(s&&!c)return o=o||new we,i||Ua(e)?Nn(e,t,n,r,a,o):function(e,t,n,r,a,o,i){switch(n){case hi:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pi:return e.byteLength==t.byteLength&&o(new C(e),new C(t))?!0:!1;case Xo:case ei:case oi:return va(+e,+t);case ti:return e.name==t.name&&e.message==t.message;case ui:case ci:return e==t+"";case ai:var l=Xl;case si:var u=1&r;if(l=l||nu,e.size!=t.size&&!u)return!1;u=i.get(e);if(u)return u==t;r|=2,i.set(e,t);l=Nn(l(e),l(t),r,a,o,i);return i.delete(e),l;case di:if(de)return de.call(e)==de.call(t)}return!1}(e,t,u,n,r,a,o);if(!(1&n)){c=c&&b.call(e,"__wrapped__"),l=l&&b.call(t,"__wrapped__");if(c||l){c=c?e.value():e,l=l?t.value():t;return o=o||new we,a(c,l,n,r,o)}}return s&&(o=o||new we,function(e,t,n,r,a,o){var i=1&n,l=Rn(e),u=l.length,s=Rn(t).length;if(u!=s&&!i)return!1;var c=u;for(;c--;){var d=l[c];if(!(i?d in t:b.call(t,d)))return!1}var f=o.get(e),s=o.get(t);if(f&&s)return f==t&&s==e;var p=!0;o.set(e,t),o.set(t,e);var h=i;for(;++c<u;){d=l[c];var y,m=e[d],g=t[d];if(!((y=r?i?r(g,m,d,t,e,o):r(m,g,d,e,t,o):y)===Vo?m===g||a(m,g,n,r,o):y)){p=!1;break}h=h||"constructor"==d}p&&!h&&(f=e.constructor,s=t.constructor,f!=s&&"constructor"in e&&"constructor"in t&&!("function"==typeof f&&f instanceof f&&"function"==typeof s&&s instanceof s)&&(p=!1));return o.delete(e),o.delete(t),p}(e,t,n,r,a,o))}(e,t,n,r,it,a))}function lt(e,t,n,r){var a=n.length,o=a,i=!r;if(null==e)return!o;for(e=y(e);a--;){var l=n[a];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var u=(l=n[a])[0],s=e[u],c=l[1];if(i&&l[2]){if(s===Vo&&!(u in e))return!1}else{var d,f=new we;if(!((d=r?r(s,c,u,e,t,f):d)===Vo?it(c,s,3,r,f):d))return!1}}return!0}function ut(e){return!(!Na(e)||(t=e,s&&s in t))&&(Aa(e)?_:Gi).test(mr(e));var t}function st(e){return"function"==typeof e?e:null==e?Ro:"object"==typeof e?Ea(e)?yt(e[0],e[1]):ht(e):Wo(e)}function ct(e){if(!er(e))return z(e);var t,n=[];for(t in y(e))b.call(e,t)&&"constructor"!=t&&n.push(t);return n}function dt(e){if(!Na(e))return function(e){var t=[];if(null!=e)for(var n in y(e))t.push(n);return t}(e);var t,n=er(e),r=[];for(t in e)("constructor"!=t||!n&&b.call(e,t))&&r.push(t);return r}function ft(e,t){return e<t}function pt(e,r){var a=-1,o=ka(e)?w(e.length):[];return Be(e,function(e,t,n){o[++a]=r(e,t,n)}),o}function ht(t){var n=Un(t);return 1==n.length&&n[0][2]?nr(n[0][0],n[0][1]):function(e){return e===t||lt(e,t,n)}}function yt(n,r){return Zn(n)&&tr(r)?nr(yr(n),r):function(e){var t=ao(e,n);return t===Vo&&t===r?oo(e,n):it(r,t,3)}}function mt(r,a,o,i,l){r!==a&&He(a,function(e,t){var n;l=l||new we,Na(e)?function(e,t,n,r,a,o,i){var l=or(e,n),u=or(t,n),s=i.get(u);if(s)return Pe(e,n,s);var c=o?o(l,u,n+"",e,t,i):Vo,d=c===Vo;{var f;d&&(f=Ea(u),s=!f&&xa(u),t=!f&&!s&&Ua(u),c=u,f||s||t?c=Ea(l)?l:Ca(l)?rn(l):s?Zt(u,!(d=!1)):t?Xt(u,!(d=!1)):[]:La(u)||_a(u)?_a(c=l)?c=Ya(l):Na(l)&&!Aa(l)||(c=Jn(u)):d=!1)}d&&(i.set(u,c),a(c,u,r,o,i),i.delete(u));Pe(e,n,c)}(r,a,t,o,mt,i,l):(n=i?i(or(r,t),e,t+"",r,a,l):Vo,Pe(r,t,n=n===Vo?e:n))},co)}function gt(e,t){var n=e.length;if(n)return Yn(t+=t<0?n:0,n)?e[t]:Vo}function vt(e,r,n){r=r.length?Pl(r,function(t){return Ea(t)?function(e){return Ze(e,1===t.length?t[0]:t)}:t}):[Ro];var a=-1;return r=Pl(r,zl(Fn())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(pt(e,function(t,e,n){return{criteria:Pl(r,function(e){return e(t)}),index:++a,value:t}}),function(e,t){return function(e,t,n){var r=-1,a=e.criteria,o=t.criteria,i=a.length,l=n.length;for(;++r<i;){var u=en(a[r],o[r]);if(u){if(l<=r)return u;var s=n[r];return u*("desc"==s?-1:1)}}return e.index-t.index}(e,t,n)})}function bt(e,t,n){for(var r=-1,a=t.length,o={};++r<a;){var i=t[r],l=Ze(e,i);n(l,i)&&Ot(o,Jt(i,e),l)}return o}function St(e,t,n,r){var a=r?Ll:Dl,o=-1,i=t.length,l=e;for(e===t&&(t=rn(t)),n&&(l=Pl(e,zl(n)));++o<i;)for(var u=0,s=t[o],c=n?n(s):s;-1<(u=a(l,c,u,r));)l!==e&&j.call(l,u,1),j.call(e,u,1);return e}function _t(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a,o=t[n];n!=r&&o===a||(Yn(a=o)?j.call(e,o,1):Ft(e,o))}return e}function Et(e,t){return e+F(Y()*(t-e+1))}function wt(e,t){var n="";if(!e||t<1||Jo<t)return n;for(;t%2&&(n+=e),(t=F(t/2))&&(e+=e),t;);return n}function kt(e,t){return ur(rr(e,t,Ro),e+"")}function Ct(e){return Ce(bo(e))}function xt(e,t){e=bo(e);return dr(e,De(t,0,e.length))}function Ot(e,t,n,r){if(!Na(e))return e;for(var a=-1,o=(t=Jt(t,e)).length,i=o-1,l=e;null!=l&&++a<o;){var u,s=yr(t[a]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;a!=i&&(u=l[s],(c=r?r(u,s,l):Vo)===Vo&&(c=Na(u)?u:Yn(t[a+1])?[]:{})),Ae(l,s,c),l=l[s]}return e}var Pt=re?function(e,t){return re.set(e,t),e}:Ro,At=R?function(e,t){return R(e,"toString",{configurable:!0,enumerable:!1,value:No(t),writable:!0})}:Ro;function jt(e){return dr(bo(e))}function Tt(e,t,n){var r=-1,a=e.length;(n=a<n?a:n)<0&&(n+=a),a=n<(t=t<0?a<-t?0:a+t:t)?0:n-t>>>0,t>>>=0;for(var o=w(a);++r<a;)o[r]=e[r+t];return o}function Nt(e,r){var a;return Be(e,function(e,t,n){return!(a=r(e,t,n))}),!!a}function Mt(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var o=r+a>>>1,i=e[o];null!==i&&!Ba(i)&&(n?i<=t:i<t)?r=1+o:a=o}return a}return Rt(e,t,Ro,n)}function Rt(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var i=(t=n(t))!=t,l=null===t,u=Ba(t),s=t===Vo;a<o;){var c=F((a+o)/2),d=n(e[c]),f=d!==Vo,p=null===d,h=d==d,y=Ba(d),d=i?r||h:s?h&&(r||f):l?h&&f&&(r||!p):u?h&&f&&!p&&(r||!y):!p&&!y&&(r?d<=t:d<t);d?a=c+1:o=c}return H(o,4294967294)}function Dt(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i,l=e[n],u=t?t(l):l;n&&va(u,i)||(i=u,o[a++]=0===l?0:l)}return o}function Lt(e){return"number"==typeof e?e:Ba(e)?$o:+e}function It(e){if("string"==typeof e)return e;if(Ea(e))return Pl(e,It)+"";if(Ba(e))return fe?fe.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Wt(e,t,n){var r=-1,a=xl,o=e.length,i=!0,l=[],u=l;if(n)i=!1,a=Ol;else if(200<=o){var s=t?null:xn(e);if(s)return nu(s);i=!1,a=Hl,u=new Ee}else u=t?[]:l;e:for(;++r<o;){var c=e[r],d=t?t(c):c,c=n||0!==c?c:0;if(i&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),l.push(c)}else a(u,d,n)||(u!==l&&u.push(d),l.push(c))}return l}function Ft(e,t){return null==(e=ar(e,t=Jt(t,e)))||delete e[yr(Pr(t))]}function Bt(e,t,n,r){return Ot(e,t,n(Ze(e,t)),r)}function Ut(e,t,n,r){for(var a=e.length,o=r?a:-1;(r?o--:++o<a)&&t(e[o],o,e););return n?Tt(e,r?0:o,r?o+1:a):Tt(e,r?o+1:0,r?a:o)}function Vt(e,t){return jl(t,function(e,t){return t.func.apply(t.thisArg,Al([e],t.args))},e=e instanceof ve?e.value():e)}function Kt(e,t,n){var r=e.length;if(r<2)return r?Wt(e[0]):[];for(var a=-1,o=w(r);++a<r;)for(var i=e[a],l=-1;++l<r;)l!=a&&(o[a]=Fe(o[a]||i,e[l],t,n));return Wt(qe(o,1),t,n)}function zt(e,t,n){for(var r=-1,a=e.length,o=t.length,i={};++r<a;){var l=r<o?t[r]:Vo;n(i,e[r],l)}return i}function qt(e){return Ca(e)?e:[]}function Ht(e){return"function"==typeof e?e:Ro}function Jt(e,t){return Ea(e)?e:Zn(e,t)?[e]:hr(Ga(e))}var $t=kt;function Yt(e,t,n){var r=e.length;return n=n===Vo?r:n,!t&&r<=n?e:Tt(e,t,n)}var Gt=D||function(e){return fl.clearTimeout(e)};function Zt(e,t){if(t)return e.slice();t=e.length,t=x?x(t):new e.constructor(t);return e.copy(t),t}function Qt(e){var t=new e.constructor(e.byteLength);return new C(t).set(new C(e)),t}function Xt(e,t){t=t?Qt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function en(e,t){if(e!==t){var n=e!==Vo,r=null===e,a=e==e,o=Ba(e),i=t!==Vo,l=null===t,u=t==t,s=Ba(t);if(!l&&!s&&!o&&t<e||o&&i&&u&&!l&&!s||r&&i&&u||!n&&u||!a)return 1;if(!r&&!o&&!s&&e<t||s&&n&&a&&!r&&!o||l&&n&&a||!i&&a||!u)return-1}return 0}function tn(e,t,n,r){for(var a=-1,o=e.length,i=n.length,l=-1,u=t.length,s=q(o-i,0),c=w(u+s),d=!r;++l<u;)c[l]=t[l];for(;++a<i;)(d||a<o)&&(c[n[a]]=e[a]);for(;s--;)c[l++]=e[a++];return c}function nn(e,t,n,r){for(var a=-1,o=e.length,i=-1,l=n.length,u=-1,s=t.length,c=q(o-l,0),d=w(c+s),f=!r;++a<c;)d[a]=e[a];for(var p=a;++u<s;)d[p+u]=t[u];for(;++i<l;)(f||a<o)&&(d[p+n[i]]=e[a++]);return d}function rn(e,t){var n=-1,r=e.length;for(t=t||w(r);++n<r;)t[n]=e[n];return t}function an(e,t,n,r){var a=!n;n=n||{};for(var o=-1,i=t.length;++o<i;){var l=t[o],u=r?r(n[l],e[l],l,n,e):Vo;(a?Me:Ae)(n,l,u=u===Vo?e[l]:u)}return n}function on(a,o){return function(e,t){var n=Ea(e)?_l:Te,r=o?o():{};return n(e,a,Fn(t,2),r)}}function ln(l){return kt(function(e,t){var n=-1,r=t.length,a=1<r?t[r-1]:Vo,o=2<r?t[2]:Vo,a=3<l.length&&"function"==typeof a?(r--,a):Vo;for(o&&Gn(t[0],t[1],o)&&(a=r<3?Vo:a,r=1),e=y(e);++n<r;){var i=t[n];i&&l(e,i,n,a)}return e})}function un(o,i){return function(e,t){if(null==e)return e;if(!ka(e))return o(e,t);for(var n=e.length,r=i?n:-1,a=y(e);(i?r--:++r<n)&&!1!==t(a[r],r,a););return e}}function sn(u){return function(e,t,n){for(var r=-1,a=y(e),o=n(e),i=o.length;i--;){var l=o[u?i:++r];if(!1===t(a[l],l,a))break}return e}}function cn(r){return function(e){var t=Ql(e=Ga(e))?au(e):Vo,n=t?t[0]:e.charAt(0),e=t?Yt(t,1).join(""):e.slice(1);return n[r]()+e}}function dn(t){return function(e){return jl(jo(Eo(e).replace(nl,"")),t,"")}}function fn(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=he(r.prototype),n=r.apply(t,e);return Na(n)?n:t}}function pn(o,i,l){var u=fn(o);return function e(){for(var t=arguments.length,n=w(t),r=t,a=Wn(e);r--;)n[r]=arguments[r];a=t<3&&n[0]!==a&&n[t-1]!==a?[]:tu(n,a);return(t-=a.length)<l?kn(o,i,mn,e.placeholder,Vo,n,a,Vo,Vo,l-t):Sl(this&&this!==fl&&this instanceof e?u:o,this,n)}}function hn(o){return function(e,t,n){var r,a=y(e);ka(e)||(r=Fn(t,3),e=so(e),t=function(e){return r(a[e],e,a)});n=o(e,t,n);return-1<n?a[r?e[n]:n]:Vo}}function yn(u){return Mn(function(a){var o=a.length,e=o,t=ge.prototype.thru;for(u&&a.reverse();e--;){var n=a[e];if("function"!=typeof n)throw new v(Ko);t&&!l&&"wrapper"==In(n)&&(l=new ge([],!0))}for(e=l?e:o;++e<o;)var r=In(n=a[e]),i="wrapper"==r?Ln(n):Vo,l=i&&Qn(i[0])&&424==i[1]&&!i[4].length&&1==i[9]?l[In(i[0])].apply(l,i[3]):1==n.length&&Qn(n)?l[r]():l.thru(n);return function(){var e=arguments,t=e[0];if(l&&1==e.length&&Ea(t))return l.plant(t).value();for(var n=0,r=o?a[n].apply(this,e):t;++n<o;)r=a[n].call(this,r);return r}})}function mn(l,u,s,c,d,f,p,h,y,m){var g=u&Ho,v=1&u,b=2&u,S=24&u,_=512&u,E=b?Vo:fn(l);return function e(){for(var t,n=w(i=arguments.length),r=i;r--;)n[r]=arguments[r];if(S&&(t=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(n,o=Wn(e))),c&&(n=tn(n,c,d,S)),f&&(n=nn(n,f,p,S)),i-=t,S&&i<m){var a=tu(n,o);return kn(l,u,mn,e.placeholder,s,n,a,h,y,m-i)}var o=v?s:this,a=b?o[l]:l,i=n.length;return h?n=function(e,t){for(var n=e.length,r=H(t.length,n),a=rn(e);r--;){var o=t[r];e[r]=Yn(o,n)?a[o]:Vo}return e}(n,h):_&&1<i&&n.reverse(),g&&y<i&&(n.length=y),(a=this&&this!==fl&&this instanceof e?E||fn(a):a).apply(o,n)}}function gn(n,i){return function(e,t){return e=e,r=n,a=i(t),o={},$e(e,function(e,t,n){r(o,a(e),t,n)}),o;var r,a,o}}function vn(r,a){return function(e,t){var n;if(e===Vo&&t===Vo)return a;if(e!==Vo&&(n=e),t!==Vo){if(n===Vo)return t;t="string"==typeof e||"string"==typeof t?(e=It(e),It(t)):(e=Lt(e),Lt(t)),n=r(e,t)}return n}}function bn(r){return Mn(function(e){return e=Pl(e,zl(Fn())),kt(function(t){var n=this;return r(e,function(e){return Sl(e,n,t)})})})}function Sn(e,t){var n=(t=t===Vo?" ":It(t)).length;if(n<2)return n?wt(t,e):t;n=wt(t,W(e/ru(t)));return Ql(t)?Yt(au(n),0,e).join(""):n.slice(0,e)}function _n(l,e,u,s){var c=1&e,d=fn(l);return function e(){for(var t=-1,n=arguments.length,r=-1,a=s.length,o=w(a+n),i=this&&this!==fl&&this instanceof e?d:l;++r<a;)o[r]=s[r];for(;n--;)o[r++]=arguments[++t];return Sl(i,c?u:this,o)}}function En(r){return function(e,t,n){return n&&"number"!=typeof n&&Gn(e,t,n)&&(t=n=Vo),e=qa(e),t===Vo?(t=e,e=0):t=qa(t),function(e,t,n,r){for(var a=-1,o=q(W((t-e)/(n||1)),0),i=w(o);o--;)i[r?o:++a]=e,e+=n;return i}(e,t,n=n===Vo?e<t?1:-1:qa(n),r)}}function wn(n){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=$a(e),t=$a(t)),n(e,t)}}function kn(e,t,n,r,a,o,i,l,u,s){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);s=[e,t,a,c?o:Vo,c?i:Vo,c?Vo:o,c?Vo:i,l,u,s],n=n.apply(Vo,s);return Qn(e)&&ir(n,s),n.placeholder=r,sr(n,e,t)}function Cn(e){var r=a[e];return function(e,t){if(e=$a(e),(t=null==t?0:H(Ha(t),292))&&V(e)){var n=(Ga(e)+"e").split("e");return+((n=(Ga(r(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return r(e)}}var xn=ee&&1/nu(new ee([,-0]))[1]==1/0?function(e){return new ee(e)}:Io;function On(o){return function(e){var t,n,r,a=qn(e);return a==ai?Xl(e):a==si?(a=e,t=-1,n=Array(a.size),a.forEach(function(e){n[++t]=[e,e]}),n):Pl(o(r=e),function(e){return[e,r[e]]})}}function Pn(e,t,n,r,a,o,i,l){var u=2&t;if(!u&&"function"!=typeof e)throw new v(Ko);var s,c,d=r?r.length:0;d||(t&=-97,r=a=Vo),i=i===Vo?i:q(Ha(i),0),l=l===Vo?l:Ha(l),d-=a?a.length:0,64&t&&(s=r,c=a,r=a=Vo);var f,p,h,y,m=u?Vo:Ln(e),i=[e,t,n,r,a,s,c,o,i,l];m&&function(e,t){var n=e[1],r=t[1],a=n|r,o=a<131,i=r==Ho&&8==n||r==Ho&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!i)return;1&r&&(e[2]=t[2],a|=1&n?0:4);n=t[3];{var l;n&&(l=e[3],e[3]=l?tn(l,n,t[4]):n,e[4]=l?tu(e[3],qo):t[4])}(n=t[5])&&(l=e[5],e[5]=l?nn(l,n,t[6]):n,e[6]=l?tu(e[5],qo):t[6]);(n=t[7])&&(e[7]=n);r&Ho&&(e[8]=null==e[8]?t[8]:H(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(i,m),e=i[0],t=i[1],n=i[2],r=i[3],a=i[4],!(l=i[9]=i[9]===Vo?u?0:e.length:q(i[9]-d,0))&&24&t&&(t&=-25);n=t&&1!=t?8==t||16==t?pn(e,t,l):32!=t&&33!=t||a.length?mn.apply(Vo,i):_n(e,t,n,r):(p=n,h=1&t,y=fn(f=e),function e(){return(this&&this!==fl&&this instanceof e?y:f).apply(h?p:this,arguments)});return sr((m?Pt:ir)(n,i),e,t)}function An(e,t,n,r){return e===Vo||va(e,h[n])&&!b.call(r,n)?t:e}function jn(e,t,n,r,a,o){return Na(e)&&Na(t)&&(o.set(t,e),mt(e,t,Vo,jn,o),o.delete(t)),e}function Tn(e){return La(e)?Vo:e}function Nn(e,t,n,r,a,o){var i=1&n,l=e.length,u=t.length;if(l!=u&&!(i&&l<u))return!1;var s=o.get(e),u=o.get(t);if(s&&u)return s==t&&u==e;var c=-1,d=!0,f=2&n?new Ee:Vo;for(o.set(e,t),o.set(t,e);++c<l;){var p,h=e[c],y=t[c];if((p=r?i?r(y,h,c,t,e,o):r(h,y,c,e,t,o):p)!==Vo){if(p)continue;d=!1;break}if(f){if(!Nl(t,function(e,t){return!Hl(f,t)&&(h===e||a(h,e,n,r,o))&&f.push(t)})){d=!1;break}}else if(h!==y&&!a(h,y,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Mn(e){return ur(rr(e,Vo,wr),e+"")}function Rn(e){return Qe(e,so,Kn)}function Dn(e){return Qe(e,co,zn)}var Ln=re?function(e){return re.get(e)}:Io;function In(e){for(var t=e.name+"",n=ae[t],r=b.call(ae,t)?n.length:0;r--;){var a=n[r],o=a.func;if(null==o||o==e)return a.name}return t}function Wn(e){return(b.call(pe,"placeholder")?pe:e).placeholder}function Fn(){var e=(e=pe.iteratee||Do)===Do?st:e;return arguments.length?e(arguments[0],arguments[1]):e}function Bn(e,t){var n,r=e.__data__;return("string"==(e=typeof(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Un(e){for(var t=so(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,tr(a)]}return t}function Vn(e,t){t=t,t=null==(e=e)?Vo:e[t];return ut(t)?t:Vo}var Kn=B?function(t){return null==t?[]:(t=y(t),Cl(B(t),function(e){return A.call(t,e)}))}:Fo,zn=B?function(e){for(var t=[];e;)Al(t,Kn(e)),e=O(e);return t}:Fo,qn=Xe;function Hn(e,t,n){for(var r=-1,a=(t=Jt(t,e)).length,o=!1;++r<a;){var i=yr(t[r]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&Ta(a)&&Yn(i,a)&&(Ea(e)||_a(e))}function Jn(e){return"function"!=typeof e.constructor||er(e)?{}:he(O(e))}function $n(e){return Ea(e)||_a(e)||!!(T&&e&&e[T])}function Yn(e,t){var n=typeof e;return!!(t=null==t?Jo:t)&&("number"==n||"symbol"!=n&&Qi.test(e))&&-1<e&&e%1==0&&e<t}function Gn(e,t,n){if(Na(n)){var r=typeof t;return("number"==r?ka(n)&&Yn(t,n.length):"string"==r&&t in n)&&va(n[t],e)}}function Zn(e,t){if(!Ea(e)){var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Ba(e)||(Di.test(e)||!Ri.test(e)||null!=t&&e in y(t))}}function Qn(e){var t=In(e),n=pe[t];if("function"==typeof n&&t in ve.prototype){if(e===n)return 1;n=Ln(n);return n&&e===n[0]}}(Z&&qn(new Z(new ArrayBuffer(1)))!=hi||Q&&qn(new Q)!=ai||X&&qn(X.resolve())!=li||ee&&qn(new ee)!=si||te&&qn(new te)!=fi)&&(qn=function(e){var t=Xe(e),e=t==ii?e.constructor:Vo,e=e?mr(e):"";if(e)switch(e){case oe:return hi;case ie:return ai;case le:return li;case ue:return si;case se:return fi}return t});var Xn=i?Aa:Bo;function er(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||h)}function tr(e){return e==e&&!Na(e)}function nr(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==Vo||t in y(e)))}}function rr(o,i,l){return i=q(i===Vo?o.length-1:i,0),function(){for(var e=arguments,t=-1,n=q(e.length-i,0),r=w(n);++t<n;)r[t]=e[i+t];for(var t=-1,a=w(i+1);++t<i;)a[t]=e[t];return a[i]=l(r),Sl(o,this,a)}}function ar(e,t){return t.length<2?e:Ze(e,Tt(t,0,-1))}function or(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ir=cr(Pt),lr=I||function(e,t){return fl.setTimeout(e,t)},ur=cr(At);function sr(e,t,n){var r,a,t=t+"";return ur(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(Bi,"{\n/* [wrapped with "+t+"] */\n")}(t,(r=(t=(t=t).match(Ui))?t[1].split(Vi):[],a=n,El(Go,function(e){var t="_."+e[0];a&e[1]&&!xl(r,t)&&r.push(t)}),r.sort())))}function cr(n){var r=0,a=0;return function(){var e=J(),t=16-(e-a);if(a=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(Vo,arguments)}}function dr(e,t){var n=-1,r=e.length,a=r-1;for(t=t===Vo?r:t;++n<t;){var o=Et(n,a),i=e[o];e[o]=e[n],e[n]=i}return e.length=t,e}var fr,pr,hr=(pr=(fr=fa(fr=function(e){var a=[];return 46===e.charCodeAt(0)&&a.push(""),e.replace(Li,function(e,t,n,r){a.push(n?r.replace(qi,"$1"):t||e)}),a},function(e){return 500===pr.size&&pr.clear(),e})).cache,fr);function yr(e){if("string"==typeof e||Ba(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function mr(e){if(null!=e){try{return l.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function gr(e){if(e instanceof ve)return e.clone();var t=new ge(e.__wrapped__,e.__chain__);return t.__actions__=rn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var vr=kt(function(e,t){return Ca(e)?Fe(e,qe(t,1,Ca,!0)):[]}),br=kt(function(e,t){var n=Pr(t);return Ca(n)&&(n=Vo),Ca(e)?Fe(e,qe(t,1,Ca,!0),Fn(n,2)):[]}),Sr=kt(function(e,t){var n=Pr(t);return Ca(n)&&(n=Vo),Ca(e)?Fe(e,qe(t,1,Ca,!0),Vo,n):[]});function _r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;n=null==n?0:Ha(n);return n<0&&(n=q(r+n,0)),Rl(e,Fn(t,3),n)}function Er(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==Vo&&(a=Ha(n),a=n<0?q(r+a,0):H(a,r-1)),Rl(e,Fn(t,3),a,!0)}function wr(e){return(null==e?0:e.length)?qe(e,1):[]}function kr(e){return e&&e.length?e[0]:Vo}var Cr=kt(function(e){var t=Pl(e,qt);return t.length&&t[0]===e[0]?rt(t):[]}),xr=kt(function(e){var t=Pr(e),n=Pl(e,qt);return t===Pr(n)?t=Vo:n.pop(),n.length&&n[0]===e[0]?rt(n,Fn(t,2)):[]}),Or=kt(function(e){var t=Pr(e),n=Pl(e,qt);return(t="function"==typeof t?t:Vo)&&n.pop(),n.length&&n[0]===e[0]?rt(n,Vo,t):[]});function Pr(e){var t=null==e?0:e.length;return t?e[t-1]:Vo}var Ar=kt(jr);function jr(e,t){return e&&e.length&&t&&t.length?St(e,t):e}var Tr=Mn(function(e,t){var n=null==e?0:e.length,r=Re(e,t);return _t(e,Pl(t,function(e){return Yn(e,n)?+e:e}).sort(en)),r});function Nr(e){return null==e?e:G.call(e)}var Mr=kt(function(e){return Wt(qe(e,1,Ca,!0))}),Rr=kt(function(e){var t=Pr(e);return Ca(t)&&(t=Vo),Wt(qe(e,1,Ca,!0),Fn(t,2))}),Dr=kt(function(e){var t="function"==typeof(t=Pr(e))?t:Vo;return Wt(qe(e,1,Ca,!0),Vo,t)});function Lr(t){if(!t||!t.length)return[];var n=0;return t=Cl(t,function(e){return Ca(e)&&(n=q(e.length,n),1)}),Vl(n,function(e){return Pl(t,Fl(e))})}function Ir(e,t){if(!e||!e.length)return[];e=Lr(e);return null==t?e:Pl(e,function(e){return Sl(t,Vo,e)})}var Wr=kt(function(e,t){return Ca(e)?Fe(e,t):[]}),Fr=kt(function(e){return Kt(Cl(e,Ca))}),Br=kt(function(e){var t=Pr(e);return Ca(t)&&(t=Vo),Kt(Cl(e,Ca),Fn(t,2))}),Ur=kt(function(e){var t="function"==typeof(t=Pr(e))?t:Vo;return Kt(Cl(e,Ca),Vo,t)}),Vr=kt(Lr);var Kr=kt(function(e){var t=e.length,t="function"==typeof(t=1<t?e[t-1]:Vo)?(e.pop(),t):Vo;return Ir(e,t)});function zr(e){e=pe(e);return e.__chain__=!0,e}function qr(e,t){return t(e)}var Hr=Mn(function(t){function e(e){return Re(e,t)}var n=t.length,r=n?t[0]:0,a=this.__wrapped__;return!(1<n||this.__actions__.length)&&a instanceof ve&&Yn(r)?((a=a.slice(r,+r+(n?1:0))).__actions__.push({func:qr,args:[e],thisArg:Vo}),new ge(a,this.__chain__).thru(function(e){return n&&!e.length&&e.push(Vo),e})):this.thru(e)});var Jr=on(function(e,t,n){b.call(e,n)?++e[n]:Me(e,n,1)});var $r=hn(_r),Yr=hn(Er);function Gr(e,t){return(Ea(e)?El:Be)(e,Fn(t,3))}function Zr(e,t){return(Ea(e)?wl:Ue)(e,Fn(t,3))}var Qr=on(function(e,t,n){b.call(e,n)?e[n].push(t):Me(e,n,[t])});var Xr=kt(function(e,t,n){var r=-1,a="function"==typeof t,o=ka(e)?w(e.length):[];return Be(e,function(e){o[++r]=a?Sl(t,e,n):at(e,t,n)}),o}),ea=on(function(e,t,n){Me(e,n,t)});function ta(e,t){return(Ea(e)?Pl:pt)(e,Fn(t,3))}var na=on(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var ra=kt(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Gn(e,t[0],t[1])?t=[]:2<n&&Gn(t[0],t[1],t[2])&&(t=[t[0]]),vt(e,qe(t,1),[])}),aa=L||function(){return fl.Date.now()};function oa(e,t,n){return t=n?Vo:t,t=e&&null==t?e.length:t,Pn(e,Ho,Vo,Vo,Vo,Vo,t)}function ia(e,t){var n;if("function"!=typeof t)throw new v(Ko);return e=Ha(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=Vo),n}}var la=kt(function(e,t,n){var r,a=1;return n.length&&(r=tu(n,Wn(la)),a|=32),Pn(e,a,t,n,r)}),ua=kt(function(e,t,n){var r,a=3;return n.length&&(r=tu(n,Wn(ua)),a|=32),Pn(t,a,e,n,r)});function sa(r,n,e){var a,o,i,l,u,s,c=0,d=!1,f=!1,t=!0;if("function"!=typeof r)throw new v(Ko);function p(e){var t=a,n=o;return a=o=Vo,c=e,l=r.apply(n,t)}function h(e){var t=e-s;return s===Vo||n<=t||t<0||f&&i<=e-c}function y(){var e,t=aa();if(h(t))return m(t);u=lr(y,(t=n-((e=t)-s),f?H(t,i-(e-c)):t))}function m(e){return u=Vo,t&&a?p(e):(a=o=Vo,l)}function g(){var e=aa(),t=h(e);if(a=arguments,o=this,s=e,t){if(u===Vo)return c=t=s,u=lr(y,n),d?p(t):l;if(f)return Gt(u),u=lr(y,n),p(s)}return u===Vo&&(u=lr(y,n)),l}return n=$a(n)||0,Na(e)&&(d=!!e.leading,f="maxWait"in e,i=f?q($a(e.maxWait)||0,n):i,t="trailing"in e?!!e.trailing:t),g.cancel=function(){u!==Vo&&Gt(u),c=0,a=s=o=u=Vo},g.flush=function(){return u===Vo?l:m(aa())},g}var ca=kt(function(e,t){return We(e,1,t)}),da=kt(function(e,t,n){return We(e,$a(t)||0,n)});function fa(r,a){if("function"!=typeof r||null!=a&&"function"!=typeof a)throw new v(Ko);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],n=o.cache;if(n.has(t))return n.get(t);e=r.apply(this,e);return o.cache=n.set(t,e)||n,e};return o.cache=new(fa.Cache||_e),o}function pa(t){if("function"!=typeof t)throw new v(Ko);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}fa.Cache=_e;var ha=$t(function(r,a){var o=(a=1==a.length&&Ea(a[0])?Pl(a[0],zl(Fn())):Pl(qe(a,1),zl(Fn()))).length;return kt(function(e){for(var t=-1,n=H(e.length,o);++t<n;)e[t]=a[t].call(this,e[t]);return Sl(r,this,e)})}),ya=kt(function(e,t){var n=tu(t,Wn(ya));return Pn(e,32,Vo,t,n)}),ma=kt(function(e,t){var n=tu(t,Wn(ma));return Pn(e,64,Vo,t,n)}),ga=Mn(function(e,t){return Pn(e,256,Vo,Vo,Vo,t)});function va(e,t){return e===t||e!=e&&t!=t}var ba=wn(et),Sa=wn(function(e,t){return t<=e}),_a=ot(function(){return arguments}())?ot:function(e){return Ma(e)&&b.call(e,"callee")&&!A.call(e,"callee")},Ea=w.isArray,wa=hl?zl(hl):function(e){return Ma(e)&&Xe(e)==pi};function ka(e){return null!=e&&Ta(e.length)&&!Aa(e)}function Ca(e){return Ma(e)&&ka(e)}var xa=U||Bo,Oa=yl?zl(yl):function(e){return Ma(e)&&Xe(e)==ei};function Pa(e){if(!Ma(e))return!1;var t=Xe(e);return t==ti||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!La(e)}function Aa(e){if(!Na(e))return!1;e=Xe(e);return e==ni||e==ri||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ja(e){return"number"==typeof e&&e==Ha(e)}function Ta(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=Jo}function Na(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ma(e){return null!=e&&"object"==typeof e}var Ra=ml?zl(ml):function(e){return Ma(e)&&qn(e)==ai};function Da(e){return"number"==typeof e||Ma(e)&&Xe(e)==oi}function La(e){if(!Ma(e)||Xe(e)!=ii)return!1;e=O(e);if(null===e)return!0;e=b.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&l.call(e)==g}var Ia=gl?zl(gl):function(e){return Ma(e)&&Xe(e)==ui};var Wa=vl?zl(vl):function(e){return Ma(e)&&qn(e)==si};function Fa(e){return"string"==typeof e||!Ea(e)&&Ma(e)&&Xe(e)==ci}function Ba(e){return"symbol"==typeof e||Ma(e)&&Xe(e)==di}var Ua=bl?zl(bl):function(e){return Ma(e)&&Ta(e.length)&&!!ul[Xe(e)]};var Va=wn(ft),Ka=wn(function(e,t){return e<=t});function za(e){if(!e)return[];if(ka(e))return(Fa(e)?au:rn)(e);if(N&&e[N])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[N]());var t=qn(e);return(t==ai?Xl:t==si?nu:bo)(e)}function qa(e){return e?(e=$a(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}function Ha(e){var t=qa(e),e=t%1;return t==t?e?t-e:t:0}function Ja(e){return e?De(Ha(e),0,Yo):0}function $a(e){if("number"==typeof e)return e;if(Ba(e))return $o;if("string"!=typeof(e=Na(e)?Na(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Kl(e);var t=Yi.test(e);return t||Zi.test(e)?dl(e.slice(2),t?2:8):$i.test(e)?$o:+e}function Ya(e){return an(e,co(e))}function Ga(e){return null==e?"":It(e)}var Za=ln(function(e,t){if(er(t)||ka(t))an(t,so(t),e);else for(var n in t)b.call(t,n)&&Ae(e,n,t[n])}),Qa=ln(function(e,t){an(t,co(t),e)}),Xa=ln(function(e,t,n,r){an(t,co(t),e,r)}),eo=ln(function(e,t,n,r){an(t,so(t),e,r)}),to=Mn(Re);var no=kt(function(e,t){e=y(e);var n=-1,r=t.length,a=2<r?t[2]:Vo;for(a&&Gn(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],i=co(o),l=-1,u=i.length;++l<u;){var s=i[l],c=e[s];(c===Vo||va(c,h[s])&&!b.call(e,s))&&(e[s]=o[s])}return e}),ro=kt(function(e){return e.push(Vo,jn),Sl(po,Vo,e)});function ao(e,t,n){t=null==e?Vo:Ze(e,t);return t===Vo?n:t}function oo(e,t){return null!=e&&Hn(e,t,nt)}var io=gn(function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?m.call(t):t]=n},No(Ro)),lo=gn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=m.call(t)),b.call(e,t)?e[t].push(n):e[t]=[n]},Fn),uo=kt(at);function so(e){return(ka(e)?ke:ct)(e)}function co(e){return ka(e)?ke(e,!0):dt(e)}var fo=ln(function(e,t,n){mt(e,t,n)}),po=ln(function(e,t,n,r){mt(e,t,n,r)}),ho=Mn(function(t,e){var n={};if(null==t)return n;var r=!1;e=Pl(e,function(e){return e=Jt(e,t),r=r||1<e.length,e}),an(t,Dn(t),n),r&&(n=Le(n,7,Tn));for(var a=e.length;a--;)Ft(n,e[a]);return n});var yo=Mn(function(e,t){return null==e?{}:bt(n=e,t,function(e,t){return oo(n,t)});var n});function mo(e,n){if(null==e)return{};var t=Pl(Dn(e),function(e){return[e]});return n=Fn(n),bt(e,t,function(e,t){return n(e,t[0])})}var go=On(so),vo=On(co);function bo(e){return null==e?[]:ql(e,so(e))}var So=dn(function(e,t,n){return t=t.toLowerCase(),e+(n?_o(t):t)});function _o(e){return Ao(Ga(e).toLowerCase())}function Eo(e){return(e=Ga(e))&&e.replace(Xi,Yl).replace(rl,"")}var wo=dn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ko=dn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Co=cn("toLowerCase");var xo=dn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var Oo=dn(function(e,t,n){return e+(n?" ":"")+Ao(t)});var Po=dn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ao=cn("toUpperCase");function jo(e,t,n){return e=Ga(e),(t=n?Vo:t)===Vo?(n=e,ol.test(n)?e.match(al)||[]:e.match(Ki)||[]):e.match(t)||[]}var To=kt(function(e,t){try{return Sl(e,Vo,t)}catch(e){return Pa(e)?e:new d(e)}}),r=Mn(function(t,e){return El(e,function(e){e=yr(e),Me(t,e,la(t[e],t))}),t});function No(e){return function(){return e}}var Mo=yn(),E=yn(!0);function Ro(e){return e}function Do(e){return st("function"==typeof e?e:Le(e,1))}n=kt(function(t,n){return function(e){return at(e,t,n)}}),t=kt(function(t,n){return function(e){return at(t,e,n)}});function Lo(r,t,e){var n=so(t),a=Ge(t,n);null!=e||Na(t)&&(a.length||!n.length)||(e=t,t=r,r=this,a=Ge(t,so(t)));var o=!(Na(e)&&"chain"in e&&!e.chain),i=Aa(r);return El(a,function(e){var n=t[e];r[e]=n,i&&(r.prototype[e]=function(){var e=this.__chain__;if(o||e){var t=r(this.__wrapped__);return(t.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t}return n.apply(r,Al([this.value()],arguments))})}),r}function Io(){}k=bn(Pl),ce=bn(kl),D=bn(Nl);function Wo(e){return Zn(e)?Fl(yr(e)):(t=e,function(e){return Ze(e,t)});var t}Z=En(),X=En(!0);function Fo(){return[]}function Bo(){return!1}te=vn(function(e,t){return e+t},0),i=Cn("ceil"),I=vn(function(e,t){return e/t},1),At=Cn("floor");var Uo,L=vn(function(e,t){return e*t},1),$t=Cn("round"),U=vn(function(e,t){return e-t},0);return pe.after=function(e,t){if("function"!=typeof t)throw new v(Ko);return e=Ha(e),function(){if(--e<1)return t.apply(this,arguments)}},pe.ary=oa,pe.assign=Za,pe.assignIn=Qa,pe.assignInWith=Xa,pe.assignWith=eo,pe.at=to,pe.before=ia,pe.bind=la,pe.bindAll=r,pe.bindKey=ua,pe.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ea(e)?e:[e]},pe.chain=zr,pe.chunk=function(e,t,n){t=(n?Gn(e,t,n):t===Vo)?1:q(Ha(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var a=0,o=0,i=w(W(r/t));a<r;)i[o++]=Tt(e,a,a+=t);return i},pe.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var o=e[t];o&&(a[r++]=o)}return a},pe.concat=function(){var e=arguments.length;if(!e)return[];for(var t=w(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Al(Ea(n)?rn(n):[n],qe(t,1))},pe.cond=function(r){var a=null==r?0:r.length,t=Fn();return r=a?Pl(r,function(e){if("function"!=typeof e[1])throw new v(Ko);return[t(e[0]),e[1]]}):[],kt(function(e){for(var t=-1;++t<a;){var n=r[t];if(Sl(n[0],this,e))return Sl(n[1],this,e)}})},pe.conforms=function(e){return t=Le(e,1),n=so(t),function(e){return Ie(e,t,n)};var t,n},pe.constant=No,pe.countBy=Jr,pe.create=function(e,t){return e=he(e),null==t?e:Ne(e,t)},pe.curry=function e(t,n,r){n=Pn(t,8,Vo,Vo,Vo,Vo,Vo,n=r?Vo:n);return n.placeholder=e.placeholder,n},pe.curryRight=function e(t,n,r){n=Pn(t,16,Vo,Vo,Vo,Vo,Vo,n=r?Vo:n);return n.placeholder=e.placeholder,n},pe.debounce=sa,pe.defaults=no,pe.defaultsDeep=ro,pe.defer=ca,pe.delay=da,pe.difference=vr,pe.differenceBy=br,pe.differenceWith=Sr,pe.drop=function(e,t,n){var r=null==e?0:e.length;return r?Tt(e,(t=n||t===Vo?1:Ha(t))<0?0:t,r):[]},pe.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Tt(e,0,(t=r-(t=n||t===Vo?1:Ha(t)))<0?0:t):[]},pe.dropRightWhile=function(e,t){return e&&e.length?Ut(e,Fn(t,3),!0,!0):[]},pe.dropWhile=function(e,t){return e&&e.length?Ut(e,Fn(t,3),!0):[]},pe.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&Gn(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=Ha(n))<0&&(n=a<-n?0:a+n),(r=r===Vo||a<r?a:Ha(r))<0&&(r+=a),r=r<n?0:Ja(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pe.filter=function(e,t){return(Ea(e)?Cl:ze)(e,Fn(t,3))},pe.flatMap=function(e,t){return qe(ta(e,t),1)},pe.flatMapDeep=function(e,t){return qe(ta(e,t),1/0)},pe.flatMapDepth=function(e,t,n){return n=n===Vo?1:Ha(n),qe(ta(e,t),n)},pe.flatten=wr,pe.flattenDeep=function(e){return(null==e?0:e.length)?qe(e,1/0):[]},pe.flattenDepth=function(e,t){return(null==e?0:e.length)?qe(e,t=t===Vo?1:Ha(t)):[]},pe.flip=function(e){return Pn(e,512)},pe.flow=Mo,pe.flowRight=E,pe.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},pe.functions=function(e){return null==e?[]:Ge(e,so(e))},pe.functionsIn=function(e){return null==e?[]:Ge(e,co(e))},pe.groupBy=Qr,pe.initial=function(e){return(null==e?0:e.length)?Tt(e,0,-1):[]},pe.intersection=Cr,pe.intersectionBy=xr,pe.intersectionWith=Or,pe.invert=io,pe.invertBy=lo,pe.invokeMap=Xr,pe.iteratee=Do,pe.keyBy=ea,pe.keys=so,pe.keysIn=co,pe.map=ta,pe.mapKeys=function(e,r){var a={};return r=Fn(r,3),$e(e,function(e,t,n){Me(a,r(e,t,n),e)}),a},pe.mapValues=function(e,r){var a={};return r=Fn(r,3),$e(e,function(e,t,n){Me(a,t,r(e,t,n))}),a},pe.matches=function(e){return ht(Le(e,1))},pe.matchesProperty=function(e,t){return yt(e,Le(t,1))},pe.memoize=fa,pe.merge=fo,pe.mergeWith=po,pe.method=n,pe.methodOf=t,pe.mixin=Lo,pe.negate=pa,pe.nthArg=function(t){return t=Ha(t),kt(function(e){return gt(e,t)})},pe.omit=ho,pe.omitBy=function(e,t){return mo(e,pa(Fn(t)))},pe.once=function(e){return ia(2,e)},pe.orderBy=function(e,t,n,r){return null==e?[]:vt(e,t=!Ea(t)?null==t?[]:[t]:t,n=!Ea(n=r?Vo:n)?null==n?[]:[n]:n)},pe.over=k,pe.overArgs=ha,pe.overEvery=ce,pe.overSome=D,pe.partial=ya,pe.partialRight=ma,pe.partition=na,pe.pick=yo,pe.pickBy=mo,pe.property=Wo,pe.propertyOf=function(t){return function(e){return null==t?Vo:Ze(t,e)}},pe.pull=Ar,pe.pullAll=jr,pe.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?St(e,t,Fn(n,2)):e},pe.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?St(e,t,Vo,n):e},pe.pullAt=Tr,pe.range=Z,pe.rangeRight=X,pe.rearg=ga,pe.reject=function(e,t){return(Ea(e)?Cl:ze)(e,pa(Fn(t,3)))},pe.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],o=e.length;for(t=Fn(t,3);++r<o;){var i=e[r];t(i,r,e)&&(n.push(i),a.push(r))}return _t(e,a),n},pe.rest=function(e,t){if("function"!=typeof e)throw new v(Ko);return kt(e,t=t===Vo?t:Ha(t))},pe.reverse=Nr,pe.sampleSize=function(e,t,n){return t=(n?Gn(e,t,n):t===Vo)?1:Ha(t),(Ea(e)?xe:xt)(e,t)},pe.set=function(e,t,n){return null==e?e:Ot(e,t,n)},pe.setWith=function(e,t,n,r){return r="function"==typeof r?r:Vo,null==e?e:Ot(e,t,n,r)},pe.shuffle=function(e){return(Ea(e)?Oe:jt)(e)},pe.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n=n&&"number"!=typeof n&&Gn(e,t,n)?(t=0,r):(t=null==t?0:Ha(t),n===Vo?r:Ha(n)),Tt(e,t,n)):[]},pe.sortBy=ra,pe.sortedUniq=function(e){return e&&e.length?Dt(e):[]},pe.sortedUniqBy=function(e,t){return e&&e.length?Dt(e,Fn(t,2)):[]},pe.split=function(e,t,n){return n&&"number"!=typeof n&&Gn(e,t,n)&&(t=n=Vo),(n=n===Vo?Yo:n>>>0)?(e=Ga(e))&&("string"==typeof t||null!=t&&!Ia(t))&&!(t=It(t))&&Ql(e)?Yt(au(e),0,n):e.split(t,n):[]},pe.spread=function(n,r){if("function"!=typeof n)throw new v(Ko);return r=null==r?0:q(Ha(r),0),kt(function(e){var t=e[r],e=Yt(e,0,r);return t&&Al(e,t),Sl(n,this,e)})},pe.tail=function(e){var t=null==e?0:e.length;return t?Tt(e,1,t):[]},pe.take=function(e,t,n){return e&&e.length?Tt(e,0,(t=n||t===Vo?1:Ha(t))<0?0:t):[]},pe.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Tt(e,(t=r-(t=n||t===Vo?1:Ha(t)))<0?0:t,r):[]},pe.takeRightWhile=function(e,t){return e&&e.length?Ut(e,Fn(t,3),!1,!0):[]},pe.takeWhile=function(e,t){return e&&e.length?Ut(e,Fn(t,3)):[]},pe.tap=function(e,t){return t(e),e},pe.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new v(Ko);return Na(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),sa(e,t,{leading:r,maxWait:t,trailing:a})},pe.thru=qr,pe.toArray=za,pe.toPairs=go,pe.toPairsIn=vo,pe.toPath=function(e){return Ea(e)?Pl(e,yr):Ba(e)?[e]:rn(hr(Ga(e)))},pe.toPlainObject=Ya,pe.transform=function(e,r,a){var t,n=Ea(e),o=n||xa(e)||Ua(e);return r=Fn(r,4),null==a&&(t=e&&e.constructor,a=o?n?new t:[]:Na(e)&&Aa(t)?he(O(e)):{}),(o?El:$e)(e,function(e,t,n){return r(a,e,t,n)}),a},pe.unary=function(e){return oa(e,1)},pe.union=Mr,pe.unionBy=Rr,pe.unionWith=Dr,pe.uniq=function(e){return e&&e.length?Wt(e):[]},pe.uniqBy=function(e,t){return e&&e.length?Wt(e,Fn(t,2)):[]},pe.uniqWith=function(e,t){return t="function"==typeof t?t:Vo,e&&e.length?Wt(e,Vo,t):[]},pe.unset=function(e,t){return null==e||Ft(e,t)},pe.unzip=Lr,pe.unzipWith=Ir,pe.update=function(e,t,n){return null==e?e:Bt(e,t,Ht(n))},pe.updateWith=function(e,t,n,r){return r="function"==typeof r?r:Vo,null==e?e:Bt(e,t,Ht(n),r)},pe.values=bo,pe.valuesIn=function(e){return null==e?[]:ql(e,co(e))},pe.without=Wr,pe.words=jo,pe.wrap=function(e,t){return ya(Ht(t),e)},pe.xor=Fr,pe.xorBy=Br,pe.xorWith=Ur,pe.zip=Vr,pe.zipObject=function(e,t){return zt(e||[],t||[],Ae)},pe.zipObjectDeep=function(e,t){return zt(e||[],t||[],Ot)},pe.zipWith=Kr,pe.entries=go,pe.entriesIn=vo,pe.extend=Qa,pe.extendWith=Xa,Lo(pe,pe),pe.add=te,pe.attempt=To,pe.camelCase=So,pe.capitalize=_o,pe.ceil=i,pe.clamp=function(e,t,n){return n===Vo&&(n=t,t=Vo),n!==Vo&&(n=(n=$a(n))==n?n:0),t!==Vo&&(t=(t=$a(t))==t?t:0),De($a(e),t,n)},pe.clone=function(e){return Le(e,4)},pe.cloneDeep=function(e){return Le(e,5)},pe.cloneDeepWith=function(e,t){return Le(e,5,t="function"==typeof t?t:Vo)},pe.cloneWith=function(e,t){return Le(e,4,t="function"==typeof t?t:Vo)},pe.conformsTo=function(e,t){return null==t||Ie(e,t,so(t))},pe.deburr=Eo,pe.defaultTo=function(e,t){return null==e||e!=e?t:e},pe.divide=I,pe.endsWith=function(e,t,n){e=Ga(e),t=It(t);var r=e.length,r=n=n===Vo?r:De(Ha(n),0,r);return 0<=(n-=t.length)&&e.slice(n,r)==t},pe.eq=va,pe.escape=function(e){return(e=Ga(e))&&ji.test(e)?e.replace(Pi,Gl):e},pe.escapeRegExp=function(e){return(e=Ga(e))&&Wi.test(e)?e.replace(Ii,"\\$&"):e},pe.every=function(e,t,n){return(Ea(e)?kl:Ve)(e,Fn(t=n&&Gn(e,t,n)?Vo:t,3))},pe.find=$r,pe.findIndex=_r,pe.findKey=function(e,t){return Ml(e,Fn(t,3),$e)},pe.findLast=Yr,pe.findLastIndex=Er,pe.findLastKey=function(e,t){return Ml(e,Fn(t,3),Ye)},pe.floor=At,pe.forEach=Gr,pe.forEachRight=Zr,pe.forIn=function(e,t){return null==e?e:He(e,Fn(t,3),co)},pe.forInRight=function(e,t){return null==e?e:Je(e,Fn(t,3),co)},pe.forOwn=function(e,t){return e&&$e(e,Fn(t,3))},pe.forOwnRight=function(e,t){return e&&Ye(e,Fn(t,3))},pe.get=ao,pe.gt=ba,pe.gte=Sa,pe.has=function(e,t){return null!=e&&Hn(e,t,tt)},pe.hasIn=oo,pe.head=kr,pe.identity=Ro,pe.includes=function(e,t,n,r){return e=ka(e)?e:bo(e),n=n&&!r?Ha(n):0,r=e.length,n<0&&(n=q(r+n,0)),Fa(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<Dl(e,t,n)},pe.indexOf=function(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Ha(n),Dl(e,t,n=n<0?q(r+n,0):n)):-1},pe.inRange=function(e,t,n){return t=qa(t),n===Vo?(n=t,t=0):n=qa(n),(e=e=$a(e))>=H(t=t,n=n)&&e<q(t,n)},pe.invoke=uo,pe.isArguments=_a,pe.isArray=Ea,pe.isArrayBuffer=wa,pe.isArrayLike=ka,pe.isArrayLikeObject=Ca,pe.isBoolean=function(e){return!0===e||!1===e||Ma(e)&&Xe(e)==Xo},pe.isBuffer=xa,pe.isDate=Oa,pe.isElement=function(e){return Ma(e)&&1===e.nodeType&&!La(e)},pe.isEmpty=function(e){if(null==e)return!0;if(ka(e)&&(Ea(e)||"string"==typeof e||"function"==typeof e.splice||xa(e)||Ua(e)||_a(e)))return!e.length;var t,n=qn(e);if(n==ai||n==si)return!e.size;if(er(e))return!ct(e).length;for(t in e)if(b.call(e,t))return!1;return!0},pe.isEqual=function(e,t){return it(e,t)},pe.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:Vo)?n(e,t):Vo;return r===Vo?it(e,t,Vo,n):!!r},pe.isError=Pa,pe.isFinite=function(e){return"number"==typeof e&&V(e)},pe.isFunction=Aa,pe.isInteger=ja,pe.isLength=Ta,pe.isMap=Ra,pe.isMatch=function(e,t){return e===t||lt(e,t,Un(t))},pe.isMatchWith=function(e,t,n){return n="function"==typeof n?n:Vo,lt(e,t,Un(t),n)},pe.isNaN=function(e){return Da(e)&&e!=+e},pe.isNative=function(e){if(Xn(e))throw new d("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ut(e)},pe.isNil=function(e){return null==e},pe.isNull=function(e){return null===e},pe.isNumber=Da,pe.isObject=Na,pe.isObjectLike=Ma,pe.isPlainObject=La,pe.isRegExp=Ia,pe.isSafeInteger=function(e){return ja(e)&&-Jo<=e&&e<=Jo},pe.isSet=Wa,pe.isString=Fa,pe.isSymbol=Ba,pe.isTypedArray=Ua,pe.isUndefined=function(e){return e===Vo},pe.isWeakMap=function(e){return Ma(e)&&qn(e)==fi},pe.isWeakSet=function(e){return Ma(e)&&"[object WeakSet]"==Xe(e)},pe.join=function(e,t){return null==e?"":K.call(e,t)},pe.kebabCase=wo,pe.last=Pr,pe.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==Vo&&(a=(a=Ha(n))<0?q(r+a,0):H(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Rl(e,Il,a,!0)},pe.lowerCase=ko,pe.lowerFirst=Co,pe.lt=Va,pe.lte=Ka,pe.max=function(e){return e&&e.length?Ke(e,Ro,et):Vo},pe.maxBy=function(e,t){return e&&e.length?Ke(e,Fn(t,2),et):Vo},pe.mean=function(e){return Wl(e,Ro)},pe.meanBy=function(e,t){return Wl(e,Fn(t,2))},pe.min=function(e){return e&&e.length?Ke(e,Ro,ft):Vo},pe.minBy=function(e,t){return e&&e.length?Ke(e,Fn(t,2),ft):Vo},pe.stubArray=Fo,pe.stubFalse=Bo,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=L,pe.nth=function(e,t){return e&&e.length?gt(e,Ha(t)):Vo},pe.noConflict=function(){return fl._===this&&(fl._=S),this},pe.noop=Io,pe.now=aa,pe.pad=function(e,t,n){e=Ga(e);var r=(t=Ha(t))?ru(e):0;return!t||t<=r?e:Sn(F(r=(t-r)/2),n)+e+Sn(W(r),n)},pe.padEnd=function(e,t,n){e=Ga(e);var r=(t=Ha(t))?ru(e):0;return t&&r<t?e+Sn(t-r,n):e},pe.padStart=function(e,t,n){e=Ga(e);var r=(t=Ha(t))?ru(e):0;return t&&r<t?Sn(t-r,n)+e:e},pe.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,$(Ga(e).replace(Fi,""),t||0)},pe.random=function(e,t,n){var r;if(n&&"boolean"!=typeof n&&Gn(e,t,n)&&(t=n=Vo),n===Vo&&("boolean"==typeof t?(n=t,t=Vo):"boolean"==typeof e&&(n=e,e=Vo)),e===Vo&&t===Vo?(e=0,t=1):(e=qa(e),t===Vo?(t=e,e=0):t=qa(t)),t<e&&(r=e,e=t,t=r),n||e%1||t%1){n=Y();return H(e+n*(t-e+cl("1e-"+((n+"").length-1))),t)}return Et(e,t)},pe.reduce=function(e,t,n){var r=Ea(e)?jl:Bl,a=arguments.length<3;return r(e,Fn(t,4),n,a,Be)},pe.reduceRight=function(e,t,n){var r=Ea(e)?Tl:Bl,a=arguments.length<3;return r(e,Fn(t,4),n,a,Ue)},pe.repeat=function(e,t,n){return t=(n?Gn(e,t,n):t===Vo)?1:Ha(t),wt(Ga(e),t)},pe.replace=function(){var e=arguments,t=Ga(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pe.result=function(e,t,n){var r=-1,a=(t=Jt(t,e)).length;for(a||(a=1,e=Vo);++r<a;){var o=null==e?Vo:e[yr(t[r])];o===Vo&&(r=a,o=n),e=Aa(o)?o.call(e):o}return e},pe.round=$t,pe.runInContext=e,pe.sample=function(e){return(Ea(e)?Ce:Ct)(e)},pe.size=function(e){if(null==e)return 0;if(ka(e))return Fa(e)?ru(e):e.length;var t=qn(e);return t==ai||t==si?e.size:ct(e).length},pe.snakeCase=xo,pe.some=function(e,t,n){return(Ea(e)?Nl:Nt)(e,Fn(t=n&&Gn(e,t,n)?Vo:t,3))},pe.sortedIndex=function(e,t){return Mt(e,t)},pe.sortedIndexBy=function(e,t,n){return Rt(e,t,Fn(n,2))},pe.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Mt(e,t);if(r<n&&va(e[r],t))return r}return-1},pe.sortedLastIndex=function(e,t){return Mt(e,t,!0)},pe.sortedLastIndexBy=function(e,t,n){return Rt(e,t,Fn(n,2),!0)},pe.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Mt(e,t,!0)-1;if(va(e[n],t))return n}return-1},pe.startCase=Oo,pe.startsWith=function(e,t,n){return e=Ga(e),n=null==n?0:De(Ha(n),0,e.length),t=It(t),e.slice(n,n+t.length)==t},pe.subtract=U,pe.sum=function(e){return e&&e.length?Ul(e,Ro):0},pe.sumBy=function(e,t){return e&&e.length?Ul(e,Fn(t,2)):0},pe.template=function(i,e,t){var n=pe.templateSettings;t&&Gn(i,e,t)&&(e=Vo),i=Ga(i),e=Xa({},e,n,An);var l,u,r=so(n=Xa({},e.imports,n.imports,An)),a=ql(n,r),s=0,n=e.interpolate||el,c="__p += '",n=p((e.escape||el).source+"|"+n.source+"|"+(n===Mi?Hi:el).source+"|"+(e.evaluate||el).source+"|$","g"),o="//# sourceURL="+(b.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ll+"]")+"\n";if(i.replace(n,function(e,t,n,r,a,o){return n=n||r,c+=i.slice(s,o).replace(tl,Zl),t&&(l=!0,c+="' +\n__e("+t+") +\n'"),a&&(u=!0,c+="';\n"+a+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),s=o+e.length,e}),c+="';\n",e=b.call(e,"variable")&&e.variable){if(zi.test(e))throw new d("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";if(c=(u?c.replace(ki,""):c).replace(Ci,"$1").replace(xi,"$1;"),c="function("+(e||"obj")+") {\n"+(e?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}",(e=To(function(){return f(r,o+"return "+c).apply(Vo,a)})).source=c,Pa(e))throw e;return e},pe.times=function(e,t){if((e=Ha(e))<1||Jo<e)return[];var n=Yo,r=H(e,Yo);for(t=Fn(t),e-=Yo,r=Vl(r,t);++n<e;)t(n);return r},pe.toFinite=qa,pe.toInteger=Ha,pe.toLength=Ja,pe.toLower=function(e){return Ga(e).toLowerCase()},pe.toNumber=$a,pe.toSafeInteger=function(e){return e?De(Ha(e),-Jo,Jo):0===e?e:0},pe.toString=Ga,pe.toUpper=function(e){return Ga(e).toUpperCase()},pe.trim=function(e,t,n){return(e=Ga(e))&&(n||t===Vo)?Kl(e):e&&(t=It(t))?(e=au(e),t=au(t),Yt(e,Jl(e,t),$l(e,t)+1).join("")):e},pe.trimEnd=function(e,t,n){return(e=Ga(e))&&(n||t===Vo)?e.slice(0,ou(e)+1):e&&(t=It(t))?Yt(e=au(e),0,$l(e,au(t))+1).join(""):e},pe.trimStart=function(e,t,n){return(e=Ga(e))&&(n||t===Vo)?e.replace(Fi,""):e&&(t=It(t))?Yt(e=au(e),Jl(e,au(t))).join(""):e},pe.truncate=function(e,t){var n,r=30,a="...";Na(t)&&(n="separator"in t?t.separator:n,r="length"in t?Ha(t.length):r,a="omission"in t?It(t.omission):a);var o,t=(e=Ga(e)).length;if((t=Ql(e)?(o=au(e)).length:t)<=r)return e;if((t=r-ru(a))<1)return a;if(r=o?Yt(o,0,t).join(""):e.slice(0,t),n===Vo)return r+a;if(o&&(t+=r.length-t),Ia(n)){if(e.slice(t).search(n)){var i,l=r;for((n=!n.global?p(n.source,Ga(Ji.exec(n))+"g"):n).lastIndex=0;i=n.exec(l);)var u=i.index;r=r.slice(0,u===Vo?t:u)}}else e.indexOf(It(n),t)==t||-1<(t=r.lastIndexOf(n))&&(r=r.slice(0,t));return r+a},pe.unescape=function(e){return(e=Ga(e))&&Ai.test(e)?e.replace(Oi,iu):e},pe.uniqueId=function(e){var t=++u;return Ga(e)+t},pe.upperCase=Po,pe.upperFirst=Ao,pe.each=Gr,pe.eachRight=Zr,pe.first=kr,Lo(pe,(Uo={},$e(pe,function(e,t){b.call(pe.prototype,t)||(Uo[t]=e)}),Uo),{chain:!1}),pe.VERSION="4.17.21",El(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pe[e].placeholder=pe}),El(["drop","take"],function(n,r){ve.prototype[n]=function(e){e=e===Vo?1:q(Ha(e),0);var t=this.__filtered__&&!r?new ve(this):this.clone();return t.__filtered__?t.__takeCount__=H(e,t.__takeCount__):t.__views__.push({size:H(e,Yo),type:n+(t.__dir__<0?"Right":"")}),t},ve.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),El(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;ve.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Fn(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),El(["head","last"],function(e,t){var n="take"+(t?"Right":"");ve.prototype[e]=function(){return this[n](1).value()[0]}}),El(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ve.prototype[e]=function(){return this.__filtered__?new ve(this):this[n](1)}}),ve.prototype.compact=function(){return this.filter(Ro)},ve.prototype.find=function(e){return this.filter(e).head()},ve.prototype.findLast=function(e){return this.reverse().find(e)},ve.prototype.invokeMap=kt(function(t,n){return"function"==typeof t?new ve(this):this.map(function(e){return at(e,t,n)})}),ve.prototype.reject=function(e){return this.filter(pa(Fn(e)))},ve.prototype.slice=function(e,t){e=Ha(e);var n=this;return n.__filtered__&&(0<e||t<0)?new ve(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),n=t!==Vo?(t=Ha(t))<0?n.dropRight(-t):n.take(t-e):n)},ve.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ve.prototype.toArray=function(){return this.take(Yo)},$e(ve.prototype,function(s,e){var c=/^(?:filter|find|map|reject)|While$/.test(e),d=/^(?:head|last)$/.test(e),f=pe[d?"take"+("last"==e?"Right":""):e],p=d||/^find/.test(e);f&&(pe.prototype[e]=function(){function e(e){return e=f.apply(pe,Al([e],n)),d&&i?e[0]:e}var t=this.__wrapped__,n=d?[1]:arguments,r=t instanceof ve,a=n[0],o=r||Ea(t);o&&c&&"function"==typeof a&&1!=a.length&&(r=o=!1);var i=this.__chain__,l=!!this.__actions__.length,a=p&&!i,l=r&&!l;if(p||!o)return a&&l?s.apply(this,n):(u=this.thru(e),a?d?u.value()[0]:u.value():u);var t=l?t:new ve(this),u=s.apply(t,n);return u.__actions__.push({func:qr,args:[e],thisArg:Vo}),new ge(u,i)})}),El(["pop","push","shift","sort","splice","unshift"],function(e){var n=o[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);pe.prototype[e]=function(){var t=arguments;if(!a||this.__chain__)return this[r](function(e){return n.apply(Ea(e)?e:[],t)});var e=this.value();return n.apply(Ea(e)?e:[],t)}}),$e(ve.prototype,function(e,t){var n,r=pe[t];r&&(n=r.name+"",b.call(ae,n)||(ae[n]=[]),ae[n].push({name:t,func:r}))}),ae[mn(Vo,2).name]=[{name:"wrapper",func:Vo}],ve.prototype.clone=function(){var e=new ve(this.__wrapped__);return e.__actions__=rn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rn(this.__views__),e},ve.prototype.reverse=function(){var e;return this.__filtered__?((e=new ve(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},ve.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ea(e),r=t<0,a=n?e.length:0,o=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var o=n[r],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=H(t,e+i);break;case"takeRight":e=q(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=o.start,l=(o=o.end)-i,u=r?o:i-1,s=this.__iteratees__,c=s.length,d=0,f=H(l,this.__takeCount__);if(!n||!r&&a==l&&f==l)return Vt(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var h=-1,y=e[u+=t];++h<c;){var m=s[h],g=m.iteratee,m=m.type,g=g(y);if(2==m)y=g;else if(!g){if(1==m)continue e;break e}}p[d++]=y}return p},pe.prototype.at=Hr,pe.prototype.chain=function(){return zr(this)},pe.prototype.commit=function(){return new ge(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===Vo&&(this.__values__=za(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?Vo:this.__values__[this.__index__++]}},pe.prototype.plant=function(e){for(var t,n=this;n instanceof me;){var r=gr(n);r.__index__=0,r.__values__=Vo,t?a.__wrapped__=r:t=r;var a=r,n=n.__wrapped__}return a.__wrapped__=e,t},pe.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof ve){e=e;return(e=(e=this.__actions__.length?new ve(this):e).reverse()).__actions__.push({func:qr,args:[Nr],thisArg:Vo}),new ge(e,this.__chain__)}return this.thru(Nr)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return Vt(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,N&&(pe.prototype[N]=function(){return this}),pe}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(fl._=lu,define(function(){return lu})):x?((x.exports=lu)._=lu,i._=lu):fl._=lu}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);function o(e,t){return t=t||0,[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")}n.default=o,t.exports=n.default},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return i.default}});var r=l(e("./v1.js")),a=l(e("./v3.js")),o=l(e("./v4.js")),i=l(e("./v5.js"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./v1.js":29,"./v3.js":30,"./v4.js":32,"./v5.js":33}],26:[function(e,t,n){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t,n,r,a,o){return d((o=d(d(t,e),d(r,o)))<<(a=a)|o>>>32-a,n)}function f(e,t,n,r,a,o,i){return l(t&n|~t&r,e,t,a,o,i)}function p(e,t,n,r,a,o,i){return l(t&r|n&~r,e,t,a,o,i)}function h(e,t,n,r,a,o,i){return l(t^n^r,e,t,a,o,i)}function y(e,t,n,r,a,o,i){return l(n^(t|~r),e,t,a,o,i)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function r(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}return function(e){var t,n,r=[],a=32*e.length,o="0123456789abcdef";for(t=0;t<a;t+=8)n=e[t>>5]>>>t%32&255,n=parseInt(o.charAt(n>>>4&15)+o.charAt(15&n),16),r.push(n);return r}(function(e,t){var n,r,a,o,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var l=1732584193,u=-271733879,s=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)l=f(r=l,a=u,o=s,i=c,e[n],7,-680876936),c=f(c,l,u,s,e[n+1],12,-389564586),s=f(s,c,l,u,e[n+2],17,606105819),u=f(u,s,c,l,e[n+3],22,-1044525330),l=f(l,u,s,c,e[n+4],7,-176418897),c=f(c,l,u,s,e[n+5],12,1200080426),s=f(s,c,l,u,e[n+6],17,-1473231341),u=f(u,s,c,l,e[n+7],22,-45705983),l=f(l,u,s,c,e[n+8],7,1770035416),c=f(c,l,u,s,e[n+9],12,-1958414417),s=f(s,c,l,u,e[n+10],17,-42063),u=f(u,s,c,l,e[n+11],22,-1990404162),l=f(l,u,s,c,e[n+12],7,1804603682),c=f(c,l,u,s,e[n+13],12,-40341101),s=f(s,c,l,u,e[n+14],17,-1502002290),u=f(u,s,c,l,e[n+15],22,1236535329),l=p(l,u,s,c,e[n+1],5,-165796510),c=p(c,l,u,s,e[n+6],9,-1069501632),s=p(s,c,l,u,e[n+11],14,643717713),u=p(u,s,c,l,e[n],20,-373897302),l=p(l,u,s,c,e[n+5],5,-701558691),c=p(c,l,u,s,e[n+10],9,38016083),s=p(s,c,l,u,e[n+15],14,-660478335),u=p(u,s,c,l,e[n+4],20,-405537848),l=p(l,u,s,c,e[n+9],5,568446438),c=p(c,l,u,s,e[n+14],9,-1019803690),s=p(s,c,l,u,e[n+3],14,-187363961),u=p(u,s,c,l,e[n+8],20,1163531501),l=p(l,u,s,c,e[n+13],5,-1444681467),c=p(c,l,u,s,e[n+2],9,-51403784),s=p(s,c,l,u,e[n+7],14,1735328473),u=p(u,s,c,l,e[n+12],20,-1926607734),l=h(l,u,s,c,e[n+5],4,-378558),c=h(c,l,u,s,e[n+8],11,-2022574463),s=h(s,c,l,u,e[n+11],16,1839030562),u=h(u,s,c,l,e[n+14],23,-35309556),l=h(l,u,s,c,e[n+1],4,-1530992060),c=h(c,l,u,s,e[n+4],11,1272893353),s=h(s,c,l,u,e[n+7],16,-155497632),u=h(u,s,c,l,e[n+10],23,-1094730640),l=h(l,u,s,c,e[n+13],4,681279174),c=h(c,l,u,s,e[n],11,-358537222),s=h(s,c,l,u,e[n+3],16,-722521979),u=h(u,s,c,l,e[n+6],23,76029189),l=h(l,u,s,c,e[n+9],4,-640364487),c=h(c,l,u,s,e[n+12],11,-421815835),s=h(s,c,l,u,e[n+15],16,530742520),u=h(u,s,c,l,e[n+2],23,-995338651),l=y(l,u,s,c,e[n],6,-198630844),c=y(c,l,u,s,e[n+7],10,1126891415),s=y(s,c,l,u,e[n+14],15,-1416354905),u=y(u,s,c,l,e[n+5],21,-57434055),l=y(l,u,s,c,e[n+12],6,1700485571),c=y(c,l,u,s,e[n+3],10,-1894986606),s=y(s,c,l,u,e[n+10],15,-1051523),u=y(u,s,c,l,e[n+1],21,-2054922799),l=y(l,u,s,c,e[n+8],6,1873313359),c=y(c,l,u,s,e[n+15],10,-30611744),s=y(s,c,l,u,e[n+6],15,-1560198380),u=y(u,s,c,l,e[n+13],21,1309151649),l=y(l,u,s,c,e[n+4],6,-145523070),c=y(c,l,u,s,e[n+11],10,-1120210379),s=y(s,c,l,u,e[n+2],15,718787259),u=y(u,s,c,l,e[n+9],21,-343485551),l=d(l,r),u=d(u,a),s=d(s,o),c=d(c,i);return[l,u,s,c]}(function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e[t/8])<<t%32;return n}(e),8*e.length))}n.default=r,t.exports=n.default},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(r)return r(a);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),a=new Uint8Array(16);t.exports=n.default},{}],28:[function(e,t,n){"use strict";function g(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function r(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var a=0;a<r.length;a++)e[a]=r.charCodeAt(a)}e.push(128);for(var o=e.length/4+2,i=Math.ceil(o/16),l=new Array(i),a=0;a<i;a++){l[a]=new Array(16);for(var u=0;u<16;u++)l[a][u]=e[64*a+4*u]<<24|e[64*a+4*u+1]<<16|e[64*a+4*u+2]<<8|e[64*a+4*u+3]}for(l[i-1][14]=8*(e.length-1)/Math.pow(2,32),l[i-1][14]=Math.floor(l[i-1][14]),l[i-1][15]=8*(e.length-1)&4294967295,a=0;a<i;a++){for(var s=new Array(80),c=0;c<16;c++)s[c]=l[a][c];for(c=16;c<80;c++)s[c]=g(s[c-3]^s[c-8]^s[c-14]^s[c-16],1);for(var d=n[0],f=n[1],p=n[2],h=n[3],y=n[4],c=0;c<80;c++)var m=Math.floor(c/20),m=g(d,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}(m,f,p,h)+y+t[m]+s[c]>>>0,y=h,h=p,p=g(f,30)>>>0,f=d,d=m;n[0]=n[0]+d>>>0,n[1]=n[1]+f>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}n.default=r,t.exports=n.default},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c,d,f=r(e("./rng.js")),p=r(e("./bytesToUuid.js"));function r(e){return e&&e.__esModule?e:{default:e}}var h=0,y=0;e=function(e,t,n){var r=t&&n||0,a=t||[],o=(e=e||{}).node||c,i=void 0!==e.clockseq?e.clockseq:d;null!=o&&null!=i||(u=e.random||(e.rng||f.default)(),null==o&&(o=c=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==i&&(i=d=16383&(u[6]<<8|u[7])));var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),n=void 0!==e.nsecs?e.nsecs:y+1,u=l-h+(n-y)/1e4;if(u<0&&void 0===e.clockseq&&(i=i+1&16383),1e4<=(n=(u<0||h<l)&&void 0===e.nsecs?0:n))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=l,d=i,n=(1e4*(268435455&(l+=122192928e5))+(y=n))%4294967296,a[r++]=n>>>24&255,a[r++]=n>>>16&255,a[r++]=n>>>8&255,a[r++]=255&n,l=l/4294967296*1e4&268435455,a[r++]=l>>>8&255,a[r++]=255&l,a[r++]=l>>>24&15|16,a[r++]=l>>>16&255,a[r++]=i>>>8|128,a[r++]=255&i;for(var s=0;s<6;++s)a[r+s]=o[s];return t||(0,p.default)(a)};n.default=e,t.exports=n.default},{"./bytesToUuid.js":24,"./rng.js":27}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./v35.js")),e=a(e("./md5.js"));function a(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v3",48,e.default);n.default=e,t.exports=n.default},{"./md5.js":26,"./v35.js":31}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,u,s){function t(e,t,n,r){var a,o=n&&r||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof t&&(a=[],t.replace(/[a-fA-F0-9]{2}/g,function(e){a.push(parseInt(e,16))}),t=a),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(t)||16!==t.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var i=s(t.concat(e));if(i[6]=15&i[6]|u,i[8]=63&i[8]|128,n)for(var l=0;l<16;++l)n[o+l]=i[l];return n||(0,c.default)(i)}try{t.name=e}catch(e){}return t.DNS=a,t.URL=o,t},n.URL=n.DNS=void 0;var r,c=(r=e("./bytesToUuid.js"))&&r.__esModule?r:{default:r};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=o},{"./bytesToUuid.js":24}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("./rng.js")),l=r(e("./bytesToUuid.js"));function r(e){return e&&e.__esModule?e:{default:e}}e=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[r+o]=a[o];return t||(0,l.default)(a)};n.default=e,t.exports=n.default},{"./bytesToUuid.js":24,"./rng.js":27}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./v35.js")),e=a(e("./sha1.js"));function a(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v5",80,e.default);n.default=e,t.exports=n.default},{"./sha1.js":28,"./v35.js":31}]},{},[17]);