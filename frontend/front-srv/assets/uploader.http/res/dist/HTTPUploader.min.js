(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Uploader:()=>o});const i=require("react");var n=e.n(i);const a=require("create-react-class");var r=e.n(a);const l=require("pydio/http/api");var s=e.n(l);const d=require("material-ui"),o=r()({displayName:"Uploader",getInitialState:function(){var e=this.props.pydio;return{dir:e.user.getActiveRepositoryObject().getSlug()+e.getContextNode().getPath(),submitting:!1,currentURL:"",urls:[]}},_handleChangeURL:function(e){return function(t,i){if(!this.state.submitting)if(""!==i){var n=this.state.urls;n[e]=i,this.setState({urls:n})}else this._handleDeleteURL(e)()}.bind(this)},_handleDeleteURL:function(e){return function(){if(!this.state.submitting){var t=this.state.urls;t.splice(e,1),this.setState({urls:t})}}.bind(this)},_handleChangeCurrentURL:function(e,t){this.setState({currentURL:t})},_handleAddURL:function(e){if(!this.state.submitting&&("keydown"!==e.type||13===e.keyCode)){var t=this.state,i=t.currentURL,n=t.urls;""!==i&&(n.push(i),this.setState({currentURL:"",urls:n}))}},_handleSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation();var i=this.props.pydio,n=this.state,a=n.dir,r=n.urls;s().getRestClient().userJob("remote-download",{target:a,urls:r}).then((function(){t.setState({urls:[]})})).catch((function(e){var t=e.Detail||e.message||e;i.UI.displayMessage("ERROR",t)}))},render:function(){var e=this.props,t=e.pydio,i=e.showDismiss,a=e.onDismiss,r=this.state.urls,l=t.MessageHash,s=r.map(function(e,t){return n().createElement("div",null,n().createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"0px 24px",width:"100%",height:"100%"}},n().createElement(d.TextField,{disabled:this.state.submitting,style:{display:"flex",alignItems:"center"},value:e,underlineShow:!1,fullWidth:!0,onChange:this._handleChangeURL(t)}),n().createElement(d.FontIcon,{style:{display:"flex",alignItems:"center",fontSize:"1em"},className:"mdi mdi-delete",onClick:this._handleDeleteURL(t)})),n().createElement(d.Divider,null))}.bind(this));return n().createElement("div",{style:{position:"relative",padding:10}},i&&n().createElement("div",{style:{display:"flex",alignItems:"center"}},n().createElement("h4",{style:{flex:1,paddingTop:16,paddingLeft:8}},l["httpdownloader.10"].replace("APPLICATION_TITLE",t.Parameters.get("APPLICATION_TITLE"))),n().createElement(d.IconButton,{iconClassName:"mdi mdi-close",onClick:function(){a()}})),n().createElement("div",{style:{position:"relative",margin:10,fontSize:13},className:"dialoglegend"},l["httpdownloader.4"]),n().createElement("div",{style:{minHeight:160}},n().createElement(d.Paper,{zDepth:1,style:{marginBottom:10,maxHeight:300,overflowY:"auto"}},s,n().createElement("div",{style:{paddingLeft:24}},n().createElement(d.TextField,{disabled:this.state.submitting,hintText:l["httpdownloader.5"]+" + Hit Enter",value:this.state.currentURL,underlineShow:!1,fullWidth:!0,onChange:this._handleChangeCurrentURL,onKeyDown:this._handleAddURL,onBlur:this._handleAddURL})),n().createElement(d.Divider,null))),n().createElement("div",{style:{textAlign:"right"}},n().createElement(d.RaisedButton,{disabled:0===r.length,primary:!0,label:"Start",onClick:this._handleSubmit})))}});window.HTTPUploader=t})();